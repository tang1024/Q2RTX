<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quake II RTX doxygen: C:/entry/dev/Q2RTX/src/baseq2/g_func.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quake II RTX doxygen
   &#160;<span id="projectnumber">1.0 dev</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/dba/g__func_8c_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">g_func.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/dba/g__func_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">Copyright (C) 1997-2001 Id Software, Inc.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">(at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">GNU General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">with this program; if not, write to the Free Software Foundation, Inc.,</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/ddf/g__local_8h.html">g_local.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">=========================================================</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">  PLATS</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">  movement options:</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">  linear</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">  smooth start, hard stop</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">  smooth start, smooth stop</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">  start</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">  end</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">  acceleration</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">  speed</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">  deceleration</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">  begin sound</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">  end sound</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">  target fired when reaching end</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">  wait at end</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">  object characteristics that use move segments</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  ---------------------------------------------</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">  movetype_push, or movetype_stop</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">  action when touched</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">  action when blocked</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">  action when used</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">    disabled?</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">  auto trigger spawning</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">=========================================================</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#abd82f951e1a54ee832f815d58b53b741">   54</a></span>&#160;<span class="preprocessor">#define PLAT_LOW_TRIGGER    1</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">   56</a></span>&#160;<span class="preprocessor">#define STATE_TOP           0</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">   57</a></span>&#160;<span class="preprocessor">#define STATE_BOTTOM        1</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">   58</a></span>&#160;<span class="preprocessor">#define STATE_UP            2</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a7d485ea16647d3bb7691188e29779975">   59</a></span>&#160;<span class="preprocessor">#define STATE_DOWN          3</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a299c0a1db834d131aef0f27c4a76fb54">   61</a></span>&#160;<span class="preprocessor">#define DOOR_START_OPEN     1</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ab06304e23dae22a7538a45135de4557d">   62</a></span>&#160;<span class="preprocessor">#define DOOR_REVERSE        2</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a35d163dd060623b081709a352a3536a2">   63</a></span>&#160;<span class="preprocessor">#define DOOR_CRUSHER        4</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a3534a701ac18c8b4d5ca139361a8e818">   64</a></span>&#160;<span class="preprocessor">#define DOOR_NOMONSTER      8</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a32d15f1b6d540d245b032d946987e1de">   65</a></span>&#160;<span class="preprocessor">#define DOOR_TOGGLE         32</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a8b056e165edd47a412c13d87082d0dc4">   66</a></span>&#160;<span class="preprocessor">#define DOOR_X_AXIS         64</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a6fce7a790aed32664c309677dfd6c5a3">   67</a></span>&#160;<span class="preprocessor">#define DOOR_Y_AXIS         128</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// Support routines for movement (changes in origin using velocity)</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a2b621eb0fa06d335ac4ffe1e0c59d0c4">   74</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a2b621eb0fa06d335ac4ffe1e0c59d0c4">Move_Done</a>(edict_t *ent)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    VectorClear(ent-&gt;velocity);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    ent-&gt;moveinfo.endfunc(ent);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a236d7661b0cd5c0f52c1d3d73328509c">   80</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a236d7661b0cd5c0f52c1d3d73328509c">Move_Final</a>(edict_t *ent)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;moveinfo.remaining_distance == 0) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a2b621eb0fa06d335ac4ffe1e0c59d0c4">Move_Done</a>(ent);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    VectorScale(ent-&gt;moveinfo.dir, ent-&gt;moveinfo.remaining_distance / <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>, ent-&gt;velocity);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a2b621eb0fa06d335ac4ffe1e0c59d0c4">Move_Done</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a6b1c545c5d4bfcdee3d65d5b9a12b650">   93</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a6b1c545c5d4bfcdee3d65d5b9a12b650">Move_Begin</a>(edict_t *ent)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">float</span>   frames;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> ((ent-&gt;moveinfo.speed * <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>) &gt;= ent-&gt;moveinfo.remaining_distance) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a236d7661b0cd5c0f52c1d3d73328509c">Move_Final</a>(ent);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    VectorScale(ent-&gt;moveinfo.dir, ent-&gt;moveinfo.speed, ent-&gt;velocity);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    frames = floor((ent-&gt;moveinfo.remaining_distance / ent-&gt;moveinfo.speed) / <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    ent-&gt;moveinfo.remaining_distance -= frames * ent-&gt;moveinfo.speed * <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + (frames * <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a236d7661b0cd5c0f52c1d3d73328509c">Move_Final</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a4cedaabf0659d3ffc0a98af35dca02a5">Think_AccelMove</a>(edict_t *ent);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">  110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(edict_t *ent, vec3_t dest, <span class="keywordtype">void</span>(*func)(edict_t*))</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    VectorClear(ent-&gt;velocity);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    VectorSubtract(dest, ent-&gt;s.origin, ent-&gt;moveinfo.dir);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    ent-&gt;moveinfo.remaining_distance = <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(ent-&gt;moveinfo.dir);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    ent-&gt;moveinfo.endfunc = func;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;moveinfo.speed == ent-&gt;moveinfo.accel &amp;&amp; ent-&gt;moveinfo.speed == ent-&gt;moveinfo.decel) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a64a7d7d74b91b4937d962e01b0b10484">current_entity</a> == ((ent-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>) ? ent-&gt;teammaster : ent)) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <a class="code" href="../../d3/dba/g__func_8c.html#a6b1c545c5d4bfcdee3d65d5b9a12b650">Move_Begin</a>(ent);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a6b1c545c5d4bfcdee3d65d5b9a12b650">Move_Begin</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="comment">// accelerative</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        ent-&gt;moveinfo.current_speed = 0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a4cedaabf0659d3ffc0a98af35dca02a5">Think_AccelMove</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// Support routines for angular movement (changes in angle using avelocity)</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#aed79bcdb7098da2d40d6a9d03b52ef9e">  137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#aed79bcdb7098da2d40d6a9d03b52ef9e">AngleMove_Done</a>(edict_t *ent)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    VectorClear(ent-&gt;avelocity);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    ent-&gt;moveinfo.endfunc(ent);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a17b6b8ad3559c7e17e24dcd58c65a5cb">  143</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a17b6b8ad3559c7e17e24dcd58c65a5cb">AngleMove_Final</a>(edict_t *ent)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    vec3_t  move;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        VectorSubtract(ent-&gt;moveinfo.end_angles, ent-&gt;s.angles, move);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        VectorSubtract(ent-&gt;moveinfo.start_angles, ent-&gt;s.angles, move);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (VectorCompare(move, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>)) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#aed79bcdb7098da2d40d6a9d03b52ef9e">AngleMove_Done</a>(ent);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    VectorScale(move, 1.0 / <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>, ent-&gt;avelocity);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#aed79bcdb7098da2d40d6a9d03b52ef9e">AngleMove_Done</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a097bd1723a3bca389787abcb31828379">  163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a097bd1723a3bca389787abcb31828379">AngleMove_Begin</a>(edict_t *ent)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    vec3_t  destdelta;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">float</span>   len;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">float</span>   traveltime;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">float</span>   frames;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// set destdelta to the vector needed to move</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        VectorSubtract(ent-&gt;moveinfo.end_angles, ent-&gt;s.angles, destdelta);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        VectorSubtract(ent-&gt;moveinfo.start_angles, ent-&gt;s.angles, destdelta);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// calculate length of vector</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    len = VectorLength(destdelta);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// divide by speed to get time to reach dest</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    traveltime = len / ent-&gt;moveinfo.speed;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (traveltime &lt; <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a17b6b8ad3559c7e17e24dcd58c65a5cb">AngleMove_Final</a>(ent);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    frames = floor(traveltime / <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// scale the destdelta vector by the time spent traveling to get velocity</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    VectorScale(destdelta, 1.0 / traveltime, ent-&gt;avelocity);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// set nextthink to trigger a think when dest is reached</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + frames * <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a17b6b8ad3559c7e17e24dcd58c65a5cb">AngleMove_Final</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a61949227102fcec1100473a31b1f488d">  197</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a61949227102fcec1100473a31b1f488d">AngleMove_Calc</a>(edict_t *ent, <span class="keywordtype">void</span>(*func)(edict_t*))</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    VectorClear(ent-&gt;avelocity);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    ent-&gt;moveinfo.endfunc = func;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a64a7d7d74b91b4937d962e01b0b10484">current_entity</a> == ((ent-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>) ? ent-&gt;teammaster : ent)) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a097bd1723a3bca389787abcb31828379">AngleMove_Begin</a>(ent);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a097bd1723a3bca389787abcb31828379">AngleMove_Begin</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">==============</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">Think_AccelMove</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">The team has completed a frame of movement, so</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">change the speed for the next frame</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">==============</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a92f3e22d78c71d9d6ce4c39a70686495">  218</a></span>&#160;<span class="preprocessor">#define AccelerationDistance(target, rate)  (target * ((target / rate) + 1) / 2)</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ae9ca1adcea9b96655089c877fe9287b6">  220</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ae9ca1adcea9b96655089c877fe9287b6">plat_CalcAcceleratedMove</a>(<a class="code" href="../../db/dd3/structmoveinfo__t.html">moveinfo_t</a> *moveinfo)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">float</span>   accel_dist;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">float</span>   decel_dist;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a> = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#abd4a3f07445cf0b9263c2499efa89b36">speed</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> &lt; moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a2179910291144355488f61f9a07733b4">accel</a>) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    accel_dist = <a class="code" href="../../d3/dba/g__func_8c.html#a92f3e22d78c71d9d6ce4c39a70686495">AccelerationDistance</a>(moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#abd4a3f07445cf0b9263c2499efa89b36">speed</a>, moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a2179910291144355488f61f9a07733b4">accel</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    decel_dist = <a class="code" href="../../d3/dba/g__func_8c.html#a92f3e22d78c71d9d6ce4c39a70686495">AccelerationDistance</a>(moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#abd4a3f07445cf0b9263c2499efa89b36">speed</a>, moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> ((moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> - accel_dist - decel_dist) &lt; 0) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordtype">float</span>   f;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        f = (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a2179910291144355488f61f9a07733b4">accel</a> + moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a>) / (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a2179910291144355488f61f9a07733b4">accel</a> * moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a> = (-2 + sqrt(4 - 4 * f * (-2 * moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a>))) / (2 * f);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        decel_dist = <a class="code" href="../../d3/dba/g__func_8c.html#a92f3e22d78c71d9d6ce4c39a70686495">AccelerationDistance</a>(moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a>, moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">decel_distance</a> = decel_dist;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a8a1b6133360551cefc641a0c631396a8">  246</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a8a1b6133360551cefc641a0c631396a8">plat_Accelerate</a>(<a class="code" href="../../db/dd3/structmoveinfo__t.html">moveinfo_t</a> *moveinfo)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// are we decelerating?</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> &lt;= moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">decel_distance</a>) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> &lt; moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">decel_distance</a>) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#aac4bfbe1519cd4235b5c407bc05e1654">next_speed</a>) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#aac4bfbe1519cd4235b5c407bc05e1654">next_speed</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#aac4bfbe1519cd4235b5c407bc05e1654">next_speed</a> = 0;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> &gt; moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a>)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> -= moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// are we at full speed and need to start decelerating during this move?</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> == moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a>)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">if</span> ((moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> - moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a>) &lt; moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">decel_distance</a>) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordtype">float</span>   p1_distance;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordtype">float</span>   p2_distance;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordtype">float</span>   distance;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            p1_distance = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> - moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">decel_distance</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            p2_distance = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a> * (1.0 - (p1_distance / moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a>));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            distance = p1_distance + p2_distance;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#aac4bfbe1519cd4235b5c407bc05e1654">next_speed</a> = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a> - moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a> * (p2_distance / distance);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// are we accelerating?</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> &lt; moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#abd4a3f07445cf0b9263c2499efa89b36">speed</a>) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordtype">float</span>   old_speed;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordtype">float</span>   p1_distance;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordtype">float</span>   p1_speed;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordtype">float</span>   p2_distance;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordtype">float</span>   distance;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        old_speed = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="comment">// figure simple acceleration up to move_speed</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> += moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a2179910291144355488f61f9a07733b4">accel</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> &gt; moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#abd4a3f07445cf0b9263c2499efa89b36">speed</a>)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#abd4a3f07445cf0b9263c2499efa89b36">speed</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">// are we accelerating throughout this entire move?</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> ((moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> - moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a>) &gt;= moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">decel_distance</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">// during this move we will accelrate from current_speed to move_speed</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="comment">// and cross over the decel_distance; figure the average speed for the</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">// entire move</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        p1_distance = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">remaining_distance</a> - moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">decel_distance</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        p1_speed = (old_speed + moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a>) / 2.0;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        p2_distance = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a> * (1.0 - (p1_distance / p1_speed));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        distance = p1_distance + p2_distance;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">current_speed</a> = (p1_speed * (p1_distance / distance)) + (moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a> * (p2_distance / distance));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#aac4bfbe1519cd4235b5c407bc05e1654">next_speed</a> = moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">move_speed</a> - moveinfo-&gt;<a class="code" href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">decel</a> * (p2_distance / distance);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// we are at constant velocity (move_speed)</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a4cedaabf0659d3ffc0a98af35dca02a5">  312</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a4cedaabf0659d3ffc0a98af35dca02a5">Think_AccelMove</a>(edict_t *ent)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    ent-&gt;moveinfo.remaining_distance -= ent-&gt;moveinfo.current_speed;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;moveinfo.current_speed == 0)       <span class="comment">// starting or blocked</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#ae9ca1adcea9b96655089c877fe9287b6">plat_CalcAcceleratedMove</a>(&amp;ent-&gt;moveinfo);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a8a1b6133360551cefc641a0c631396a8">plat_Accelerate</a>(&amp;ent-&gt;moveinfo);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// will the entire move complete on next frame?</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;moveinfo.remaining_distance &lt;= ent-&gt;moveinfo.current_speed) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a236d7661b0cd5c0f52c1d3d73328509c">Move_Final</a>(ent);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    VectorScale(ent-&gt;moveinfo.dir, ent-&gt;moveinfo.current_speed * 10, ent-&gt;velocity);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a4cedaabf0659d3ffc0a98af35dca02a5">Think_AccelMove</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a0499d1b8ed0857c1e8f1d51cc98749e8">plat_go_down</a>(edict_t *ent);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ab381bca7b51d24f0e974d417efc354f0">  335</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ab381bca7b51d24f0e974d417efc354f0">plat_hit_top</a>(edict_t *ent)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (!(ent-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span> (ent-&gt;moveinfo.sound_end)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(ent, CHAN_NO_PHS_ADD + CHAN_VOICE, ent-&gt;moveinfo.sound_end, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        ent-&gt;s.sound = 0;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a0499d1b8ed0857c1e8f1d51cc98749e8">plat_go_down</a>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 3;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a3886253558017c2076bd70fb34c84203">  348</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a3886253558017c2076bd70fb34c84203">plat_hit_bottom</a>(edict_t *ent)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (!(ent-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span> (ent-&gt;moveinfo.sound_end)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(ent, CHAN_NO_PHS_ADD + CHAN_VOICE, ent-&gt;moveinfo.sound_end, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        ent-&gt;s.sound = 0;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a0499d1b8ed0857c1e8f1d51cc98749e8">  358</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a0499d1b8ed0857c1e8f1d51cc98749e8">plat_go_down</a>(edict_t *ent)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (!(ent-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> (ent-&gt;moveinfo.sound_start)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(ent, CHAN_NO_PHS_ADD + CHAN_VOICE, ent-&gt;moveinfo.sound_start, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        ent-&gt;s.sound = ent-&gt;moveinfo.sound_middle;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#a7d485ea16647d3bb7691188e29779975">STATE_DOWN</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(ent, ent-&gt;moveinfo.end_origin, <a class="code" href="../../d3/dba/g__func_8c.html#a3886253558017c2076bd70fb34c84203">plat_hit_bottom</a>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a7c610de2101c3b3aa67b4ed39e6f02ca">  369</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a7c610de2101c3b3aa67b4ed39e6f02ca">plat_go_up</a>(edict_t *ent)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (!(ent-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">if</span> (ent-&gt;moveinfo.sound_start)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(ent, CHAN_NO_PHS_ADD + CHAN_VOICE, ent-&gt;moveinfo.sound_start, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        ent-&gt;s.sound = ent-&gt;moveinfo.sound_middle;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(ent, ent-&gt;moveinfo.start_origin, <a class="code" href="../../d3/dba/g__func_8c.html#ab381bca7b51d24f0e974d417efc354f0">plat_hit_top</a>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ac0539eb2fe0ccf6dba60315d5fa60212">  380</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ac0539eb2fe0ccf6dba60315d5fa60212">plat_blocked</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;svflags &amp; SVF_MONSTER) &amp;&amp; (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client)) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="comment">// give it a chance to go away on it&#39;s own terms (like gibs)</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, 100000, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// if it&#39;s still there, nuke it</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a90cef4f9dc98d775fb36b3f2e34eb8c7">BecomeExplosion1</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, self-&gt;dmg, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a0499d1b8ed0857c1e8f1d51cc98749e8">plat_go_down</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a7d485ea16647d3bb7691188e29779975">STATE_DOWN</a>)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a7c610de2101c3b3aa67b4ed39e6f02ca">plat_go_up</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#aa38e4b66b2b99f0624cf8b048fe7340b">  400</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#aa38e4b66b2b99f0624cf8b048fe7340b">Use_Plat</a>(edict_t *ent, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;think)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">return</span>;     <span class="comment">// already down</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a0499d1b8ed0857c1e8f1d51cc98749e8">plat_go_down</a>(ent);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#aec42a035791b31588651c3455a873bb1">  408</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#aec42a035791b31588651c3455a873bb1">Touch_Plat_Center</a>(edict_t *ent, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, cplane_t *plane, csurface_t *surf)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;health &lt;= 0)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    ent = ent-&gt;enemy;   <span class="comment">// now point at the plat, not the trigger</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a7c610de2101c3b3aa67b4ed39e6f02ca">plat_go_up</a>(ent);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ent-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 1;    <span class="comment">// the player is still on the plat, so delay going down</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a61f35a326df17b42737b6357d8c379d2">  423</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a61f35a326df17b42737b6357d8c379d2">plat_spawn_inside_trigger</a>(edict_t *ent)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    edict_t *trigger;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    vec3_t  tmin, tmax;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">// middle trigger</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    trigger = <a class="code" href="../../d3/ddf/g__local_8h.html#a015feebdd0de52e2de27451c20f1bbf3">G_Spawn</a>();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    trigger-&gt;touch = <a class="code" href="../../d3/dba/g__func_8c.html#aec42a035791b31588651c3455a873bb1">Touch_Plat_Center</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    trigger-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698aaeebbb5aa0b0d9b83afc5541ee902760">MOVETYPE_NONE</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    trigger-&gt;solid = SOLID_TRIGGER;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    trigger-&gt;enemy = ent;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    tmin[0] = ent-&gt;mins[0] + 25;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    tmin[1] = ent-&gt;mins[1] + 25;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    tmin[2] = ent-&gt;mins[2];</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    tmax[0] = ent-&gt;maxs[0] - 25;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    tmax[1] = ent-&gt;maxs[1] - 25;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    tmax[2] = ent-&gt;maxs[2] + 8;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    tmin[2] = tmax[2] - (ent-&gt;pos1[2] - ent-&gt;pos2[2] + <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#abd82f951e1a54ee832f815d58b53b741">PLAT_LOW_TRIGGER</a>)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        tmax[2] = tmin[2] + 8;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (tmax[0] - tmin[0] &lt;= 0) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        tmin[0] = (ent-&gt;mins[0] + ent-&gt;maxs[0]) * 0.5;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        tmax[0] = tmin[0] + 1;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (tmax[1] - tmin[1] &lt;= 0) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        tmin[1] = (ent-&gt;mins[1] + ent-&gt;maxs[1]) * 0.5;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        tmax[1] = tmin[1] + 1;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    VectorCopy(tmin, trigger-&gt;mins);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    VectorCopy(tmax, trigger-&gt;maxs);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(trigger);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">/*QUAKED func_plat (0 .5 .8) ? PLAT_LOW_TRIGGER</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">speed   default 150</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">Plats are always drawn in the extended position, so they will light correctly.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">If the plat is the target of another trigger or button, it will start out disabled in the extended position until it is trigger, when it will lower and become a normal plat.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">&quot;speed&quot; overrides default 200.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">&quot;accel&quot; overrides default 500</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">&quot;lip&quot;   overrides default 8 pixel lip</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">If the &quot;height&quot; key is set, that will determine the amount the plat moves, instead of being implicitly determoveinfoned by the model&#39;s height.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">Set &quot;sounds&quot; to one of the following:</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">1) base fast</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">2) chain slow</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a3535e5e840e122c7ac8403a62835702d">  483</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a3535e5e840e122c7ac8403a62835702d">SP_func_plat</a>(edict_t *ent)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    VectorClear(ent-&gt;s.angles);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    ent-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    ent-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(ent, ent-&gt;model);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    ent-&gt;blocked = <a class="code" href="../../d3/dba/g__func_8c.html#ac0539eb2fe0ccf6dba60315d5fa60212">plat_blocked</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;speed)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        ent-&gt;speed = 20;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        ent-&gt;speed *= 0.1;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;accel)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        ent-&gt;accel = 5;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        ent-&gt;accel *= 0.1;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;decel)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        ent-&gt;decel = 5;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        ent-&gt;decel *= 0.1;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;dmg)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        ent-&gt;dmg = 2;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a> = 8;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// pos1 is the top position, pos2 is the bottom</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    VectorCopy(ent-&gt;s.origin, ent-&gt;pos1);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    VectorCopy(ent-&gt;s.origin, ent-&gt;pos2);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#acf372f5372a21aa5cd306f788141df5b">height</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        ent-&gt;pos2[2] -= <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#acf372f5372a21aa5cd306f788141df5b">height</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        ent-&gt;pos2[2] -= (ent-&gt;maxs[2] - ent-&gt;mins[2]) - <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    ent-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#aa38e4b66b2b99f0624cf8b048fe7340b">Use_Plat</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a61f35a326df17b42737b6357d8c379d2">plat_spawn_inside_trigger</a>(ent);     <span class="comment">// the &quot;start moving&quot; trigger</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;targetname) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        VectorCopy(ent-&gt;pos2, ent-&gt;s.origin);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(ent);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    ent-&gt;moveinfo.speed = ent-&gt;speed;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    ent-&gt;moveinfo.accel = ent-&gt;accel;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    ent-&gt;moveinfo.decel = ent-&gt;decel;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    ent-&gt;moveinfo.wait = ent-&gt;wait;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    VectorCopy(ent-&gt;pos1, ent-&gt;moveinfo.start_origin);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    VectorCopy(ent-&gt;s.angles, ent-&gt;moveinfo.start_angles);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    VectorCopy(ent-&gt;pos2, ent-&gt;moveinfo.end_origin);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    VectorCopy(ent-&gt;s.angles, ent-&gt;moveinfo.end_angles);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    ent-&gt;moveinfo.sound_start = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;plats/pt1_strt.wav&quot;</span>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    ent-&gt;moveinfo.sound_middle = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;plats/pt1_mid.wav&quot;</span>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    ent-&gt;moveinfo.sound_end = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;plats/pt1_end.wav&quot;</span>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">//====================================================================</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">/*QUAKED func_rotating (0 .5 .8) ? START_ON REVERSE X_AXIS Y_AXIS TOUCH_PAIN STOP ANIMATED ANIMATED_FAST</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">You need to have an origin brush as part of this entity.  The center of that brush will be</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">the point around which it is rotated. It will rotate around the Z axis by default.  You can</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">check either the X_AXIS or Y_AXIS box to change that.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">&quot;speed&quot; determines how fast it moves; default value is 100.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">&quot;dmg&quot;   damage to inflict when blocked (2 default)</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">REVERSE will cause the it to rotate in the opposite direction.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">STOP mean it will stop moving instead of pushing entities</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ac7030e9400bfcb47f2ecab061dc5653b">  562</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ac7030e9400bfcb47f2ecab061dc5653b">rotating_blocked</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;{</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, self-&gt;dmg, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a7b1b00bad2faeff0bd4bde501216e8e4">  567</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a7b1b00bad2faeff0bd4bde501216e8e4">rotating_touch</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, cplane_t *plane, csurface_t *surf)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;{</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">if</span> (self-&gt;avelocity[0] || self-&gt;avelocity[1] || self-&gt;avelocity[2])</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, self-&gt;dmg, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a9a179100e92e8af4165efd27acebf3e9">  573</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a9a179100e92e8af4165efd27acebf3e9">rotating_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (!VectorCompare(self-&gt;avelocity, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>)) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keyword">self</span>-&gt;s.sound = 0;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        VectorClear(self-&gt;avelocity);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keyword">self</span>-&gt;touch = NULL;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keyword">self</span>-&gt;s.sound = <span class="keyword">self</span>-&gt;moveinfo.sound_middle;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        VectorScale(self-&gt;movedir, self-&gt;speed, self-&gt;avelocity);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; 16)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="keyword">self</span>-&gt;touch = <a class="code" href="../../d3/dba/g__func_8c.html#a7b1b00bad2faeff0bd4bde501216e8e4">rotating_touch</a>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a69ce19de49d6e70e2aa55aab06fd5b7a">  587</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a69ce19de49d6e70e2aa55aab06fd5b7a">SP_func_rotating</a>(edict_t *ent)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;{</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    ent-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 32)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        ent-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698ae881188096af003ed4876afb5dc7a1cb">MOVETYPE_STOP</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        ent-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// set the axis of rotation</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    VectorClear(ent-&gt;movedir);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 4)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        ent-&gt;movedir[2] = 1.0;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 8)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        ent-&gt;movedir[0] = 1.0;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// Z_AXIS</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        ent-&gt;movedir[1] = 1.0;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// check for reverse rotation</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 2)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        VectorNegate(ent-&gt;movedir, ent-&gt;movedir);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;speed)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        ent-&gt;speed = 100;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;dmg)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        ent-&gt;dmg = 2;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">//  ent-&gt;moveinfo.sound_middle = &quot;doors/hydro1.wav&quot;;</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    ent-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a9a179100e92e8af4165efd27acebf3e9">rotating_use</a>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;dmg)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        ent-&gt;blocked = <a class="code" href="../../d3/dba/g__func_8c.html#ac7030e9400bfcb47f2ecab061dc5653b">rotating_blocked</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 1)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        ent-&gt;use(ent, NULL, NULL);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 64)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        ent-&gt;s.effects |= EF_ANIM_ALL;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 128)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        ent-&gt;s.effects |= EF_ANIM_ALLFAST;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(ent, ent-&gt;model);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(ent);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">======================================================================</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">BUTTONS</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">======================================================================</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/*QUAKED func_button (0 .5 .8) ?</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">When a button is touched, it moves some distance in the direction of it&#39;s angle, triggers all of it&#39;s targets, waits some time, then returns to it&#39;s original position where it can be triggered again.</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">&quot;angle&quot;     determines the opening direction</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">&quot;target&quot;    all entities with a matching targetname will be used</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">&quot;speed&quot;     override the default 40 speed</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">&quot;wait&quot;      override the default 1 second wait (-1 = never return)</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">&quot;lip&quot;       override the default 4 pixel lip remaining at end of move</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">&quot;health&quot;    if set, the button must be killed instead of touched</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">&quot;sounds&quot;</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">1) silent</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">2) steam metal</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">3) wooden clunk</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">4) metallic click</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">5) in-out</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a33224c03f718d9b989661fbdef34c28f">  656</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a33224c03f718d9b989661fbdef34c28f">button_done</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;{</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keyword">self</span>-&gt;s.effects &amp;= ~EF_ANIM23;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keyword">self</span>-&gt;s.effects |= EF_ANIM01;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a7a12c48614bbcf6ce32b5a64816c46f9">  663</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a7a12c48614bbcf6ce32b5a64816c46f9">button_return</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;{</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#a7d485ea16647d3bb7691188e29779975">STATE_DOWN</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, self-&gt;moveinfo.start_origin, <a class="code" href="../../d3/dba/g__func_8c.html#a33224c03f718d9b989661fbdef34c28f">button_done</a>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keyword">self</span>-&gt;s.frame = 0;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (self-&gt;health)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keyword">self</span>-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ac95dd3a350a9cac0b4fcee5e4dc58e83">  675</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ac95dd3a350a9cac0b4fcee5e4dc58e83">button_wait</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keyword">self</span>-&gt;s.effects &amp;= ~EF_ANIM01;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keyword">self</span>-&gt;s.effects |= EF_ANIM23;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a16b9e448cb92a3ab8758108d64b6095b">G_UseTargets</a>(<span class="keyword">self</span>, self-&gt;activator);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keyword">self</span>-&gt;s.frame = 1;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.wait &gt;= 0) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <span class="keyword">self</span>-&gt;moveinfo.wait;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a7a12c48614bbcf6ce32b5a64816c46f9">button_return</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a21bd5a39761ef958b6e9bebc799e5bf2">  689</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a21bd5a39761ef958b6e9bebc799e5bf2">button_fire</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;{</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a> || self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.sound_start &amp;&amp; !(self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>))</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<span class="keyword">self</span>, CHAN_NO_PHS_ADD + CHAN_VOICE, self-&gt;moveinfo.sound_start, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, self-&gt;moveinfo.end_origin, <a class="code" href="../../d3/dba/g__func_8c.html#ac95dd3a350a9cac0b4fcee5e4dc58e83">button_wait</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a985f696784a871ccc82e52ed25be5075">  700</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a985f696784a871ccc82e52ed25be5075">button_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keyword">self</span>-&gt;activator = activator;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a21bd5a39761ef958b6e9bebc799e5bf2">button_fire</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ab7da5464e9ef0b53637c66501e6d67b7">  706</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ab7da5464e9ef0b53637c66501e6d67b7">button_touch</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, cplane_t *plane, csurface_t *surf)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;{</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;health &lt;= 0)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keyword">self</span>-&gt;activator = <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a21bd5a39761ef958b6e9bebc799e5bf2">button_fire</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a3ae6dce04f25871530287556dd3363a7">  718</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a3ae6dce04f25871530287556dd3363a7">button_killed</a>(edict_t *<span class="keyword">self</span>, edict_t *inflictor, edict_t *attacker, <span class="keywordtype">int</span> damage, vec3_t point)</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;{</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keyword">self</span>-&gt;activator = attacker;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keyword">self</span>-&gt;health = <span class="keyword">self</span>-&gt;max_health;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keyword">self</span>-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa66fc22ef8afa03edeb87b5ae530c6e39">DAMAGE_NO</a>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a21bd5a39761ef958b6e9bebc799e5bf2">button_fire</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#adac404a9b60c1e7672719ec800a5db9e">  726</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#adac404a9b60c1e7672719ec800a5db9e">SP_func_button</a>(edict_t *ent)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;{</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    vec3_t  abs_movedir;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordtype">float</span>   dist;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a8966a3677c9152f498a5c9a18f915ae3">G_SetMovedir</a>(ent-&gt;s.angles, ent-&gt;movedir);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    ent-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698ae881188096af003ed4876afb5dc7a1cb">MOVETYPE_STOP</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    ent-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(ent, ent-&gt;model);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;sounds != 1)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        ent-&gt;moveinfo.sound_start = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;switches/butn2.wav&quot;</span>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;speed)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        ent-&gt;speed = 40;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;accel)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        ent-&gt;accel = ent-&gt;speed;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;decel)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        ent-&gt;decel = ent-&gt;speed;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;wait)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        ent-&gt;wait = 3;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a> = 4;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    VectorCopy(ent-&gt;s.origin, ent-&gt;pos1);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    abs_movedir[0] = fabs(ent-&gt;movedir[0]);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    abs_movedir[1] = fabs(ent-&gt;movedir[1]);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    abs_movedir[2] = fabs(ent-&gt;movedir[2]);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    dist = abs_movedir[0] * ent-&gt;size[0] + abs_movedir[1] * ent-&gt;size[1] + abs_movedir[2] * ent-&gt;size[2] - <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    VectorMA(ent-&gt;pos1, dist, ent-&gt;movedir, ent-&gt;pos2);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    ent-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a985f696784a871ccc82e52ed25be5075">button_use</a>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    ent-&gt;s.effects |= EF_ANIM01;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;health) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        ent-&gt;max_health = ent-&gt;health;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        ent-&gt;die = <a class="code" href="../../d3/dba/g__func_8c.html#a3ae6dce04f25871530287556dd3363a7">button_killed</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        ent-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! ent-&gt;targetname)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        ent-&gt;touch = <a class="code" href="../../d3/dba/g__func_8c.html#ab7da5464e9ef0b53637c66501e6d67b7">button_touch</a>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    ent-&gt;moveinfo.speed = ent-&gt;speed;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    ent-&gt;moveinfo.accel = ent-&gt;accel;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    ent-&gt;moveinfo.decel = ent-&gt;decel;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    ent-&gt;moveinfo.wait = ent-&gt;wait;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    VectorCopy(ent-&gt;pos1, ent-&gt;moveinfo.start_origin);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    VectorCopy(ent-&gt;s.angles, ent-&gt;moveinfo.start_angles);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    VectorCopy(ent-&gt;pos2, ent-&gt;moveinfo.end_origin);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    VectorCopy(ent-&gt;s.angles, ent-&gt;moveinfo.end_angles);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(ent);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">======================================================================</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">DOORS</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">  spawn a trigger surrounding the entire team unless it is</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">  already targeted by another</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">======================================================================</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">/*QUAKED func_door (0 .5 .8) ? START_OPEN x CRUSHER NOMONSTER ANIMATED TOGGLE ANIMATED_FAST</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">TOGGLE      wait in both the start and end states for a trigger event.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">START_OPEN  the door to moves to its destination when spawned, and operate in reverse.  It is used to temporarily or permanently close off an area when triggered (not useful for touch or takedamage doors).</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">NOMONSTER   monsters will not trigger this door</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">&quot;message&quot;   is printed when the door is touched if it is a trigger door and it hasn&#39;t been fired yet</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">&quot;angle&quot;     determines the opening direction</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">&quot;targetname&quot; if set, no touch field will be spawned and a remote button or trigger field activates the door.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">&quot;health&quot;    if set, door must be shot open</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">&quot;speed&quot;     movement speed (100 default)</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">&quot;wait&quot;      wait before returning (3 default, -1 = never return)</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">&quot;lip&quot;       lip remaining at end of move (8 default)</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">&quot;dmg&quot;       damage to inflict when blocked (2 default)</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">&quot;sounds&quot;</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">1)  silent</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">2)  light</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">3)  medium</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">4)  heavy</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">  813</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">door_use_areaportals</a>(edict_t *<span class="keyword">self</span>, qboolean open)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    edict_t *t = NULL;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;target)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">while</span> ((t = <a class="code" href="../../d3/ddf/g__local_8h.html#a13a8d774b3e04e014a6287195a4cb463">G_Find</a>(t, <a class="code" href="../../d3/ddf/g__local_8h.html#aa3e9a7c87ce88e692ab719a4807ca8f0">FOFS</a>(targetname), self-&gt;target))) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">if</span> (Q_stricmp(t-&gt;classname, <span class="stringliteral">&quot;func_areaportal&quot;</span>) == 0) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.SetAreaPortalState(t-&gt;style, open);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a2d4d7ca6b1401ac98ccd31a26e900912">door_go_down</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a176d53b8294384204a5db32620d88bb0">  829</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a176d53b8294384204a5db32620d88bb0">door_hit_top</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;{</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.sound_end)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<span class="keyword">self</span>, CHAN_NO_PHS_ADD + CHAN_VOICE, self-&gt;moveinfo.sound_end, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keyword">self</span>-&gt;s.sound = 0;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a32d15f1b6d540d245b032d946987e1de">DOOR_TOGGLE</a>)</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.wait &gt;= 0) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a2d4d7ca6b1401ac98ccd31a26e900912">door_go_down</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <span class="keyword">self</span>-&gt;moveinfo.wait;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;}</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ad7a416d602674d801bef8a606777aa31">  845</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ad7a416d602674d801bef8a606777aa31">door_hit_bottom</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;{</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.sound_end)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<span class="keyword">self</span>, CHAN_NO_PHS_ADD + CHAN_VOICE, self-&gt;moveinfo.sound_end, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keyword">self</span>-&gt;s.sound = 0;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">door_use_areaportals</a>(<span class="keyword">self</span>, qfalse);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a2d4d7ca6b1401ac98ccd31a26e900912">  856</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a2d4d7ca6b1401ac98ccd31a26e900912">door_go_down</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;{</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.sound_start)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<span class="keyword">self</span>, CHAN_NO_PHS_ADD + CHAN_VOICE, self-&gt;moveinfo.sound_start, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keyword">self</span>-&gt;s.sound = <span class="keyword">self</span>-&gt;moveinfo.sound_middle;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (self-&gt;max_health) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keyword">self</span>-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keyword">self</span>-&gt;health = <span class="keyword">self</span>-&gt;max_health;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#a7d485ea16647d3bb7691188e29779975">STATE_DOWN</a>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">if</span> (strcmp(self-&gt;classname, <span class="stringliteral">&quot;func_door&quot;</span>) == 0)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, self-&gt;moveinfo.start_origin, <a class="code" href="../../d3/dba/g__func_8c.html#ad7a416d602674d801bef8a606777aa31">door_hit_bottom</a>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(self-&gt;classname, <span class="stringliteral">&quot;func_door_rotating&quot;</span>) == 0)</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a61949227102fcec1100473a31b1f488d">AngleMove_Calc</a>(<span class="keyword">self</span>, <a class="code" href="../../d3/dba/g__func_8c.html#ad7a416d602674d801bef8a606777aa31">door_hit_bottom</a>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a9a75d9b6e545f248c011126a2eacd0d6">  875</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a9a75d9b6e545f248c011126a2eacd0d6">door_go_up</a>(edict_t *<span class="keyword">self</span>, edict_t *activator)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;{</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">return</span>;     <span class="comment">// already going up</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="comment">// reset top wait time</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.wait &gt;= 0)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <span class="keyword">self</span>-&gt;moveinfo.wait;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.sound_start)</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<span class="keyword">self</span>, CHAN_NO_PHS_ADD + CHAN_VOICE, self-&gt;moveinfo.sound_start, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keyword">self</span>-&gt;s.sound = <span class="keyword">self</span>-&gt;moveinfo.sound_middle;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (strcmp(self-&gt;classname, <span class="stringliteral">&quot;func_door&quot;</span>) == 0)</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, self-&gt;moveinfo.end_origin, <a class="code" href="../../d3/dba/g__func_8c.html#a176d53b8294384204a5db32620d88bb0">door_hit_top</a>);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(self-&gt;classname, <span class="stringliteral">&quot;func_door_rotating&quot;</span>) == 0)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a61949227102fcec1100473a31b1f488d">AngleMove_Calc</a>(<span class="keyword">self</span>, <a class="code" href="../../d3/dba/g__func_8c.html#a176d53b8294384204a5db32620d88bb0">door_hit_top</a>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a16b9e448cb92a3ab8758108d64b6095b">G_UseTargets</a>(<span class="keyword">self</span>, activator);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">door_use_areaportals</a>(<span class="keyword">self</span>, qtrue);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">  902</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">door_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;{</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    edict_t *ent;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a32d15f1b6d540d245b032d946987e1de">DOOR_TOGGLE</a>) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a> || self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="comment">// trigger all paired doors</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <span class="keywordflow">for</span> (ent = <span class="keyword">self</span> ; ent ; ent = ent-&gt;teamchain) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                ent-&gt;message = NULL;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                ent-&gt;touch = NULL;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                <a class="code" href="../../d3/dba/g__func_8c.html#a2d4d7ca6b1401ac98ccd31a26e900912">door_go_down</a>(ent);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="comment">// trigger all paired doors</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">for</span> (ent = <span class="keyword">self</span> ; ent ; ent = ent-&gt;teamchain) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        ent-&gt;message = NULL;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        ent-&gt;touch = NULL;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a9a75d9b6e545f248c011126a2eacd0d6">door_go_up</a>(ent, activator);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a34aeb98f8f6f622e68570d288dd60a7b">  929</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a34aeb98f8f6f622e68570d288dd60a7b">Touch_DoorTrigger</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, cplane_t *plane, csurface_t *surf)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;{</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;health &lt;= 0)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;svflags &amp; SVF_MONSTER) &amp;&amp; (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client))</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">if</span> ((self-&gt;owner-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a3534a701ac18c8b4d5ca139361a8e818">DOOR_NOMONSTER</a>) &amp;&amp; (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;svflags &amp; SVF_MONSTER))</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> &lt; self-&gt;touch_debounce_time)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keyword">self</span>-&gt;touch_debounce_time = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 1.0;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">door_use</a>(self-&gt;owner, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;}</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a8408bdd8e9207aebc302d6dba10dcf9c">  947</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a8408bdd8e9207aebc302d6dba10dcf9c">Think_CalcMoveSpeed</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;{</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    edict_t *ent;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordtype">float</span>   min;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordtype">float</span>   time;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordtype">float</span>   newspeed;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordtype">float</span>   ratio;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordtype">float</span>   dist;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">if</span> (self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordflow">return</span>;     <span class="comment">// only the team master does this</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// find the smallest distance any member of the team will be moving</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    min = fabs(self-&gt;moveinfo.distance);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">for</span> (ent = self-&gt;teamchain; ent; ent = ent-&gt;teamchain) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        dist = fabs(ent-&gt;moveinfo.distance);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keywordflow">if</span> (dist &lt; min)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            min = dist;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    time = min / <span class="keyword">self</span>-&gt;moveinfo.speed;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// adjust speeds so they will all complete at the same time</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">for</span> (ent = <span class="keyword">self</span>; ent; ent = ent-&gt;teamchain) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        newspeed = fabs(ent-&gt;moveinfo.distance) / time;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        ratio = newspeed / ent-&gt;moveinfo.speed;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="keywordflow">if</span> (ent-&gt;moveinfo.accel == ent-&gt;moveinfo.speed)</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            ent-&gt;moveinfo.accel = newspeed;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            ent-&gt;moveinfo.accel *= ratio;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">if</span> (ent-&gt;moveinfo.decel == ent-&gt;moveinfo.speed)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            ent-&gt;moveinfo.decel = newspeed;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            ent-&gt;moveinfo.decel *= ratio;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        ent-&gt;moveinfo.speed = newspeed;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;}</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a54a4045bb90d63dad46f1a3e110ab882">  985</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a54a4045bb90d63dad46f1a3e110ab882">Think_SpawnDoorTrigger</a>(edict_t *ent)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;{</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    edict_t     *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    vec3_t      mins, maxs;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">return</span>;     <span class="comment">// only the team leader spawns a trigger</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    VectorCopy(ent-&gt;absmin, mins);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    VectorCopy(ent-&gt;absmax, maxs);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a> = ent-&gt;teamchain ; <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a> ; <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a> = <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;teamchain) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#ac3a35569efc78e94c5676b07142b48b9">AddPointToBounds</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;absmin, mins, maxs);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#ac3a35569efc78e94c5676b07142b48b9">AddPointToBounds</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;absmax, mins, maxs);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">// expand</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    mins[0] -= 60;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    mins[1] -= 60;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    maxs[0] += 60;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    maxs[1] += 60;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a> = <a class="code" href="../../d3/ddf/g__local_8h.html#a015feebdd0de52e2de27451c20f1bbf3">G_Spawn</a>();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    VectorCopy(mins, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;mins);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    VectorCopy(maxs, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;maxs);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;owner = ent;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;solid = SOLID_TRIGGER;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698aaeebbb5aa0b0d9b83afc5541ee902760">MOVETYPE_NONE</a>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;touch = <a class="code" href="../../d3/dba/g__func_8c.html#a34aeb98f8f6f622e68570d288dd60a7b">Touch_DoorTrigger</a>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a299c0a1db834d131aef0f27c4a76fb54">DOOR_START_OPEN</a>)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">door_use_areaportals</a>(ent, qtrue);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a8408bdd8e9207aebc302d6dba10dcf9c">Think_CalcMoveSpeed</a>(ent);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a13f26ac13c511db9d9439431a8d323eb"> 1022</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a13f26ac13c511db9d9439431a8d323eb">door_blocked</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;{</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    edict_t *ent;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;svflags &amp; SVF_MONSTER) &amp;&amp; (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client)) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="comment">// give it a chance to go away on it&#39;s own terms (like gibs)</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, 100000, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="comment">// if it&#39;s still there, nuke it</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a90cef4f9dc98d775fb36b3f2e34eb8c7">BecomeExplosion1</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, self-&gt;dmg, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a35d163dd060623b081709a352a3536a2">DOOR_CRUSHER</a>)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">// if a door has a negative wait, it would never come back if blocked,</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">// so let it just squash the object to death real fast</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.wait &gt;= 0) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.state == <a class="code" href="../../d3/dba/g__func_8c.html#a7d485ea16647d3bb7691188e29779975">STATE_DOWN</a>) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="keywordflow">for</span> (ent = self-&gt;teammaster ; ent ; ent = ent-&gt;teamchain)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <a class="code" href="../../d3/dba/g__func_8c.html#a9a75d9b6e545f248c011126a2eacd0d6">door_go_up</a>(ent, ent-&gt;activator);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <span class="keywordflow">for</span> (ent = self-&gt;teammaster ; ent ; ent = ent-&gt;teamchain)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <a class="code" href="../../d3/dba/g__func_8c.html#a2d4d7ca6b1401ac98ccd31a26e900912">door_go_down</a>(ent);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;}</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a5552641241de6ee37657f0f1daa80397"> 1054</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a5552641241de6ee37657f0f1daa80397">door_killed</a>(edict_t *<span class="keyword">self</span>, edict_t *inflictor, edict_t *attacker, <span class="keywordtype">int</span> damage, vec3_t point)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;{</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    edict_t *ent;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">for</span> (ent = self-&gt;teammaster ; ent ; ent = ent-&gt;teamchain) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        ent-&gt;health = ent-&gt;max_health;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        ent-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa66fc22ef8afa03edeb87b5ae530c6e39">DAMAGE_NO</a>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">door_use</a>(self-&gt;teammaster, attacker, attacker);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;}</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ae9e91c46cbf02fdad0c2500d26223cc0"> 1065</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ae9e91c46cbf02fdad0c2500d26223cc0">door_touch</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, cplane_t *plane, csurface_t *surf)</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;{</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> &lt; self-&gt;touch_debounce_time)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keyword">self</span>-&gt;touch_debounce_time = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 5.0;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.centerprintf(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="stringliteral">&quot;%s&quot;</span>, self-&gt;message);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, CHAN_AUTO, <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;misc/talk1.wav&quot;</span>), 1, ATTN_NORM, 0);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;}</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a632d8a0964339a802796a02cf234322f"> 1078</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a632d8a0964339a802796a02cf234322f">SP_func_door</a>(edict_t *ent)</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;{</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    vec3_t  abs_movedir;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;sounds != 1) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        ent-&gt;moveinfo.sound_start = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_strt.wav&quot;</span>);</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        ent-&gt;moveinfo.sound_middle = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_mid.wav&quot;</span>);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        ent-&gt;moveinfo.sound_end = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_end.wav&quot;</span>);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a8966a3677c9152f498a5c9a18f915ae3">G_SetMovedir</a>(ent-&gt;s.angles, ent-&gt;movedir);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    ent-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    ent-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(ent, ent-&gt;model);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    ent-&gt;blocked = <a class="code" href="../../d3/dba/g__func_8c.html#a13f26ac13c511db9d9439431a8d323eb">door_blocked</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    ent-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">door_use</a>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;speed)</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        ent-&gt;speed = 100;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#abbf7988b43f57e08d7380563f07d2089">deathmatch</a>-&gt;value)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        ent-&gt;speed *= 2;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;accel)</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        ent-&gt;accel = ent-&gt;speed;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;decel)</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        ent-&gt;decel = ent-&gt;speed;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;wait)</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        ent-&gt;wait = 3;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a> = 8;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;dmg)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        ent-&gt;dmg = 2;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// calculate second position</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    VectorCopy(ent-&gt;s.origin, ent-&gt;pos1);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    abs_movedir[0] = fabs(ent-&gt;movedir[0]);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    abs_movedir[1] = fabs(ent-&gt;movedir[1]);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    abs_movedir[2] = fabs(ent-&gt;movedir[2]);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    ent-&gt;moveinfo.distance = abs_movedir[0] * ent-&gt;size[0] + abs_movedir[1] * ent-&gt;size[1] + abs_movedir[2] * ent-&gt;size[2] - <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    VectorMA(ent-&gt;pos1, ent-&gt;moveinfo.distance, ent-&gt;movedir, ent-&gt;pos2);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">// if it starts open, switch the positions</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a299c0a1db834d131aef0f27c4a76fb54">DOOR_START_OPEN</a>) {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        VectorCopy(ent-&gt;pos2, ent-&gt;s.origin);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        VectorCopy(ent-&gt;pos1, ent-&gt;pos2);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        VectorCopy(ent-&gt;s.origin, ent-&gt;pos1);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;health) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        ent-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        ent-&gt;die = <a class="code" href="../../d3/dba/g__func_8c.html#a5552641241de6ee37657f0f1daa80397">door_killed</a>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        ent-&gt;max_health = ent-&gt;health;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ent-&gt;targetname &amp;&amp; ent-&gt;message) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;misc/talk.wav&quot;</span>);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        ent-&gt;touch = <a class="code" href="../../d3/dba/g__func_8c.html#ae9e91c46cbf02fdad0c2500d26223cc0">door_touch</a>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    }</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    ent-&gt;moveinfo.speed = ent-&gt;speed;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    ent-&gt;moveinfo.accel = ent-&gt;accel;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    ent-&gt;moveinfo.decel = ent-&gt;decel;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    ent-&gt;moveinfo.wait = ent-&gt;wait;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    VectorCopy(ent-&gt;pos1, ent-&gt;moveinfo.start_origin);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    VectorCopy(ent-&gt;s.angles, ent-&gt;moveinfo.start_angles);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    VectorCopy(ent-&gt;pos2, ent-&gt;moveinfo.end_origin);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    VectorCopy(ent-&gt;s.angles, ent-&gt;moveinfo.end_angles);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 16)</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        ent-&gt;s.effects |= EF_ANIM_ALL;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 64)</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        ent-&gt;s.effects |= EF_ANIM_ALLFAST;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="comment">// to simplify logic elsewhere, make non-teamed doors into a team of one</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;team)</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        ent-&gt;teammaster = ent;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(ent);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;health || ent-&gt;targetname)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a8408bdd8e9207aebc302d6dba10dcf9c">Think_CalcMoveSpeed</a>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a54a4045bb90d63dad46f1a3e110ab882">Think_SpawnDoorTrigger</a>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;}</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">/*QUAKED func_door_rotating (0 .5 .8) ? START_OPEN REVERSE CRUSHER NOMONSTER ANIMATED TOGGLE X_AXIS Y_AXIS</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">TOGGLE causes the door to wait in both the start and end states for a trigger event.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">START_OPEN  the door to moves to its destination when spawned, and operate in reverse.  It is used to temporarily or permanently close off an area when triggered (not useful for touch or takedamage doors).</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">NOMONSTER   monsters will not trigger this door</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">You need to have an origin brush as part of this entity.  The center of that brush will be</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">the point around which it is rotated. It will rotate around the Z axis by default.  You can</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">check either the X_AXIS or Y_AXIS box to change that.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">&quot;distance&quot; is how many degrees the door will be rotated.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">&quot;speed&quot; determines how fast the door moves; default value is 100.</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">REVERSE will cause the door to rotate in the opposite direction.</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">&quot;message&quot;   is printed when the door is touched if it is a trigger door and it hasn&#39;t been fired yet</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">&quot;angle&quot;     determines the opening direction</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">&quot;targetname&quot; if set, no touch field will be spawned and a remote button or trigger field activates the door.</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">&quot;health&quot;    if set, door must be shot open</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">&quot;speed&quot;     movement speed (100 default)</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">&quot;wait&quot;      wait before returning (3 default, -1 = never return)</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">&quot;dmg&quot;       damage to inflict when blocked (2 default)</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">&quot;sounds&quot;</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">1)  silent</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">2)  light</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">3)  medium</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">4)  heavy</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a84c5eda4be1bbbed2e8f50d3afafc21a"> 1196</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a84c5eda4be1bbbed2e8f50d3afafc21a">SP_func_door_rotating</a>(edict_t *ent)</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;{</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    VectorClear(ent-&gt;s.angles);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// set the axis of rotation</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    VectorClear(ent-&gt;movedir);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a8b056e165edd47a412c13d87082d0dc4">DOOR_X_AXIS</a>)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        ent-&gt;movedir[2] = 1.0;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a6fce7a790aed32664c309677dfd6c5a3">DOOR_Y_AXIS</a>)</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        ent-&gt;movedir[0] = 1.0;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// Z_AXIS</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        ent-&gt;movedir[1] = 1.0;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="comment">// check for reverse rotation</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#ab06304e23dae22a7538a45135de4557d">DOOR_REVERSE</a>)</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        VectorNegate(ent-&gt;movedir, ent-&gt;movedir);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#ad943f311b0181b9a7710c08afc2632ec">distance</a>) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;%s at %s with no distance set\n&quot;</span>, ent-&gt;classname, <a class="code" href="../../d3/ddf/g__local_8h.html#a97f5ab73714caeeeb9d3a832d32152ab">vtos</a>(ent-&gt;s.origin));</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#ad943f311b0181b9a7710c08afc2632ec">distance</a> = 90;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    VectorCopy(ent-&gt;s.angles, ent-&gt;pos1);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    VectorMA(ent-&gt;s.angles, <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#ad943f311b0181b9a7710c08afc2632ec">distance</a>, ent-&gt;movedir, ent-&gt;pos2);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    ent-&gt;moveinfo.distance = <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#ad943f311b0181b9a7710c08afc2632ec">distance</a>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    ent-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    ent-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(ent, ent-&gt;model);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    ent-&gt;blocked = <a class="code" href="../../d3/dba/g__func_8c.html#a13f26ac13c511db9d9439431a8d323eb">door_blocked</a>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    ent-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">door_use</a>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;speed)</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        ent-&gt;speed = 100;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;accel)</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        ent-&gt;accel = ent-&gt;speed;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;decel)</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        ent-&gt;decel = ent-&gt;speed;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;wait)</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        ent-&gt;wait = 3;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;dmg)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        ent-&gt;dmg = 2;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;sounds != 1) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        ent-&gt;moveinfo.sound_start = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_strt.wav&quot;</span>);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        ent-&gt;moveinfo.sound_middle = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_mid.wav&quot;</span>);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        ent-&gt;moveinfo.sound_end = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_end.wav&quot;</span>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    }</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">// if it starts open, switch the positions</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a299c0a1db834d131aef0f27c4a76fb54">DOOR_START_OPEN</a>) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        VectorCopy(ent-&gt;pos2, ent-&gt;s.angles);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        VectorCopy(ent-&gt;pos1, ent-&gt;pos2);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        VectorCopy(ent-&gt;s.angles, ent-&gt;pos1);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        VectorNegate(ent-&gt;movedir, ent-&gt;movedir);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;health) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        ent-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        ent-&gt;die = <a class="code" href="../../d3/dba/g__func_8c.html#a5552641241de6ee37657f0f1daa80397">door_killed</a>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        ent-&gt;max_health = ent-&gt;health;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;targetname &amp;&amp; ent-&gt;message) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;misc/talk.wav&quot;</span>);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        ent-&gt;touch = <a class="code" href="../../d3/dba/g__func_8c.html#ae9e91c46cbf02fdad0c2500d26223cc0">door_touch</a>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    ent-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    ent-&gt;moveinfo.speed = ent-&gt;speed;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    ent-&gt;moveinfo.accel = ent-&gt;accel;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    ent-&gt;moveinfo.decel = ent-&gt;decel;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    ent-&gt;moveinfo.wait = ent-&gt;wait;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    VectorCopy(ent-&gt;s.origin, ent-&gt;moveinfo.start_origin);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    VectorCopy(ent-&gt;pos1, ent-&gt;moveinfo.start_angles);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    VectorCopy(ent-&gt;s.origin, ent-&gt;moveinfo.end_origin);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    VectorCopy(ent-&gt;pos2, ent-&gt;moveinfo.end_angles);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 16)</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        ent-&gt;s.effects |= EF_ANIM_ALL;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="comment">// to simplify logic elsewhere, make non-teamed doors into a team of one</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;team)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        ent-&gt;teammaster = ent;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(ent);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    ent-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;health || ent-&gt;targetname)</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a8408bdd8e9207aebc302d6dba10dcf9c">Think_CalcMoveSpeed</a>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        ent-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a54a4045bb90d63dad46f1a3e110ab882">Think_SpawnDoorTrigger</a>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;}</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">/*QUAKED func_water (0 .5 .8) ? START_OPEN</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">func_water is a moveable water brush.  It must be targeted to operate.  Use a non-water texture at your own risk.</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">START_OPEN causes the water to move to its destination when spawned and operate in reverse.</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">&quot;angle&quot;     determines the opening direction (up or down only)</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment">&quot;speed&quot;     movement speed (25 default)</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">&quot;wait&quot;      wait before returning (-1 default, -1 = TOGGLE)</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment">&quot;lip&quot;       lip remaining at end of move (0 default)</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">&quot;sounds&quot;    (yes, these need to be changed)</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">0)  no sound</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">1)  water</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">2)  lava</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a0b61c73b2b870192ab613809a5cb2259"> 1308</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a4c181667edc1cf01998d0f81fab81a30">SP_func_water</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;{</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    vec3_t  abs_movedir;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a8966a3677c9152f498a5c9a18f915ae3">G_SetMovedir</a>(self-&gt;s.angles, self-&gt;movedir);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keyword">self</span>-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keyword">self</span>-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(<span class="keyword">self</span>, self-&gt;model);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">switch</span> (self-&gt;sounds) {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">case</span> 1: <span class="comment">// water</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keyword">self</span>-&gt;moveinfo.sound_start = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;world/mov_watr.wav&quot;</span>);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="keyword">self</span>-&gt;moveinfo.sound_end = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;world/stp_watr.wav&quot;</span>);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">case</span> 2: <span class="comment">// lava</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keyword">self</span>-&gt;moveinfo.sound_start = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;world/mov_watr.wav&quot;</span>);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keyword">self</span>-&gt;moveinfo.sound_end = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;world/stp_watr.wav&quot;</span>);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="comment">// calculate second position</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    VectorCopy(self-&gt;s.origin, self-&gt;pos1);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    abs_movedir[0] = fabs(self-&gt;movedir[0]);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    abs_movedir[1] = fabs(self-&gt;movedir[1]);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    abs_movedir[2] = fabs(self-&gt;movedir[2]);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.distance = abs_movedir[0] * <span class="keyword">self</span>-&gt;size[0] + abs_movedir[1] * <span class="keyword">self</span>-&gt;size[1] + abs_movedir[2] * <span class="keyword">self</span>-&gt;size[2] - <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">lip</a>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    VectorMA(self-&gt;pos1, self-&gt;moveinfo.distance, self-&gt;movedir, self-&gt;pos2);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// if it starts open, switch the positions</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a299c0a1db834d131aef0f27c4a76fb54">DOOR_START_OPEN</a>) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        VectorCopy(self-&gt;pos2, self-&gt;s.origin);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        VectorCopy(self-&gt;pos1, self-&gt;pos2);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        VectorCopy(self-&gt;s.origin, self-&gt;pos1);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    VectorCopy(self-&gt;pos1, self-&gt;moveinfo.start_origin);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    VectorCopy(self-&gt;s.angles, self-&gt;moveinfo.start_angles);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    VectorCopy(self-&gt;pos2, self-&gt;moveinfo.end_origin);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    VectorCopy(self-&gt;s.angles, self-&gt;moveinfo.end_angles);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a>;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;speed)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <span class="keyword">self</span>-&gt;speed = 25;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.accel = <span class="keyword">self</span>-&gt;moveinfo.decel = <span class="keyword">self</span>-&gt;moveinfo.speed = <span class="keyword">self</span>-&gt;speed;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;wait)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keyword">self</span>-&gt;wait = -1;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.wait = <span class="keyword">self</span>-&gt;wait;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keyword">self</span>-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">door_use</a>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">if</span> (self-&gt;wait == -1)</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="keyword">self</span>-&gt;spawnflags |= <a class="code" href="../../d3/dba/g__func_8c.html#a32d15f1b6d540d245b032d946987e1de">DOOR_TOGGLE</a>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keyword">self</span>-&gt;classname = <span class="stringliteral">&quot;func_door&quot;</span>;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;}</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d"> 1373</a></span>&#160;<span class="preprocessor">#define TRAIN_START_ON      1</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ae48b2e74823b752a579823ca7c951fa8"> 1374</a></span>&#160;<span class="preprocessor">#define TRAIN_TOGGLE        2</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#aff33cfdd4a864efe3ae153a1621bfc1f"> 1375</a></span>&#160;<span class="preprocessor">#define TRAIN_BLOCK_STOPS   4</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">/*QUAKED func_train (0 .5 .8) ? START_ON TOGGLE BLOCK_STOPS</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">Trains are moving platforms that players can ride.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">The targets origin specifies the min point of the train at each corner.</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">The train spawns at the first target it is pointing at.</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">If the train is the target of a button or trigger, it will not begin moving until activated.</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">speed   default 100</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">dmg     default 2</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">noise   looping sound to play when the train is in motion</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a96eec13171bed6921d04767e7c5b7b81"> 1389</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a96eec13171bed6921d04767e7c5b7b81">train_blocked</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;{</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;svflags &amp; SVF_MONSTER) &amp;&amp; (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client)) {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="comment">// give it a chance to go away on it&#39;s own terms (like gibs)</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, 100000, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="comment">// if it&#39;s still there, nuke it</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a90cef4f9dc98d775fb36b3f2e34eb8c7">BecomeExplosion1</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> &lt; self-&gt;touch_debounce_time)</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;dmg)</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keyword">self</span>-&gt;touch_debounce_time = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 0.5;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, self-&gt;dmg, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;}</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a3a4e9f02b97a667e00296da81a2127cf"> 1409</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a3a4e9f02b97a667e00296da81a2127cf">train_wait</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;{</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">if</span> (self-&gt;target_ent-&gt;pathtarget) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="keywordtype">char</span>    *savetarget;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        edict_t *ent;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        ent = <span class="keyword">self</span>-&gt;target_ent;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        savetarget = ent-&gt;target;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        ent-&gt;target = ent-&gt;pathtarget;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a16b9e448cb92a3ab8758108d64b6095b">G_UseTargets</a>(ent, self-&gt;activator);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        ent-&gt;target = savetarget;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="comment">// make sure we didn&#39;t get killed by a killtarget</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keywordflow">if</span> (!self-&gt;inuse)</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span> (self-&gt;moveinfo.wait) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.wait &gt; 0) {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <span class="keyword">self</span>-&gt;moveinfo.wait;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#ae48b2e74823b752a579823ca7c951fa8">TRAIN_TOGGLE</a>) { <span class="comment">// &amp;&amp; wait &lt; 0</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <a class="code" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="keyword">self</span>-&gt;spawnflags &amp;= ~<a class="code" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a>;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            VectorClear(self-&gt;velocity);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="keyword">self</span>-&gt;nextthink = 0;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">if</span> (!(self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            <span class="keywordflow">if</span> (self-&gt;moveinfo.sound_end)</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<span class="keyword">self</span>, CHAN_NO_PHS_ADD + CHAN_VOICE, self-&gt;moveinfo.sound_end, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            <span class="keyword">self</span>-&gt;s.sound = 0;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    }</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;}</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1"> 1448</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;{</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    edict_t     *ent;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    vec3_t      dest;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    qboolean    first;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    first = qtrue;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;again:</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;target) {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">//      gi.dprintf (&quot;train_next: no next target\n&quot;);</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    ent = <a class="code" href="../../d3/ddf/g__local_8h.html#af86dbca2f65c89053dd7a04a97ac56f2">G_PickTarget</a>(self-&gt;target);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordflow">if</span> (!ent) {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;train_next: bad target %s\n&quot;</span>, self-&gt;target);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keyword">self</span>-&gt;target = ent-&gt;target;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">// check for a teleport path_corner</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; 1) {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <span class="keywordflow">if</span> (!first) {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;connected teleport path_corners, see %s at %s\n&quot;</span>, ent-&gt;classname, <a class="code" href="../../d3/ddf/g__local_8h.html#a97f5ab73714caeeeb9d3a832d32152ab">vtos</a>(ent-&gt;s.origin));</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        first = qfalse;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        VectorSubtract(ent-&gt;s.origin, self-&gt;mins, self-&gt;s.origin);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        VectorCopy(self-&gt;s.origin, self-&gt;s.old_origin);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keyword">self</span>-&gt;s.event = EV_OTHER_TELEPORT;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <span class="keywordflow">goto</span> again;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    }</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.wait = ent-&gt;wait;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keyword">self</span>-&gt;target_ent = ent;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;flags &amp; <a class="code" href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a>)) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <span class="keywordflow">if</span> (self-&gt;moveinfo.sound_start)</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.sound(<span class="keyword">self</span>, CHAN_NO_PHS_ADD + CHAN_VOICE, self-&gt;moveinfo.sound_start, 1, ATTN_STATIC, 0);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keyword">self</span>-&gt;s.sound = <span class="keyword">self</span>-&gt;moveinfo.sound_middle;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    VectorSubtract(ent-&gt;s.origin, self-&gt;mins, dest);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    VectorCopy(self-&gt;s.origin, self-&gt;moveinfo.start_origin);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    VectorCopy(dest, self-&gt;moveinfo.end_origin);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, dest, <a class="code" href="../../d3/dba/g__func_8c.html#a3a4e9f02b97a667e00296da81a2127cf">train_wait</a>);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keyword">self</span>-&gt;spawnflags |= <a class="code" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;}</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a986869b3e86d9617c55bbc2b512538cb"> 1500</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a986869b3e86d9617c55bbc2b512538cb">train_resume</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;{</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    edict_t *ent;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    vec3_t  dest;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160; </div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    ent = <span class="keyword">self</span>-&gt;target_ent;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160; </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    VectorSubtract(ent-&gt;s.origin, self-&gt;mins, dest);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.state = <a class="code" href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    VectorCopy(self-&gt;s.origin, self-&gt;moveinfo.start_origin);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    VectorCopy(dest, self-&gt;moveinfo.end_origin);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, dest, <a class="code" href="../../d3/dba/g__func_8c.html#a3a4e9f02b97a667e00296da81a2127cf">train_wait</a>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keyword">self</span>-&gt;spawnflags |= <a class="code" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;}</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"><a class="line" href="../../d1/d6b/g__misc_8c.html#a7291a46362d4f7600f34426da4dc94f8"> 1515</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a7291a46362d4f7600f34426da4dc94f8">func_train_find</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;{</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    edict_t *ent;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;target) {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;train_find: no target\n&quot;</span>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    ent = <a class="code" href="../../d3/ddf/g__local_8h.html#af86dbca2f65c89053dd7a04a97ac56f2">G_PickTarget</a>(self-&gt;target);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordflow">if</span> (!ent) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;train_find: target %s not found\n&quot;</span>, self-&gt;target);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    }</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keyword">self</span>-&gt;target = ent-&gt;target;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    VectorSubtract(ent-&gt;s.origin, self-&gt;mins, self-&gt;s.origin);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="comment">// if not triggered, start immediately</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;targetname)</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keyword">self</span>-&gt;spawnflags |= <a class="code" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a>) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <span class="keyword">self</span>-&gt;activator = <span class="keyword">self</span>;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    }</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"><a class="line" href="../../d1/d6b/g__misc_8c.html#a8bd5958ed04d45c93f55851400763c70"> 1544</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a8bd5958ed04d45c93f55851400763c70">train_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;{</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keyword">self</span>-&gt;activator = activator;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a>) {</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <span class="keywordflow">if</span> (!(self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#ae48b2e74823b752a579823ca7c951fa8">TRAIN_TOGGLE</a>))</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keyword">self</span>-&gt;spawnflags &amp;= ~<a class="code" href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        VectorClear(self-&gt;velocity);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = 0;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        <span class="keywordflow">if</span> (self-&gt;target_ent)</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            <a class="code" href="../../d3/dba/g__func_8c.html#a986869b3e86d9617c55bbc2b512538cb">train_resume</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            <a class="code" href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;}</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a268c45e78c296e23557c8789a1d44e7f"> 1562</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#aaf3ba5108f542bf5df7da387ce9fe51e">SP_func_train</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;{</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keyword">self</span>-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a>;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    VectorClear(self-&gt;s.angles);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keyword">self</span>-&gt;blocked = <a class="code" href="../../d3/dba/g__func_8c.html#a96eec13171bed6921d04767e7c5b7b81">train_blocked</a>;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#aff33cfdd4a864efe3ae153a1621bfc1f">TRAIN_BLOCK_STOPS</a>)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keyword">self</span>-&gt;dmg = 0;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">if</span> (!self-&gt;dmg)</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            <span class="keyword">self</span>-&gt;dmg = 100;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    }</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keyword">self</span>-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(<span class="keyword">self</span>, self-&gt;model);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#ac72450475105982eb605aab62b187e15">noise</a>)</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keyword">self</span>-&gt;moveinfo.sound_middle = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#ac72450475105982eb605aab62b187e15">noise</a>);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;speed)</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keyword">self</span>-&gt;speed = 100;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.speed = <span class="keyword">self</span>-&gt;speed;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keyword">self</span>-&gt;moveinfo.accel = <span class="keyword">self</span>-&gt;moveinfo.decel = <span class="keyword">self</span>-&gt;moveinfo.speed;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keyword">self</span>-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a8bd5958ed04d45c93f55851400763c70">train_use</a>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">if</span> (self-&gt;target) {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="comment">// start trains on the second frame, to make sure their targets have had</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="comment">// a chance to spawn</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a7291a46362d4f7600f34426da4dc94f8">func_train_find</a>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;func_train without a target at %s\n&quot;</span>, <a class="code" href="../../d3/ddf/g__local_8h.html#a97f5ab73714caeeeb9d3a832d32152ab">vtos</a>(self-&gt;absmin));</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;}</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">/*QUAKED trigger_elevator (0.3 0.1 0.6) (-8 -8 -8) (8 8 8)</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a1b0d680e2ddbe7cd8c81dcf327d3468c"> 1603</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a1b0d680e2ddbe7cd8c81dcf327d3468c">trigger_elevator_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;{</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    edict_t *target;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">if</span> (self-&gt;movetarget-&gt;nextthink) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">//      gi.dprintf(&quot;elevator busy\n&quot;);</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;pathtarget) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;elevator used with no pathtarget\n&quot;</span>);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    target = <a class="code" href="../../d3/ddf/g__local_8h.html#af86dbca2f65c89053dd7a04a97ac56f2">G_PickTarget</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;pathtarget);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">if</span> (!target) {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;elevator used with bad pathtarget: %s\n&quot;</span>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;pathtarget);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keyword">self</span>-&gt;movetarget-&gt;target_ent = target;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a986869b3e86d9617c55bbc2b512538cb">train_resume</a>(self-&gt;movetarget);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;}</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#afd419f5ca5bd5d3d303ce631a322a931"> 1627</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#afd419f5ca5bd5d3d303ce631a322a931">trigger_elevator_init</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;{</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;target) {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;trigger_elevator has no target\n&quot;</span>);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keyword">self</span>-&gt;movetarget = <a class="code" href="../../d3/ddf/g__local_8h.html#af86dbca2f65c89053dd7a04a97ac56f2">G_PickTarget</a>(self-&gt;target);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;movetarget) {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;trigger_elevator unable to find target %s\n&quot;</span>, self-&gt;target);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">if</span> (strcmp(self-&gt;movetarget-&gt;classname, <span class="stringliteral">&quot;func_train&quot;</span>) != 0) {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;trigger_elevator target %s is not a train\n&quot;</span>, self-&gt;target);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keyword">self</span>-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a1b0d680e2ddbe7cd8c81dcf327d3468c">trigger_elevator_use</a>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keyword">self</span>-&gt;svflags = SVF_NOCLIENT;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#ad39276cff31ddff37db2c02ec32e652b"> 1648</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a6e32ae8c8e9cb2f319cce31009c26140">SP_trigger_elevator</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;{</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#afd419f5ca5bd5d3d303ce631a322a931">trigger_elevator_init</a>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;}</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">/*QUAKED func_timer (0.3 0.1 0.6) (-8 -8 -8) (8 8 8) START_ON</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">&quot;wait&quot;          base time between triggering all targets, default is 1</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">&quot;random&quot;        wait variance, default is 0</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">so, the basic time between firing is a random time between</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">(wait - random) and (wait + random)</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment">&quot;delay&quot;         delay before first firing when turned on, default is 0</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">&quot;pausetime&quot;     additional delay used only the very first time</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">                and only if spawned with START_ON</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">These can used but not touched.</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a6e385f8c799897eec3c4038fb1fd41cf"> 1669</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a6e385f8c799897eec3c4038fb1fd41cf">func_timer_think</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;{</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a16b9e448cb92a3ab8758108d64b6095b">G_UseTargets</a>(<span class="keyword">self</span>, self-&gt;activator);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <span class="keyword">self</span>-&gt;wait + <a class="code" href="../../d3/ddf/g__local_8h.html#acc83e028b03f560add30623f3ab1dd0e">crandom</a>() * <span class="keyword">self</span>-&gt;random;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;}</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a429dbc80685c85ca2c8b226ca8102f38"> 1675</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a429dbc80685c85ca2c8b226ca8102f38">func_timer_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;{</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keyword">self</span>-&gt;activator = activator;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="comment">// if on, turn it off</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">if</span> (self-&gt;nextthink) {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = 0;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="comment">// turn it on</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">if</span> (self-&gt;delay)</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <span class="keyword">self</span>-&gt;delay;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <a class="code" href="../../d3/dba/g__func_8c.html#a6e385f8c799897eec3c4038fb1fd41cf">func_timer_think</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;}</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a3761ac3635aed26caa2b7a5d164dfede"> 1692</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a3761ac3635aed26caa2b7a5d164dfede">SP_func_timer</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;{</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;wait)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="keyword">self</span>-&gt;wait = 1.0;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keyword">self</span>-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a429dbc80685c85ca2c8b226ca8102f38">func_timer_use</a>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a6e385f8c799897eec3c4038fb1fd41cf">func_timer_think</a>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">if</span> (self-&gt;random &gt;= self-&gt;wait) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keyword">self</span>-&gt;random = <span class="keyword">self</span>-&gt;wait - <a class="code" href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a>;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.dprintf(<span class="stringliteral">&quot;func_timer at %s has random &gt;= wait\n&quot;</span>, <a class="code" href="../../d3/ddf/g__local_8h.html#a97f5ab73714caeeeb9d3a832d32152ab">vtos</a>(self-&gt;s.origin));</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; 1) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 1.0 + <a class="code" href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a>.<a class="code" href="../../df/daa/structspawn__temp__t.html#af90dee98cb26a17488d024c03f1336f1">pausetime</a> + <span class="keyword">self</span>-&gt;delay + <span class="keyword">self</span>-&gt;wait + <a class="code" href="../../d3/ddf/g__local_8h.html#acc83e028b03f560add30623f3ab1dd0e">crandom</a>() * <span class="keyword">self</span>-&gt;random;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        <span class="keyword">self</span>-&gt;activator = <span class="keyword">self</span>;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    }</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="keyword">self</span>-&gt;svflags = SVF_NOCLIENT;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;}</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">/*QUAKED func_conveyor (0 .5 .8) ? START_ON TOGGLE</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment">Conveyors are stationary brushes that move what&#39;s on them.</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">The brush should be have a surface with at least one current content enabled.</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">speed   default 100</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a8ab778296980c6f858f053322fd1628e"> 1720</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a8ab778296980c6f858f053322fd1628e">func_conveyor_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;{</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">if</span> (self-&gt;spawnflags &amp; 1) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keyword">self</span>-&gt;speed = 0;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <span class="keyword">self</span>-&gt;spawnflags &amp;= ~1;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="keyword">self</span>-&gt;speed = <span class="keyword">self</span>-&gt;count;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="keyword">self</span>-&gt;spawnflags |= 1;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;spawnflags &amp; 2))</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keyword">self</span>-&gt;count = 0;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;}</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a05cbbe0330b030f03f671beb7e90ac84"> 1734</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a05cbbe0330b030f03f671beb7e90ac84">SP_func_conveyor</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;{</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">if</span> (!self-&gt;speed)</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keyword">self</span>-&gt;speed = 100;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;spawnflags &amp; 1)) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="keyword">self</span>-&gt;count = <span class="keyword">self</span>-&gt;speed;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <span class="keyword">self</span>-&gt;speed = 0;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    }</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160; </div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keyword">self</span>-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a8ab778296980c6f858f053322fd1628e">func_conveyor_use</a>;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(<span class="keyword">self</span>, self-&gt;model);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keyword">self</span>-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;}</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="comment">/*QUAKED func_door_secret (0 .5 .8) ? always_shoot 1st_left 1st_down</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment">A secret door.  Slide back and then to the side.</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="comment">open_once       doors never closes</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="comment">1st_left        1st move is left of arrow</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment">1st_down        1st move is down from arrow</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">always_shoot    door is shootebale even if targeted</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="comment">&quot;angle&quot;     determines the direction</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment">&quot;dmg&quot;       damage to inflic when blocked (default 2)</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="comment">&quot;wait&quot;      how long to hold in the open position (default 5, -1 means hold)</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ab7124711cadd6b2d1d757d471285e6a1"> 1765</a></span>&#160;<span class="preprocessor">#define SECRET_ALWAYS_SHOOT 1</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ac391d8e2a2e4055480e3c976b6e5554c"> 1766</a></span>&#160;<span class="preprocessor">#define SECRET_1ST_LEFT     2</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a6c82f1b3aaafc87a2c2a20c5b36be43f"> 1767</a></span>&#160;<span class="preprocessor">#define SECRET_1ST_DOWN     4</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160; </div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a57c007a2ae5805d9d2e2659add650bb2">door_secret_move1</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a48ba534ce2ebb159eb37e0314599ce14">door_secret_move2</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a1126736c2d10bfcc313f26bfecc495eb">door_secret_move3</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a84a9ef7b881e0132a87699dd2a4637bc">door_secret_move4</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a9ab27667f4fcf00c8337688d0bb7f8ee">door_secret_move5</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a46e6f1cff17bfca07a9e33707c49b1af">door_secret_move6</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#aee141056822251479ff9c5b80d28e3c4">door_secret_done</a>(edict_t *<span class="keyword">self</span>);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ae84df523e30cd03ee2fd4bbddf90ff99"> 1777</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ae84df523e30cd03ee2fd4bbddf90ff99">door_secret_use</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;{</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">// make sure we&#39;re not already moving</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="keywordflow">if</span> (!VectorCompare(self-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>))</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160; </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, self-&gt;pos1, <a class="code" href="../../d3/dba/g__func_8c.html#a57c007a2ae5805d9d2e2659add650bb2">door_secret_move1</a>);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">door_use_areaportals</a>(<span class="keyword">self</span>, qtrue);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;}</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a57c007a2ae5805d9d2e2659add650bb2"> 1787</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a57c007a2ae5805d9d2e2659add650bb2">door_secret_move1</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;{</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 1.0;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a48ba534ce2ebb159eb37e0314599ce14">door_secret_move2</a>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;}</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a48ba534ce2ebb159eb37e0314599ce14"> 1793</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a48ba534ce2ebb159eb37e0314599ce14">door_secret_move2</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;{</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, self-&gt;pos2, <a class="code" href="../../d3/dba/g__func_8c.html#a1126736c2d10bfcc313f26bfecc495eb">door_secret_move3</a>);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;}</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160; </div>
<div class="line"><a name="l01798"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a1126736c2d10bfcc313f26bfecc495eb"> 1798</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a1126736c2d10bfcc313f26bfecc495eb">door_secret_move3</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;{</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">if</span> (self-&gt;wait == -1)</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + <span class="keyword">self</span>-&gt;wait;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a84a9ef7b881e0132a87699dd2a4637bc">door_secret_move4</a>;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;}</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160; </div>
<div class="line"><a name="l01806"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a84a9ef7b881e0132a87699dd2a4637bc"> 1806</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a84a9ef7b881e0132a87699dd2a4637bc">door_secret_move4</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;{</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, self-&gt;pos1, <a class="code" href="../../d3/dba/g__func_8c.html#a9ab27667f4fcf00c8337688d0bb7f8ee">door_secret_move5</a>);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;}</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a9ab27667f4fcf00c8337688d0bb7f8ee"> 1811</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a9ab27667f4fcf00c8337688d0bb7f8ee">door_secret_move5</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;{</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keyword">self</span>-&gt;nextthink = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 1.0;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keyword">self</span>-&gt;think = <a class="code" href="../../d3/dba/g__func_8c.html#a46e6f1cff17bfca07a9e33707c49b1af">door_secret_move6</a>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;}</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a46e6f1cff17bfca07a9e33707c49b1af"> 1817</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a46e6f1cff17bfca07a9e33707c49b1af">door_secret_move6</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;{</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a>(<span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../d3/dba/g__func_8c.html#aee141056822251479ff9c5b80d28e3c4">door_secret_done</a>);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;}</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#aee141056822251479ff9c5b80d28e3c4"> 1822</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#aee141056822251479ff9c5b80d28e3c4">door_secret_done</a>(edict_t *<span class="keyword">self</span>)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;{</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="keywordflow">if</span> (!(self-&gt;targetname) || (self-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#ab7124711cadd6b2d1d757d471285e6a1">SECRET_ALWAYS_SHOOT</a>)) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="keyword">self</span>-&gt;health = 0;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="keyword">self</span>-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">door_use_areaportals</a>(<span class="keyword">self</span>, qfalse);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;}</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160; </div>
<div class="line"><a name="l01831"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#ab4c48e9360f01c7003a74e5eead64210"> 1831</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#ab4c48e9360f01c7003a74e5eead64210">door_secret_blocked</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;{</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;svflags &amp; SVF_MONSTER) &amp;&amp; (!<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;client)) {</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="comment">// give it a chance to go away on it&#39;s own terms (like gibs)</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, 100000, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="comment">// if it&#39;s still there, nuke it</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>)</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            <a class="code" href="../../d3/ddf/g__local_8h.html#a90cef4f9dc98d775fb36b3f2e34eb8c7">BecomeExplosion1</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160; </div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> &lt; self-&gt;touch_debounce_time)</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keyword">self</span>-&gt;touch_debounce_time = <a class="code" href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a>.<a class="code" href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">time</a> + 0.5;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <a class="code" href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a>(<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, <span class="keyword">self</span>, <span class="keyword">self</span>, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>-&gt;s.origin, <a class="code" href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, self-&gt;dmg, 1, 0, <a class="code" href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a>);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;}</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#add8f431aa9360f8631a3aff15907bf3d"> 1849</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#add8f431aa9360f8631a3aff15907bf3d">door_secret_die</a>(edict_t *<span class="keyword">self</span>, edict_t *inflictor, edict_t *attacker, <span class="keywordtype">int</span> damage, vec3_t point)</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;{</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keyword">self</span>-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa66fc22ef8afa03edeb87b5ae530c6e39">DAMAGE_NO</a>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="../../d3/dba/g__func_8c.html#ae84df523e30cd03ee2fd4bbddf90ff99">door_secret_use</a>(<span class="keyword">self</span>, attacker, attacker);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;}</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160; </div>
<div class="line"><a name="l01855"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#a3b19c5d8ee35a82f1637d2543bbd68d1"> 1855</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a3b19c5d8ee35a82f1637d2543bbd68d1">SP_func_door_secret</a>(edict_t *ent)</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;{</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    vec3_t  <a class="code" href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, <a class="code" href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a>, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordtype">float</span>   side;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordtype">float</span>   <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordtype">float</span>   length;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160; </div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    ent-&gt;moveinfo.sound_start = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_strt.wav&quot;</span>);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    ent-&gt;moveinfo.sound_middle = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_mid.wav&quot;</span>);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    ent-&gt;moveinfo.sound_end = <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;doors/dr1_end.wav&quot;</span>);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    ent-&gt;movetype = <a class="code" href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a>;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    ent-&gt;solid = SOLID_BSP;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(ent, ent-&gt;model);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    ent-&gt;blocked = <a class="code" href="../../d3/dba/g__func_8c.html#ab4c48e9360f01c7003a74e5eead64210">door_secret_blocked</a>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    ent-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#ae84df523e30cd03ee2fd4bbddf90ff99">door_secret_use</a>;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">if</span> (!(ent-&gt;targetname) || (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#ab7124711cadd6b2d1d757d471285e6a1">SECRET_ALWAYS_SHOOT</a>)) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        ent-&gt;health = 0;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        ent-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        ent-&gt;die = <a class="code" href="../../d3/dba/g__func_8c.html#add8f431aa9360f8631a3aff15907bf3d">door_secret_die</a>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;dmg)</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        ent-&gt;dmg = 2;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160; </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">if</span> (!ent-&gt;wait)</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        ent-&gt;wait = 5;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    ent-&gt;moveinfo.accel =</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        ent-&gt;moveinfo.decel =</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            ent-&gt;moveinfo.speed = 50;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="comment">// calculate positions</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="../../d1/d8c/shared_8c.html#a2e5fea4a84281f9ee70628579750f9f1">AngleVectors</a>(ent-&gt;s.angles, <a class="code" href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, <a class="code" href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a>, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    VectorClear(ent-&gt;s.angles);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    side = 1.0 - (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#ac391d8e2a2e4055480e3c976b6e5554c">SECRET_1ST_LEFT</a>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a6c82f1b3aaafc87a2c2a20c5b36be43f">SECRET_1ST_DOWN</a>)</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = fabs(DotProduct(<a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>, ent-&gt;size));</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = fabs(DotProduct(<a class="code" href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a>, ent-&gt;size));</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    length = fabs(DotProduct(<a class="code" href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, ent-&gt;size));</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;spawnflags &amp; <a class="code" href="../../d3/dba/g__func_8c.html#a6c82f1b3aaafc87a2c2a20c5b36be43f">SECRET_1ST_DOWN</a>)</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        VectorMA(ent-&gt;s.origin, -1 * <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>, ent-&gt;pos1);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        VectorMA(ent-&gt;s.origin, side * <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, <a class="code" href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a>, ent-&gt;pos1);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    VectorMA(ent-&gt;pos1, length, <a class="code" href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, ent-&gt;pos2);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span> (ent-&gt;health) {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        ent-&gt;takedamage = <a class="code" href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a>;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        ent-&gt;die = <a class="code" href="../../d3/dba/g__func_8c.html#a5552641241de6ee37657f0f1daa80397">door_killed</a>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        ent-&gt;max_health = ent-&gt;health;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ent-&gt;targetname &amp;&amp; ent-&gt;message) {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.soundindex(<span class="stringliteral">&quot;misc/talk.wav&quot;</span>);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        ent-&gt;touch = <a class="code" href="../../d3/dba/g__func_8c.html#ae9e91c46cbf02fdad0c2500d26223cc0">door_touch</a>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    ent-&gt;classname = <span class="stringliteral">&quot;func_door&quot;</span>;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.linkentity(ent);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;}</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160; </div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment">/*QUAKED func_killbox (1 0 0) ?</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="comment">Kills everything inside when fired, irrespective of protection.</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"><a class="line" href="../../d3/dba/g__func_8c.html#a1601670da6575e6dd04cda4a36650767"> 1922</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#a1601670da6575e6dd04cda4a36650767">use_killbox</a>(edict_t *<span class="keyword">self</span>, edict_t *<a class="code" href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a>, edict_t *activator)</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;{</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a3bd09273cd6ae58036e21c68669606af">KillBox</a>(<span class="keyword">self</span>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;}</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"><a class="line" href="../../d7/d90/g__spawn_8c.html#afdc1d9ae0e1e251a6807d20658a39797"> 1927</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d3/dba/g__func_8c.html#afdc1d9ae0e1e251a6807d20658a39797">SP_func_killbox</a>(edict_t *ent)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;{</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <a class="code" href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a>.setmodel(ent, ent-&gt;model);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    ent-&gt;use = <a class="code" href="../../d3/dba/g__func_8c.html#a1601670da6575e6dd04cda4a36650767">use_killbox</a>;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    ent-&gt;svflags = SVF_NOCLIENT;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;}</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="ag__local_8h_html_a89b79a922ac418bdc9dd2a4e08ffc738"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a89b79a922ac418bdc9dd2a4e08ffc738">gi</a></div><div class="ttdeci">game_import_t gi</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/g__main_8c_source.html#l00023">g_main.c:23</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_a4393cd99f352e38f1b83b2705ae44185"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#a4393cd99f352e38f1b83b2705ae44185">moveinfo_t::decel</a></div><div class="ttdeci">float decel</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00377">g_local.h:377</a></div></div>
<div class="ttc" id="ag__func_8c_html_a8bd5958ed04d45c93f55851400763c70"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a8bd5958ed04d45c93f55851400763c70">train_use</a></div><div class="ttdeci">void train_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01544">g_func.c:1544</a></div></div>
<div class="ttc" id="ag__func_8c_html_aaf3ba5108f542bf5df7da387ce9fe51e"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#aaf3ba5108f542bf5df7da387ce9fe51e">SP_func_train</a></div><div class="ttdeci">void SP_func_train(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01562">g_func.c:1562</a></div></div>
<div class="ttc" id="ag__func_8c_html_a7291a46362d4f7600f34426da4dc94f8"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a7291a46362d4f7600f34426da4dc94f8">func_train_find</a></div><div class="ttdeci">void func_train_find(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01515">g_func.c:1515</a></div></div>
<div class="ttc" id="ag__local_8h_html_abbf7988b43f57e08d7380563f07d2089"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#abbf7988b43f57e08d7380563f07d2089">deathmatch</a></div><div class="ttdeci">cvar_t * deathmatch</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/g__main_8c_source.html#l00033">g_main.c:33</a></div></div>
<div class="ttc" id="ag__func_8c_html_a4cedaabf0659d3ffc0a98af35dca02a5"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a4cedaabf0659d3ffc0a98af35dca02a5">Think_AccelMove</a></div><div class="ttdeci">void Think_AccelMove(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00312">g_func.c:312</a></div></div>
<div class="ttc" id="ag__func_8c_html_a985f696784a871ccc82e52ed25be5075"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a985f696784a871ccc82e52ed25be5075">button_use</a></div><div class="ttdeci">void button_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00700">g_func.c:700</a></div></div>
<div class="ttc" id="ag__func_8c_html_a6fce7a790aed32664c309677dfd6c5a3"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a6fce7a790aed32664c309677dfd6c5a3">DOOR_Y_AXIS</a></div><div class="ttdeci">#define DOOR_Y_AXIS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00067">g_func.c:67</a></div></div>
<div class="ttc" id="ag__func_8c_html_a9a75d9b6e545f248c011126a2eacd0d6"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a9a75d9b6e545f248c011126a2eacd0d6">door_go_up</a></div><div class="ttdeci">void door_go_up(edict_t *self, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00875">g_func.c:875</a></div></div>
<div class="ttc" id="ag__local_8h_html_a015feebdd0de52e2de27451c20f1bbf3"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a015feebdd0de52e2de27451c20f1bbf3">G_Spawn</a></div><div class="ttdeci">edict_t * G_Spawn(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da2/g__utils_8c_source.html#l00391">g_utils.c:391</a></div></div>
<div class="ttc" id="ag__func_8c_html_a1126736c2d10bfcc313f26bfecc495eb"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a1126736c2d10bfcc313f26bfecc495eb">door_secret_move3</a></div><div class="ttdeci">void door_secret_move3(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01798">g_func.c:1798</a></div></div>
<div class="ttc" id="ag__func_8c_html_a6e385f8c799897eec3c4038fb1fd41cf"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a6e385f8c799897eec3c4038fb1fd41cf">func_timer_think</a></div><div class="ttdeci">void func_timer_think(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01669">g_func.c:1669</a></div></div>
<div class="ttc" id="ag__func_8c_html_a8ab778296980c6f858f053322fd1628e"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a8ab778296980c6f858f053322fd1628e">func_conveyor_use</a></div><div class="ttdeci">void func_conveyor_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01720">g_func.c:1720</a></div></div>
<div class="ttc" id="ag__func_8c_html_a0499d1b8ed0857c1e8f1d51cc98749e8"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a0499d1b8ed0857c1e8f1d51cc98749e8">plat_go_down</a></div><div class="ttdeci">void plat_go_down(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00358">g_func.c:358</a></div></div>
<div class="ttc" id="ag__func_8c_html_a3534a701ac18c8b4d5ca139361a8e818"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a3534a701ac18c8b4d5ca139361a8e818">DOOR_NOMONSTER</a></div><div class="ttdeci">#define DOOR_NOMONSTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00064">g_func.c:64</a></div></div>
<div class="ttc" id="ag__func_8c_html_a3ae6dce04f25871530287556dd3363a7"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a3ae6dce04f25871530287556dd3363a7">button_killed</a></div><div class="ttdeci">void button_killed(edict_t *self, edict_t *inflictor, edict_t *attacker, int damage, vec3_t point)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00718">g_func.c:718</a></div></div>
<div class="ttc" id="ag__func_8c_html_aa38e4b66b2b99f0624cf8b048fe7340b"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#aa38e4b66b2b99f0624cf8b048fe7340b">Use_Plat</a></div><div class="ttdeci">void Use_Plat(edict_t *ent, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00400">g_func.c:400</a></div></div>
<div class="ttc" id="ag__local_8h_html_a2b6cf2480a4abe624921ca4d33b9d79b"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a2b6cf2480a4abe624921ca4d33b9d79b">FRAMETIME</a></div><div class="ttdeci">#define FRAMETIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00075">g_local.h:75</a></div></div>
<div class="ttc" id="ag__func_8c_html_add8f431aa9360f8631a3aff15907bf3d"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#add8f431aa9360f8631a3aff15907bf3d">door_secret_die</a></div><div class="ttdeci">void door_secret_die(edict_t *self, edict_t *inflictor, edict_t *attacker, int damage, vec3_t point)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01849">g_func.c:1849</a></div></div>
<div class="ttc" id="ag__func_8c_html_a3761ac3635aed26caa2b7a5d164dfede"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a3761ac3635aed26caa2b7a5d164dfede">SP_func_timer</a></div><div class="ttdeci">void SP_func_timer(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01692">g_func.c:1692</a></div></div>
<div class="ttc" id="ag__func_8c_html_a48ba534ce2ebb159eb37e0314599ce14"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a48ba534ce2ebb159eb37e0314599ce14">door_secret_move2</a></div><div class="ttdeci">void door_secret_move2(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01793">g_func.c:1793</a></div></div>
<div class="ttc" id="ag__func_8c_html_a8a1b6133360551cefc641a0c631396a8"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a8a1b6133360551cefc641a0c631396a8">plat_Accelerate</a></div><div class="ttdeci">void plat_Accelerate(moveinfo_t *moveinfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00246">g_func.c:246</a></div></div>
<div class="ttc" id="ag__local_8h_html_aa5981e9f07eeef1b61659d64e9cfd06d"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#aa5981e9f07eeef1b61659d64e9cfd06d">st</a></div><div class="ttdeci">spawn_temp_t st</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/g__main_8c_source.html#l00025">g_main.c:25</a></div></div>
<div class="ttc" id="ag__local_8h_html_aab1ec568f7e4eb7e6f8905da528f4698ae881188096af003ed4876afb5dc7a1cb"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698ae881188096af003ed4876afb5dc7a1cb">MOVETYPE_STOP</a></div><div class="ttdeci">@ MOVETYPE_STOP</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00189">g_local.h:189</a></div></div>
<div class="ttc" id="ag__func_8c_html_ac0539eb2fe0ccf6dba60315d5fa60212"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ac0539eb2fe0ccf6dba60315d5fa60212">plat_blocked</a></div><div class="ttdeci">void plat_blocked(edict_t *self, edict_t *other)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00380">g_func.c:380</a></div></div>
<div class="ttc" id="ag__func_8c_html_ae9ca1adcea9b96655089c877fe9287b6"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ae9ca1adcea9b96655089c877fe9287b6">plat_CalcAcceleratedMove</a></div><div class="ttdeci">void plat_CalcAcceleratedMove(moveinfo_t *moveinfo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00220">g_func.c:220</a></div></div>
<div class="ttc" id="ag__func_8c_html_a69ce19de49d6e70e2aa55aab06fd5b7a"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a69ce19de49d6e70e2aa55aab06fd5b7a">SP_func_rotating</a></div><div class="ttdeci">void SP_func_rotating(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00587">g_func.c:587</a></div></div>
<div class="ttc" id="ag__func_8c_html_ab01542df68d092620118f1b7bafa66d0"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ab01542df68d092620118f1b7bafa66d0">STATE_TOP</a></div><div class="ttdeci">#define STATE_TOP</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00056">g_func.c:56</a></div></div>
<div class="ttc" id="ag__func_8c_html_a7b1b00bad2faeff0bd4bde501216e8e4"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a7b1b00bad2faeff0bd4bde501216e8e4">rotating_touch</a></div><div class="ttdeci">void rotating_touch(edict_t *self, edict_t *other, cplane_t *plane, csurface_t *surf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00567">g_func.c:567</a></div></div>
<div class="ttc" id="ag__func_8c_html_a84c5eda4be1bbbed2e8f50d3afafc21a"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a84c5eda4be1bbbed2e8f50d3afafc21a">SP_func_door_rotating</a></div><div class="ttdeci">void SP_func_door_rotating(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01196">g_func.c:1196</a></div></div>
<div class="ttc" id="ag__local_8h_html_aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698a1bb6f359a943119e7d0b204aa2d51814">MOVETYPE_PUSH</a></div><div class="ttdeci">@ MOVETYPE_PUSH</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00188">g_local.h:188</a></div></div>
<div class="ttc" id="ag__local_8h_html_a13a8d774b3e04e014a6287195a4cb463"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a13a8d774b3e04e014a6287195a4cb463">G_Find</a></div><div class="ttdeci">edict_t * G_Find(edict_t *from, int fieldofs, char *match)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da2/g__utils_8c_source.html#l00043">g_utils.c:43</a></div></div>
<div class="ttc" id="ag__local_8h_html_a90cef4f9dc98d775fb36b3f2e34eb8c7"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a90cef4f9dc98d775fb36b3f2e34eb8c7">BecomeExplosion1</a></div><div class="ttdeci">void BecomeExplosion1(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6b/g__misc_8c_source.html#l00297">g_misc.c:297</a></div></div>
<div class="ttc" id="ag__func_8c_html_a96eec13171bed6921d04767e7c5b7b81"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a96eec13171bed6921d04767e7c5b7b81">train_blocked</a></div><div class="ttdeci">void train_blocked(edict_t *self, edict_t *other)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01389">g_func.c:1389</a></div></div>
<div class="ttc" id="ag__func_8c_html_a9a179100e92e8af4165efd27acebf3e9"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a9a179100e92e8af4165efd27acebf3e9">rotating_use</a></div><div class="ttdeci">void rotating_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00573">g_func.c:573</a></div></div>
<div class="ttc" id="ag__local_8h_html_a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa7a8f18a5bcf9d8dfd197c1de1de95099">DAMAGE_YES</a></div><div class="ttdeci">@ DAMAGE_YES</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00088">g_local.h:88</a></div></div>
<div class="ttc" id="ag__func_8c_html_a289a7c3aacc0709e34f4bedff83bc1f9"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a289a7c3aacc0709e34f4bedff83bc1f9">Move_Calc</a></div><div class="ttdeci">void Move_Calc(edict_t *ent, vec3_t dest, void(*func)(edict_t *))</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00110">g_func.c:110</a></div></div>
<div class="ttc" id="ag__local_8h_html_aa3e9a7c87ce88e692ab719a4807ca8f0"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#aa3e9a7c87ce88e692ab719a4807ca8f0">FOFS</a></div><div class="ttdeci">#define FOFS(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00498">g_local.h:498</a></div></div>
<div class="ttc" id="ag__func_8c_html_abd82f951e1a54ee832f815d58b53b741"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#abd82f951e1a54ee832f815d58b53b741">PLAT_LOW_TRIGGER</a></div><div class="ttdeci">#define PLAT_LOW_TRIGGER</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00054">g_func.c:54</a></div></div>
<div class="ttc" id="ag__func_8c_html_a46e6f1cff17bfca07a9e33707c49b1af"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a46e6f1cff17bfca07a9e33707c49b1af">door_secret_move6</a></div><div class="ttdeci">void door_secret_move6(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01817">g_func.c:1817</a></div></div>
<div class="ttc" id="ag__func_8c_html_a8b056e165edd47a412c13d87082d0dc4"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a8b056e165edd47a412c13d87082d0dc4">DOOR_X_AXIS</a></div><div class="ttdeci">#define DOOR_X_AXIS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00066">g_func.c:66</a></div></div>
<div class="ttc" id="ag__func_8c_html_a858b5b02986dd522b38af181ec2f8fbf"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a858b5b02986dd522b38af181ec2f8fbf">door_use</a></div><div class="ttdeci">void door_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00902">g_func.c:902</a></div></div>
<div class="ttc" id="ag__func_8c_html_a3b19c5d8ee35a82f1637d2543bbd68d1"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a3b19c5d8ee35a82f1637d2543bbd68d1">SP_func_door_secret</a></div><div class="ttdeci">void SP_func_door_secret(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01855">g_func.c:1855</a></div></div>
<div class="ttc" id="ag__combat_8c_html_a7673840283fd7ed561f9b7a7447efcaa"><div class="ttname"><a href="../../d5/df5/g__combat_8c.html#a7673840283fd7ed561f9b7a7447efcaa">T_Damage</a></div><div class="ttdeci">void T_Damage(edict_t *targ, edict_t *inflictor, edict_t *attacker, vec3_t dir, vec3_t point, vec3_t normal, int damage, int knockback, int dflags, int mod)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/df5/g__combat_8c_source.html#l00358">g_combat.c:358</a></div></div>
<div class="ttc" id="aogg_8c_html_a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025"><div class="ttname"><a href="../../dc/d5b/ogg_8c.html#a86864855734edb7b2cb1efdc7a03fd57a7e338ad381a84ef6df07e7d425707025">other</a></div><div class="ttdeci">@ other</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5b/ogg_8c_source.html#l00063">ogg.c:63</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_ae81298d0486e5a64bae041301c9ef798"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#ae81298d0486e5a64bae041301c9ef798">moveinfo_t::decel_distance</a></div><div class="ttdeci">float decel_distance</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00389">g_local.h:389</a></div></div>
<div class="ttc" id="ag__func_8c_html_a7a12c48614bbcf6ce32b5a64816c46f9"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a7a12c48614bbcf6ce32b5a64816c46f9">button_return</a></div><div class="ttdeci">void button_return(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00663">g_func.c:663</a></div></div>
<div class="ttc" id="ag__func_8c_html_a84a9ef7b881e0132a87699dd2a4637bc"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a84a9ef7b881e0132a87699dd2a4637bc">door_secret_move4</a></div><div class="ttdeci">void door_secret_move4(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01806">g_func.c:1806</a></div></div>
<div class="ttc" id="ag__func_8c_html_aff33cfdd4a864efe3ae153a1621bfc1f"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#aff33cfdd4a864efe3ae153a1621bfc1f">TRAIN_BLOCK_STOPS</a></div><div class="ttdeci">#define TRAIN_BLOCK_STOPS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01375">g_func.c:1375</a></div></div>
<div class="ttc" id="ag__func_8c_html_ab7da5464e9ef0b53637c66501e6d67b7"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ab7da5464e9ef0b53637c66501e6d67b7">button_touch</a></div><div class="ttdeci">void button_touch(edict_t *self, edict_t *other, cplane_t *plane, csurface_t *surf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00706">g_func.c:706</a></div></div>
<div class="ttc" id="ag__func_8c_html_acc235bf83a0779b96d9b0f4990fc81d1"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#acc235bf83a0779b96d9b0f4990fc81d1">train_next</a></div><div class="ttdeci">void train_next(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01448">g_func.c:1448</a></div></div>
<div class="ttc" id="ag__func_8c_html_a3a4e9f02b97a667e00296da81a2127cf"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a3a4e9f02b97a667e00296da81a2127cf">train_wait</a></div><div class="ttdeci">void train_wait(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01409">g_func.c:1409</a></div></div>
<div class="ttc" id="astructlevel__locals__t_html_a64a7d7d74b91b4937d962e01b0b10484"><div class="ttname"><a href="../../d4/d71/structlevel__locals__t.html#a64a7d7d74b91b4937d962e01b0b10484">level_locals_t::current_entity</a></div><div class="ttdeci">edict_t * current_entity</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00332">g_local.h:332</a></div></div>
<div class="ttc" id="ag__func_8c_html_a21bd5a39761ef958b6e9bebc799e5bf2"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a21bd5a39761ef958b6e9bebc799e5bf2">button_fire</a></div><div class="ttdeci">void button_fire(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00689">g_func.c:689</a></div></div>
<div class="ttc" id="ag__func_8c_html_ac391d8e2a2e4055480e3c976b6e5554c"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ac391d8e2a2e4055480e3c976b6e5554c">SECRET_1ST_LEFT</a></div><div class="ttdeci">#define SECRET_1ST_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01766">g_func.c:1766</a></div></div>
<div class="ttc" id="ashared_8c_html_a3908446890b894f65fcd556040fddccc"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a></div><div class="ttdeci">vec3_t vec3_origin</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00021">shared.c:21</a></div></div>
<div class="ttc" id="ag__func_8c_html_a16aee7b54d541a57df858c817bf88bb8"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a16aee7b54d541a57df858c817bf88bb8">STATE_UP</a></div><div class="ttdeci">#define STATE_UP</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00058">g_func.c:58</a></div></div>
<div class="ttc" id="aphysical__sky_8c_html_a2474a5474cbff19523a51eb1de01cda4"><div class="ttname"><a href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a></div><div class="ttdeci">static int width</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d62/physical__sky_8c_source.html#l00038">physical_sky.c:38</a></div></div>
<div class="ttc" id="ag__func_8c_html_a33224c03f718d9b989661fbdef34c28f"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a33224c03f718d9b989661fbdef34c28f">button_done</a></div><div class="ttdeci">void button_done(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00656">g_func.c:656</a></div></div>
<div class="ttc" id="ag__func_8c_html_a3886253558017c2076bd70fb34c84203"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a3886253558017c2076bd70fb34c84203">plat_hit_bottom</a></div><div class="ttdeci">void plat_hit_bottom(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00348">g_func.c:348</a></div></div>
<div class="ttc" id="astructspawn__temp__t_html_acf372f5372a21aa5cd306f788141df5b"><div class="ttname"><a href="../../df/daa/structspawn__temp__t.html#acf372f5372a21aa5cd306f788141df5b">spawn_temp_t::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00351">g_local.h:351</a></div></div>
<div class="ttc" id="ag__func_8c_html_aee141056822251479ff9c5b80d28e3c4"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#aee141056822251479ff9c5b80d28e3c4">door_secret_done</a></div><div class="ttdeci">void door_secret_done(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01822">g_func.c:1822</a></div></div>
<div class="ttc" id="ag__func_8c_html_a32d15f1b6d540d245b032d946987e1de"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a32d15f1b6d540d245b032d946987e1de">DOOR_TOGGLE</a></div><div class="ttdeci">#define DOOR_TOGGLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00065">g_func.c:65</a></div></div>
<div class="ttc" id="ag__func_8c_html_ac95dd3a350a9cac0b4fcee5e4dc58e83"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ac95dd3a350a9cac0b4fcee5e4dc58e83">button_wait</a></div><div class="ttdeci">void button_wait(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00675">g_func.c:675</a></div></div>
<div class="ttc" id="ag__func_8c_html_acb7af4b4f035933bb6647987db40965d"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#acb7af4b4f035933bb6647987db40965d">TRAIN_START_ON</a></div><div class="ttdeci">#define TRAIN_START_ON</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01373">g_func.c:1373</a></div></div>
<div class="ttc" id="ag__local_8h_html_aab1ec568f7e4eb7e6f8905da528f4698aaeebbb5aa0b0d9b83afc5541ee902760"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#aab1ec568f7e4eb7e6f8905da528f4698aaeebbb5aa0b0d9b83afc5541ee902760">MOVETYPE_NONE</a></div><div class="ttdeci">@ MOVETYPE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00186">g_local.h:186</a></div></div>
<div class="ttc" id="ag__func_8c_html_a4c181667edc1cf01998d0f81fab81a30"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a4c181667edc1cf01998d0f81fab81a30">SP_func_water</a></div><div class="ttdeci">void SP_func_water(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01308">g_func.c:1308</a></div></div>
<div class="ttc" id="ag__func_8c_html_a1b0d680e2ddbe7cd8c81dcf327d3468c"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a1b0d680e2ddbe7cd8c81dcf327d3468c">trigger_elevator_use</a></div><div class="ttdeci">void trigger_elevator_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01603">g_func.c:1603</a></div></div>
<div class="ttc" id="ag__func_8c_html_a61949227102fcec1100473a31b1f488d"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a61949227102fcec1100473a31b1f488d">AngleMove_Calc</a></div><div class="ttdeci">void AngleMove_Calc(edict_t *ent, void(*func)(edict_t *))</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00197">g_func.c:197</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_a82c7e5b9784ea066616a6085438a5702"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#a82c7e5b9784ea066616a6085438a5702">moveinfo_t::remaining_distance</a></div><div class="ttdeci">float remaining_distance</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00388">g_local.h:388</a></div></div>
<div class="ttc" id="ag__func_8c_html_a6ca8f805663a914518ca24df7ff7e58f"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a6ca8f805663a914518ca24df7ff7e58f">door_use_areaportals</a></div><div class="ttdeci">void door_use_areaportals(edict_t *self, qboolean open)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00813">g_func.c:813</a></div></div>
<div class="ttc" id="ag__func_8c_html_a1601670da6575e6dd04cda4a36650767"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a1601670da6575e6dd04cda4a36650767">use_killbox</a></div><div class="ttdeci">void use_killbox(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01922">g_func.c:1922</a></div></div>
<div class="ttc" id="ag__func_8c_html_ac7030e9400bfcb47f2ecab061dc5653b"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ac7030e9400bfcb47f2ecab061dc5653b">rotating_blocked</a></div><div class="ttdeci">void rotating_blocked(edict_t *self, edict_t *other)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00562">g_func.c:562</a></div></div>
<div class="ttc" id="ap__view_8c_html_a6cb5d7464231c3110d95905fb7d83cc7"><div class="ttname"><a href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a></div><div class="ttdeci">static vec3_t forward</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d73/p__view_8c_source.html#l00027">p_view.c:27</a></div></div>
<div class="ttc" id="ag__local_8h_html_acc83e028b03f560add30623f3ab1dd0e"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#acc83e028b03f560add30623f3ab1dd0e">crandom</a></div><div class="ttdeci">#define crandom()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00505">g_local.h:505</a></div></div>
<div class="ttc" id="astructspawn__temp__t_html_a59652d0fe2b9e538a0632f6aea95d6a9"><div class="ttname"><a href="../../df/daa/structspawn__temp__t.html#a59652d0fe2b9e538a0632f6aea95d6a9">spawn_temp_t::lip</a></div><div class="ttdeci">int lip</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00349">g_local.h:349</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_a221833de9cc08fc598fb39e2cf381465"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#a221833de9cc08fc598fb39e2cf381465">moveinfo_t::move_speed</a></div><div class="ttdeci">float move_speed</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00386">g_local.h:386</a></div></div>
<div class="ttc" id="ag__func_8c_html_a2d4d7ca6b1401ac98ccd31a26e900912"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a2d4d7ca6b1401ac98ccd31a26e900912">door_go_down</a></div><div class="ttdeci">void door_go_down(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00856">g_func.c:856</a></div></div>
<div class="ttc" id="ag__local_8h_html_a97f5ab73714caeeeb9d3a832d32152ab"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a97f5ab73714caeeeb9d3a832d32152ab">vtos</a></div><div class="ttdeci">char * vtos(vec3_t v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da2/g__utils_8c_source.html#l00275">g_utils.c:275</a></div></div>
<div class="ttc" id="ag__func_8c_html_a7d485ea16647d3bb7691188e29779975"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a7d485ea16647d3bb7691188e29779975">STATE_DOWN</a></div><div class="ttdeci">#define STATE_DOWN</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00059">g_func.c:59</a></div></div>
<div class="ttc" id="ag__func_8c_html_a9ab27667f4fcf00c8337688d0bb7f8ee"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a9ab27667f4fcf00c8337688d0bb7f8ee">door_secret_move5</a></div><div class="ttdeci">void door_secret_move5(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01811">g_func.c:1811</a></div></div>
<div class="ttc" id="ashared_8c_html_a2e5fea4a84281f9ee70628579750f9f1"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a2e5fea4a84281f9ee70628579750f9f1">AngleVectors</a></div><div class="ttdeci">void AngleVectors(vec3_t angles, vec3_t forward, vec3_t right, vec3_t up)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00023">shared.c:23</a></div></div>
<div class="ttc" id="ag__local_8h_html_a3450984d0264027f50de3418af4a144fa66fc22ef8afa03edeb87b5ae530c6e39"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a3450984d0264027f50de3418af4a144fa66fc22ef8afa03edeb87b5ae530c6e39">DAMAGE_NO</a></div><div class="ttdeci">@ DAMAGE_NO</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00087">g_local.h:87</a></div></div>
<div class="ttc" id="ag__func_8c_html_a632d8a0964339a802796a02cf234322f"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a632d8a0964339a802796a02cf234322f">SP_func_door</a></div><div class="ttdeci">void SP_func_door(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01078">g_func.c:1078</a></div></div>
<div class="ttc" id="ag__func_8c_html_a34aeb98f8f6f622e68570d288dd60a7b"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a34aeb98f8f6f622e68570d288dd60a7b">Touch_DoorTrigger</a></div><div class="ttdeci">void Touch_DoorTrigger(edict_t *self, edict_t *other, cplane_t *plane, csurface_t *surf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00929">g_func.c:929</a></div></div>
<div class="ttc" id="ag__func_8c_html_a35d163dd060623b081709a352a3536a2"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a35d163dd060623b081709a352a3536a2">DOOR_CRUSHER</a></div><div class="ttdeci">#define DOOR_CRUSHER</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00063">g_func.c:63</a></div></div>
<div class="ttc" id="ag__func_8c_html_a17b6b8ad3559c7e17e24dcd58c65a5cb"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a17b6b8ad3559c7e17e24dcd58c65a5cb">AngleMove_Final</a></div><div class="ttdeci">void AngleMove_Final(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00143">g_func.c:143</a></div></div>
<div class="ttc" id="ag__func_8c_html_ae48b2e74823b752a579823ca7c951fa8"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ae48b2e74823b752a579823ca7c951fa8">TRAIN_TOGGLE</a></div><div class="ttdeci">#define TRAIN_TOGGLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01374">g_func.c:1374</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_a50c61dbdca14ec95989dcecc7b81aa00"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#a50c61dbdca14ec95989dcecc7b81aa00">moveinfo_t::current_speed</a></div><div class="ttdeci">float current_speed</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00385">g_local.h:385</a></div></div>
<div class="ttc" id="ag__func_8c_html_a6b1c545c5d4bfcdee3d65d5b9a12b650"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a6b1c545c5d4bfcdee3d65d5b9a12b650">Move_Begin</a></div><div class="ttdeci">void Move_Begin(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00093">g_func.c:93</a></div></div>
<div class="ttc" id="ag__func_8c_html_ab4c48e9360f01c7003a74e5eead64210"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ab4c48e9360f01c7003a74e5eead64210">door_secret_blocked</a></div><div class="ttdeci">void door_secret_blocked(edict_t *self, edict_t *other)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01831">g_func.c:1831</a></div></div>
<div class="ttc" id="ag__func_8c_html_adac404a9b60c1e7672719ec800a5db9e"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#adac404a9b60c1e7672719ec800a5db9e">SP_func_button</a></div><div class="ttdeci">void SP_func_button(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00726">g_func.c:726</a></div></div>
<div class="ttc" id="ag__func_8c_html_a54a4045bb90d63dad46f1a3e110ab882"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a54a4045bb90d63dad46f1a3e110ab882">Think_SpawnDoorTrigger</a></div><div class="ttdeci">void Think_SpawnDoorTrigger(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00985">g_func.c:985</a></div></div>
<div class="ttc" id="ag__func_8c_html_ab06304e23dae22a7538a45135de4557d"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ab06304e23dae22a7538a45135de4557d">DOOR_REVERSE</a></div><div class="ttdeci">#define DOOR_REVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00062">g_func.c:62</a></div></div>
<div class="ttc" id="ag__func_8c_html_a13f26ac13c511db9d9439431a8d323eb"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a13f26ac13c511db9d9439431a8d323eb">door_blocked</a></div><div class="ttdeci">void door_blocked(edict_t *self, edict_t *other)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01022">g_func.c:1022</a></div></div>
<div class="ttc" id="ag__func_8c_html_a097bd1723a3bca389787abcb31828379"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a097bd1723a3bca389787abcb31828379">AngleMove_Begin</a></div><div class="ttdeci">void AngleMove_Begin(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00163">g_func.c:163</a></div></div>
<div class="ttc" id="ag__func_8c_html_a5552641241de6ee37657f0f1daa80397"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a5552641241de6ee37657f0f1daa80397">door_killed</a></div><div class="ttdeci">void door_killed(edict_t *self, edict_t *inflictor, edict_t *attacker, int damage, vec3_t point)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01054">g_func.c:1054</a></div></div>
<div class="ttc" id="ag__func_8c_html_a176d53b8294384204a5db32620d88bb0"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a176d53b8294384204a5db32620d88bb0">door_hit_top</a></div><div class="ttdeci">void door_hit_top(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00829">g_func.c:829</a></div></div>
<div class="ttc" id="ag__func_8c_html_a6e32ae8c8e9cb2f319cce31009c26140"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a6e32ae8c8e9cb2f319cce31009c26140">SP_trigger_elevator</a></div><div class="ttdeci">void SP_trigger_elevator(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01648">g_func.c:1648</a></div></div>
<div class="ttc" id="ag__local_8h_html_a5250bdbc859437f6e983fced2db63f68"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a5250bdbc859437f6e983fced2db63f68">MOD_CRUSH</a></div><div class="ttdeci">#define MOD_CRUSH</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00477">g_local.h:477</a></div></div>
<div class="ttc" id="ag__func_8c_html_a299c0a1db834d131aef0f27c4a76fb54"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a299c0a1db834d131aef0f27c4a76fb54">DOOR_START_OPEN</a></div><div class="ttdeci">#define DOOR_START_OPEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00061">g_func.c:61</a></div></div>
<div class="ttc" id="ag__func_8c_html_abdf1aa86db04b7df918eff5089db0ab5"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#abdf1aa86db04b7df918eff5089db0ab5">STATE_BOTTOM</a></div><div class="ttdeci">#define STATE_BOTTOM</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00057">g_func.c:57</a></div></div>
<div class="ttc" id="ag__func_8c_html_ae84df523e30cd03ee2fd4bbddf90ff99"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ae84df523e30cd03ee2fd4bbddf90ff99">door_secret_use</a></div><div class="ttdeci">void door_secret_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01777">g_func.c:1777</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_aac4bfbe1519cd4235b5c407bc05e1654"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#aac4bfbe1519cd4235b5c407bc05e1654">moveinfo_t::next_speed</a></div><div class="ttdeci">float next_speed</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00387">g_local.h:387</a></div></div>
<div class="ttc" id="astructlevel__locals__t_html_a7ddd1cd53d5b048ebe6dc6a243e104f1"><div class="ttname"><a href="../../d4/d71/structlevel__locals__t.html#a7ddd1cd53d5b048ebe6dc6a243e104f1">level_locals_t::time</a></div><div class="ttdeci">float time</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00299">g_local.h:299</a></div></div>
<div class="ttc" id="ag__func_8c_html_a7c610de2101c3b3aa67b4ed39e6f02ca"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a7c610de2101c3b3aa67b4ed39e6f02ca">plat_go_up</a></div><div class="ttdeci">void plat_go_up(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00369">g_func.c:369</a></div></div>
<div class="ttc" id="ag__func_8c_html_ab7124711cadd6b2d1d757d471285e6a1"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ab7124711cadd6b2d1d757d471285e6a1">SECRET_ALWAYS_SHOOT</a></div><div class="ttdeci">#define SECRET_ALWAYS_SHOOT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01765">g_func.c:1765</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html">moveinfo_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00364">g_local.h:364</a></div></div>
<div class="ttc" id="ag__func_8c_html_a92f3e22d78c71d9d6ce4c39a70686495"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a92f3e22d78c71d9d6ce4c39a70686495">AccelerationDistance</a></div><div class="ttdeci">#define AccelerationDistance(target, rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00218">g_func.c:218</a></div></div>
<div class="ttc" id="ag__func_8c_html_a236d7661b0cd5c0f52c1d3d73328509c"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a236d7661b0cd5c0f52c1d3d73328509c">Move_Final</a></div><div class="ttdeci">void Move_Final(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00080">g_func.c:80</a></div></div>
<div class="ttc" id="ag__func_8c_html_a05cbbe0330b030f03f671beb7e90ac84"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a05cbbe0330b030f03f671beb7e90ac84">SP_func_conveyor</a></div><div class="ttdeci">void SP_func_conveyor(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01734">g_func.c:1734</a></div></div>
<div class="ttc" id="ap__view_8c_html_adf3413f94f96a6089d7f6c71f33ac347"><div class="ttname"><a href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a></div><div class="ttdeci">static vec3_t up</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d73/p__view_8c_source.html#l00027">p_view.c:27</a></div></div>
<div class="ttc" id="ag__func_8c_html_a8408bdd8e9207aebc302d6dba10dcf9c"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a8408bdd8e9207aebc302d6dba10dcf9c">Think_CalcMoveSpeed</a></div><div class="ttdeci">void Think_CalcMoveSpeed(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00947">g_func.c:947</a></div></div>
<div class="ttc" id="ap__view_8c_html_aa462954db5cc506fabe811dc11b3e1a4"><div class="ttname"><a href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a></div><div class="ttdeci">static vec3_t right</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d73/p__view_8c_source.html#l00027">p_view.c:27</a></div></div>
<div class="ttc" id="ag__local_8h_html_a16b9e448cb92a3ab8758108d64b6095b"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a16b9e448cb92a3ab8758108d64b6095b">G_UseTargets</a></div><div class="ttdeci">void G_UseTargets(edict_t *ent, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da2/g__utils_8c_source.html#l00166">g_utils.c:166</a></div></div>
<div class="ttc" id="ag__func_8c_html_afdc1d9ae0e1e251a6807d20658a39797"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#afdc1d9ae0e1e251a6807d20658a39797">SP_func_killbox</a></div><div class="ttdeci">void SP_func_killbox(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01927">g_func.c:1927</a></div></div>
<div class="ttc" id="ag__local_8h_html_a41133ff5ef4bc70c86c68477573292d3"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a41133ff5ef4bc70c86c68477573292d3">FL_TEAMSLAVE</a></div><div class="ttdeci">#define FL_TEAMSLAVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00069">g_local.h:69</a></div></div>
<div class="ttc" id="ag__local_8h_html_a368770cadef7c57475ca4f3aabff42c0"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a368770cadef7c57475ca4f3aabff42c0">level</a></div><div class="ttdeci">level_locals_t level</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/g__main_8c_source.html#l00022">g_main.c:22</a></div></div>
<div class="ttc" id="ag__func_8c_html_a6c82f1b3aaafc87a2c2a20c5b36be43f"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a6c82f1b3aaafc87a2c2a20c5b36be43f">SECRET_1ST_DOWN</a></div><div class="ttdeci">#define SECRET_1ST_DOWN</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01767">g_func.c:1767</a></div></div>
<div class="ttc" id="astructspawn__temp__t_html_ad943f311b0181b9a7710c08afc2632ec"><div class="ttname"><a href="../../df/daa/structspawn__temp__t.html#ad943f311b0181b9a7710c08afc2632ec">spawn_temp_t::distance</a></div><div class="ttdeci">int distance</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00350">g_local.h:350</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_a2179910291144355488f61f9a07733b4"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#a2179910291144355488f61f9a07733b4">moveinfo_t::accel</a></div><div class="ttdeci">float accel</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00375">g_local.h:375</a></div></div>
<div class="ttc" id="ag__func_8c_html_ae9e91c46cbf02fdad0c2500d26223cc0"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ae9e91c46cbf02fdad0c2500d26223cc0">door_touch</a></div><div class="ttdeci">void door_touch(edict_t *self, edict_t *other, cplane_t *plane, csurface_t *surf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01065">g_func.c:1065</a></div></div>
<div class="ttc" id="ag__local_8h_html_a8966a3677c9152f498a5c9a18f915ae3"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a8966a3677c9152f498a5c9a18f915ae3">G_SetMovedir</a></div><div class="ttdeci">void G_SetMovedir(vec3_t angles, vec3_t movedir)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da2/g__utils_8c_source.html#l00296">g_utils.c:296</a></div></div>
<div class="ttc" id="ag__local_8h_html_a3bd09273cd6ae58036e21c68669606af"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#a3bd09273cd6ae58036e21c68669606af">KillBox</a></div><div class="ttdeci">qboolean KillBox(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da2/g__utils_8c_source.html#l00515">g_utils.c:515</a></div></div>
<div class="ttc" id="ag__func_8c_html_aed79bcdb7098da2d40d6a9d03b52ef9e"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#aed79bcdb7098da2d40d6a9d03b52ef9e">AngleMove_Done</a></div><div class="ttdeci">void AngleMove_Done(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00137">g_func.c:137</a></div></div>
<div class="ttc" id="ag__func_8c_html_a429dbc80685c85ca2c8b226ca8102f38"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a429dbc80685c85ca2c8b226ca8102f38">func_timer_use</a></div><div class="ttdeci">void func_timer_use(edict_t *self, edict_t *other, edict_t *activator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01675">g_func.c:1675</a></div></div>
<div class="ttc" id="ag__func_8c_html_a3535e5e840e122c7ac8403a62835702d"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a3535e5e840e122c7ac8403a62835702d">SP_func_plat</a></div><div class="ttdeci">void SP_func_plat(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00483">g_func.c:483</a></div></div>
<div class="ttc" id="ag__func_8c_html_a61f35a326df17b42737b6357d8c379d2"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a61f35a326df17b42737b6357d8c379d2">plat_spawn_inside_trigger</a></div><div class="ttdeci">void plat_spawn_inside_trigger(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00423">g_func.c:423</a></div></div>
<div class="ttc" id="ag__func_8c_html_aec42a035791b31588651c3455a873bb1"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#aec42a035791b31588651c3455a873bb1">Touch_Plat_Center</a></div><div class="ttdeci">void Touch_Plat_Center(edict_t *ent, edict_t *other, cplane_t *plane, csurface_t *surf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00408">g_func.c:408</a></div></div>
<div class="ttc" id="ag__func_8c_html_a986869b3e86d9617c55bbc2b512538cb"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a986869b3e86d9617c55bbc2b512538cb">train_resume</a></div><div class="ttdeci">void train_resume(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01500">g_func.c:1500</a></div></div>
<div class="ttc" id="astructspawn__temp__t_html_ac72450475105982eb605aab62b187e15"><div class="ttname"><a href="../../df/daa/structspawn__temp__t.html#ac72450475105982eb605aab62b187e15">spawn_temp_t::noise</a></div><div class="ttdeci">char * noise</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00352">g_local.h:352</a></div></div>
<div class="ttc" id="ag__local_8h_html_af86dbca2f65c89053dd7a04a97ac56f2"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html#af86dbca2f65c89053dd7a04a97ac56f2">G_PickTarget</a></div><div class="ttdeci">edict_t * G_PickTarget(char *targetname)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da2/g__utils_8c_source.html#l00114">g_utils.c:114</a></div></div>
<div class="ttc" id="astructspawn__temp__t_html_af90dee98cb26a17488d024c03f1336f1"><div class="ttname"><a href="../../df/daa/structspawn__temp__t.html#af90dee98cb26a17488d024c03f1336f1">spawn_temp_t::pausetime</a></div><div class="ttdeci">float pausetime</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00353">g_local.h:353</a></div></div>
<div class="ttc" id="ashared_8c_html_a26718fcd5642348914fa0bd49d19694c"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a></div><div class="ttdeci">vec_t VectorNormalize(vec3_t v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00055">shared.c:55</a></div></div>
<div class="ttc" id="ashared_8c_html_ac3a35569efc78e94c5676b07142b48b9"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#ac3a35569efc78e94c5676b07142b48b9">AddPointToBounds</a></div><div class="ttdeci">void AddPointToBounds(const vec3_t v, vec3_t mins, vec3_t maxs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00097">shared.c:97</a></div></div>
<div class="ttc" id="ag__func_8c_html_a57c007a2ae5805d9d2e2659add650bb2"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a57c007a2ae5805d9d2e2659add650bb2">door_secret_move1</a></div><div class="ttdeci">void door_secret_move1(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01787">g_func.c:1787</a></div></div>
<div class="ttc" id="ag__func_8c_html_ad7a416d602674d801bef8a606777aa31"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ad7a416d602674d801bef8a606777aa31">door_hit_bottom</a></div><div class="ttdeci">void door_hit_bottom(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00845">g_func.c:845</a></div></div>
<div class="ttc" id="ag__func_8c_html_afd419f5ca5bd5d3d303ce631a322a931"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#afd419f5ca5bd5d3d303ce631a322a931">trigger_elevator_init</a></div><div class="ttdeci">void trigger_elevator_init(edict_t *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l01627">g_func.c:1627</a></div></div>
<div class="ttc" id="ag__func_8c_html_a2b621eb0fa06d335ac4ffe1e0c59d0c4"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#a2b621eb0fa06d335ac4ffe1e0c59d0c4">Move_Done</a></div><div class="ttdeci">void Move_Done(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00074">g_func.c:74</a></div></div>
<div class="ttc" id="astructmoveinfo__t_html_abd4a3f07445cf0b9263c2499efa89b36"><div class="ttname"><a href="../../db/dd3/structmoveinfo__t.html#abd4a3f07445cf0b9263c2499efa89b36">moveinfo_t::speed</a></div><div class="ttdeci">float speed</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/ddf/g__local_8h_source.html#l00376">g_local.h:376</a></div></div>
<div class="ttc" id="ag__func_8c_html_ab381bca7b51d24f0e974d417efc354f0"><div class="ttname"><a href="../../d3/dba/g__func_8c.html#ab381bca7b51d24f0e974d417efc354f0">plat_hit_top</a></div><div class="ttdeci">void plat_hit_top(edict_t *ent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dba/g__func_8c_source.html#l00335">g_func.c:335</a></div></div>
<div class="ttc" id="ag__local_8h_html"><div class="ttname"><a href="../../d3/ddf/g__local_8h.html">g_local.h</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_b8b4cbcfacd7df1e2197e8f5bdbed3e8.html">baseq2</a></li><li class="navelem"><a class="el" href="../../d3/dba/g__func_8c.html">g_func.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
