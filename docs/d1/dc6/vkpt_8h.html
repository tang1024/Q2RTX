<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quake II RTX doxygen: C:/entry/dev/Q2RTX/src/refresh/vkpt/vkpt.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quake II RTX doxygen
   &#160;<span id="projectnumber">1.0 dev</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/dc6/vkpt_8h.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">vkpt.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;vulkan/vulkan.h&gt;</code><br />
<code>#include &lt;SDL.h&gt;</code><br />
<code>#include &lt;SDL_vulkan.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../db/d74/vk__util_8h_source.html">vk_util.h</a>&quot;</code><br />
<code>#include &quot;shared/shared.h&quot;</code><br />
<code>#include &quot;common/bsp.h&quot;</code><br />
<code>#include &quot;common/cmd.h&quot;</code><br />
<code>#include &quot;common/common.h&quot;</code><br />
<code>#include &quot;common/cvar.h&quot;</code><br />
<code>#include &quot;common/files.h&quot;</code><br />
<code>#include &quot;common/math.h&quot;</code><br />
<code>#include &quot;client/video.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/da6/client_2client_8h_source.html">client/client.h</a>&quot;</code><br />
<code>#include &quot;refresh/refresh.h&quot;</code><br />
<code>#include &quot;refresh/images.h&quot;</code><br />
<code>#include &quot;refresh/models.h&quot;</code><br />
<code>#include &quot;system/hunk.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/dc3/global__ubo_8h_source.html">shader/global_ubo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/dcb/global__textures_8h_source.html">shader/global_textures.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/dbd/vertex__buffer_8h_source.html">shader/vertex_buffer.h</a>&quot;</code><br />
</div>
<p><a href="../../d1/dc6/vkpt_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbd/structcmd__buf__group__s.html">cmd_buf_group_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d92/structsemaphore__group__s.html">semaphore_group_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc0/struct_q_v_k__s.html">QVK_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db6/structlight__poly__s.html">light_poly_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d96/structbsp__model__s.html">bsp_model_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d0f/structaabb__s.html">aabb_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d50/structbsp__mesh__s.html">bsp_mesh_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dbe/structvkpt__refdef__s.html">vkpt_refdef_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db8/structsun__light__s.html">sun_light_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dbb/struct_entity_upload_info.html">EntityUploadInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d28/structmaliasframe__s.html">maliasframe_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/structdraw_static__t.html">drawStatic_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9cea659d453d5784e606e0be9bb6a69e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a9cea659d453d5784e606e0be9bb6a69e">HAVE_M_PI</a></td></tr>
<tr class="separator:a9cea659d453d5784e606e0be9bb6a69e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e13d94164219be2d5bbd4d65e71d1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(a)&#160;&#160;&#160;((sizeof (a)) / (sizeof(*(a))))</td></tr>
<tr class="separator:ad0e13d94164219be2d5bbd4d65e71d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(a,  b)&#160;&#160;&#160;((a) &lt; (b) ? (a) : (b))</td></tr>
<tr class="separator:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(a,  b)&#160;&#160;&#160;((a) &gt; (b) ? (a) : (b))</td></tr>
<tr class="separator:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c8885743914feaca656e1922b9306ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3c8885743914feaca656e1922b9306ac">LOG_FUNC_</a>(f)&#160;&#160;&#160;do {} while(0)</td></tr>
<tr class="separator:a3c8885743914feaca656e1922b9306ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f77523e750336bbb5bfb0388321698"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>()&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#a3c8885743914feaca656e1922b9306ac">LOG_FUNC_</a>(__func__)</td></tr>
<tr class="separator:a06f77523e750336bbb5bfb0388321698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58206b954a876bae0077741e504e43a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(...)&#160;&#160;&#160;do { __VA_ARGS__; } while(0)</td></tr>
<tr class="separator:a58206b954a876bae0077741e504e43a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a077ffee32baed268bcfef6e7229edc8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a077ffee32baed268bcfef6e7229edc8a">LIST_SHADER_MODULES</a></td></tr>
<tr class="separator:a077ffee32baed268bcfef6e7229edc8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a157c0b66dbc33f42326cd98930b26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae3a157c0b66dbc33f42326cd98930b26">VKPT_SHADER_DIR</a>&#160;&#160;&#160;&quot;shader_vkpt&quot;</td></tr>
<tr class="separator:ae3a157c0b66dbc33f42326cd98930b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb80b64f42e0f2eac7a45ccb29eef509"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aeb80b64f42e0f2eac7a45ccb29eef509">SHADER_PATH_TEMPLATE</a>&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#ae3a157c0b66dbc33f42326cd98930b26">VKPT_SHADER_DIR</a> &quot;/%s.spv&quot;</td></tr>
<tr class="separator:aeb80b64f42e0f2eac7a45ccb29eef509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b06f72f273011df4be44d5e91ed5f56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(_module,  _stage)</td></tr>
<tr class="separator:a3b06f72f273011df4be44d5e91ed5f56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54c3d7413fd65d551b669669917bb5da"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(_module,  _stage,  _spec)</td></tr>
<tr class="separator:a54c3d7413fd65d551b669669917bb5da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78b1cda3a3279c325bf171d2969bf67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa78b1cda3a3279c325bf171d2969bf67">SHADER_MODULE_DO</a>(a)&#160;&#160;&#160;a,</td></tr>
<tr class="separator:aa78b1cda3a3279c325bf171d2969bf67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d3ea5135a58a3d5c7d802762e320ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a84d3ea5135a58a3d5c7d802762e320ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4100e20dd14fd59a62d54fcfe825cb03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a4100e20dd14fd59a62d54fcfe825cb03">MAX_SWAPCHAIN_IMAGES</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a4100e20dd14fd59a62d54fcfe825cb03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8590d531c9337d7210c0fb49bbcfec2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ab8590d531c9337d7210c0fb49bbcfec2">_VK_INST_EXTENSION_LIST</a></td></tr>
<tr class="separator:ab8590d531c9337d7210c0fb49bbcfec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb36cf8358ef83e30b84e09f160e649"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#acdb36cf8358ef83e30b84e09f160e649">_VK_INST_EXTENSION_DO</a>(a)&#160;&#160;&#160;extern PFN_##a q##a;</td></tr>
<tr class="separator:acdb36cf8358ef83e30b84e09f160e649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb83a01783d9186445b40c946865444f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#acb83a01783d9186445b40c946865444f">_VK_EXTENSION_LIST</a></td></tr>
<tr class="separator:acb83a01783d9186445b40c946865444f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43593b44eb7a13784e2802c7bcf56089"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a43593b44eb7a13784e2802c7bcf56089">_VK_EXTENSION_DO</a>(a)&#160;&#160;&#160;extern PFN_##a q##a;</td></tr>
<tr class="separator:a43593b44eb7a13784e2802c7bcf56089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1065319a1fc54bdfc21a8cf1fa14d1d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa1065319a1fc54bdfc21a8cf1fa14d1d">MAX_SKY_CLUSTERS</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:aa1065319a1fc54bdfc21a8cf1fa14d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6dfbd1e98c433910a0dc1b72602de80"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#af6dfbd1e98c433910a0dc1b72602de80">PROFILER_LIST</a></td></tr>
<tr class="separator:af6dfbd1e98c433910a0dc1b72602de80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae93e7ab74962fe2824b63f82027651b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae93e7ab74962fe2824b63f82027651b6">PROFILER_DO</a>(a, ...)&#160;&#160;&#160;a,</td></tr>
<tr class="separator:ae93e7ab74962fe2824b63f82027651b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7790096a7d0dd07c79f115b5cdb44589"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>&#160;&#160;&#160;(<a class="el" href="../../d1/dc6/vkpt_8h.html#a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0">NUM_PROFILER_ENTRIES</a> * 2)</td></tr>
<tr class="separator:a7790096a7d0dd07c79f115b5cdb44589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e6ee1dd5236b8a704d1b34806dfce1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>&#160;&#160;&#160;(-1)</td></tr>
<tr class="separator:a28e6ee1dd5236b8a704d1b34806dfce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25613ac436a01e19ed4e14039f50d4ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a25613ac436a01e19ed4e14039f50d4ac">TESS_MAX_VERTICES</a>&#160;&#160;&#160;16384</td></tr>
<tr class="separator:a25613ac436a01e19ed4e14039f50d4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40bd42d270cffe7e590392f64215712"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#af40bd42d270cffe7e590392f64215712">TESS_MAX_INDICES</a>&#160;&#160;&#160;(3 * <a class="el" href="../../d1/dc6/vkpt_8h.html#a25613ac436a01e19ed4e14039f50d4ac">TESS_MAX_VERTICES</a>)</td></tr>
<tr class="separator:af40bd42d270cffe7e590392f64215712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae2513c369860bb25b142022fc37c8bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aae2513c369860bb25b142022fc37c8bd">QGL_INDEX_TYPE</a>&#160;&#160;&#160;GLuint</td></tr>
<tr class="separator:aae2513c369860bb25b142022fc37c8bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c03862ea5c60519a427776e427962e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(command_buffer,  name)&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#a4ff9548b2af58b7744864f86b80ced42">begin_perf_marker</a>(command_buffer, name, #name)</td></tr>
<tr class="separator:ad0c03862ea5c60519a427776e427962e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae46cf020d62af6e335fb71e72a305157"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(command_buffer,  name)&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#af648dfb8c915a7c581b972f2701d1aa7">end_perf_marker</a>(command_buffer, name)</td></tr>
<tr class="separator:ae46cf020d62af6e335fb71e72a305157"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae9a208f6e66e95bd7be48d692ddefce5"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../db/dbd/structcmd__buf__group__s.html">cmd_buf_group_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a></td></tr>
<tr class="separator:ae9a208f6e66e95bd7be48d692ddefce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addaa8f06be66a85ec6fc2bc317bbd463"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../da/d92/structsemaphore__group__s.html">semaphore_group_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#addaa8f06be66a85ec6fc2bc317bbd463">semaphore_group_t</a></td></tr>
<tr class="separator:addaa8f06be66a85ec6fc2bc317bbd463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270e591c20257285ecaab65ba99b1723"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../de/dc0/struct_q_v_k__s.html">QVK_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a270e591c20257285ecaab65ba99b1723">QVK_t</a></td></tr>
<tr class="separator:a270e591c20257285ecaab65ba99b1723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e74bb8df0ff83444d9357cb56893f1"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d4/db6/structlight__poly__s.html">light_poly_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a></td></tr>
<tr class="separator:a21e74bb8df0ff83444d9357cb56893f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c9f4775529fa17468989f3b059f524"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../dc/d96/structbsp__model__s.html">bsp_model_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ab9c9f4775529fa17468989f3b059f524">bsp_model_t</a></td></tr>
<tr class="separator:ab9c9f4775529fa17468989f3b059f524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c59a878a5117a08032ceb85ae3bb8fd"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../dd/d0f/structaabb__s.html">aabb_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a8c59a878a5117a08032ceb85ae3bb8fd">aabb_t</a></td></tr>
<tr class="separator:a8c59a878a5117a08032ceb85ae3bb8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3409d334dedfd1f14090a9159e15e6b6"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../db/d50/structbsp__mesh__s.html">bsp_mesh_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a></td></tr>
<tr class="separator:a3409d334dedfd1f14090a9159e15e6b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0cb043a61bc534c6b84eabeba043df"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d1/dbe/structvkpt__refdef__s.html">vkpt_refdef_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#afc0cb043a61bc534c6b84eabeba043df">vkpt_refdef_t</a></td></tr>
<tr class="separator:afc0cb043a61bc534c6b84eabeba043df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03b78a9f5854e1c40560a96476cd8eb"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d4/db8/structsun__light__s.html">sun_light_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#af03b78a9f5854e1c40560a96476cd8eb">sun_light_t</a></td></tr>
<tr class="separator:af03b78a9f5854e1c40560a96476cd8eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a38413d52f61346e48ebd31b867a8b7"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d6/dbb/struct_entity_upload_info.html">EntityUploadInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7a38413d52f61346e48ebd31b867a8b7">EntityUploadInfo</a></td></tr>
<tr class="separator:a7a38413d52f61346e48ebd31b867a8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad8690b7c6d2fc35163d0df0e4ac2f49"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d0/d28/structmaliasframe__s.html">maliasframe_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aad8690b7c6d2fc35163d0df0e4ac2f49">maliasframe_t</a></td></tr>
<tr class="separator:aad8690b7c6d2fc35163d0df0e4ac2f49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b15f7cd2e78fe01cd8081bb032b194b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a6b15f7cd2e78fe01cd8081bb032b194b">maliasmesh_t</a></td></tr>
<tr class="separator:a6b15f7cd2e78fe01cd8081bb032b194b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad3dbfa0d6a5d2b34ab7a243e37345f67"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad3dbfa0d6a5d2b34ab7a243e37345f67">QVK_SHADER_MODULES</a> { <a class="el" href="../../d1/dc6/vkpt_8h.html#ad3dbfa0d6a5d2b34ab7a243e37345f67abaf776874815a3678e5b6b70fb683a9a">NUM_QVK_SHADER_MODULES</a>
 }</td></tr>
<tr class="separator:ad3dbfa0d6a5d2b34ab7a243e37345f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b7b47dd702d9e331586d485013fd1ea"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d1/dc6/vkpt_8h.html#a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0">NUM_PROFILER_ENTRIES</a>
 }</td></tr>
<tr class="separator:a6b7b47dd702d9e331586d485013fd1ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3182ad90ad3ba0cf65457c7384a9b3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3">VKPTProfilerAction</a> { <a class="el" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7ae30dcb3e2583d6fa680f087aed7781">PROFILER_START</a>, 
<a class="el" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7dda3ea083edad695232f7d2c30d7e77">PROFILER_STOP</a>
 }</td></tr>
<tr class="separator:a9f3182ad90ad3ba0cf65457c7384a9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a12814264db51b98dabe7b44fe5a684b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a12814264db51b98dabe7b44fe5a684b4">bsp_mesh_create_from_bsp</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *wm, bsp_t *bsp, const char *map_name)</td></tr>
<tr class="separator:a12814264db51b98dabe7b44fe5a684b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7446606a1b66213f41774c877fa39609"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7446606a1b66213f41774c877fa39609">bsp_mesh_destroy</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *wm)</td></tr>
<tr class="separator:a7446606a1b66213f41774c877fa39609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d36a4facff2ae7900172ce3cae1ff5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a69d36a4facff2ae7900172ce3cae1ff5">bsp_mesh_register_textures</a> (bsp_t *bsp)</td></tr>
<tr class="separator:a69d36a4facff2ae7900172ce3cae1ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa50601a67cbead379e68850f3d204f8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa50601a67cbead379e68850f3d204f8c">mult_matrix_matrix</a> (float *p, const float *a, const float *b)</td></tr>
<tr class="separator:aa50601a67cbead379e68850f3d204f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b6a46ad562be9e2457b2701a7c8d758"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a0b6a46ad562be9e2457b2701a7c8d758">mult_matrix_vector</a> (float *p, const float *a, const float *b)</td></tr>
<tr class="separator:a0b6a46ad562be9e2457b2701a7c8d758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfa622dc46f89c54083f9099f6901f0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#abfa622dc46f89c54083f9099f6901f0a">create_entity_matrix</a> (float matrix[16], entity_t *e, qboolean enable_left_hand)</td></tr>
<tr class="separator:abfa622dc46f89c54083f9099f6901f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c4528540d1571d245124dffc4f1e40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a29c4528540d1571d245124dffc4f1e40">create_projection_matrix</a> (float matrix[16], float znear, float zfar, float fov_x, float fov_y)</td></tr>
<tr class="separator:a29c4528540d1571d245124dffc4f1e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeabf42e3198031505b78b17d2aeffd8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aeabf42e3198031505b78b17d2aeffd8a">create_view_matrix</a> (float matrix[16], refdef_t *fd)</td></tr>
<tr class="separator:aeabf42e3198031505b78b17d2aeffd8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac908fa31b0f8b57d63adcdec6a49d44e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac908fa31b0f8b57d63adcdec6a49d44e">inverse</a> (const float *<a class="el" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>, float *inv)</td></tr>
<tr class="separator:ac908fa31b0f8b57d63adcdec6a49d44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a9045fcc3f820845ae78a1fd903ea7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae5a9045fcc3f820845ae78a1fd903ea7">create_orthographic_matrix</a> (float matrix[16], float xmin, float xmax, float ymin, float ymax, float znear, float zfar)</td></tr>
<tr class="separator:ae5a9045fcc3f820845ae78a1fd903ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d948e3619e90a2c2ddbd717e0c0a7e"><td class="memItemLeft" align="right" valign="top">VkDescriptorSet&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a> ()</td></tr>
<tr class="separator:af2d948e3619e90a2c2ddbd717e0c0a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa78152979581d3b5e56823f9d15dc73"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aaa78152979581d3b5e56823f9d15dc73">vkpt_profiler_initialize</a> ()</td></tr>
<tr class="separator:aaa78152979581d3b5e56823f9d15dc73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae37bd5149ebe12c33df8c5b5d37003a0"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae37bd5149ebe12c33df8c5b5d37003a0">vkpt_profiler_destroy</a> ()</td></tr>
<tr class="separator:ae37bd5149ebe12c33df8c5b5d37003a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa07bf23807800e110da5519e58bdfcc9"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa07bf23807800e110da5519e58bdfcc9">vkpt_profiler_query</a> (VkCommandBuffer cmd_buf, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> idx, <a class="el" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3">VKPTProfilerAction</a> action)</td></tr>
<tr class="separator:aa07bf23807800e110da5519e58bdfcc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee781e4948f9e38f07cba4ce1af39db0"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aee781e4948f9e38f07cba4ce1af39db0">vkpt_profiler_next_frame</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:aee781e4948f9e38f07cba4ce1af39db0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45bba9a99aeff4853a094ac93567c135"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a45bba9a99aeff4853a094ac93567c135">draw_profiler</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> enable_asvgf)</td></tr>
<tr class="separator:a45bba9a99aeff4853a094ac93567c135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2733c97ab8b32b7f5aa52a7dc913b28e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a2733c97ab8b32b7f5aa52a7dc913b28e">vkpt_get_profiler_result</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> idx)</td></tr>
<tr class="separator:a2733c97ab8b32b7f5aa52a7dc913b28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca07e6161780fd8552f4e74d6ee3392"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a9ca07e6161780fd8552f4e74d6ee3392">vkpt_readback</a> (struct <a class="el" href="../../df/d67/struct_readback_buffer.html">ReadbackBuffer</a> *dst)</td></tr>
<tr class="separator:a9ca07e6161780fd8552f4e74d6ee3392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1aba87f798f7e4b3acda4216e26dba7"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad1aba87f798f7e4b3acda4216e26dba7">vkpt_textures_initialize</a> ()</td></tr>
<tr class="separator:ad1aba87f798f7e4b3acda4216e26dba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef9aec7b26da74e1071f63ed59c6a61"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a0ef9aec7b26da74e1071f63ed59c6a61">vkpt_textures_destroy</a> ()</td></tr>
<tr class="separator:a0ef9aec7b26da74e1071f63ed59c6a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40254cf863faddc4832cd3290e7211c4"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a40254cf863faddc4832cd3290e7211c4">vkpt_textures_end_registration</a> ()</td></tr>
<tr class="separator:a40254cf863faddc4832cd3290e7211c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1fc65cdd72e8bf78ed544c97606eb24"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#af1fc65cdd72e8bf78ed544c97606eb24">vkpt_textures_upload_envmap</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> w, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> h, byte *data)</td></tr>
<tr class="separator:af1fc65cdd72e8bf78ed544c97606eb24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76488e5ff38c3ca8e9a6901124f52c25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a76488e5ff38c3ca8e9a6901124f52c25">vkpt_textures_destroy_unused</a> ()</td></tr>
<tr class="separator:a76488e5ff38c3ca8e9a6901124f52c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27d53467b9af07282216a93d6f2f729"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa27d53467b9af07282216a93d6f2f729">vkpt_textures_update_descriptor_set</a> ()</td></tr>
<tr class="separator:aa27d53467b9af07282216a93d6f2f729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9f289fcaf29e68d4ed69c516bba79b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#adf9f289fcaf29e68d4ed69c516bba79b">vkpt_normalize_normal_map</a> (<a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *image)</td></tr>
<tr class="separator:adf9f289fcaf29e68d4ed69c516bba79b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab28c26fd0af9d89a9ce5b7237fdf5c10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ab28c26fd0af9d89a9ce5b7237fdf5c10">vkpt_extract_emissive_texture_info</a> (<a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *image)</td></tr>
<tr class="separator:ab28c26fd0af9d89a9ce5b7237fdf5c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2775e8aa851dc8980395b386aa89f08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ab2775e8aa851dc8980395b386aa89f08">vkpt_textures_prefetch</a> ()</td></tr>
<tr class="separator:ab2775e8aa851dc8980395b386aa89f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e5ba08af37d59ad89f990ff6e18fd0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7e5ba08af37d59ad89f990ff6e18fd0e">vkpt_init_light_textures</a> ()</td></tr>
<tr class="separator:a7e5ba08af37d59ad89f990ff6e18fd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdce3396bb9d2af9cc8c65b55c37844a"><td class="memItemLeft" align="right" valign="top">VkCommandBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *group)</td></tr>
<tr class="separator:afdce3396bb9d2af9cc8c65b55c37844a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa15637806eef38c08ae952805089762b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa15637806eef38c08ae952805089762b">vkpt_free_command_buffers</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *group)</td></tr>
<tr class="separator:aa15637806eef38c08ae952805089762b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1776331030c090b50d4770d06a4532e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa1776331030c090b50d4770d06a4532e">vkpt_reset_command_buffers</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *group)</td></tr>
<tr class="separator:aa1776331030c090b50d4770d06a4532e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6a8e87531a795daeb57355822eb915"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a4b6a8e87531a795daeb57355822eb915">vkpt_wait_idle</a> (VkQueue queue, <a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *group)</td></tr>
<tr class="separator:a4b6a8e87531a795daeb57355822eb915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb8166387dae1ee9ef6b32e4ec94367"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1eb8166387dae1ee9ef6b32e4ec94367">vkpt_submit_command_buffer</a> (VkCommandBuffer cmd_buf, VkQueue queue, uint32_t execute_device_mask, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> wait_semaphore_count, VkSemaphore *wait_semaphores, VkPipelineStageFlags *wait_stages, uint32_t *wait_device_indices, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> signal_semaphore_count, VkSemaphore *signal_semaphores, uint32_t *signal_device_indices, VkFence fence)</td></tr>
<tr class="separator:a1eb8166387dae1ee9ef6b32e4ec94367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f7dadb153104a8321ac371462fa9184"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a> (VkCommandBuffer cmd_buf, VkQueue queue, qboolean all_gpus)</td></tr>
<tr class="separator:a4f7dadb153104a8321ac371462fa9184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfa29d565dcf3cddb34df56ca5bafc76"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a> (VkCommandBuffer cmd_buf, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> gpu_index)</td></tr>
<tr class="separator:acfa29d565dcf3cddb34df56ca5bafc76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8c2ae656cad4dae55abbd83892bcd99"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad8c2ae656cad4dae55abbd83892bcd99">allocate_gpu_memory</a> (VkMemoryRequirements mem_req, VkDeviceMemory *pMemory)</td></tr>
<tr class="separator:ad8c2ae656cad4dae55abbd83892bcd99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8455cc1fe63d6930a1d2b7ca2b4afff4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a8455cc1fe63d6930a1d2b7ca2b4afff4">vkpt_image_copy</a> (VkCommandBuffer cmd_buf, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> src_image_index, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> dst_image_index, VkOffset2D src_offset, VkOffset2D dst_offset, VkExtent2D size)</td></tr>
<tr class="separator:a8455cc1fe63d6930a1d2b7ca2b4afff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e927d9fb98531919f82caba825f3777"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7e927d9fb98531919f82caba825f3777">vkpt_draw_initialize</a> ()</td></tr>
<tr class="separator:a7e927d9fb98531919f82caba825f3777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b30fe5d77a5cc95aeaff6ebe70f8130"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3b30fe5d77a5cc95aeaff6ebe70f8130">vkpt_draw_destroy</a> ()</td></tr>
<tr class="separator:a3b30fe5d77a5cc95aeaff6ebe70f8130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2412ecc29207cbe4c2161984ecf54fcd"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a2412ecc29207cbe4c2161984ecf54fcd">vkpt_draw_destroy_pipelines</a> ()</td></tr>
<tr class="separator:a2412ecc29207cbe4c2161984ecf54fcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b76c29a05f293eedf0e6a92c63cf2ee"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a2b76c29a05f293eedf0e6a92c63cf2ee">vkpt_draw_create_pipelines</a> ()</td></tr>
<tr class="separator:a2b76c29a05f293eedf0e6a92c63cf2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a638e1699e2e9b547d3b2c20deed8f2e6"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a638e1699e2e9b547d3b2c20deed8f2e6">vkpt_draw_submit_stretch_pics</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:a638e1699e2e9b547d3b2c20deed8f2e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0a3990b82cb05cba762a9099e9b8fe7"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#af0a3990b82cb05cba762a9099e9b8fe7">vkpt_final_blit_simple</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:af0a3990b82cb05cba762a9099e9b8fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa3e9e8741c94c705e280461e82fd83a"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aaa3e9e8741c94c705e280461e82fd83a">vkpt_final_blit_filtered</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:aaa3e9e8741c94c705e280461e82fd83a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d59a0397ce639236f6d497c2a94630b"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7d59a0397ce639236f6d497c2a94630b">vkpt_draw_clear_stretch_pics</a> ()</td></tr>
<tr class="separator:a7d59a0397ce639236f6d497c2a94630b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace535f6f7271f59469fc3fb8c87e8373"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ace535f6f7271f59469fc3fb8c87e8373">vkpt_uniform_buffer_create</a> ()</td></tr>
<tr class="separator:ace535f6f7271f59469fc3fb8c87e8373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24be3cc9e2377438fa950efe8ecc3b5f"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a24be3cc9e2377438fa950efe8ecc3b5f">vkpt_uniform_buffer_destroy</a> ()</td></tr>
<tr class="separator:a24be3cc9e2377438fa950efe8ecc3b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9705d9ffca9ae933fb91b2f61030bfc"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac9705d9ffca9ae933fb91b2f61030bfc">vkpt_uniform_buffer_update</a> (VkCommandBuffer command_buffer)</td></tr>
<tr class="separator:ac9705d9ffca9ae933fb91b2f61030bfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a520ce9a40997c27284f2fdac0b171f17"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a520ce9a40997c27284f2fdac0b171f17">vkpt_vertex_buffer_create</a> ()</td></tr>
<tr class="separator:a520ce9a40997c27284f2fdac0b171f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca9e840c841cdef453b1acd80351620"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a5ca9e840c841cdef453b1acd80351620">vkpt_vertex_buffer_destroy</a> ()</td></tr>
<tr class="separator:a5ca9e840c841cdef453b1acd80351620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b5224a58a2363dddc18a6bab0159d8"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a01b5224a58a2363dddc18a6bab0159d8">vkpt_vertex_buffer_upload_bsp_mesh_to_staging</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *bsp_mesh)</td></tr>
<tr class="separator:a01b5224a58a2363dddc18a6bab0159d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d5f714c9677c2ce5103e7e3cc7bd6c"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a66d5f714c9677c2ce5103e7e3cc7bd6c">vkpt_vertex_buffer_create_pipelines</a> ()</td></tr>
<tr class="separator:a66d5f714c9677c2ce5103e7e3cc7bd6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bcec178775f32671c9051376d094bcb"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1bcec178775f32671c9051376d094bcb">vkpt_vertex_buffer_destroy_pipelines</a> ()</td></tr>
<tr class="separator:a1bcec178775f32671c9051376d094bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3683b400858cf99977dfef315629eb38"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3683b400858cf99977dfef315629eb38">vkpt_vertex_buffer_create_instance</a> (VkCommandBuffer cmd_buf, uint32_t num_instances, qboolean update_world_animations)</td></tr>
<tr class="separator:a3683b400858cf99977dfef315629eb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4d13a4e050ceb12bdbb4f6d70a51d97"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ab4d13a4e050ceb12bdbb4f6d70a51d97">vkpt_vertex_buffer_upload_models_to_staging</a> ()</td></tr>
<tr class="separator:ab4d13a4e050ceb12bdbb4f6d70a51d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46bfc3621c727fa0bfe39a01d47e126f"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a46bfc3621c727fa0bfe39a01d47e126f">vkpt_vertex_buffer_upload_staging</a> ()</td></tr>
<tr class="separator:a46bfc3621c727fa0bfe39a01d47e126f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39fee7fae872c54fad1e72a5051c8d4c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a39fee7fae872c54fad1e72a5051c8d4c">vkpt_light_buffer_reset_counts</a> ()</td></tr>
<tr class="separator:a39fee7fae872c54fad1e72a5051c8d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace3861808100d3f8c198bd92447bef16"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ace3861808100d3f8c198bd92447bef16">vkpt_light_buffer_upload_to_staging</a> (qboolean render_world, <a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *bsp_mesh, bsp_t *bsp, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af137c35bc22dc9606d74bb18071b4022">num_model_lights</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a> *transformed_model_lights, const float *sky_radiance)</td></tr>
<tr class="separator:ace3861808100d3f8c198bd92447bef16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada2dabf29038ee22fa17f7f94d3ce986"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ada2dabf29038ee22fa17f7f94d3ce986">vkpt_light_buffer_upload_staging</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:ada2dabf29038ee22fa17f7f94d3ce986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2913dc26be7dfa0e37608da682558402"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a2913dc26be7dfa0e37608da682558402">vkpt_light_stats_create</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *bsp_mesh)</td></tr>
<tr class="separator:a2913dc26be7dfa0e37608da682558402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c0ae3ac941d9d6cd75e39cfc50a7f1"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa7c0ae3ac941d9d6cd75e39cfc50a7f1">vkpt_light_stats_destroy</a> ()</td></tr>
<tr class="separator:aa7c0ae3ac941d9d6cd75e39cfc50a7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad374eb90dcd53f94b5fbf47b9ec54ce6"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad374eb90dcd53f94b5fbf47b9ec54ce6">vkpt_load_shader_modules</a> ()</td></tr>
<tr class="separator:ad374eb90dcd53f94b5fbf47b9ec54ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5fa4f7bd563b4063f5348780d99dddc"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa5fa4f7bd563b4063f5348780d99dddc">vkpt_destroy_shader_modules</a> ()</td></tr>
<tr class="separator:aa5fa4f7bd563b4063f5348780d99dddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5ac4c032c1495193e5727181523c98"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a6f5ac4c032c1495193e5727181523c98">vkpt_create_images</a> ()</td></tr>
<tr class="separator:a6f5ac4c032c1495193e5727181523c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d1aa5d8710a1a49eb230d74a6a82e0d"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a9d1aa5d8710a1a49eb230d74a6a82e0d">vkpt_destroy_images</a> ()</td></tr>
<tr class="separator:a9d1aa5d8710a1a49eb230d74a6a82e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a715bde63d0ba29bd4789640b6556b0c6"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a715bde63d0ba29bd4789640b6556b0c6">vkpt_pt_init</a> ()</td></tr>
<tr class="separator:a715bde63d0ba29bd4789640b6556b0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81d5c88a085077fdde28cd02f32caf85"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a81d5c88a085077fdde28cd02f32caf85">vkpt_pt_destroy</a> ()</td></tr>
<tr class="separator:a81d5c88a085077fdde28cd02f32caf85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31cc123cafd01a9c20b121ed811b16e9"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a31cc123cafd01a9c20b121ed811b16e9">vkpt_pt_create_pipelines</a> ()</td></tr>
<tr class="separator:a31cc123cafd01a9c20b121ed811b16e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77841ff12d4ba4044c3bc9d5a51306f"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac77841ff12d4ba4044c3bc9d5a51306f">vkpt_pt_destroy_pipelines</a> ()</td></tr>
<tr class="separator:ac77841ff12d4ba4044c3bc9d5a51306f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa98cd801df2f0c4a1c984354db6ec13"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#afa98cd801df2f0c4a1c984354db6ec13">vkpt_pt_create_toplevel</a> (VkCommandBuffer cmd_buf, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> idx, qboolean include_world, qboolean weapon_left_handed)</td></tr>
<tr class="separator:afa98cd801df2f0c4a1c984354db6ec13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774c3999c366b4e23083a5d8c7bffbba"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a774c3999c366b4e23083a5d8c7bffbba">vkpt_pt_create_static</a> (VkBuffer <a class="el" href="../../d6/dae/transparency_8c.html#ac8fed96b68318d66c1b503f7a2ff68d4">vertex_buffer</a>, size_t buffer_offset, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_vertices, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_vertices_transparent, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_vertices_sky, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_vertices_custom_sky)</td></tr>
<tr class="separator:a774c3999c366b4e23083a5d8c7bffbba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a921eec1be3e2b29c63ea29cfb610ee12"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a921eec1be3e2b29c63ea29cfb610ee12">vkpt_pt_destroy_static</a> ()</td></tr>
<tr class="separator:a921eec1be3e2b29c63ea29cfb610ee12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c90dc6f27788d58feb57331c6366e6"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac2c90dc6f27788d58feb57331c6366e6">vkpt_pt_trace_primary_rays</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:ac2c90dc6f27788d58feb57331c6366e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330450dd44754e34b600671d08c86112"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a330450dd44754e34b600671d08c86112">vkpt_pt_trace_reflections</a> (VkCommandBuffer cmd_buf, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> bounce)</td></tr>
<tr class="separator:a330450dd44754e34b600671d08c86112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1315c0f9ec55f91dd2737651246858aa"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1315c0f9ec55f91dd2737651246858aa">vkpt_pt_trace_lighting</a> (VkCommandBuffer cmd_buf, float num_bounce_rays)</td></tr>
<tr class="separator:a1315c0f9ec55f91dd2737651246858aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32f476bb9016fdcdf5128f4af95f67dc"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a32f476bb9016fdcdf5128f4af95f67dc">vkpt_pt_update_descripter_set_bindings</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> idx)</td></tr>
<tr class="separator:a32f476bb9016fdcdf5128f4af95f67dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abf55d703a78e69f74bf712155168c0"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a8abf55d703a78e69f74bf712155168c0">vkpt_pt_create_all_dynamic</a> (VkCommandBuffer cmd_buf, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> idx, VkBuffer <a class="el" href="../../d6/dae/transparency_8c.html#ac8fed96b68318d66c1b503f7a2ff68d4">vertex_buffer</a>, const <a class="el" href="../../d6/dbb/struct_entity_upload_info.html">EntityUploadInfo</a> *upload_info)</td></tr>
<tr class="separator:a8abf55d703a78e69f74bf712155168c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5627c2d5305cce85dfec1c305a44affa"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a5627c2d5305cce85dfec1c305a44affa">vkpt_asvgf_initialize</a> ()</td></tr>
<tr class="separator:a5627c2d5305cce85dfec1c305a44affa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa09f27edd7c526ad6e8ed6b738723867"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa09f27edd7c526ad6e8ed6b738723867">vkpt_asvgf_destroy</a> ()</td></tr>
<tr class="separator:aa09f27edd7c526ad6e8ed6b738723867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8459898bd764724938182651ed22b57e"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a8459898bd764724938182651ed22b57e">vkpt_asvgf_create_pipelines</a> ()</td></tr>
<tr class="separator:a8459898bd764724938182651ed22b57e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8be0a08832509931d1c34e17f2d185c"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa8be0a08832509931d1c34e17f2d185c">vkpt_asvgf_destroy_pipelines</a> ()</td></tr>
<tr class="separator:aa8be0a08832509931d1c34e17f2d185c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd36ef1c0e2e74eedc41b8a84f70d00"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a4bd36ef1c0e2e74eedc41b8a84f70d00">vkpt_asvgf_filter</a> (VkCommandBuffer cmd_buf, qboolean enable_lf)</td></tr>
<tr class="separator:a4bd36ef1c0e2e74eedc41b8a84f70d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e47021bbf1a07485f43930fbbe2c6c"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a25e47021bbf1a07485f43930fbbe2c6c">vkpt_compositing</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:a25e47021bbf1a07485f43930fbbe2c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ba03a85548570c2f046b8f42ce8cb0"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa5ba03a85548570c2f046b8f42ce8cb0">vkpt_interleave</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:aa5ba03a85548570c2f046b8f42ce8cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1a8749a3b3ebbb0111a1982c699fc13"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae1a8749a3b3ebbb0111a1982c699fc13">vkpt_taa</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:ae1a8749a3b3ebbb0111a1982c699fc13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c40f18bd3b5e3141d1158bdacb5e0d"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac3c40f18bd3b5e3141d1158bdacb5e0d">vkpt_asvgf_create_gradient_samples</a> (VkCommandBuffer cmd_buf, uint32_t frame_num, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> do_gradient_samples)</td></tr>
<tr class="separator:ac3c40f18bd3b5e3141d1158bdacb5e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f22f4c0cbaafecde222d5e30df5052"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a16f22f4c0cbaafecde222d5e30df5052">vkpt_bloom_initialize</a> ()</td></tr>
<tr class="separator:a16f22f4c0cbaafecde222d5e30df5052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512e32fa400e0c3e7623f1e0c3873374"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a512e32fa400e0c3e7623f1e0c3873374">vkpt_bloom_destroy</a> ()</td></tr>
<tr class="separator:a512e32fa400e0c3e7623f1e0c3873374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88cd9059e66f1f9be99bd810fccd3d08"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a88cd9059e66f1f9be99bd810fccd3d08">vkpt_bloom_create_pipelines</a> ()</td></tr>
<tr class="separator:a88cd9059e66f1f9be99bd810fccd3d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1852caaa11bcee562ecfd4c3217197e3"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1852caaa11bcee562ecfd4c3217197e3">vkpt_bloom_destroy_pipelines</a> ()</td></tr>
<tr class="separator:a1852caaa11bcee562ecfd4c3217197e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71ae826e0a00d9cbba8208e6fc3bb7b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a71ae826e0a00d9cbba8208e6fc3bb7b2">vkpt_bloom_reset</a> ()</td></tr>
<tr class="separator:a71ae826e0a00d9cbba8208e6fc3bb7b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac0d84d7e3e7d99814af4421653ee990"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aac0d84d7e3e7d99814af4421653ee990">vkpt_bloom_update</a> (<a class="el" href="../../dd/dc3/global__ubo_8h.html#a5692793c470dd4b97353d7ddab0edde8">QVKUniformBuffer_t</a> *ubo, float frame_time, qboolean under_water, qboolean menu_mode)</td></tr>
<tr class="separator:aac0d84d7e3e7d99814af4421653ee990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0457ce27045f3cb587c7f46022836219"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a0457ce27045f3cb587c7f46022836219">vkpt_bloom_record_cmd_buffer</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:a0457ce27045f3cb587c7f46022836219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1f338cec57ae663e8fe2eae2f0251bf"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae1f338cec57ae663e8fe2eae2f0251bf">vkpt_tone_mapping_initialize</a> ()</td></tr>
<tr class="separator:ae1f338cec57ae663e8fe2eae2f0251bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68a1eaed590178d27dde0ce32ea610cb"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a68a1eaed590178d27dde0ce32ea610cb">vkpt_tone_mapping_destroy</a> ()</td></tr>
<tr class="separator:a68a1eaed590178d27dde0ce32ea610cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f06a6a7fc657c7089763d27ce833a35"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a8f06a6a7fc657c7089763d27ce833a35">vkpt_tone_mapping_create_pipelines</a> ()</td></tr>
<tr class="separator:a8f06a6a7fc657c7089763d27ce833a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad07cc107aaa54492a7adcd72b20ba9e5"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad07cc107aaa54492a7adcd72b20ba9e5">vkpt_tone_mapping_reset</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:ad07cc107aaa54492a7adcd72b20ba9e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c052ba6e0002ec85ff3d6ff29527681"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a8c052ba6e0002ec85ff3d6ff29527681">vkpt_tone_mapping_destroy_pipelines</a> ()</td></tr>
<tr class="separator:a8c052ba6e0002ec85ff3d6ff29527681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd17aea9ae80e16e9f2916bbfa54aeeb"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#acd17aea9ae80e16e9f2916bbfa54aeeb">vkpt_tone_mapping_record_cmd_buffer</a> (VkCommandBuffer cmd_buf, float frame_time)</td></tr>
<tr class="separator:acd17aea9ae80e16e9f2916bbfa54aeeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefb32ea00c9c6eb2df5efe6bac2250a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aefb32ea00c9c6eb2df5efe6bac2250a9">vkpt_tone_mapping_request_reset</a> ()</td></tr>
<tr class="separator:aefb32ea00c9c6eb2df5efe6bac2250a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bb2565a316eaf3b591917f8537598e1"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a8bb2565a316eaf3b591917f8537598e1">vkpt_shadow_map_initialize</a> ()</td></tr>
<tr class="separator:a8bb2565a316eaf3b591917f8537598e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f7ceb69a716fcac81142adeab28c2c"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a16f7ceb69a716fcac81142adeab28c2c">vkpt_shadow_map_destroy</a> ()</td></tr>
<tr class="separator:a16f7ceb69a716fcac81142adeab28c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34042f61738dfca646ec235c18f8d584"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a34042f61738dfca646ec235c18f8d584">vkpt_shadow_map_create_pipelines</a> ()</td></tr>
<tr class="separator:a34042f61738dfca646ec235c18f8d584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c91ef4dfab8cbc1703fd6484a3f4d0"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae2c91ef4dfab8cbc1703fd6484a3f4d0">vkpt_shadow_map_destroy_pipelines</a> ()</td></tr>
<tr class="separator:ae2c91ef4dfab8cbc1703fd6484a3f4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff23a22d9b9befeb38c65fe14adbd23b"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aff23a22d9b9befeb38c65fe14adbd23b">vkpt_shadow_map_render</a> (VkCommandBuffer cmd_buf, float *view_projection_matrix, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_static_verts, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_dynamic_verts, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> transparent_offset, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_transparent_verts)</td></tr>
<tr class="separator:aff23a22d9b9befeb38c65fe14adbd23b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef51bf4978199c1a15d1218239921cdc"><td class="memItemLeft" align="right" valign="top">VkImageView&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aef51bf4978199c1a15d1218239921cdc">vkpt_shadow_map_get_view</a> ()</td></tr>
<tr class="separator:aef51bf4978199c1a15d1218239921cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87eef903712cce745b7550cd2079729e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a87eef903712cce745b7550cd2079729e">vkpt_shadow_map_setup</a> (const <a class="el" href="../../d1/dc6/vkpt_8h.html#af03b78a9f5854e1c40560a96476cd8eb">sun_light_t</a> *light, const float *bbox_min, const float *bbox_max, float *VP, float *depth_scale, qboolean random_sampling)</td></tr>
<tr class="separator:a87eef903712cce745b7550cd2079729e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a600933621f567243c80909c5701db08d"><td class="memItemLeft" align="right" valign="top">qerror_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a600933621f567243c80909c5701db08d">load_img</a> (const char *name, <a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *image)</td></tr>
<tr class="separator:a600933621f567243c80909c5701db08d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37ccd56c877a66f1110f91b9a911683e"><td class="memItemLeft" align="right" valign="top">qboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a37ccd56c877a66f1110f91b9a911683e">initialize_transparency</a> ()</td></tr>
<tr class="separator:a37ccd56c877a66f1110f91b9a911683e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc0d83899f0170e77817df971d1de02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#acfc0d83899f0170e77817df971d1de02">destroy_transparency</a> ()</td></tr>
<tr class="separator:acfc0d83899f0170e77817df971d1de02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d2a409f3c107922e2685c0ca36c3d00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7d2a409f3c107922e2685c0ca36c3d00">update_transparency</a> (VkCommandBuffer command_buffer, const float *view_matrix, const particle_t *<a class="el" href="../../d5/dc9/effects_8c.html#af0c1d1acea3b57e12805b6cb1ed87349">particles</a>, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> <a class="el" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a>, const entity_t *entities, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> entity_num)</td></tr>
<tr class="separator:a7d2a409f3c107922e2685c0ca36c3d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14639010e877bd0a46b5ce792eeca9d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a14639010e877bd0a46b5ce792eeca9d1">build_transparency_blas</a> (VkCommandBuffer cmd_buf)</td></tr>
<tr class="separator:a14639010e877bd0a46b5ce792eeca9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f9a40fb2711235e3b923f9b4d9d98b"><td class="memItemLeft" align="right" valign="top">VkAccelerationStructureNV&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a95f9a40fb2711235e3b923f9b4d9d98b">get_transparency_particle_blas</a> ()</td></tr>
<tr class="separator:a95f9a40fb2711235e3b923f9b4d9d98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7051461bfc27150372b710955371ca07"><td class="memItemLeft" align="right" valign="top">VkAccelerationStructureNV&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7051461bfc27150372b710955371ca07">get_transparency_beam_blas</a> ()</td></tr>
<tr class="separator:a7051461bfc27150372b710955371ca07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69794649ae804404c4fc54cbdfe9cc06"><td class="memItemLeft" align="right" valign="top">VkAccelerationStructureNV&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a69794649ae804404c4fc54cbdfe9cc06">get_transparency_sprite_blas</a> ()</td></tr>
<tr class="separator:a69794649ae804404c4fc54cbdfe9cc06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8860c71b63f7d3e90bd4718329efca7"><td class="memItemLeft" align="right" valign="top">VkBufferView&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aa8860c71b63f7d3e90bd4718329efca7">get_transparency_particle_color_buffer_view</a> ()</td></tr>
<tr class="separator:aa8860c71b63f7d3e90bd4718329efca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1567bc5639b4f13fc4bce48a6238c6"><td class="memItemLeft" align="right" valign="top">VkBufferView&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ada1567bc5639b4f13fc4bce48a6238c6">get_transparency_beam_color_buffer_view</a> ()</td></tr>
<tr class="separator:ada1567bc5639b4f13fc4bce48a6238c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e557871c9800aa81aa4ccea5d5748d8"><td class="memItemLeft" align="right" valign="top">VkBufferView&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a0e557871c9800aa81aa4ccea5d5748d8">get_transparency_sprite_info_buffer_view</a> ()</td></tr>
<tr class="separator:a0e557871c9800aa81aa4ccea5d5748d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b8ac7af5b695b722ffb82ba3ea2a63b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a5b8ac7af5b695b722ffb82ba3ea2a63b">get_transparency_counts</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *<a class="el" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a>, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *<a class="el" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a>, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *<a class="el" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a>)</td></tr>
<tr class="separator:a5b8ac7af5b695b722ffb82ba3ea2a63b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808959ba4018c9ad425e06158be74985"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a808959ba4018c9ad425e06158be74985">vkpt_build_beam_lights</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a> *light_list, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *num_lights, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> max_lights, bsp_t *bsp, entity_t *entities, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> num_entites, float adapted_luminance)</td></tr>
<tr class="separator:a808959ba4018c9ad425e06158be74985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac6c8f16c038616ba967759a02055b19"><td class="memItemLeft" align="right" valign="top">qboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aac6c8f16c038616ba967759a02055b19">vkpt_build_cylinder_light</a> (<a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a> *light_list, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *num_lights, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> max_lights, bsp_t *bsp, vec3_t begin, vec3_t end, vec3_t <a class="el" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>, float radius)</td></tr>
<tr class="separator:aac6c8f16c038616ba967759a02055b19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76bda46cee7c8c83ecda0a3fdf944aab"><td class="memItemLeft" align="right" valign="top">qboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a76bda46cee7c8c83ecda0a3fdf944aab">get_triangle_off_center</a> (const float *positions, float *center, float *anti_center)</td></tr>
<tr class="separator:a76bda46cee7c8c83ecda0a3fdf944aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfbeecea706ef351b5ef6d0ad4048195"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#adfbeecea706ef351b5ef6d0ad4048195">vkpt_initialize_god_rays</a> ()</td></tr>
<tr class="separator:adfbeecea706ef351b5ef6d0ad4048195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b830e72878c5c441616708ba56c568"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad1b830e72878c5c441616708ba56c568">vkpt_destroy_god_rays</a> ()</td></tr>
<tr class="separator:ad1b830e72878c5c441616708ba56c568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4167f8c1c048cac516bc599d629ae56b"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a4167f8c1c048cac516bc599d629ae56b">vkpt_god_rays_create_pipelines</a> ()</td></tr>
<tr class="separator:a4167f8c1c048cac516bc599d629ae56b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac78a081ffd36ec4eb9c5c80137eebb4d"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac78a081ffd36ec4eb9c5c80137eebb4d">vkpt_god_rays_destroy_pipelines</a> ()</td></tr>
<tr class="separator:ac78a081ffd36ec4eb9c5c80137eebb4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1617ea89752c871aa2c818709343572e"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1617ea89752c871aa2c818709343572e">vkpt_god_rays_update_images</a> ()</td></tr>
<tr class="separator:a1617ea89752c871aa2c818709343572e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847abeb85e9f219608020b31a5d69a30"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a847abeb85e9f219608020b31a5d69a30">vkpt_god_rays_noop</a> ()</td></tr>
<tr class="separator:a847abeb85e9f219608020b31a5d69a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e25a5e1c4f6bb95cb4d9eedf081d2ed"><td class="memItemLeft" align="right" valign="top">qboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1e25a5e1c4f6bb95cb4d9eedf081d2ed">vkpt_god_rays_enabled</a> (const <a class="el" href="../../d1/dc6/vkpt_8h.html#af03b78a9f5854e1c40560a96476cd8eb">sun_light_t</a> *sun_light)</td></tr>
<tr class="separator:a1e25a5e1c4f6bb95cb4d9eedf081d2ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1d97ab8b6122131e8264a041f761a13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac1d97ab8b6122131e8264a041f761a13">vkpt_record_god_rays_trace_command_buffer</a> (VkCommandBuffer command_buffer, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> pass)</td></tr>
<tr class="separator:ac1d97ab8b6122131e8264a041f761a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f11af5519a3f6a6eefdd3fb9add8693"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a9f11af5519a3f6a6eefdd3fb9add8693">vkpt_record_god_rays_filter_command_buffer</a> (VkCommandBuffer command_buffer)</td></tr>
<tr class="separator:a9f11af5519a3f6a6eefdd3fb9add8693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ec44c72c99f761d2e2376cec5d90ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a26ec44c72c99f761d2e2376cec5d90ce">vkpt_god_rays_prepare_ubo</a> (<a class="el" href="../../dd/dc3/global__ubo_8h.html#a5692793c470dd4b97353d7ddab0edde8">QVKUniformBuffer_t</a> *ubo, const <a class="el" href="../../d1/dc6/vkpt_8h.html#a8c59a878a5117a08032ceb85ae3bb8fd">aabb_t</a> *world_aabb, const float *proj, const float *view, const float *shadowmap_viewproj, float shadowmap_depth_scale)</td></tr>
<tr class="separator:a26ec44c72c99f761d2e2376cec5d90ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b61164254f6a7ee55d56f4894b2e88c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a4b61164254f6a7ee55d56f4894b2e88c">vkpt_freecam_reset</a> ()</td></tr>
<tr class="separator:a4b61164254f6a7ee55d56f4894b2e88c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff905f638b31e388828370e560697f15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#aff905f638b31e388828370e560697f15">vkpt_freecam_update</a> (float frame_time)</td></tr>
<tr class="separator:aff905f638b31e388828370e560697f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a622f04c9260a47d3a1fea876787bca51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a622f04c9260a47d3a1fea876787bca51">vkpt_reset_accumulation</a> ()</td></tr>
<tr class="separator:a622f04c9260a47d3a1fea876787bca51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ff9548b2af58b7744864f86b80ced42"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a4ff9548b2af58b7744864f86b80ced42">begin_perf_marker</a> (VkCommandBuffer command_buffer, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> index, const char *name)</td></tr>
<tr class="separator:a4ff9548b2af58b7744864f86b80ced42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af648dfb8c915a7c581b972f2701d1aa7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#af648dfb8c915a7c581b972f2701d1aa7">end_perf_marker</a> (VkCommandBuffer command_buffer, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> index)</td></tr>
<tr class="separator:af648dfb8c915a7c581b972f2701d1aa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64cff004024d38f1072efbe140d9701a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a64cff004024d38f1072efbe140d9701a">R_SetClipRect_RTX</a> (const clipRect_t *clip)</td></tr>
<tr class="separator:a64cff004024d38f1072efbe140d9701a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6300542d75d2ded26f787ac2f1f83fa8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a6300542d75d2ded26f787ac2f1f83fa8">R_ClearColor_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>)</td></tr>
<tr class="separator:a6300542d75d2ded26f787ac2f1f83fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bea44e8ea4ffd6e5cd6394ee6f35abc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a9bea44e8ea4ffd6e5cd6394ee6f35abc">R_SetAlpha_RTX</a> (float alpha)</td></tr>
<tr class="separator:a9bea44e8ea4ffd6e5cd6394ee6f35abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a022e9fb80a8f12a86da200acfd26f9f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a022e9fb80a8f12a86da200acfd26f9f1">R_SetAlphaScale_RTX</a> (float alpha)</td></tr>
<tr class="separator:a022e9fb80a8f12a86da200acfd26f9f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a405b508e7226f2441209503697f61963"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a405b508e7226f2441209503697f61963">R_SetColor_RTX</a> (uint32_t <a class="el" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>)</td></tr>
<tr class="separator:a405b508e7226f2441209503697f61963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a985ab2301aece268f264daa7cbd0210a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a985ab2301aece268f264daa7cbd0210a">R_LightPoint_RTX</a> (vec3_t <a class="el" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>, vec3_t light)</td></tr>
<tr class="separator:a985ab2301aece268f264daa7cbd0210a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c042a6e8c6cd5d74cedb7077676622"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a92c042a6e8c6cd5d74cedb7077676622">R_SetScale_RTX</a> (float scale)</td></tr>
<tr class="separator:a92c042a6e8c6cd5d74cedb7077676622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da891f9f3e32eec2988c725fa9cdc4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1da891f9f3e32eec2988c725fa9cdc4e">R_DrawStretchPic_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> x, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> y, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> w, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> h, qhandle_t pic)</td></tr>
<tr class="separator:a1da891f9f3e32eec2988c725fa9cdc4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55bcdecd6357514a9c0ea9511454b754"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a55bcdecd6357514a9c0ea9511454b754">R_DrawPic_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> x, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> y, qhandle_t pic)</td></tr>
<tr class="separator:a55bcdecd6357514a9c0ea9511454b754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ab0c4b5d74f863b4c34187c43f6b86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad2ab0c4b5d74f863b4c34187c43f6b86">R_TileClear_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> x, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> y, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> w, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> h, qhandle_t pic)</td></tr>
<tr class="separator:ad2ab0c4b5d74f863b4c34187c43f6b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d2dc75fe09b9efbeac9a891cffe2d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ac4d2dc75fe09b9efbeac9a891cffe2d7">R_DrawFill8_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> x, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> y, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> w, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> h, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> <a class="el" href="../../d8/dcf/refresh_2gl_2main_8c.html#a071882d7fa3d6bc70a01976d3aa05d86">c</a>)</td></tr>
<tr class="separator:ac4d2dc75fe09b9efbeac9a891cffe2d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1458de04d2b213e70ad5f17224f3f96a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1458de04d2b213e70ad5f17224f3f96a">R_DrawFill32_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> x, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> y, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> w, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> h, uint32_t <a class="el" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>)</td></tr>
<tr class="separator:a1458de04d2b213e70ad5f17224f3f96a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0b34da2455e308be592f713958c1bdb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae0b34da2455e308be592f713958c1bdb">R_DrawChar_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> x, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> y, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> flags, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> <a class="el" href="../../d8/dcf/refresh_2gl_2main_8c.html#a071882d7fa3d6bc70a01976d3aa05d86">c</a>, qhandle_t font)</td></tr>
<tr class="separator:ae0b34da2455e308be592f713958c1bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f3ce1242d50f6fb3aaf7e1a120b0357"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7f3ce1242d50f6fb3aaf7e1a120b0357">R_DrawString_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> x, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> y, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> flags, size_t maxlen, const char *s, qhandle_t font)</td></tr>
<tr class="separator:a7f3ce1242d50f6fb3aaf7e1a120b0357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bab78df545846e85107286bbfe8817c"><td class="memItemLeft" align="right" valign="top">qboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a7bab78df545846e85107286bbfe8817c">R_InterceptKey_RTX</a> (unsigned key, qboolean down)</td></tr>
<tr class="separator:a7bab78df545846e85107286bbfe8817c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a394b60f7daa64db1da78fa31e474f81d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a394b60f7daa64db1da78fa31e474f81d">IMG_Load_RTX</a> (<a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *image, byte *pic)</td></tr>
<tr class="separator:a394b60f7daa64db1da78fa31e474f81d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a322bbec75bb1aeece99bf67c56aaa434"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a322bbec75bb1aeece99bf67c56aaa434">IMG_Unload_RTX</a> (<a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *image)</td></tr>
<tr class="separator:a322bbec75bb1aeece99bf67c56aaa434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab7ddea0c6abee1c21455b2b9fdf176"><td class="memItemLeft" align="right" valign="top">byte *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#acab7ddea0c6abee1c21455b2b9fdf176">IMG_ReadPixels_RTX</a> (<a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *<a class="el" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *<a class="el" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>, <a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *rowbytes)</td></tr>
<tr class="separator:acab7ddea0c6abee1c21455b2b9fdf176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22b7f2a338041e0da3cb05679b18883f"><td class="memItemLeft" align="right" valign="top">qerror_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a22b7f2a338041e0da3cb05679b18883f">MOD_LoadMD2_RTX</a> (model_t *model, const <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> *rawdata, size_t length)</td></tr>
<tr class="separator:a22b7f2a338041e0da3cb05679b18883f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a177aa50ecba97fe102fa220b09821dc7"><td class="memItemLeft" align="right" valign="top">qerror_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a177aa50ecba97fe102fa220b09821dc7">MOD_LoadMD3_RTX</a> (model_t *model, const <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> *rawdata, size_t length)</td></tr>
<tr class="separator:a177aa50ecba97fe102fa220b09821dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5a7370fcde29c61b2b5b0e9c113b7f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#ad5a7370fcde29c61b2b5b0e9c113b7f5">MOD_Reference_RTX</a> (model_t *model)</td></tr>
<tr class="separator:ad5a7370fcde29c61b2b5b0e9c113b7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2f3deaccfaa1c50957e71fca16564df6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/dc6/vkpt_8h.html#a270e591c20257285ecaab65ba99b1723">QVK_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a></td></tr>
<tr class="separator:a2f3deaccfaa1c50957e71fca16564df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11823e68ed3d985774c5def8659a9054"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/dc6/vkpt_8h.html#afc0cb043a61bc534c6b84eabeba043df">vkpt_refdef_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a></td></tr>
<tr class="separator:a11823e68ed3d985774c5def8659a9054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aaa1ca537ac62c710edba96049423e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/db0/structdraw_static__t.html">drawStatic_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc6/vkpt_8h.html#a1aaa1ca537ac62c710edba96049423e0">draw</a></td></tr>
<tr class="separator:a1aaa1ca537ac62c710edba96049423e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a58206b954a876bae0077741e504e43a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58206b954a876bae0077741e504e43a6">&#9670;&nbsp;</a></span>_VK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _VK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;do { __VA_ARGS__; } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00065">65</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a43593b44eb7a13784e2802c7bcf56089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43593b44eb7a13784e2802c7bcf56089">&#9670;&nbsp;</a></span>_VK_EXTENSION_DO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _VK_EXTENSION_DO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;extern PFN_##a q##a;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00309">309</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="acb83a01783d9186445b40c946865444f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb83a01783d9186445b40c946865444f">&#9670;&nbsp;</a></span>_VK_EXTENSION_LIST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _VK_EXTENSION_LIST</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="../../d1/dc6/vkpt_8h.html#a43593b44eb7a13784e2802c7bcf56089">_VK_EXTENSION_DO</a>(vkCreateAccelerationStructureNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCreateAccelerationStructureNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkDestroyAccelerationStructureNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkGetAccelerationStructureMemoryRequirementsNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkBindAccelerationStructureMemoryNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCmdBuildAccelerationStructureNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCmdCopyAccelerationStructureNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCmdTraceRaysNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCreateRayTracingPipelinesNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkGetRayTracingShaderGroupHandlesNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkGetAccelerationStructureHandleNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCmdWriteAccelerationStructuresPropertiesNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCompileDeferredNV) \</div>
<div class="line">    _VK_EXTENSION_DO(vkDebugMarkerSetObjectNameEXT) \</div>
<div class="line">    _VK_EXTENSION_DO(vkGetDeviceGroupPeerMemoryFeaturesKHR) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCmdSetDeviceMaskKHR) \</div>
<div class="line">    _VK_EXTENSION_DO(vkCmdDispatchBaseKHR) \</div>
<div class="line">    _VK_EXTENSION_DO(vkGetDeviceGroupPresentCapabilitiesKHR) \</div>
<div class="line">    _VK_EXTENSION_DO(vkGetDeviceGroupSurfacePresentModesKHR) \</div>
<div class="line">    _VK_EXTENSION_DO(vkGetPhysicalDevicePresentRectanglesKHR) \</div>
<div class="line">    _VK_EXTENSION_DO(vkAcquireNextImage2KHR) \</div>
<div class="line">    _VK_EXTENSION_DO(vkBindImageMemory2KHR)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00284">284</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="acdb36cf8358ef83e30b84e09f160e649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb36cf8358ef83e30b84e09f160e649">&#9670;&nbsp;</a></span>_VK_INST_EXTENSION_DO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _VK_INST_EXTENSION_DO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;extern PFN_##a q##a;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00280">280</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="ab8590d531c9337d7210c0fb49bbcfec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8590d531c9337d7210c0fb49bbcfec2">&#9670;&nbsp;</a></span>_VK_INST_EXTENSION_LIST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _VK_INST_EXTENSION_LIST</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="../../d1/dc6/vkpt_8h.html#acdb36cf8358ef83e30b84e09f160e649">_VK_INST_EXTENSION_DO</a>(vkCmdBeginDebugUtilsLabelEXT) \</div>
<div class="line">    _VK_INST_EXTENSION_DO(vkCmdEndDebugUtilsLabelEXT) \</div>
<div class="line">    _VK_INST_EXTENSION_DO(vkEnumeratePhysicalDeviceGroupsKHR)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00275">275</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a28e6ee1dd5236b8a704d1b34806dfce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e6ee1dd5236b8a704d1b34806dfce1">&#9670;&nbsp;</a></span>ALL_GPUS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALL_GPUS&#160;&#160;&#160;(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00535">535</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="ad0c03862ea5c60519a427776e427962e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0c03862ea5c60519a427776e427962e">&#9670;&nbsp;</a></span>BEGIN_PERF_MARKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BEGIN_PERF_MARKER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">command_buffer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#a4ff9548b2af58b7744864f86b80ced42">begin_perf_marker</a>(command_buffer, name, #name)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00742">742</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="ae46cf020d62af6e335fb71e72a305157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae46cf020d62af6e335fb71e72a305157">&#9670;&nbsp;</a></span>END_PERF_MARKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define END_PERF_MARKER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">command_buffer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#af648dfb8c915a7c581b972f2701d1aa7">end_perf_marker</a>(command_buffer, name)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00743">743</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a9cea659d453d5784e606e0be9bb6a69e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cea659d453d5784e606e0be9bb6a69e">&#9670;&nbsp;</a></span>HAVE_M_PI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAVE_M_PI</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00024">24</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="ad0e13d94164219be2d5bbd4d65e71d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0e13d94164219be2d5bbd4d65e71d1e">&#9670;&nbsp;</a></span>LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LENGTH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;((sizeof (a)) / (sizeof(*(a))))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00048">48</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a077ffee32baed268bcfef6e7229edc8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a077ffee32baed268bcfef6e7229edc8a">&#9670;&nbsp;</a></span>LIST_SHADER_MODULES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LIST_SHADER_MODULES</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00070">70</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a06f77523e750336bbb5bfb0388321698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06f77523e750336bbb5bfb0388321698">&#9670;&nbsp;</a></span>LOG_FUNC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_FUNC</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#a3c8885743914feaca656e1922b9306ac">LOG_FUNC_</a>(__func__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00054">54</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a3c8885743914feaca656e1922b9306ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c8885743914feaca656e1922b9306ac">&#9670;&nbsp;</a></span>LOG_FUNC_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_FUNC_</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">f</td><td>)</td>
          <td>&#160;&#160;&#160;do {} while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00052">52</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="afa99ec4acc4ecb2dc3c2d05da15d0e3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa99ec4acc4ecb2dc3c2d05da15d0e3f">&#9670;&nbsp;</a></span>MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((a) &gt; (b) ? (a) : (b))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00050">50</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a84d3ea5135a58a3d5c7d802762e320ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d3ea5135a58a3d5c7d802762e320ec">&#9670;&nbsp;</a></span>MAX_FRAMES_IN_FLIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FRAMES_IN_FLIGHT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00140">140</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="aa1065319a1fc54bdfc21a8cf1fa14d1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1065319a1fc54bdfc21a8cf1fa14d1d">&#9670;&nbsp;</a></span>MAX_SKY_CLUSTERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SKY_CLUSTERS&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00313">313</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a4100e20dd14fd59a62d54fcfe825cb03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4100e20dd14fd59a62d54fcfe825cb03">&#9670;&nbsp;</a></span>MAX_SWAPCHAIN_IMAGES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SWAPCHAIN_IMAGES&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00141">141</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a3acffbd305ee72dcd4593c0d8af64a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3acffbd305ee72dcd4593c0d8af64a4f">&#9670;&nbsp;</a></span>MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((a) &lt; (b) ? (a) : (b))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00049">49</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a7790096a7d0dd07c79f115b5cdb44589"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7790096a7d0dd07c79f115b5cdb44589">&#9670;&nbsp;</a></span>NUM_PROFILER_QUERIES_PER_FRAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_PROFILER_QUERIES_PER_FRAME&#160;&#160;&#160;(<a class="el" href="../../d1/dc6/vkpt_8h.html#a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0">NUM_PROFILER_ENTRIES</a> * 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00466">466</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="ae93e7ab74962fe2824b63f82027651b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae93e7ab74962fe2824b63f82027651b6">&#9670;&nbsp;</a></span>PROFILER_DO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROFILER_DO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;a,</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00460">460</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="af6dfbd1e98c433910a0dc1b72602de80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6dfbd1e98c433910a0dc1b72602de80">&#9670;&nbsp;</a></span>PROFILER_LIST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROFILER_LIST</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae93e7ab74962fe2824b63f82027651b6">PROFILER_DO</a>(PROFILER_FRAME_TIME,                 0) \</div>
<div class="line">    PROFILER_DO(PROFILER_INSTANCE_GEOMETRY,          1) \</div>
<div class="line">    PROFILER_DO(PROFILER_BVH_UPDATE,                 1) \</div>
<div class="line">    PROFILER_DO(PROFILER_ASVGF_GRADIENT_SAMPLES,     1) \</div>
<div class="line">    PROFILER_DO(PROFILER_ASVGF_DO_GRADIENT_SAMPLES,  2) \</div>
<div class="line">    PROFILER_DO(PROFILER_PRIMARY_RAYS,               1) \</div>
<div class="line">    PROFILER_DO(PROFILER_REFLECT_REFRACT_1,          1) \</div>
<div class="line">    PROFILER_DO(PROFILER_REFLECT_REFRACT_2,          1) \</div>
<div class="line">    PROFILER_DO(PROFILER_DIRECT_LIGHTING,            1) \</div>
<div class="line">    PROFILER_DO(PROFILER_INDIRECT_LIGHTING,          1) \</div>
<div class="line">    PROFILER_DO(PROFILER_ASVGF_FULL,                 1) \</div>
<div class="line">    PROFILER_DO(PROFILER_ASVGF_RECONSTRUCT_GRADIENT, 2) \</div>
<div class="line">    PROFILER_DO(PROFILER_ASVGF_TEMPORAL,             2) \</div>
<div class="line">    PROFILER_DO(PROFILER_ASVGF_ATROUS,               2) \</div>
<div class="line">    PROFILER_DO(PROFILER_MGPU_TRANSFERS,             1) \</div>
<div class="line">    PROFILER_DO(PROFILER_INTERLEAVE,                 1) \</div>
<div class="line">    PROFILER_DO(PROFILER_ASVGF_TAA,                  2) \</div>
<div class="line">    PROFILER_DO(PROFILER_BLOOM,                      1) \</div>
<div class="line">    PROFILER_DO(PROFILER_TONE_MAPPING,               1) \</div>
<div class="line">    PROFILER_DO(PROFILER_UPDATE_ENVIRONMENT,         1) \</div>
<div class="line">    PROFILER_DO(PROFILER_GOD_RAYS,                   1) \</div>
<div class="line">    PROFILER_DO(PROFILER_GOD_RAYS_REFLECT_REFRACT,   1) \</div>
<div class="line">    PROFILER_DO(PROFILER_GOD_RAYS_FILTER,            1) \</div>
<div class="line">    PROFILER_DO(PROFILER_SHADOW_MAP,                 1) \</div>
<div class="line">    PROFILER_DO(PROFILER_COMPOSITING,                1) \</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00432">432</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="aae2513c369860bb25b142022fc37c8bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae2513c369860bb25b142022fc37c8bd">&#9670;&nbsp;</a></span>QGL_INDEX_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QGL_INDEX_TYPE&#160;&#160;&#160;GLuint</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00711">711</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="aa78b1cda3a3279c325bf171d2969bf67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa78b1cda3a3279c325bf171d2969bf67">&#9670;&nbsp;</a></span>SHADER_MODULE_DO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHADER_MODULE_DO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;a,</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00134">134</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="aeb80b64f42e0f2eac7a45ccb29eef509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb80b64f42e0f2eac7a45ccb29eef509">&#9670;&nbsp;</a></span>SHADER_PATH_TEMPLATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHADER_PATH_TEMPLATE&#160;&#160;&#160;<a class="el" href="../../d1/dc6/vkpt_8h.html#ae3a157c0b66dbc33f42326cd98930b26">VKPT_SHADER_DIR</a> &quot;/%s.spv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00114">114</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a3b06f72f273011df4be44d5e91ed5f56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b06f72f273011df4be44d5e91ed5f56">&#9670;&nbsp;</a></span>SHADER_STAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHADER_STAGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_module, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_stage&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    { \</div>
<div class="line">        .sType = VK_STRUCTURE_TYPE_PIPELINE_SHADER_STAGE_CREATE_INFO, \</div>
<div class="line">        .stage = _stage, \</div>
<div class="line">        .module = <a class="code" href="../../d1/dc6/vkpt_8h.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a09b5652f6cd6377beb206df95acdb921">shader_modules</a>[_module], \</div>
<div class="line">        .pName = <span class="stringliteral">&quot;main&quot;</span> \</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00116">116</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a54c3d7413fd65d551b669669917bb5da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54c3d7413fd65d551b669669917bb5da">&#9670;&nbsp;</a></span>SHADER_STAGE_SPEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHADER_STAGE_SPEC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_module, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_stage, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_spec&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    { \</div>
<div class="line">        .sType = VK_STRUCTURE_TYPE_PIPELINE_SHADER_STAGE_CREATE_INFO, \</div>
<div class="line">        .stage = _stage, \</div>
<div class="line">        .module = <a class="code" href="../../d1/dc6/vkpt_8h.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a09b5652f6cd6377beb206df95acdb921">shader_modules</a>[_module], \</div>
<div class="line">        .pName = <span class="stringliteral">&quot;main&quot;</span>, \</div>
<div class="line">        .pSpecializationInfo = _spec, \</div>
<div class="line">    }</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00124">124</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="af40bd42d270cffe7e590392f64215712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af40bd42d270cffe7e590392f64215712">&#9670;&nbsp;</a></span>TESS_MAX_INDICES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TESS_MAX_INDICES&#160;&#160;&#160;(3 * <a class="el" href="../../d1/dc6/vkpt_8h.html#a25613ac436a01e19ed4e14039f50d4ac">TESS_MAX_VERTICES</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00709">709</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="a25613ac436a01e19ed4e14039f50d4ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25613ac436a01e19ed4e14039f50d4ac">&#9670;&nbsp;</a></span>TESS_MAX_VERTICES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TESS_MAX_VERTICES&#160;&#160;&#160;16384</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00708">708</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<a id="ae3a157c0b66dbc33f42326cd98930b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3a157c0b66dbc33f42326cd98930b26">&#9670;&nbsp;</a></span>VKPT_SHADER_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VKPT_SHADER_DIR&#160;&#160;&#160;&quot;shader_vkpt&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00111">111</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a8c59a878a5117a08032ceb85ae3bb8fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c59a878a5117a08032ceb85ae3bb8fd">&#9670;&nbsp;</a></span>aabb_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../dd/d0f/structaabb__s.html">aabb_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#a8c59a878a5117a08032ceb85ae3bb8fd">aabb_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3409d334dedfd1f14090a9159e15e6b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3409d334dedfd1f14090a9159e15e6b6">&#9670;&nbsp;</a></span>bsp_mesh_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../db/d50/structbsp__mesh__s.html">bsp_mesh_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab9c9f4775529fa17468989f3b059f524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9c9f4775529fa17468989f3b059f524">&#9670;&nbsp;</a></span>bsp_model_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../dc/d96/structbsp__model__s.html">bsp_model_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#ab9c9f4775529fa17468989f3b059f524">bsp_model_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae9a208f6e66e95bd7be48d692ddefce5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9a208f6e66e95bd7be48d692ddefce5">&#9670;&nbsp;</a></span>cmd_buf_group_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../db/dbd/structcmd__buf__group__s.html">cmd_buf_group_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7a38413d52f61346e48ebd31b867a8b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a38413d52f61346e48ebd31b867a8b7">&#9670;&nbsp;</a></span>EntityUploadInfo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d6/dbb/struct_entity_upload_info.html">EntityUploadInfo</a> <a class="el" href="../../d6/dbb/struct_entity_upload_info.html">EntityUploadInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a21e74bb8df0ff83444d9357cb56893f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21e74bb8df0ff83444d9357cb56893f1">&#9670;&nbsp;</a></span>light_poly_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d4/db6/structlight__poly__s.html">light_poly_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aad8690b7c6d2fc35163d0df0e4ac2f49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad8690b7c6d2fc35163d0df0e4ac2f49">&#9670;&nbsp;</a></span>maliasframe_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d0/d28/structmaliasframe__s.html">maliasframe_s</a> <a class="el" href="../../d2/d61/gl_8h.html#aad8690b7c6d2fc35163d0df0e4ac2f49">maliasframe_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6b15f7cd2e78fe01cd8081bb032b194b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b15f7cd2e78fe01cd8081bb032b194b">&#9670;&nbsp;</a></span>maliasmesh_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_s</a> <a class="el" href="../../d2/d61/gl_8h.html#a6b15f7cd2e78fe01cd8081bb032b194b">maliasmesh_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a270e591c20257285ecaab65ba99b1723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270e591c20257285ecaab65ba99b1723">&#9670;&nbsp;</a></span>QVK_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../de/dc0/struct_q_v_k__s.html">QVK_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#a270e591c20257285ecaab65ba99b1723">QVK_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="addaa8f06be66a85ec6fc2bc317bbd463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addaa8f06be66a85ec6fc2bc317bbd463">&#9670;&nbsp;</a></span>semaphore_group_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../da/d92/structsemaphore__group__s.html">semaphore_group_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#addaa8f06be66a85ec6fc2bc317bbd463">semaphore_group_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af03b78a9f5854e1c40560a96476cd8eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af03b78a9f5854e1c40560a96476cd8eb">&#9670;&nbsp;</a></span>sun_light_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d4/db8/structsun__light__s.html">sun_light_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#af03b78a9f5854e1c40560a96476cd8eb">sun_light_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afc0cb043a61bc534c6b84eabeba043df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc0cb043a61bc534c6b84eabeba043df">&#9670;&nbsp;</a></span>vkpt_refdef_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d1/dbe/structvkpt__refdef__s.html">vkpt_refdef_s</a> <a class="el" href="../../d1/dc6/vkpt_8h.html#afc0cb043a61bc534c6b84eabeba043df">vkpt_refdef_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a6b7b47dd702d9e331586d485013fd1ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b7b47dd702d9e331586d485013fd1ea">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0"></a>NUM_PROFILER_ENTRIES&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00459">459</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;     {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#define PROFILER_DO(a, ...) a,</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#af6dfbd1e98c433910a0dc1b72602de80">PROFILER_LIST</a></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">#undef PROFILER_DO</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0">NUM_PROFILER_ENTRIES</a>,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;};</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad3dbfa0d6a5d2b34ab7a243e37345f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3dbfa0d6a5d2b34ab7a243e37345f67">&#9670;&nbsp;</a></span>QVK_SHADER_MODULES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d1/dc6/vkpt_8h.html#ad3dbfa0d6a5d2b34ab7a243e37345f67">QVK_SHADER_MODULES</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad3dbfa0d6a5d2b34ab7a243e37345f67abaf776874815a3678e5b6b70fb683a9a"></a>NUM_QVK_SHADER_MODULES&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00133">133</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#define SHADER_MODULE_DO(a) a,</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a077ffee32baed268bcfef6e7229edc8a">LIST_SHADER_MODULES</a></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#undef SHADER_MODULE_DO</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad3dbfa0d6a5d2b34ab7a243e37345f67abaf776874815a3678e5b6b70fb683a9a">NUM_QVK_SHADER_MODULES</a></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f3182ad90ad3ba0cf65457c7384a9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3182ad90ad3ba0cf65457c7384a9b3">&#9670;&nbsp;</a></span>VKPTProfilerAction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3">VKPTProfilerAction</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9f3182ad90ad3ba0cf65457c7384a9b3a7ae30dcb3e2583d6fa680f087aed7781"></a>PROFILER_START&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9f3182ad90ad3ba0cf65457c7384a9b3a7dda3ea083edad695232f7d2c30d7e77"></a>PROFILER_STOP&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00468">468</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;             {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7ae30dcb3e2583d6fa680f087aed7781">PROFILER_START</a>, </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7dda3ea083edad695232f7d2c30d7e77">PROFILER_STOP</a>,</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;} <a class="code" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3">VKPTProfilerAction</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad8c2ae656cad4dae55abbd83892bcd99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8c2ae656cad4dae55abbd83892bcd99">&#9670;&nbsp;</a></span>allocate_gpu_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult allocate_gpu_memory </td>
          <td>(</td>
          <td class="paramtype">VkMemoryRequirements&#160;</td>
          <td class="paramname"><em>mem_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkDeviceMemory *&#160;</td>
          <td class="paramname"><em>pMemory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7e/vk__util_8c_source.html#l00402">402</a> of file <a class="el" href="../../d9/d7e/vk__util_8c_source.html">vk_util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    VkMemoryAllocateInfo mem_alloc_info = {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        .sType = VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        .allocationSize = mem_req.size,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        .memoryTypeIndex = <a class="code" href="../../d9/d7e/vk__util_8c.html#aa2e20fc611839bb931f41c1f087c07e0">get_memory_type</a>(mem_req.memoryTypeBits, VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    };</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    VkMemoryAllocateFlagsInfoKHR mem_alloc_flags = {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        .sType = VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_FLAGS_INFO_KHR,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        .flags = VK_MEMORY_ALLOCATE_DEVICE_MASK_BIT_KHR,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        .deviceMask = (1 &lt;&lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>) - 1</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    };</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        mem_alloc_info.pNext = &amp;mem_alloc_flags;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> vkAllocateMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;mem_alloc_info, NULL, pMemory);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d6/dae/transparency_8c.html#a70cf3cde9ec3463bc4ac12874798416c">allocate_and_bind_memory_to_blas()</a>, <a class="el" href="../../d9/d62/physical__sky_8c.html#a40944bef115659237a822c3389f59b8f">initializeEnvTexture()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a912617d2640c1bb05a0d548cf5bae766">load_blue_noise()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a6f5ac4c032c1495193e5727181523c98">vkpt_create_images()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#ab6809ce8eae1c0ba5e694402b1040ff7">vkpt_pt_create_accel_bottom()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#afa98cd801df2f0c4a1c984354db6ec13">vkpt_pt_create_toplevel()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8bb2565a316eaf3b591917f8537598e1">vkpt_shadow_map_initialize()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#af1fc65cdd72e8bf78ed544c97606eb24">vkpt_textures_upload_envmap()</a>.</p>

</div>
</div>
<a id="a4ff9548b2af58b7744864f86b80ced42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ff9548b2af58b7744864f86b80ced42">&#9670;&nbsp;</a></span>begin_perf_marker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> begin_perf_marker </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>command_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00721">721</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d1/dc6/vkpt_8h.html#aa07bf23807800e110da5519e58bdfcc9">vkpt_profiler_query</a>(command_buffer, index, <a class="code" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7ae30dcb3e2583d6fa680f087aed7781">PROFILER_START</a>));</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keyword">const</span> VkDebugUtilsLabelEXT label = {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        .sType = VK_STRUCTURE_TYPE_DEBUG_UTILS_LABEL_EXT,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        .pLabelName = name</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    };</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">if</span> (qvkCmdBeginDebugUtilsLabelEXT != NULL)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        qvkCmdBeginDebugUtilsLabelEXT(command_buffer, &amp;label);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a12814264db51b98dabe7b44fe5a684b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12814264db51b98dabe7b44fe5a684b4">&#9670;&nbsp;</a></span>bsp_mesh_create_from_bsp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> bsp_mesh_create_from_bsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bsp_t *&#160;</td>
          <td class="paramname"><em>bsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>map_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html#l01623">1623</a> of file <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html">bsp_mesh.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;{</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* full_game_map_name = map_name;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">if</span> (strcmp(map_name, <span class="stringliteral">&quot;demo1&quot;</span>) == 0)</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        full_game_map_name = <span class="stringliteral">&quot;base1&quot;</span>;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(map_name, <span class="stringliteral">&quot;demo2&quot;</span>) == 0)</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        full_game_map_name = <span class="stringliteral">&quot;base2&quot;</span>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(map_name, <span class="stringliteral">&quot;demo3&quot;</span>) == 0)</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        full_game_map_name = <span class="stringliteral">&quot;base3&quot;</span>;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a52b079f63711418e88f631a3f55a89ab">load_sky_and_lava_clusters</a>(wm, full_game_map_name);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#af1ca9eb52d0b1d58a5f2cf69185f55a0">load_cameras</a>(wm, full_game_map_name);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a18cbf4d3f7b3230f5ae024abfd51306b">models</a> = Z_Malloc(bsp-&gt;nummodels * <span class="keyword">sizeof</span>(<a class="code" href="../../dc/d96/structbsp__model__s.html">bsp_model_t</a>));</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    memset(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a18cbf4d3f7b3230f5ae024abfd51306b">models</a>, 0, bsp-&gt;nummodels * <span class="keyword">sizeof</span>(<a class="code" href="../../dc/d96/structbsp__model__s.html">bsp_model_t</a>));</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ae140ca721c1fc26dd89fc9069f8ee7a6">num_models</a> = bsp-&gt;nummodels;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">num_clusters</a> = bsp-&gt;vis-&gt;numclusters;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160; </div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">if</span> (wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">num_clusters</a> + 1 &gt;= <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a393cfcb10f6ffd3ad71a834f35eb025c">MAX_LIGHT_LISTS</a>)</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <a class="code" href="../../df/dd3/g__main_8c.html#a921a13ed691ee9d87865050d3018d2d4">Com_Error</a>(ERR_FATAL, <span class="stringliteral">&quot;The BSP model has too many clusters (%d)&quot;</span>, wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">num_clusters</a>);</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    }</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aa1ef9d907d695e7cb333a7fae79a19a1">num_vertices</a> = 0;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a06ebdac16d5d210e72e3f238d6a324fa">num_indices</a> = 0;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a576969c1fc26fc521921c54dc67df01e">positions</a> = Z_Malloc(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a> * 3 * <span class="keyword">sizeof</span>(*wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a576969c1fc26fc521921c54dc67df01e">positions</a>));</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ad6c2d7a20fc4ca025f9cc3e0f88c94d6">tex_coords</a> = Z_Malloc(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a> * 2 * <span class="keyword">sizeof</span>(*wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ad6c2d7a20fc4ca025f9cc3e0f88c94d6">tex_coords</a>));</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ade37a58abe3ddf61ac024d666dec3638">materials</a> = Z_Malloc(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a> / 3 * <span class="keyword">sizeof</span>(*wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ade37a58abe3ddf61ac024d666dec3638">materials</a>));</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a673610a720ad405ec3d60647c5db94f3">clusters</a> = Z_Malloc(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a> / 3 * <span class="keyword">sizeof</span>(*wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a673610a720ad405ec3d60647c5db94f3">clusters</a>));</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">// clear these here because `bsp_mesh_load_custom_sky` creates lights before `collect_ligth_polys`</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9e646f1f1fa8d42f978917a8c6ae2772">num_light_polys</a> = 0;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9c3c5f24b091aeb84767660630d70581">allocated_light_polys</a> = 0;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a8dec0909604ae168774770416a165ee8">light_polys</a> = NULL;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordtype">int</span> idx_ctr = 0;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="preprocessor">#if DUMP_WORLD_MESH_TO_OBJ</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="keywordtype">char</span> filename[MAX_QPATH];</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a31b145b30886e0cd49279e391d9df00f">Q_snprintf</a>(filename, <span class="keyword">sizeof</span>(filename), <span class="stringliteral">&quot;C:\\temp\\%s.obj&quot;</span>, map_name);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        obj_dump_file = fopen(filename, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        obj_vertex_num = 1;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#aac16569c5e2d79e52f56f87392866e50">collect_surfaces</a>(&amp;idx_ctr, wm, bsp, -1, <a class="code" href="../../d1/d51/bsp__mesh_8c.html#aa7d890e7df8fb40492f3cb1a2cc6a75d">filter_static_opaque</a>);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a07fd2502d3bf0dde33994b3cea0d7628">world_idx_count</a> = idx_ctr;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9c252985f0f0c52f065cbb6b704fcca6">world_transparent_offset</a> = idx_ctr;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#aac16569c5e2d79e52f56f87392866e50">collect_surfaces</a>(&amp;idx_ctr, wm, bsp, -1, <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a788b01339f3b1cdf589951be428ff4f4">filter_static_transparent</a>);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a2e7e5a4fa97e204266620f9107f06c3b">world_transparent_count</a> = idx_ctr - wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9c252985f0f0c52f065cbb6b704fcca6">world_transparent_offset</a>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160; </div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a0910fc4c9db54d8f7234fb0eacf0d7aa">world_sky_offset</a> = idx_ctr;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#aac16569c5e2d79e52f56f87392866e50">collect_surfaces</a>(&amp;idx_ctr, wm, bsp, -1, <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a54fc4e51babdbb4d97029670ee078bfe">filter_static_sky</a>);</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ac4321101d6fabb6168b7e361e41b12a9">world_sky_count</a> = idx_ctr - wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a0910fc4c9db54d8f7234fb0eacf0d7aa">world_sky_offset</a>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160; </div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ac625802a5081a6b5c87823dc6322941c">world_custom_sky_offset</a> = idx_ctr;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#ab676342c4082f82b9e09f53cc6691f8c">bsp_mesh_load_custom_sky</a>(&amp;idx_ctr, wm, bsp, full_game_map_name);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aca3a23aebc596513c917b015ed572c24">world_custom_sky_count</a> = idx_ctr - wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ac625802a5081a6b5c87823dc6322941c">world_custom_sky_offset</a>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; bsp-&gt;nummodels; k++) {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <a class="code" href="../../dc/d96/structbsp__model__s.html">bsp_model_t</a>* model = wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a18cbf4d3f7b3230f5ae024abfd51306b">models</a> + k;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a216d15c13ab4f0296122a15a57e39e4d">idx_offset</a> = idx_ctr;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <a class="code" href="../../d1/d51/bsp__mesh_8c.html#aac16569c5e2d79e52f56f87392866e50">collect_surfaces</a>(&amp;idx_ctr, wm, bsp, k, <a class="code" href="../../d1/d51/bsp__mesh_8c.html#ab38846f3757b59844bf48ab6d281bee2">filter_all</a>);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#ab1ce8d860cd725aa0cd564c4c8d54b95">idx_count</a> = idx_ctr - model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a216d15c13ab4f0296122a15a57e39e4d">idx_offset</a>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    }</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="preprocessor">#if DUMP_WORLD_MESH_TO_OBJ</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    fclose(obj_dump_file);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    obj_dump_file = NULL;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">if</span> (!bsp-&gt;pvs_patched)</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <a class="code" href="../../d1/d51/bsp__mesh_8c.html#aeb429a90473c365841433bf24be88451">build_pvs2</a>(bsp);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160; </div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../da/d3b/common_2bsp_8c.html#a1530bc295cc6c8f29ddd788fce98507d">BSP_SavePatchedPVS</a>(bsp))</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            Com_EPrintf(<span class="stringliteral">&quot;Couldn&#39;t save patched PVS for %s.\n&quot;</span>, bsp-&gt;name);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a06ebdac16d5d210e72e3f238d6a324fa">num_indices</a> = idx_ctr;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aa1ef9d907d695e7cb333a7fae79a19a1">num_vertices</a> = idx_ctr;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a66a4acac855d27fb97ea5e913ae6d33e">indices</a> = Z_Malloc(idx_ctr * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aa1ef9d907d695e7cb333a7fae79a19a1">num_vertices</a>; i++)</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a66a4acac855d27fb97ea5e913ae6d33e">indices</a>[i] = i;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#ace165b70926ab67debab5e1a2434d296">compute_world_tangents</a>(wm);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keywordflow">if</span> (wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aa1ef9d907d695e7cb333a7fae79a19a1">num_vertices</a> &gt;= <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a>) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <a class="code" href="../../df/dd3/g__main_8c.html#a921a13ed691ee9d87865050d3018d2d4">Com_Error</a>(ERR_FATAL, <span class="stringliteral">&quot;The BSP model has too many vertices (%d)&quot;</span>, wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aa1ef9d907d695e7cb333a7fae79a19a1">num_vertices</a>);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ae140ca721c1fc26dd89fc9069f8ee7a6">num_models</a>; i++) </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <a class="code" href="../../dc/d96/structbsp__model__s.html">bsp_model_t</a>* model = wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a18cbf4d3f7b3230f5ae024abfd51306b">models</a> + i;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a12d09f469a4ebff68a0d3f53432d676e">compute_aabb</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a576969c1fc26fc521921c54dc67df01e">positions</a> + model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a216d15c13ab4f0296122a15a57e39e4d">idx_offset</a> * 3, model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#ab1ce8d860cd725aa0cd564c4c8d54b95">idx_count</a>, model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#abbd31a009949b342aa078de2de6cd99d">aabb_min</a>, model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a10ae8947dcd83fbfae30f197dedacd8d">aabb_max</a>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        VectorAdd(model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#abbd31a009949b342aa078de2de6cd99d">aabb_min</a>, model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a10ae8947dcd83fbfae30f197dedacd8d">aabb_max</a>, model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#aaeb9997942eea2806af6462a3dd2d8c8">center</a>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        VectorScale(model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#aaeb9997942eea2806af6462a3dd2d8c8">center</a>, 0.5f, model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#aaeb9997942eea2806af6462a3dd2d8c8">center</a>);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a12d09f469a4ebff68a0d3f53432d676e">compute_aabb</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a576969c1fc26fc521921c54dc67df01e">positions</a>, wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a07fd2502d3bf0dde33994b3cea0d7628">world_idx_count</a>, wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#afdcfa085f6d302e6b08402761916cf06">world_aabb</a>.<a class="code" href="../../dd/d0f/structaabb__s.html#a400047d96c36ab9f9bd28a771f7cc746">mins</a>, wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#afdcfa085f6d302e6b08402761916cf06">world_aabb</a>.<a class="code" href="../../dd/d0f/structaabb__s.html#aea21b704019e817339d64537332dd22b">maxs</a>);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    vec3_t margin = { 1.f, 1.f, 1.f };</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    VectorSubtract(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#afdcfa085f6d302e6b08402761916cf06">world_aabb</a>.<a class="code" href="../../dd/d0f/structaabb__s.html#a400047d96c36ab9f9bd28a771f7cc746">mins</a>, margin, wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#afdcfa085f6d302e6b08402761916cf06">world_aabb</a>.<a class="code" href="../../dd/d0f/structaabb__s.html#a400047d96c36ab9f9bd28a771f7cc746">mins</a>);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    VectorAdd(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#afdcfa085f6d302e6b08402761916cf06">world_aabb</a>.<a class="code" href="../../dd/d0f/structaabb__s.html#aea21b704019e817339d64537332dd22b">maxs</a>, margin, wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#afdcfa085f6d302e6b08402761916cf06">world_aabb</a>.<a class="code" href="../../dd/d0f/structaabb__s.html#aea21b704019e817339d64537332dd22b">maxs</a>);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#abab26b909fe7d133d8f9cff3fef44a92">compute_cluster_aabbs</a>(wm);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a171cd44198ae4e745b13870b571f0500">collect_ligth_polys</a>(wm, bsp, -1, &amp;wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9e646f1f1fa8d42f978917a8c6ae2772">num_light_polys</a>, &amp;wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9c3c5f24b091aeb84767660630d70581">allocated_light_polys</a>, &amp;wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a8dec0909604ae168774770416a165ee8">light_polys</a>);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a9f4335b75eb60ae62e329fb76b3da061">collect_sky_and_lava_ligth_polys</a>(wm, bsp);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; bsp-&gt;nummodels; k++)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        <a class="code" href="../../dc/d96/structbsp__model__s.html">bsp_model_t</a>* model = wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a18cbf4d3f7b3230f5ae024abfd51306b">models</a> + k;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160; </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a928275c8aca87bfbca5758e0c9cecb08">num_light_polys</a> = 0;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#abebc9a83edf52283710113d643740461">allocated_light_polys</a> = 0;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a46782497dddbc3b945647992625634ee">light_polys</a> = NULL;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a171cd44198ae4e745b13870b571f0500">collect_ligth_polys</a>(wm, bsp, k, &amp;model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a928275c8aca87bfbca5758e0c9cecb08">num_light_polys</a>, &amp;model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#abebc9a83edf52283710113d643740461">allocated_light_polys</a>, &amp;model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a46782497dddbc3b945647992625634ee">light_polys</a>);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        model-&gt;<a class="code" href="../../dc/d96/structbsp__model__s.html#a2380492e13f54a6eede366a491dc34ce">transparent</a> = <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a98e543c5e86069508cbf6f01caf2e7e4">is_model_transparent</a>(wm, model);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a19a9eac0d8f2611cde3b1a000c5b28c3">collect_cluster_lights</a>(wm, bsp);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a08f90bf485355ce1d872664c0ca94245">compute_sky_visibility</a>(wm, bsp);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="a7446606a1b66213f41774c877fa39609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7446606a1b66213f41774c877fa39609">&#9670;&nbsp;</a></span>bsp_mesh_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> bsp_mesh_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html#l01760">1760</a> of file <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html">bsp_mesh.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;{</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a18cbf4d3f7b3230f5ae024abfd51306b">models</a>);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a576969c1fc26fc521921c54dc67df01e">positions</a>);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ad6c2d7a20fc4ca025f9cc3e0f88c94d6">tex_coords</a>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a8a350aba9ef172a175054fc2c2b0063d">tangents</a>);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a66a4acac855d27fb97ea5e913ae6d33e">indices</a>);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a673610a720ad405ec3d60647c5db94f3">clusters</a>);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ade37a58abe3ddf61ac024d666dec3638">materials</a>);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af9a2795a6ef738706942d30fdfd8fea5">texel_density</a>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a8dec0909604ae168774770416a165ee8">light_polys</a>);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a334a9b1d2bd6e116c30c6264a7c194ba">cluster_lights</a>);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a473af1351495a759ac2c3ac331abce2f">cluster_light_offsets</a>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(wm-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aab6f58e03b7048fac78672f86f83aebf">cluster_aabbs</a>);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    memset(wm, 0, <span class="keyword">sizeof</span>(*wm));</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="a69d36a4facff2ae7900172ce3cae1ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69d36a4facff2ae7900172ce3cae1ff5">&#9670;&nbsp;</a></span>bsp_mesh_register_textures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> bsp_mesh_register_textures </td>
          <td>(</td>
          <td class="paramtype">bsp_t *&#160;</td>
          <td class="paramname"><em>bsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html#l01781">1781</a> of file <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html">bsp_mesh.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;{</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bsp-&gt;numtexinfo; i++) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        mtexinfo_t *info = bsp-&gt;texinfo + i;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        imageflags_t flags;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">if</span> (info-&gt;c.flags &amp; SURF_WARP)</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            flags = IF_TURBULENT;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            flags = IF_NONE;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordtype">char</span> buffer[MAX_QPATH];</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a>(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;textures/&quot;</span>, info-&gt;name, <span class="stringliteral">&quot;.wal&quot;</span>, NULL);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(buffer, buffer);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160; </div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <a class="code" href="../../d7/d66/structpbr__material__s.html">pbr_material_t</a> * mat = <a class="code" href="../../de/d87/material_8c.html#af59a8105961f7102434df2e645b437c8">MAT_FindPBRMaterial</a>(buffer);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <span class="keywordflow">if</span> (!mat)</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            Com_EPrintf(<span class="stringliteral">&quot;error finding material &#39;%s&#39;\n&quot;</span>, buffer);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a>* image_diffuse = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(buffer, IT_WALL, flags | IF_SRGB);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a>* image_normals = NULL;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a>* image_emissive = NULL;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <span class="keywordflow">if</span> (image_diffuse != R_NOTEXTURE)</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <span class="comment">// attempt loading the second texture</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            <a class="code" href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a>(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;textures/&quot;</span>, info-&gt;name, <span class="stringliteral">&quot;_n.tga&quot;</span>, NULL);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(buffer, buffer);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            image_normals = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(buffer, IT_WALL, flags);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            <span class="keywordflow">if</span> (image_normals == R_NOTEXTURE) image_normals = NULL;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <span class="keywordflow">if</span> (image_normals &amp;&amp; !image_normals-&gt;processing_complete)</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                <a class="code" href="../../dd/dbb/textures_8c.html#adf9f289fcaf29e68d4ed69c516bba79b">vkpt_normalize_normal_map</a>(image_normals);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            <span class="comment">// attempt loading the emissive texture</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            <a class="code" href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a>(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;textures/&quot;</span>, info-&gt;name, <span class="stringliteral">&quot;_light.tga&quot;</span>, NULL);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(buffer, buffer);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            image_emissive = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(buffer, IT_WALL, flags | IF_SRGB);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <span class="keywordflow">if</span> (image_emissive == R_NOTEXTURE) image_emissive = NULL;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            <span class="keywordflow">if</span> (image_emissive &amp;&amp; !image_emissive-&gt;processing_complete &amp;&amp; (mat-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#aa3262b3d306917690e1c9f6ef3cdbe07">emissive_scale</a> &gt; 0.f) &amp;&amp; ((mat-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#aa3aaccb7a0270ae59db9383e443e47a1">flags</a> &amp; <a class="code" href="../../d2/d6f/constants_8h.html#a212cb7c9530fb13f2ac74d440033ca56">MATERIAL_FLAG_LIGHT</a>) != 0 || <a class="code" href="../../de/d87/material_8c.html#acf5d3e61e3e0793db423c63edc03cda9">MAT_IsKind</a>(mat-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#aa3aaccb7a0270ae59db9383e443e47a1">flags</a>, <a class="code" href="../../d2/d6f/constants_8h.html#acda77f7e03257112646c3bc1e9322d53">MATERIAL_KIND_LAVA</a>)))</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                <a class="code" href="../../dd/dbb/textures_8c.html#ab28c26fd0af9d89a9ce5b7237fdf5c10">vkpt_extract_emissive_texture_info</a>(image_emissive);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="comment">// finish registration</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <a class="code" href="../../de/d87/material_8c.html#ab4dcba3dbbde5800f2a8844e5a079df0">MAT_RegisterPBRMaterial</a>(mat, image_diffuse, image_normals, image_emissive);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160; </div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        info-&gt;material = mat;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    }</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160; </div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="comment">// link the animation sequences</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bsp-&gt;numtexinfo; i++) </div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        mtexinfo_t *texinfo = bsp-&gt;texinfo + i;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <a class="code" href="../../d7/d66/structpbr__material__s.html">pbr_material_t</a>* material = texinfo-&gt;material;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <span class="keywordflow">if</span> (texinfo-&gt;numframes &gt; 1)</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        {</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            assert(texinfo-&gt;next);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            assert(texinfo-&gt;next-&gt;material);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160; </div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#ade97ffa6279b943e52e7350d6a08f6c5">num_frames</a> = texinfo-&gt;numframes;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#a794c1d120897d6a4b53f4ffd887e6250">next_frame</a> = texinfo-&gt;next-&gt;material-&gt;flags &amp; <a class="code" href="../../d2/d6f/constants_8h.html#ad55101978c4c0edaf89906d2ffd7baba">MATERIAL_INDEX_MASK</a>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="a14639010e877bd0a46b5ce792eeca9d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14639010e877bd0a46b5ce792eeca9d1">&#9670;&nbsp;</a></span>build_transparency_blas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> build_transparency_blas </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00217">217</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#ad02cdb62b7e70e6545b2530e24b6ba77">update_particle_blas</a>(cmd_buf);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#aebc5ee8f39ad6b1b9961c80b03c23d77">update_beam_blas</a>(cmd_buf);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a455fa99a76e16674f727d6b183f5a453">update_sprite_blas</a>(cmd_buf);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// No barrier here because a single barrier is used later in the pipeline, after building all the BLAS-es</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="abfa622dc46f89c54083f9099f6901f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfa622dc46f89c54083f9099f6901f0a">&#9670;&nbsp;</a></span>create_entity_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> create_entity_matrix </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>matrix</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">entity_t *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>enable_left_hand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dca/matrix_8c_source.html#l00023">23</a> of file <a class="el" href="../../dc/dca/matrix_8c_source.html">matrix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    vec3_t axis[3];</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    vec3_t <a class="code" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>[0] = (1.f-e-&gt;backlerp) * e-&gt;origin[0] + e-&gt;backlerp * e-&gt;oldorigin[0];</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>[1] = (1.f-e-&gt;backlerp) * e-&gt;origin[1] + e-&gt;backlerp * e-&gt;oldorigin[1];</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <a class="code" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>[2] = (1.f-e-&gt;backlerp) * e-&gt;origin[2] + e-&gt;backlerp * e-&gt;oldorigin[2];</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    AnglesToAxis(e-&gt;angles, axis);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordtype">float</span> scale = (e-&gt;scale &gt; 0.f) ? e-&gt;scale : 1.f;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    vec3_t scales = { scale, scale, scale };</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">if</span> ((e-&gt;flags &amp; RF_LEFTHAND) &amp;&amp; enable_left_hand)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        scales[1] *= -1.f;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    }</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    matrix[0]  = axis[0][0] * scales[0];</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    matrix[4]  = axis[1][0] * scales[1];</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    matrix[8]  = axis[2][0] * scales[2];</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    matrix[12] = <a class="code" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>[0];</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    matrix[1]  = axis[0][1] * scales[0];</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    matrix[5]  = axis[1][1] * scales[1];</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    matrix[9]  = axis[2][1] * scales[2];</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    matrix[13] = <a class="code" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>[1];</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    matrix[2]  = axis[0][2] * scales[0];</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    matrix[6]  = axis[1][2] * scales[1];</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    matrix[10] = axis[2][2] * scales[2];</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    matrix[14] = <a class="code" href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a>[2];</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    matrix[3]  = 0.0f;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    matrix[7]  = 0.0f;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    matrix[11] = 0.0f;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    matrix[15] = 1.0f;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ad6ae26b32f0a01a6cdc6575ad7981fd4">process_bsp_entity()</a>, and <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af9c083228edd32c9a7b2d9737fc7f38b">process_regular_entity()</a>.</p>

</div>
</div>
<a id="ae5a9045fcc3f820845ae78a1fd903ea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5a9045fcc3f820845ae78a1fd903ea7">&#9670;&nbsp;</a></span>create_orthographic_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> create_orthographic_matrix </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>matrix</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>xmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>xmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ymin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ymax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>znear</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>zfar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dca/matrix_8c_source.html#l00100">100</a> of file <a class="el" href="../../dc/dca/matrix_8c_source.html">matrix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>, depth;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = xmax - xmin;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = ymax - ymin;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    depth = zfar - znear;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    matrix[0] = 2 / <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    matrix[4] = 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    matrix[8] = 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    matrix[12] = -(xmax + xmin) / <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    matrix[1] = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    matrix[5] = 2 / <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    matrix[9] = 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    matrix[13] = -(ymax + ymin) / <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    matrix[2] = 0;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    matrix[6] = 0;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    matrix[10] = 1 / depth;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    matrix[14] = -znear / depth;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    matrix[3] = 0;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    matrix[7] = 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    matrix[11] = 0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    matrix[15] = 1;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#a87eef903712cce745b7550cd2079729e">vkpt_shadow_map_setup()</a>.</p>

</div>
</div>
<a id="a29c4528540d1571d245124dffc4f1e40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c4528540d1571d245124dffc4f1e40">&#9670;&nbsp;</a></span>create_projection_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> create_projection_matrix </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>matrix</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>znear</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>zfar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>fov_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>fov_y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dca/matrix_8c_source.html#l00063">63</a> of file <a class="el" href="../../dc/dca/matrix_8c_source.html">matrix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">float</span> xmin, xmax, ymin, ymax;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>, depth;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    ymax = znear * tan(fov_y * M_PI / 360.0);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    ymin = -ymax;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    xmax = znear * tan(fov_x * M_PI / 360.0);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    xmin = -xmax;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = xmax - xmin;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = ymax - ymin;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    depth = zfar - znear;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    matrix[0] = 2 * znear / <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    matrix[4] = 0;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    matrix[8] = (xmax + xmin) / <a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    matrix[12] = 0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    matrix[1] = 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    matrix[5] = -2 * znear / <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    matrix[9] = (ymax + ymin) / <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    matrix[13] = 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    matrix[2] = 0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    matrix[6] = 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    matrix[10] = (zfar + znear) / depth;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    matrix[14] = 2 * zfar * znear / depth;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    matrix[3] = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    matrix[7] = 0;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    matrix[11] = 1;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    matrix[15] = 0;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9cf5dce297daa568001088c0e2a96313">prepare_ubo()</a>.</p>

</div>
</div>
<a id="aeabf42e3198031505b78b17d2aeffd8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeabf42e3198031505b78b17d2aeffd8a">&#9670;&nbsp;</a></span>create_view_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> create_view_matrix </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>matrix</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">refdef_t *&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dca/matrix_8c_source.html#l00131">131</a> of file <a class="el" href="../../dc/dca/matrix_8c_source.html">matrix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    vec3_t viewaxis[3];</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    AnglesToAxis(fd-&gt;viewangles, viewaxis);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    matrix[0]  = -viewaxis[1][0];</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    matrix[4]  = -viewaxis[1][1];</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    matrix[8]  = -viewaxis[1][2];</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    matrix[12] = DotProduct(viewaxis[1], fd-&gt;vieworg);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    matrix[1]  = viewaxis[2][0];</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    matrix[5]  = viewaxis[2][1];</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    matrix[9]  = viewaxis[2][2];</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    matrix[13] = -DotProduct(viewaxis[2], fd-&gt;vieworg);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    matrix[2]  = viewaxis[0][0];</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    matrix[6]  = viewaxis[0][1];</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    matrix[10] = viewaxis[0][2];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    matrix[14] = -DotProduct(viewaxis[0], fd-&gt;vieworg);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    matrix[3]  = 0;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    matrix[7]  = 0;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    matrix[11] = 0;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    matrix[15] = 1;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9cf5dce297daa568001088c0e2a96313">prepare_ubo()</a>.</p>

</div>
</div>
<a id="acfc0d83899f0170e77817df971d1de02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc0d83899f0170e77817df971d1de02">&#9670;&nbsp;</a></span>destroy_transparency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> destroy_transparency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00151">151</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    vkDestroyBufferView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_color_buffer_view, NULL);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    vkDestroyBufferView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_color_buffer_view, NULL);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    vkDestroyBufferView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_info_buffer_view, NULL);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    vkDestroyBuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_buffer, NULL);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    vkDestroyBuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.scratch_buffer, NULL);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    vkDestroyBuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.vertex_buffer, NULL);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    vkDestroyBuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.index_buffer, NULL);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    vkDestroyBuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_color_buffer, NULL);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    vkDestroyBuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_color_buffer, NULL);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    vkDestroyBuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_info_buffer, NULL);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    qvkDestroyAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_blas, NULL);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    qvkDestroyAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_blas, NULL);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    qvkDestroyAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_blas, NULL);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_buffer_memory, NULL);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.device_buffer_memory, NULL);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.device_blas_memory, NULL);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2428bc84b774f1b53e765b81b84973a9">vkpt_destroy_all()</a>.</p>

</div>
</div>
<a id="a45bba9a99aeff4853a094ac93567c135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45bba9a99aeff4853a094ac93567c135">&#9670;&nbsp;</a></span>draw_profiler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> draw_profiler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>enable_asvgf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/ddb/profiler_8c_source.html#l00134">134</a> of file <a class="el" href="../../d2/ddb/profiler_8c_source.html">profiler.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">int</span> x = 500;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">int</span> y = 100;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    qhandle_t font;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    font = R_RegisterFont(<span class="stringliteral">&quot;conchars&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span>(!font)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#define PROFILER_DO(name, indent) \</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">    draw_query(x, y, font, #name + 9, name); y += 10;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_FRAME_TIME, 0);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_INSTANCE_GEOMETRY, 1);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_BVH_UPDATE, 1);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_UPDATE_ENVIRONMENT, 1);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_SHADOW_MAP, 1);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_ASVGF_GRADIENT_SAMPLES, 1);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_ASVGF_DO_GRADIENT_SAMPLES, 2);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_PRIMARY_RAYS, 1);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/ddb/profiler_8c.html#a5cb0d4552f71eaa92226f9f5b417360d">cvar_pt_reflect_refract</a>-&gt;integer &gt; 0) { <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_REFLECT_REFRACT_1, 1); }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/ddb/profiler_8c.html#a5cb0d4552f71eaa92226f9f5b417360d">cvar_pt_reflect_refract</a>-&gt;integer &gt; 1) { <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_REFLECT_REFRACT_2, 1); }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_DIRECT_LIGHTING, 1);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_INDIRECT_LIGHTING, 1);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_GOD_RAYS, 1);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_GOD_RAYS_REFLECT_REFRACT, 1);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_GOD_RAYS_FILTER, 1);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (enable_asvgf)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_ASVGF_FULL, 1);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_ASVGF_RECONSTRUCT_GRADIENT, 2);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_ASVGF_TEMPORAL, 2);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_ASVGF_ATROUS, 2);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_ASVGF_TAA, 2);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_COMPOSITING, 1);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_MGPU_TRANSFERS, 1);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_INTERLEAVE, 1);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_BLOOM, 1);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a>(PROFILER_TONE_MAPPING, 2);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#undef PROFILER_DO</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a6e118e55bb20687cff735f03176035e4">R_EndFrame_RTX()</a>.</p>

</div>
</div>
<a id="af648dfb8c915a7c581b972f2701d1aa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af648dfb8c915a7c581b972f2701d1aa7">&#9670;&nbsp;</a></span>end_perf_marker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> end_perf_marker </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>command_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc6/vkpt_8h_source.html#l00734">734</a> of file <a class="el" href="../../d1/dc6/vkpt_8h_source.html">vkpt.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;{</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (qvkCmdEndDebugUtilsLabelEXT != NULL)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        qvkCmdEndDebugUtilsLabelEXT(command_buffer);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d1/dc6/vkpt_8h.html#aa07bf23807800e110da5519e58bdfcc9">vkpt_profiler_query</a>(command_buffer, index, <a class="code" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7dda3ea083edad695232f7d2c30d7e77">PROFILER_STOP</a>));</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7051461bfc27150372b710955371ca07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7051461bfc27150372b710955371ca07">&#9670;&nbsp;</a></span>get_transparency_beam_blas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkAccelerationStructureNV get_transparency_beam_blas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00231">231</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_blas;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#afa98cd801df2f0c4a1c984354db6ec13">vkpt_pt_create_toplevel()</a>.</p>

</div>
</div>
<a id="ada1567bc5639b4f13fc4bce48a6238c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada1567bc5639b4f13fc4bce48a6238c6">&#9670;&nbsp;</a></span>get_transparency_beam_color_buffer_view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkBufferView get_transparency_beam_color_buffer_view </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00246">246</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_color_buffer_view;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#a32f476bb9016fdcdf5128f4af95f67dc">vkpt_pt_update_descripter_set_bindings()</a>.</p>

</div>
</div>
<a id="a5b8ac7af5b695b722ffb82ba3ea2a63b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b8ac7af5b695b722ffb82ba3ea2a63b">&#9670;&nbsp;</a></span>get_transparency_counts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> get_transparency_counts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>particle_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>beam_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>sprite_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00256">256</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    *<a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a> = <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_num;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    *<a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a> = <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_num;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    *<a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a> = <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_num;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#afa98cd801df2f0c4a1c984354db6ec13">vkpt_pt_create_toplevel()</a>.</p>

</div>
</div>
<a id="a95f9a40fb2711235e3b923f9b4d9d98b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f9a40fb2711235e3b923f9b4d9d98b">&#9670;&nbsp;</a></span>get_transparency_particle_blas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkAccelerationStructureNV get_transparency_particle_blas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00226">226</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_blas;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#afa98cd801df2f0c4a1c984354db6ec13">vkpt_pt_create_toplevel()</a>.</p>

</div>
</div>
<a id="aa8860c71b63f7d3e90bd4718329efca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8860c71b63f7d3e90bd4718329efca7">&#9670;&nbsp;</a></span>get_transparency_particle_color_buffer_view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkBufferView get_transparency_particle_color_buffer_view </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00241">241</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_color_buffer_view;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#a32f476bb9016fdcdf5128f4af95f67dc">vkpt_pt_update_descripter_set_bindings()</a>.</p>

</div>
</div>
<a id="a69794649ae804404c4fc54cbdfe9cc06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69794649ae804404c4fc54cbdfe9cc06">&#9670;&nbsp;</a></span>get_transparency_sprite_blas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkAccelerationStructureNV get_transparency_sprite_blas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00236">236</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_blas;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#afa98cd801df2f0c4a1c984354db6ec13">vkpt_pt_create_toplevel()</a>.</p>

</div>
</div>
<a id="a0e557871c9800aa81aa4ccea5d5748d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e557871c9800aa81aa4ccea5d5748d8">&#9670;&nbsp;</a></span>get_transparency_sprite_info_buffer_view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkBufferView get_transparency_sprite_info_buffer_view </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00251">251</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_info_buffer_view;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#a32f476bb9016fdcdf5128f4af95f67dc">vkpt_pt_update_descripter_set_bindings()</a>.</p>

</div>
</div>
<a id="a76bda46cee7c8c83ecda0a3fdf944aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76bda46cee7c8c83ecda0a3fdf944aab">&#9670;&nbsp;</a></span>get_triangle_off_center()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qboolean get_triangle_off_center </td>
          <td>(</td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>positions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>anti_center</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html#l00282">282</a> of file <a class="el" href="../../d1/d51/bsp__mesh_8c_source.html">bsp_mesh.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* v0 = positions + 0;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* v1 = positions + 3;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* v2 = positions + 6;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// Compute the triangle center</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    VectorCopy(v0, center);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    VectorAdd(center, v1, center);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    VectorAdd(center, v2, center);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    VectorScale(center, 1.f / 3.f, center);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// Compute the normal</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    vec3_t e1, e2, normal;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    VectorSubtract(v1, v0, e1);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    VectorSubtract(v2, v0, e2);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    CrossProduct(e1, e2, normal);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">float</span> length = <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(normal);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// Offset the center by one normal to make sure that the point is</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// inside a BSP leaf and not on a boundary plane.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    VectorAdd(center, normal, center);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (anti_center)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        VectorMA(center, -2.f, normal, anti_center);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> (length &gt; 0.f);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/d51/bsp__mesh_8c.html#ab676342c4082f82b9e09f53cc6691f8c">bsp_mesh_load_custom_sky()</a>, <a class="el" href="../../d1/d51/bsp__mesh_8c.html#a171cd44198ae4e745b13870b571f0500">collect_ligth_polys()</a>, <a class="el" href="../../d1/d51/bsp__mesh_8c.html#a9f4335b75eb60ae62e329fb76b3da061">collect_sky_and_lava_ligth_polys()</a>, <a class="el" href="../../d1/d51/bsp__mesh_8c.html#aac16569c5e2d79e52f56f87392866e50">collect_surfaces()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#aac6c8f16c038616ba967759a02055b19">vkpt_build_cylinder_light()</a>.</p>

</div>
</div>
<a id="a394b60f7daa64db1da78fa31e474f81d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a394b60f7daa64db1da78fa31e474f81d">&#9670;&nbsp;</a></span>IMG_Load_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> IMG_Load_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>pic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00632">632</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;{</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    image-&gt;pix_data = pic;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#adaa1fb45714cf8322f2a26ca33d6c049">image_loading_dirty_flag</a> = 1;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="acab7ddea0c6abee1c21455b2b9fdf176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acab7ddea0c6abee1c21455b2b9fdf176">&#9670;&nbsp;</a></span>IMG_ReadPixels_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte* IMG_ReadPixels_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>rowbytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03028">3028</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;{</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adc06751982961eeba364d716b804359b">surf_format</a>.format != VK_FORMAT_B8G8R8A8_SRGB &amp;&amp;</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adc06751982961eeba364d716b804359b">surf_format</a>.format != VK_FORMAT_R8G8B8A8_SRGB)</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    {</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;        Com_EPrintf(<span class="stringliteral">&quot;IMG_ReadPixels: unsupported swap chain format (%d)!\n&quot;</span>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adc06751982961eeba364d716b804359b">surf_format</a>.format);</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    }</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    VkCommandBuffer cmd_buf = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160; </div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    VkImage swap_chain_image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a35e6d8d722910a211710b44dd713b5de">swap_chain_images</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aec1ff219ca7e90f046e71ed586298eb4">current_swap_chain_image_index</a>];</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160; </div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;        .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;        .baseMipLevel = 0,</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;        .levelCount = 1,</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;        .baseArrayLayer = 0,</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        .layerCount = 1</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    };</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        </div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        .image = swap_chain_image,</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        .srcAccessMask = 0,</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        .dstAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_PRESENT_SRC_KHR,</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    );</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">screenshot_image</a>,</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        .srcAccessMask = VK_ACCESS_HOST_READ_BIT,</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        .dstAccessMask = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    );</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160; </div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    VkImageCopy img_copy_region = {</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        .srcSubresource = { VK_IMAGE_ASPECT_COLOR_BIT, 0, 0, 1 },</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;        .dstSubresource = { VK_IMAGE_ASPECT_COLOR_BIT, 0, 0, 1 },</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;        .extent = { <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.width, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.height, 1 }</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    };</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    vkCmdCopyImage(cmd_buf,</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        swap_chain_image, VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">screenshot_image</a>, VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;        1, &amp;img_copy_region);</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        .image = swap_chain_image,</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;        .srcAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        .dstAccessMask = 0,</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    );</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160; </div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">screenshot_image</a>,</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        .srcAccessMask = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        .dstAccessMask = VK_ACCESS_HOST_READ_BIT,</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_GENERAL</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    );</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160; </div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, qfalse);</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4b6a8e87531a795daeb57355822eb915">vkpt_wait_idle</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160; </div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    VkImageSubresource subresource = {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;        .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        .arrayLayer = 0,</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        .mipLevel = 0</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    };</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160; </div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    VkSubresourceLayout subresource_layout;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    vkGetImageSubresourceLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">screenshot_image</a>, &amp;subresource, &amp;subresource_layout);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160; </div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    <span class="keywordtype">void</span> *device_data;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkMapMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1c4219b9b544793270d5a1a338649b1e">screenshot_image_memory</a>, 0, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0b17db91e89ea7d4df6272b41ed69139">screenshot_image_memory_size</a>, 0, &amp;device_data));</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    </div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="keywordtype">int</span> pitch = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.width * 3;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <span class="keywordtype">byte</span> *pixels = FS_AllocTempMem(pitch * <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.height);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160; </div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> row = 0; row &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.height; row++)</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    {</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordtype">byte</span>* src_row = (<span class="keywordtype">byte</span>*)device_data + subresource_layout.rowPitch * row;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <span class="keywordtype">byte</span>* dst_row = pixels + pitch * (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.height - row - 1);</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160; </div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adc06751982961eeba364d716b804359b">surf_format</a>.format == VK_FORMAT_B8G8R8A8_SRGB)</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        {</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> col = 0; col &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.width; col++)</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;            {</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;                dst_row[0] = src_row[2];</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;                dst_row[1] = src_row[1];</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;                dst_row[2] = src_row[0];</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160; </div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                src_row += 4;</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;                dst_row += 3;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;            }</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        }</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        <span class="keywordflow">else</span> <span class="comment">// must be VK_FORMAT_R8G8B8A8_SRGB then</span></div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        {</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> col = 0; col &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.width; col++)</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;            {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;                dst_row[0] = src_row[0];</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                dst_row[1] = src_row[1];</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                dst_row[2] = src_row[2];</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                src_row += 4;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                dst_row += 3;</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            }</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        }</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    }</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160; </div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    vkUnmapMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1c4219b9b544793270d5a1a338649b1e">screenshot_image_memory</a>);</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160; </div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    *<a class="code" href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.width;</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    *<a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.height;</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    *rowbytes = pitch;</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <span class="keywordflow">return</span> pixels;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a322bbec75bb1aeece99bf67c56aaa434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322bbec75bb1aeece99bf67c56aaa434">&#9670;&nbsp;</a></span>IMG_Unload_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> IMG_Unload_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00639">639</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;{</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span>(image-&gt;pix_data)</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(image-&gt;pix_data);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    image-&gt;pix_data = NULL;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keyword">const</span> uint32_t index = image - <a class="code" href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[index])</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keyword">const</span> uint32_t frame_index = (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> + <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>) % <a class="code" href="../../dd/dbb/textures_8c.html#a2b643e6acc78f2f583d076b662464e73">DESTROY_LATENCY</a>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="../../d4/d78/struct_unused_resources.html">UnusedResources</a>* unused_resources = <a class="code" href="../../dd/dbb/textures_8c.html#a32e23efedfcfeb0a7e5db920fd2be360">texture_system</a>.<a class="code" href="../../d5/dac/struct_texture_system.html#a745c3787154030d4b54117df55326f4b">unused_resources</a> + frame_index;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keyword">const</span> uint32_t unused_index = unused_resources-&gt;<a class="code" href="../../d4/d78/struct_unused_resources.html#a145110ce987e5a4906bfd6dfe89b0f4b">image_num</a>++;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    unused_resources-&gt;<a class="code" href="../../d4/d78/struct_unused_resources.html#a2125fcabddb723faaf1b682020ce2eee">images</a>[unused_index] = <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[index];</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    unused_resources-&gt;<a class="code" href="../../d4/d78/struct_unused_resources.html#a9b286e8026ecff798ba676bdb949a4b5">image_memory</a>[unused_index] = <a class="code" href="../../dd/dbb/textures_8c.html#adb33152db674c2b3301fc9f44f78f60b">tex_image_memory</a>[index];</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    unused_resources-&gt;<a class="code" href="../../d4/d78/struct_unused_resources.html#a170f2eb40b1a5a464e3deb31909aea2e">image_views</a>[unused_index] = <a class="code" href="../../dd/dbb/textures_8c.html#a64d158160ba40ce5e712294b3fcf6155">tex_image_views</a>[index];</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[index] = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#a64d158160ba40ce5e712294b3fcf6155">tex_image_views</a>[index] = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    memset(<a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>, 0xff, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>));</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a37ccd56c877a66f1110f91b9a911683e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37ccd56c877a66f1110f91b9a911683e">&#9670;&nbsp;</a></span>initialize_transparency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qboolean initialize_transparency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00114">114</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a0d2dd1334be97bb1ac5e35dff0f7819a">cvar_pt_particle_size</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;pt_particle_size&quot;</span>, <span class="stringliteral">&quot;0.35&quot;</span>, 0);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#ac5baedefc7e2e41bbc6027b848a3b904">cvar_pt_beam_width</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;pt_beam_width&quot;</span>, <span class="stringliteral">&quot;1.0&quot;</span>, 0);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#ae13f02cb6e520411114108151e70eb19">cvar_pt_beam_lights</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;pt_beam_lights&quot;</span>, <span class="stringliteral">&quot;1.0&quot;</span>, 0);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    memset(&amp;<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> particle_vertex_position_max_size = <a class="code" href="../../d6/dae/transparency_8c.html#a545fc88bea14a420d26252b3445eed61">TR_VERTEX_MAX_NUM</a> * <a class="code" href="../../d6/dae/transparency_8c.html#a47dc853a1e4cad0daa04b372b0b663e2">TR_POSITION_SIZE</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> particle_color_size = <a class="code" href="../../d6/dae/transparency_8c.html#a274bdd044c31f24122e413d0aa5fc0c3">TR_PARTICLE_MAX_NUM</a> * <a class="code" href="../../d6/dae/transparency_8c.html#ac3e39090308180ed6e20816a2f57e980">TR_COLOR_SIZE</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> particle_data_size = particle_vertex_position_max_size + particle_color_size;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> beam_vertex_position_max_size = <a class="code" href="../../d6/dae/transparency_8c.html#a6f5cbeb41737a3ea5dd48a9f70b08231">TR_BEAM_MAX_NUM</a> * <a class="code" href="../../d6/dae/transparency_8c.html#a47dc853a1e4cad0daa04b372b0b663e2">TR_POSITION_SIZE</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> beam_color_size = <a class="code" href="../../d6/dae/transparency_8c.html#a6f5cbeb41737a3ea5dd48a9f70b08231">TR_BEAM_MAX_NUM</a> * <a class="code" href="../../d6/dae/transparency_8c.html#ac3e39090308180ed6e20816a2f57e980">TR_COLOR_SIZE</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> beam_data_size = beam_vertex_position_max_size + beam_color_size;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> sprite_vertex_position_max_size = <a class="code" href="../../d6/dae/transparency_8c.html#ac405be9841a44c8b3d9340746d325439">TR_SPRITE_MAX_NUM</a> * <a class="code" href="../../d6/dae/transparency_8c.html#a47dc853a1e4cad0daa04b372b0b663e2">TR_POSITION_SIZE</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> sprite_info_size = <a class="code" href="../../d6/dae/transparency_8c.html#ac405be9841a44c8b3d9340746d325439">TR_SPRITE_MAX_NUM</a> * <a class="code" href="../../d6/dae/transparency_8c.html#af88b9a68d93d2865515aa03d4525fcc5">TR_SPRITE_INFO_SIZE</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> sprite_data_size = sprite_vertex_position_max_size + sprite_info_size;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_buffered_frame_num = <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_frame_size = particle_data_size + beam_data_size + sprite_data_size;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_buffer_size = <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_buffered_frame_num * <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_frame_size;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a2b5f25a5c879b41224e3f79fdb3aa6f5">create_blas</a>(<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a4f47809eecfd4ef9218f91ecc8494460">create_buffers</a>(<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dae/transparency_8c.html#a59be0fe6dc4be3ad8a57b4ee2ee6049e">allocate_and_bind_memory_to_buffers</a>(<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>) != VK_TRUE)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span> qfalse;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#aa985d4456b6d0533a62ec9d29e859b87">create_buffer_views</a>(<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a70cf3cde9ec3463bc4ac12874798416c">allocate_and_bind_memory_to_blas</a>(<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a85d64555fd82c387df7d5c195574ff9d">fill_index_buffer</a>(<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab2123d85b2c89033c980ed9d50feaee8">vkpt_initialize_all()</a>.</p>

</div>
</div>
<a id="ac908fa31b0f8b57d63adcdec6a49d44e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac908fa31b0f8b57d63adcdec6a49d44e">&#9670;&nbsp;</a></span>inverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> inverse </td>
          <td>(</td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>inv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dca/matrix_8c_source.html#l00158">158</a> of file <a class="el" href="../../dc/dca/matrix_8c_source.html">matrix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    inv[0] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] -</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10];</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    inv[1] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] +</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    inv[2] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] -</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6];</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    inv[3] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] +</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] +</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] -</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] -</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] +</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6];</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    inv[4] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] +</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10];</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    inv[5] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] -</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    inv[6] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] +</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6];</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    inv[7] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] -</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] -</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] +</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] +</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] -</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6];</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    inv[8] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] -</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] +</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] -</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;             <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    inv[9] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] +</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] -</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] +</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9];</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    inv[10] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] -</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] -</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[15] +</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] +</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] -</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    inv[11] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] +</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] +</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[11] -</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] -</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[7] +</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5];</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    inv[12] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] +</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] -</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] +</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9];</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    inv[13] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] -</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] +</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] -</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9];</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    inv[14] = -<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] +</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] +</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[14] -</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4]  * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[13] -</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] +</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;               <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[12] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5];</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    inv[15] = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] -</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] -</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[10] +</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[4] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[9] +</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[6] -</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;              <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[8] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[5];</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">float</span> det = <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[0] * inv[0] + <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[1] * inv[4] + <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[2] * inv[8] + <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>[3] * inv[12];</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    det = 1.0f / det;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 16; i++)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        inv[i] = inv[i] * det;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9cf5dce297daa568001088c0e2a96313">prepare_ubo()</a>.</p>

</div>
</div>
<a id="a600933621f567243c80909c5701db08d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a600933621f567243c80909c5701db08d">&#9670;&nbsp;</a></span>load_img()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qerror_t load_img </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *&#160;</td>
          <td class="paramname"><em>image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d59/images_8c_source.html#l00927">927</a> of file <a class="el" href="../../d7/d59/images_8c_source.html">images.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordtype">byte</span>            *pic;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    imageformat_t   fmt;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    qerror_t        ret;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordtype">size_t</span> len = strlen(name);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="comment">// must have an extension and at least 1 char of base name</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span> (len &lt;= 4) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">return</span> Q_ERR_NAMETOOSHORT;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (name[len - 4] != <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">return</span> Q_ERR_INVALID_PATH;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    memcpy(image-&gt;name, name, len + 1);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    image-&gt;baselen = len - 4;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    image-&gt;type = 0;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    image-&gt;flags = 0;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    image-&gt;registration_sequence = 1;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="comment">// find out original extension</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">for</span> (fmt = 0; fmt &lt; IM_MAX; fmt++) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="keywordflow">if</span> (!Q_stricmp(image-&gt;name + image-&gt;baselen + 1, <a class="code" href="../../d7/d59/images_8c.html#a444022996657e40d63346fc826b73b6e">img_loaders</a>[fmt].ext)) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="comment">// load the pic from disk</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    pic = NULL;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// first try with original extension</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    ret = <a class="code" href="../../d7/d59/images_8c.html#adb7b6935c425d4d5f3d7a0a79ab5a518">_try_image_format</a>(fmt, image, &amp;pic);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">if</span> (ret == Q_ERR_NOENT) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="comment">// retry with remaining extensions</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        ret = <a class="code" href="../../d7/d59/images_8c.html#a3720d7aa1996a899d99959ee8ecf0509">try_other_formats</a>(fmt, image, &amp;pic);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="comment">// if we are replacing 8-bit texture with a higher resolution 32-bit</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="comment">// texture, we need to recover original image dimensions</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">if</span> (fmt &lt;= IM_WAL &amp;&amp; ret &gt; IM_WAL) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="../../d7/d59/images_8c.html#a10d4e0c1445fd601768d394a5579d96d">get_image_dimensions</a>(fmt, image);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="comment">// if we are replacing 8-bit texture with a higher resolution 32-bit</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="comment">// texture, we need to recover original image dimensions</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (fmt &lt;= IM_WAL &amp;&amp; ret &gt; IM_WAL) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <a class="code" href="../../d7/d59/images_8c.html#a10d4e0c1445fd601768d394a5579d96d">get_image_dimensions</a>(fmt, image);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        memset(image, 0, <span class="keyword">sizeof</span>(*image));</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="preprocessor">#if USE_REF == REF_VKPT</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    image-&gt;pix_data = pic;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">return</span> Q_ERR_SUCCESS;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../dd/dbb/textures_8c.html#af4cca0db7dcedf8ad93689601dc75a82">IMG_ReloadAll()</a>.</p>

</div>
</div>
<a id="a22b7f2a338041e0da3cb05679b18883f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22b7f2a338041e0da3cb05679b18883f">&#9670;&nbsp;</a></span>MOD_LoadMD2_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qerror_t MOD_LoadMD2_RTX </td>
          <td>(</td>
          <td class="paramtype">model_t *&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> *&#160;</td>
          <td class="paramname"><em>rawdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d03/vkpt_2models_8c_source.html#l00186">186</a> of file <a class="el" href="../../d4/d03/vkpt_2models_8c_source.html">models.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    dmd2header_t    header;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    dmd2frame_t     *src_frame;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    dmd2trivertx_t  *src_vert;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    dmd2triangle_t  *src_tri;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    dmd2stvert_t    *src_tc;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">char</span>            *src_skin;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="../../d0/d28/structmaliasframe__s.html">maliasframe_t</a>   *dst_frame;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_t</a>    *dst_mesh;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">int</span>             val;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    uint16_t        remap[<a class="code" href="../../d2/d61/gl_8h.html#af40bd42d270cffe7e590392f64215712">TESS_MAX_INDICES</a>];</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    uint16_t        vertIndices[<a class="code" href="../../d2/d61/gl_8h.html#af40bd42d270cffe7e590392f64215712">TESS_MAX_INDICES</a>];</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    uint16_t        tcIndices[<a class="code" href="../../d2/d61/gl_8h.html#af40bd42d270cffe7e590392f64215712">TESS_MAX_INDICES</a>];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    uint16_t        finalIndices[<a class="code" href="../../d2/d61/gl_8h.html#af40bd42d270cffe7e590392f64215712">TESS_MAX_INDICES</a>];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">int</span>             numverts, numindices;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordtype">char</span>            skinname[MAX_QPATH];</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    vec_t           scale_s, scale_t;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    vec3_t          mins, maxs;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    qerror_t        ret;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (length &lt; <span class="keyword">sizeof</span>(header)) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">return</span> Q_ERR_FILE_TOO_SMALL;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// byte swap the header</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    header = *(dmd2header_t *)rawdata;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <span class="keyword">sizeof</span>(header) / 4; i++) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        ((uint32_t *)&amp;header)[i] = LittleLong(((uint32_t *)&amp;header)[i]);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// validate the header</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    ret = <a class="code" href="../../d0/deb/models_8c.html#a0894fa373eda8e408d796d3c7dd3f46b">MOD_ValidateMD2</a>(&amp;header, length);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">if</span> (ret == Q_ERR_TOO_FEW) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="comment">// empty models draw nothing</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            model-&gt;type = MOD_EMPTY;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">return</span> Q_ERR_SUCCESS;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// load all triangle indices</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    numindices = 0;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    src_tri = (dmd2triangle_t *)((<span class="keywordtype">byte</span> *)rawdata + header.ofs_tris);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; header.num_tris; i++) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordtype">int</span> good = 1;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 3; j++) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            uint16_t idx_xyz = LittleShort(src_tri-&gt;index_xyz[j]);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            uint16_t idx_st = LittleShort(src_tri-&gt;index_st[j]);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="comment">// some broken models have 0xFFFF indices</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">if</span> (idx_xyz &gt;= header.num_xyz || idx_st &gt;= header.num_st) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                good = 0;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            vertIndices[numindices + j] = idx_xyz;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            tcIndices[numindices + j] = idx_st;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (good) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="comment">// only count good triangles</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            numindices += 3;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        src_tri++;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (numindices &lt; 3) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">return</span> Q_ERR_TOO_FEW;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    qboolean all_normals_same = qtrue;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">int</span> same_normal = -1;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    src_frame = (dmd2frame_t *)((<span class="keywordtype">byte</span> *)rawdata + header.ofs_frames);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numindices; i++)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordtype">int</span> v = vertIndices[i];</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordtype">int</span> normal = src_frame-&gt;verts[v].lightnormalindex;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// detect if the model has broken normals - they are all the same in that case</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment">// it happens with players/w_&lt;weapon&gt;.md2 models for example</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> (same_normal &lt; 0)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            same_normal = normal;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (normal != same_normal)</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            all_normals_same = qfalse;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numindices; i++) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        remap[i] = 0xFFFF;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// remap all triangle indices</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    numverts = 0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    src_tc = (dmd2stvert_t *)((<span class="keywordtype">byte</span> *)rawdata + header.ofs_st);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numindices; i++) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">if</span> (remap[i] != 0xFFFF) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">continue</span>; <span class="comment">// already remapped</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">// only dedup vertices if we&#39;re not regenerating normals</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (!all_normals_same)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = i + 1; j &lt; numindices; j++) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">if</span> (vertIndices[i] == vertIndices[j] &amp;&amp;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    (src_tc[tcIndices[i]].s == src_tc[tcIndices[j]].s &amp;&amp;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                        src_tc[tcIndices[i]].t == src_tc[tcIndices[j]].t)) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <span class="comment">// duplicate vertex</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    remap[j] = i;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    finalIndices[j] = numverts;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="comment">// new vertex</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        remap[i] = i;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        finalIndices[i] = numverts++;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../d4/d68/hunk_8c.html#a7209f1bf2d0b9da5fe7619f8b223bc37">Hunk_Begin</a>(&amp;model-&gt;hunk, 50u&lt;&lt;20);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    model-&gt;type = MOD_ALIAS;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    model-&gt;nummeshes = 1;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    model-&gt;numframes = header.num_frames;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    model-&gt;meshes = MOD_Malloc(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_t</a>));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    model-&gt;frames = MOD_Malloc(header.num_frames * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d28/structmaliasframe__s.html">maliasframe_t</a>));</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    dst_mesh = model-&gt;meshes;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a550f8475292f1c571b1c709ecf1a0f03">numtris</a>    = numindices / 3;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a795c681917cc3893ed209ef3d526680a">numindices</a> = numindices;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a141055274ade8352b754a30b4e2f1c56">numverts</a>   = numverts;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a5f03732d4ae4d42d634332e31ebec88b">numskins</a>   = header.num_skins;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a2c9abf7db12e5361540974d2aa288785">positions</a>  = MOD_Malloc(numverts   * header.num_frames * <span class="keyword">sizeof</span>(vec3_t));</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a45c63054197124593b507bfc7875632a">normals</a>    = MOD_Malloc(numverts   * header.num_frames * <span class="keyword">sizeof</span>(vec3_t));</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a9d20259c4aed2125da6fb68ae22774cd">tex_coords</a> = MOD_Malloc(numverts   * header.num_frames * <span class="keyword">sizeof</span>(vec2_t));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a157d1b0cd5d462703c360aae405c6f21">tangents</a>   = MOD_Malloc(numverts   * header.num_frames * <span class="keyword">sizeof</span>(vec4_t));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#aff1405a62bd2df872fefa2c69c68cdb4">indices</a>    = MOD_Malloc(numindices * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a550f8475292f1c571b1c709ecf1a0f03">numtris</a> != header.num_tris) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        Com_DPrintf(<span class="stringliteral">&quot;%s has %d bad triangles\n&quot;</span>, model-&gt;name, header.num_tris - dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a550f8475292f1c571b1c709ecf1a0f03">numtris</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// store final triangle indices</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numindices; i++) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#aff1405a62bd2df872fefa2c69c68cdb4">indices</a>[i] = finalIndices[i];</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// load all skins</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    src_skin = (<span class="keywordtype">char</span> *)rawdata + header.ofs_skins;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    for (<span class="keywordtype">int</span> i = 0; i &lt; header.num_skins; i++) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8c/shared_8c.html#a4ef0eac2db15e326c37b6d46c5b5f30e">Q_memccpy</a>(skinname, src_skin, 0, <span class="keyword">sizeof</span>(skinname))) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            ret = Q_ERR_STRING_TRUNCATED;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">goto</span> fail;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(skinname, skinname);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="../../d7/d66/structpbr__material__s.html">pbr_material_t</a> * mat = <a class="code" href="../../de/d87/material_8c.html#af59a8105961f7102434df2e645b437c8">MAT_FindPBRMaterial</a>(skinname);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">if</span> (!mat)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            Com_EPrintf(<span class="stringliteral">&quot;error finding material &#39;%s&#39;\n&quot;</span>, skinname);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a>* image_diffuse = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(skinname, IT_SKIN, IF_SRGB);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a>* image_normals = NULL;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a>* image_emissive = NULL;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> (image_diffuse != R_NOTEXTURE)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="comment">// attempt loading the normals texture</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8c/shared_8c.html#a91dc50598bececc7b4064e7b63aef71e">Q_strlcpy</a>(skinname, src_skin, strlen(src_skin) - 3))</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="keywordflow">return</span> Q_ERR_STRING_TRUNCATED;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <a class="code" href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a>(skinname, <span class="keyword">sizeof</span>(skinname), skinname, <span class="stringliteral">&quot;_n.tga&quot;</span>, NULL);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(skinname, skinname);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            image_normals = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(skinname, IT_SKIN, IF_NONE);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">if</span> (image_normals == R_NOTEXTURE) image_normals = NULL;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="comment">// attempt loading the emissive texture</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8c/shared_8c.html#a91dc50598bececc7b4064e7b63aef71e">Q_strlcpy</a>(skinname, src_skin, strlen(src_skin) - 3))</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="keywordflow">return</span> Q_ERR_STRING_TRUNCATED;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a>(skinname, <span class="keyword">sizeof</span>(skinname), skinname, <span class="stringliteral">&quot;_light.tga&quot;</span>, NULL);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(skinname, skinname);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            image_emissive = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(skinname, IT_SKIN, IF_SRGB);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">if</span> (image_emissive == R_NOTEXTURE) image_emissive = NULL;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="../../de/d87/material_8c.html#ab4dcba3dbbde5800f2a8844e5a079df0">MAT_RegisterPBRMaterial</a>(mat, image_diffuse, image_normals, image_emissive);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a057af188511ce0ba0d2b8ecfb0c095bb">materials</a>[i] = mat;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        src_skin += MD2_MAX_SKINNAME;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// load all tcoords</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    src_tc = (dmd2stvert_t *)((<span class="keywordtype">byte</span> *)rawdata + header.ofs_st);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    scale_s = 1.0f / header.skinwidth;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    scale_t = 1.0f / header.skinheight;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// load all frames</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    src_frame = (dmd2frame_t *)((<span class="keywordtype">byte</span> *)rawdata + header.ofs_frames);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    dst_frame = model-&gt;frames;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; header.num_frames; j++) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        LittleVector(src_frame-&gt;scale, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0b7269b8aa3d161c26dcb6b9cfe8596a">scale</a>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        LittleVector(src_frame-&gt;translate, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a422fb92afdabc8e80acf1db01bef5b5f">translate</a>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="comment">// load frame vertices</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a14808b68c28d0a9eb463557dee6117de">ClearBounds</a>(mins, maxs);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numindices; i++) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordflow">if</span> (remap[i] != i) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            src_vert = &amp;src_frame-&gt;verts[vertIndices[i]];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            vec3_t *dst_pos = &amp;dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a2c9abf7db12e5361540974d2aa288785">positions</a> [j * numverts + finalIndices[i]];</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            vec3_t *dst_nrm = &amp;dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a45c63054197124593b507bfc7875632a">normals</a>   [j * numverts + finalIndices[i]];</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            vec2_t *dst_tc  = &amp;dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a9d20259c4aed2125da6fb68ae22774cd">tex_coords</a>[j * numverts + finalIndices[i]];</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            (*dst_tc)[0] = scale_s * src_tc[tcIndices[i]].s;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            (*dst_tc)[1] = scale_t * src_tc[tcIndices[i]].t;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            (*dst_pos)[0] = src_vert-&gt;v[0] * dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0b7269b8aa3d161c26dcb6b9cfe8596a">scale</a>[0] + dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a422fb92afdabc8e80acf1db01bef5b5f">translate</a>[0];</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            (*dst_pos)[1] = src_vert-&gt;v[1] * dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0b7269b8aa3d161c26dcb6b9cfe8596a">scale</a>[1] + dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a422fb92afdabc8e80acf1db01bef5b5f">translate</a>[1];</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            (*dst_pos)[2] = src_vert-&gt;v[2] * dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0b7269b8aa3d161c26dcb6b9cfe8596a">scale</a>[2] + dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a422fb92afdabc8e80acf1db01bef5b5f">translate</a>[2];</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            (*dst_nrm)[0] = 0.0f;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            (*dst_nrm)[1] = 0.0f;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            (*dst_nrm)[2] = 0.0f;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            val = src_vert-&gt;lightnormalindex;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> (val &lt; NUMVERTEXNORMALS) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                (*dst_nrm)[0] = <a class="code" href="../../d6/da3/math_8c.html#a2c6b6b6712f73da080d34bbc9bf897bc">bytedirs</a>[val][0];</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                (*dst_nrm)[1] = <a class="code" href="../../d6/da3/math_8c.html#a2c6b6b6712f73da080d34bbc9bf897bc">bytedirs</a>[val][1];</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                (*dst_nrm)[2] = <a class="code" href="../../d6/da3/math_8c.html#a2c6b6b6712f73da080d34bbc9bf897bc">bytedirs</a>[val][2];</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 3; k++) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                val = (*dst_pos)[k];</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="keywordflow">if</span> (val &lt; mins[k])</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    mins[k] = val;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <span class="keywordflow">if</span> (val &gt; maxs[k])</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    maxs[k] = val;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">// if all normals are the same, rebuild them as flat triangle normals</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> (all_normals_same)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> tri = 0; tri &lt; numindices / 3; tri++)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                <span class="keywordtype">int</span> i0 = j * numverts + finalIndices[tri * 3 + 0];</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                <span class="keywordtype">int</span> i1 = j * numverts + finalIndices[tri * 3 + 1];</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                <span class="keywordtype">int</span> i2 = j * numverts + finalIndices[tri * 3 + 2];</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                vec3_t *p0 = &amp;dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a2c9abf7db12e5361540974d2aa288785">positions</a>[i0];</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                vec3_t *p1 = &amp;dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a2c9abf7db12e5361540974d2aa288785">positions</a>[i1];</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                vec3_t *p2 = &amp;dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a2c9abf7db12e5361540974d2aa288785">positions</a>[i2];</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                vec3_t e1, e2, n;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                VectorSubtract(*p1, *p0, e1);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                VectorSubtract(*p2, *p0, e2);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                CrossProduct(e2, e1, n);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(n);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                VectorCopy(n, dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a45c63054197124593b507bfc7875632a">normals</a>[i0]);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                VectorCopy(n, dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a45c63054197124593b507bfc7875632a">normals</a>[i1]);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                VectorCopy(n, dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a45c63054197124593b507bfc7875632a">normals</a>[i2]);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        VectorVectorScale(mins, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0b7269b8aa3d161c26dcb6b9cfe8596a">scale</a>, mins);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        VectorVectorScale(maxs, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0b7269b8aa3d161c26dcb6b9cfe8596a">scale</a>, maxs);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a6a9d6e20f71090e2101860e235ebaf5d">radius</a> = <a class="code" href="../../d1/d8c/shared_8c.html#ab6dddd234cc47c402ffb5e305d3ca8fb">RadiusFromBounds</a>(mins, maxs);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        VectorAdd(mins, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a422fb92afdabc8e80acf1db01bef5b5f">translate</a>, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0a341e4b49936449253040d194e3f18e">bounds</a>[0]);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        VectorAdd(maxs, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a422fb92afdabc8e80acf1db01bef5b5f">translate</a>, dst_frame-&gt;<a class="code" href="../../d0/d28/structmaliasframe__s.html#a0a341e4b49936449253040d194e3f18e">bounds</a>[1]);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        src_frame = (dmd2frame_t *)((<span class="keywordtype">byte</span> *)src_frame + header.framesize);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        dst_frame++;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// fix winding order</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a795c681917cc3893ed209ef3d526680a">numindices</a>; i += 3) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordtype">int</span> tmp = dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#aff1405a62bd2df872fefa2c69c68cdb4">indices</a>[i + 1];</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#aff1405a62bd2df872fefa2c69c68cdb4">indices</a>[i + 1] = dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#aff1405a62bd2df872fefa2c69c68cdb4">indices</a>[i + 2];</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        dst_mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#aff1405a62bd2df872fefa2c69c68cdb4">indices</a>[i + 2] = tmp;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="../../d4/d03/vkpt_2models_8c.html#a656690adb2de8fc9190a31d546f76392">computeTangents</a>(model);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="../../d4/d68/hunk_8c.html#a9bc83f7fca082513653d775a0de896fd">Hunk_End</a>(&amp;model-&gt;hunk);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> Q_ERR_SUCCESS;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;fail:</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="../../d4/d68/hunk_8c.html#a9a53af1cce75a62934084de6221dfdf7">Hunk_Free</a>(&amp;model-&gt;hunk);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a177aa50ecba97fe102fa220b09821dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a177aa50ecba97fe102fa220b09821dc7">&#9670;&nbsp;</a></span>MOD_LoadMD3_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qerror_t MOD_LoadMD3_RTX </td>
          <td>(</td>
          <td class="paramtype">model_t *&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> *&#160;</td>
          <td class="paramname"><em>rawdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="ad5a7370fcde29c61b2b5b0e9c113b7f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5a7370fcde29c61b2b5b0e9c113b7f5">&#9670;&nbsp;</a></span>MOD_Reference_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> MOD_Reference_RTX </td>
          <td>(</td>
          <td class="paramtype">model_t *&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d03/vkpt_2models_8c_source.html#l00731">731</a> of file <a class="el" href="../../d4/d03/vkpt_2models_8c_source.html">models.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;{</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordtype">int</span> mesh_idx, skin_idx, frame_idx;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// register any images used by the models</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">switch</span> (model-&gt;type) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">case</span> MOD_ALIAS:</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">for</span> (mesh_idx = 0; mesh_idx &lt; model-&gt;nummeshes; mesh_idx++) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <a class="code" href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_t</a> *mesh = &amp;model-&gt;meshes[mesh_idx];</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordflow">for</span> (skin_idx = 0; skin_idx &lt; mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a5f03732d4ae4d42d634332e31ebec88b">numskins</a>; skin_idx++) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <a class="code" href="../../de/d87/material_8c.html#ae429fb33b376e0692e7f8a8d88964c06">MAT_UpdateRegistration</a>(mesh-&gt;<a class="code" href="../../d2/dfe/structmaliasmesh__s.html#a057af188511ce0ba0d2b8ecfb0c095bb">materials</a>[skin_idx]);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">case</span> MOD_SPRITE:</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">for</span> (frame_idx = 0; frame_idx &lt; model-&gt;numframes; frame_idx++) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            model-&gt;spriteframes[frame_idx].image-&gt;registration_sequence = <a class="code" href="../../d8/dcf/refresh_2gl_2main_8c.html#a8d00fd2e69712687c0a6046c0bdf4b42">registration_sequence</a>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">case</span> MOD_EMPTY:</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <a class="code" href="../../df/dd3/g__main_8c.html#a921a13ed691ee9d87865050d3018d2d4">Com_Error</a>(ERR_FATAL, <span class="stringliteral">&quot;%s: bad model type&quot;</span>, __func__);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    model-&gt;registration_sequence = <a class="code" href="../../d8/dcf/refresh_2gl_2main_8c.html#a8d00fd2e69712687c0a6046c0bdf4b42">registration_sequence</a>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="aa50601a67cbead379e68850f3d204f8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa50601a67cbead379e68850f3d204f8c">&#9670;&nbsp;</a></span>mult_matrix_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> mult_matrix_matrix </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dca/matrix_8c_source.html#l00281">281</a> of file <a class="el" href="../../dc/dca/matrix_8c_source.html">matrix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            p[i * 4 + j] =</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                a[0 * 4 + j] * b[i * 4 + 0] +</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                a[1 * 4 + j] * b[i * 4 + 1] +</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                a[2 * 4 + j] * b[i * 4 + 2] +</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                a[3 * 4 + j] * b[i * 4 + 3];</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9cf5dce297daa568001088c0e2a96313">prepare_ubo()</a>, <a class="el" href="../../d6/dfc/precomputed__sky_8h.html#ad671d225313ff47bc4ac15d5c4a7cc8f">UpdateTerrainShadowMapView()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a87eef903712cce745b7550cd2079729e">vkpt_shadow_map_setup()</a>.</p>

</div>
</div>
<a id="a0b6a46ad562be9e2457b2701a7c8d758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b6a46ad562be9e2457b2701a7c8d758">&#9670;&nbsp;</a></span>mult_matrix_vector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> mult_matrix_vector </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dca/matrix_8c_source.html#l00295">295</a> of file <a class="el" href="../../dc/dca/matrix_8c_source.html">matrix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        p[j] =</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            a[0 * 4 + j] * b[0] +</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            a[1 * 4 + j] * b[1] +</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            a[2 * 4 + j] * b[2] +</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            a[3 * 4 + j] * b[3];</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af9c083228edd32c9a7b2d9737fc7f38b">process_regular_entity()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a93b2a90e154cc760cbf5590a4aeb500a">transform_point()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a87eef903712cce745b7550cd2079729e">vkpt_shadow_map_setup()</a>.</p>

</div>
</div>
<a id="af2d948e3619e90a2c2ddbd717e0c0a7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d948e3619e90a2c2ddbd717e0c0a7e">&#9670;&nbsp;</a></span>qvk_get_current_desc_set_textures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkDescriptorSet qvk_get_current_desc_set_textures </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l01847">1847</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;{</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1) ? <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7dd1e65d418b116f6f2bb2e3d4bfc03a">desc_set_textures_odd</a> : <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ae95c312eedf560c3b4d3b8d141fcfc77">desc_set_textures_even</a>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d5/d02/path__tracer_8c.html#a7aa618f97b758bf9d39af3d08922f60a">setup_rt_pipeline()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac3c40f18bd3b5e3141d1158bdacb5e0d">vkpt_asvgf_create_gradient_samples()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a4bd36ef1c0e2e74eedc41b8a84f70d00">vkpt_asvgf_filter()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a0457ce27045f3cb587c7f46022836219">vkpt_bloom_record_cmd_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a25e47021bbf1a07485f43930fbbe2c6c">vkpt_compositing()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a638e1699e2e9b547d3b2c20deed8f2e6">vkpt_draw_submit_stretch_pics()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aaa3e9e8741c94c705e280461e82fd83a">vkpt_final_blit_filtered()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa5ba03a85548570c2f046b8f42ce8cb0">vkpt_interleave()</a>, <a class="el" href="../../db/de4/physical__sky_8h.html#ab00aeeecf47c8523b750abc4c706feff">vkpt_physical_sky_record_cmd_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a9f11af5519a3f6a6eefdd3fb9add8693">vkpt_record_god_rays_filter_command_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac1d97ab8b6122131e8264a041f761a13">vkpt_record_god_rays_trace_command_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ae1a8749a3b3ebbb0111a1982c699fc13">vkpt_taa()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa27d53467b9af07282216a93d6f2f729">vkpt_textures_update_descriptor_set()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#acd17aea9ae80e16e9f2916bbfa54aeeb">vkpt_tone_mapping_record_cmd_buffer()</a>.</p>

</div>
</div>
<a id="a6300542d75d2ded26f787ac2f1f83fa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6300542d75d2ded26f787ac2f1f83fa8">&#9670;&nbsp;</a></span>R_ClearColor_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_ClearColor_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00643">643</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;{</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[0].u32 = U32_WHITE;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[1].u32 = U32_WHITE;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="ae0b34da2455e308be592f713958c1bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0b34da2455e308be592f713958c1bdb">&#9670;&nbsp;</a></span>R_DrawChar_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_DrawChar_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qhandle_t&#160;</td>
          <td class="paramname"><em>font</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00750">750</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#aca1ac6ea7a5cdf9e6473e90abd3eb118">draw_char</a>(x, y, flags, <a class="code" href="../../d2/d61/gl_8h.html#a071882d7fa3d6bc70a01976d3aa05d86">c</a> &amp; 255, font);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a1458de04d2b213e70ad5f17224f3f96a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1458de04d2b213e70ad5f17224f3f96a">&#9670;&nbsp;</a></span>R_DrawFill32_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_DrawFill32_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00717">717</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">if</span>(!w || !h)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#aed6a19c0ba50425e3d10a82e41a1493c">enqueue_stretch_pic</a>(x, y, w, h, 0.0f, 0.0f, 1.0f, 1.0f,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a7477f35ebaa73fc9be409eb53b36144e">TEXNUM_WHITE</a>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="ac4d2dc75fe09b9efbeac9a891cffe2d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d2dc75fe09b9efbeac9a891cffe2d7">&#9670;&nbsp;</a></span>R_DrawFill8_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_DrawFill8_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00708">708</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span>(!w || !h)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#aed6a19c0ba50425e3d10a82e41a1493c">enqueue_stretch_pic</a>(x, y, w, h, 0.0f, 0.0f, 1.0f, 1.0f,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <a class="code" href="../../d4/de6/cin_8c.html#adcf1db9b9ae24774a5965f05b2a93326">d_8to24table</a>[<a class="code" href="../../d2/d61/gl_8h.html#a071882d7fa3d6bc70a01976d3aa05d86">c</a> &amp; 0xff], <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a7477f35ebaa73fc9be409eb53b36144e">TEXNUM_WHITE</a>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a55bcdecd6357514a9c0ea9511454b754"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55bcdecd6357514a9c0ea9511454b754">&#9670;&nbsp;</a></span>R_DrawPic_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_DrawPic_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qhandle_t&#160;</td>
          <td class="paramname"><em>pic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00691">691</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;{</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *image = <a class="code" href="../../d7/d59/images_8c.html#a2511b0afd2556e5318935b55e8dc9690">IMG_ForHandle</a>(pic);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="../../dd/d7b/sw_2draw_8c.html#aef7e722ae2c49fff389987aa1b5b6e18">R_DrawStretchPic</a>(x, y, image-&gt;width, image-&gt;height, pic);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a1da891f9f3e32eec2988c725fa9cdc4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1da891f9f3e32eec2988c725fa9cdc4e">&#9670;&nbsp;</a></span>R_DrawStretchPic_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_DrawStretchPic_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qhandle_t&#160;</td>
          <td class="paramname"><em>pic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00682">682</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;{</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#aed6a19c0ba50425e3d10a82e41a1493c">enqueue_stretch_pic</a>(</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        x,    y,    w,    h,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        0.0f, 0.0f, 1.0f, 1.0f,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[0].u32, pic);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a7f3ce1242d50f6fb3aaf7e1a120b0357"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f3ce1242d50f6fb3aaf7e1a120b0357">&#9670;&nbsp;</a></span>R_DrawString_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> R_DrawString_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qhandle_t&#160;</td>
          <td class="paramname"><em>font</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00756">756</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;{</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">while</span>(maxlen-- &amp;&amp; *s) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordtype">byte</span> <a class="code" href="../../d2/d61/gl_8h.html#a071882d7fa3d6bc70a01976d3aa05d86">c</a> = *s++;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#aca1ac6ea7a5cdf9e6473e90abd3eb118">draw_char</a>(x, y, flags, <a class="code" href="../../d2/d61/gl_8h.html#a071882d7fa3d6bc70a01976d3aa05d86">c</a>, font);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        x += CHAR_WIDTH;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">return</span> x;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a7bab78df545846e85107286bbfe8817c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bab78df545846e85107286bbfe8817c">&#9670;&nbsp;</a></span>R_InterceptKey_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qboolean R_InterceptKey_RTX </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>down</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d09/freecam_8c_source.html#l00185">185</a> of file <a class="el" href="../../da/d09/freecam_8c_source.html">freecam.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (cl_paused-&gt;integer != 2 || !<a class="code" href="../../d8/d19/common_8c.html#a459a66c52a2c28d316084ac4280c561e">sv_paused</a>-&gt;integer)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">return</span> qfalse;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* kb = <a class="code" href="../../db/de3/keys_8c.html#a7ae466f1467b99ae7a9ac2138c181221">Key_GetBindingForKey</a>(key);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (kb &amp;&amp; strstr(kb, <span class="stringliteral">&quot;pause&quot;</span>))</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> qfalse;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#a679d37a8b3cca59bce4e19afb3bd193b">cvar_pt_dof</a>-&gt;integer != 0 &amp;&amp; down &amp;&amp; (key == K_MWHEELUP || key == K_MWHEELDOWN))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        cvar_t* var;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordtype">float</span> minvalue;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordtype">float</span> maxvalue;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../db/de3/keys_8c.html#a38240210679b9f3092cdaa34479444d6">Key_IsDown</a>(K_SHIFT))</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            var = <a class="code" href="../../da/d09/freecam_8c.html#a060db3a074ef3d29f20e375ec7e0641d">cvar_pt_aperture</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            minvalue = 0.01f;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            maxvalue = 10.f;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            var = <a class="code" href="../../da/d09/freecam_8c.html#aaae9d3470ba219ed9857054562d6c5fd">cvar_pt_focus</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            minvalue = 1.f;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            maxvalue = 10000.f;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordtype">float</span> factor = <a class="code" href="../../db/de3/keys_8c.html#a38240210679b9f3092cdaa34479444d6">Key_IsDown</a>(K_CTRL) ? 1.01f : 1.1f;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span> (key == K_MWHEELDOWN)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            factor = 1.f / factor;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordtype">float</span> value = var-&gt;value;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        value *= factor;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        value = max(minvalue, min(maxvalue, value));</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="../../d7/de8/cvar_8c.html#af8073267db27dfba071ef3c2cdc2c751">Cvar_SetByVar</a>(var, <a class="code" href="../../d1/d8c/shared_8c.html#aa64168c27e0f1b6341cc31ea309081b2">va</a>(<span class="stringliteral">&quot;%f&quot;</span>, value), FROM_CONSOLE);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">switch</span> (key)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>: <a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[0] = down; <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>: <a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[1] = down; <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>: <a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[2] = down; <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>: <a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[3] = down; <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>: <a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[4] = down; <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>: <a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[5] = down; <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// make sure that other keys that control the freecam mode don&#39;t</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// interfere with the game, for example MOUSE1 usually maps to fire</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">case</span> K_CTRL:</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">case</span> K_SHIFT:</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">case</span> K_MWHEELDOWN:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">case</span> K_MWHEELUP:</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">case</span> K_MOUSE1:</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">case</span> K_MOUSE2:</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> qfalse;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a985ab2301aece268f264daa7cbd0210a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a985ab2301aece268f264daa7cbd0210a">&#9670;&nbsp;</a></span>R_LightPoint_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_LightPoint_RTX </td>
          <td>(</td>
          <td class="paramtype">vec3_t&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vec3_t&#160;</td>
          <td class="paramname"><em>light</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00670">670</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;{</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    VectorSet(light, 1, 1, 1);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a9bea44e8ea4ffd6e5cd6394ee6f35abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bea44e8ea4ffd6e5cd6394ee6f35abc">&#9670;&nbsp;</a></span>R_SetAlpha_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_SetAlpha_RTX </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>alpha</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00650">650</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    alpha = powf(fabsf(alpha), 0.4545f); <span class="comment">// un-sRGB the alpha</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[0].u8[3] = <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[1].u8[3] = alpha * 255;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a022e9fb80a8f12a86da200acfd26f9f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a022e9fb80a8f12a86da200acfd26f9f1">&#9670;&nbsp;</a></span>R_SetAlphaScale_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_SetAlphaScale_RTX </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>alpha</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00657">657</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;{</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#a04cc15b1a808d169227f05b4aa8aaac9">alpha_scale</a> = alpha;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a64cff004024d38f1072efbe140d9701a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64cff004024d38f1072efbe140d9701a">&#9670;&nbsp;</a></span>R_SetClipRect_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_SetClipRect_RTX </td>
          <td>(</td>
          <td class="paramtype">const clipRect_t *&#160;</td>
          <td class="paramname"><em>clip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00629">629</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;{ </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (clip)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1bce0dcd72c63d1ec5a411e12837c86f">clip_enable</a> = qtrue;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab6c133d4003fda8960c739f287f986ee">clip_rect</a> = *clip;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1bce0dcd72c63d1ec5a411e12837c86f">clip_enable</a> = qfalse;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a405b508e7226f2441209503697f61963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a405b508e7226f2441209503697f61963">&#9670;&nbsp;</a></span>R_SetColor_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_SetColor_RTX </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>color</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00663">663</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;{</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[0].u32   = <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[1].u8[3] = <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">colors</a>[0].u8[3];</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="a92c042a6e8c6cd5d74cedb7077676622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92c042a6e8c6cd5d74cedb7077676622">&#9670;&nbsp;</a></span>R_SetScale_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_SetScale_RTX </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>scale</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00676">676</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;{</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a>.<a class="code" href="../../dc/db0/structdraw_static__t.html#a9e4317208e4cbf34df97630343b6dfa1">scale</a> = scale;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="ad2ab0c4b5d74f863b4c34187c43f6b86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ab0c4b5d74f863b4c34187c43f6b86">&#9670;&nbsp;</a></span>R_TileClear_RTX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> R_TileClear_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qhandle_t&#160;</td>
          <td class="paramname"><em>pic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00700">700</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#aed6a19c0ba50425e3d10a82e41a1493c">enqueue_stretch_pic</a>(x, y, w, h,</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        x * <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab177d23ed54d4b878b844aab96186953">DIV64</a>, y * <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab177d23ed54d4b878b844aab96186953">DIV64</a>, (x + w) * <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab177d23ed54d4b878b844aab96186953">DIV64</a>, (y + h) * <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab177d23ed54d4b878b844aab96186953">DIV64</a>,</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        U32_WHITE, pic);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9357c9dd7ec1c23d781dbea143740f9a">R_RegisterFunctionsRTX()</a>.</p>

</div>
</div>
<a id="acfa29d565dcf3cddb34df56ca5bafc76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfa29d565dcf3cddb34df56ca5bafc76">&#9670;&nbsp;</a></span>set_current_gpu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> set_current_gpu </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>gpu_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7e/vk__util_8c_source.html#l00426">426</a> of file <a class="el" href="../../d9/d7e/vk__util_8c_source.html">vk_util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;{</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">if</span>(gpu_index == <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            qvkCmdSetDeviceMaskKHR(cmd_buf, (1 &lt;&lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>) - 1);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            qvkCmdSetDeviceMaskKHR(cmd_buf, 1 &lt;&lt; gpu_index);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#ac3c40f18bd3b5e3141d1158bdacb5e0d">vkpt_asvgf_create_gradient_samples()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a6f5ac4c032c1495193e5727181523c98">vkpt_create_images()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa5ba03a85548570c2f046b8f42ce8cb0">vkpt_interleave()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa07bf23807800e110da5519e58bdfcc9">vkpt_profiler_query()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a1315c0f9ec55f91dd2737651246858aa">vkpt_pt_trace_lighting()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac2c90dc6f27788d58feb57331c6366e6">vkpt_pt_trace_primary_rays()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a330450dd44754e34b600671d08c86112">vkpt_pt_trace_reflections()</a>.</p>

</div>
</div>
<a id="a7d2a409f3c107922e2685c0ca36c3d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d2a409f3c107922e2685c0ca36c3d00">&#9670;&nbsp;</a></span>update_transparency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> update_transparency </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>command_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>view_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const particle_t *&#160;</td>
          <td class="paramname"><em>particles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>particle_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const entity_t *&#160;</td>
          <td class="paramname"><em>entities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>entity_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00171">171</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_frame_index = (<a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_frame_index + 1) % <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_buffered_frame_num;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a> = min(<a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a274bdd044c31f24122e413d0aa5fc0c3">TR_PARTICLE_MAX_NUM</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    uint32_t <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a> = 0;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    uint32_t <a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a> = 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; entity_num; i++)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span> (entities[i].flags &amp; RF_BEAM)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            ++<a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((entities[i].model &amp; 0x80000000) == 0)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keyword">const</span> model_t* model = <a class="code" href="../../d0/deb/models_8c.html#a16ed19af9f6edb2e3777227d4ce1d742">MOD_ForHandle</a>(entities[i].model);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> (model &amp;&amp; model-&gt;type == MOD_SPRITE)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                ++<a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a> = min(<a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a6f5cbeb41737a3ea5dd48a9f70b08231">TR_BEAM_MAX_NUM</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a> = min(<a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a>, <a class="code" href="../../d6/dae/transparency_8c.html#ac405be9841a44c8b3d9340746d325439">TR_SPRITE_MAX_NUM</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_num = <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_num = <a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_num = <a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> particle_vertices_size = <a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a> * 4 * <a class="code" href="../../d6/dae/transparency_8c.html#a47dc853a1e4cad0daa04b372b0b663e2">TR_POSITION_SIZE</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> beam_vertices_size = <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a> * 4 * <a class="code" href="../../d6/dae/transparency_8c.html#a47dc853a1e4cad0daa04b372b0b663e2">TR_POSITION_SIZE</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> sprite_vertices_size = <a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a> * 4 * <a class="code" href="../../d6/dae/transparency_8c.html#a47dc853a1e4cad0daa04b372b0b663e2">TR_POSITION_SIZE</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> host_buffer_offset = <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_frame_index * <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.host_frame_size;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.vertex_position_host_offset = host_buffer_offset;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_color_host_offset = host_buffer_offset + particle_vertices_size + beam_vertices_size + sprite_vertices_size;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_color_host_offset = <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.particle_color_host_offset + <a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a> * <a class="code" href="../../d6/dae/transparency_8c.html#ac3e39090308180ed6e20816a2f57e980">TR_COLOR_SIZE</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.sprite_info_host_offset = <a class="code" href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a>.beam_color_host_offset + <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a> * <a class="code" href="../../d6/dae/transparency_8c.html#ac3e39090308180ed6e20816a2f57e980">TR_COLOR_SIZE</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a> &gt; 0 || <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a> &gt; 0 || <a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a> &gt; 0)</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#a8b1c47daeba298fc0a3f99c762f8fb4a">write_particle_geometry</a>(view_matrix, <a class="code" href="../../d5/dc9/effects_8c.html#af0c1d1acea3b57e12805b6cb1ed87349">particles</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#a471674e63250321eb0fbaad2eaf5f798">write_beam_geometry</a>(view_matrix, entities, entity_num);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#acb4228a0d4473be61b39c62841d883a2">write_sprite_geometry</a>(view_matrix, entities, entity_num);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#a4cdaf1608b4446d66e8b5b3cc0d66e22">upload_geometry</a>(command_buffer);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="ac3c40f18bd3b5e3141d1158bdacb5e0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c40f18bd3b5e3141d1158bdacb5e0d">&#9670;&nbsp;</a></span>vkpt_asvgf_create_gradient_samples()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_asvgf_create_gradient_samples </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>frame_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>do_gradient_samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00251">251</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    };</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    VkClearColorValue clear_grd_smpl_pos = {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        .uint32 = { 0, 0, 0, 0 }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    };</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        .baseMipLevel   = 0,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        .levelCount     = 1,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        .baseArrayLayer = 0,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        .layerCount     = 1</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    };</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">int</span> current_sample_pos_image = VKPT_IMG_ASVGF_GRAD_SMPL_POS_A + (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#a5492c7973a03a8b75ca35efedf3471a6">BARRIER_TO_CLEAR</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[current_sample_pos_image]);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    vkCmdClearColorImage(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[current_sample_pos_image],</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL, &amp;clear_grd_smpl_pos, 1, &amp;subresource_range);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#a2d1a84d8011452d485aaceaaad61b076">BARRIER_FROM_CLEAR</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[current_sample_pos_image]);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_RNG_SEED_A + (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1)]);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">for</span>(uint32_t gpu = 0; gpu &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; gpu++)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, gpu);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        uint32_t <a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>[1] = {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            gpu</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        };</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        vkCmdPushConstants(cmd_buf, <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            VK_SHADER_STAGE_COMPUTE_BIT, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>), <a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea81ffa9b33dc4184752361b9515b0fc03">SEED_RNG</a>]);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">gpu_slice_width</a> + 15) / 16,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + 15) / 16,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            1);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_RNG_SEED_A + (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1)]);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (do_gradient_samples)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_DO_GRADIENT_SAMPLES);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea4331d062f331d607251ba0aa6d6188f0">FWD_PROJECT</a>]);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9f0eba440e26a1751099a9d72afda36d">gpu_slice_width_prev</a> / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a72d59d5afb3549d1b28331ada8f32ef7">extent_render_prev</a>.height / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            1);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_RNG_SEED_A + (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1)]);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[current_sample_pos_image]);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_DO_GRADIENT_SAMPLES);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a8459898bd764724938182651ed22b57e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8459898bd764724938182651ed22b57e">&#9670;&nbsp;</a></span>vkpt_asvgf_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_asvgf_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00091">91</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    VkSpecializationMapEntry specEntries[] = {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        { .constantID = 0, .offset = 0, .size = <span class="keyword">sizeof</span>(uint32_t) }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    };</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    uint32_t spec_data[] = { </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        0, </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        1, </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        2, </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        3</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    };</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    VkSpecializationInfo specInfo[] = {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        { .mapEntryCount = 1, .pMapEntries = specEntries, .dataSize = <span class="keyword">sizeof</span>(uint32_t), .pData = &amp;spec_data[0] },</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        { .mapEntryCount = 1, .pMapEntries = specEntries, .dataSize = <span class="keyword">sizeof</span>(uint32_t), .pData = &amp;spec_data[1] },</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        { .mapEntryCount = 1, .pMapEntries = specEntries, .dataSize = <span class="keyword">sizeof</span>(uint32_t), .pData = &amp;spec_data[2] },</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        { .mapEntryCount = 1, .pMapEntries = specEntries, .dataSize = <span class="keyword">sizeof</span>(uint32_t), .pData = &amp;spec_data[3] },</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    };</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    VkComputePipelineCreateInfo pipeline_info[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea4275cc694788b2484541f2cfabb486d6">ASVGF_NUM_PIPELINES</a>] = {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea81ffa9b33dc4184752361b9515b0fc03">SEED_RNG</a>] = {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ASVGF_SEED_RNG_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        },</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea4331d062f331d607251ba0aa6d6188f0">FWD_PROJECT</a>] = {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ASVGF_FWD_PROJECT_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        },</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eadf555c15cf1ad0129175c0d56fc65aef">GRADIENT_IMAGE</a>] = {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ASVGF_GRADIENT_IMG_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        },</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea779e3829b4fba1f138ba57f85d08c8fd">GRADIENT_ATROUS</a>] = {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ASVGF_GRADIENT_ATROUS_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        },</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea595a759e93543e08875d64f4dbf08e9c">TEMPORAL</a>] = {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ASVGF_TEMPORAL_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        },</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eac226d727d3574a90e3cb682327c178eb">ATROUS_LF</a>] = {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ASVGF_LF_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        },</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eac5682e6efb0a5a31420114425adb75f4">ATROUS_ITER_0</a>] = {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_ASVGF_ATROUS_COMP, VK_SHADER_STAGE_COMPUTE_BIT, &amp;specInfo[0]),</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        },</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eae1d8fff855463396efd999bd56f0fad2">ATROUS_ITER_1</a>] = {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_ASVGF_ATROUS_COMP, VK_SHADER_STAGE_COMPUTE_BIT, &amp;specInfo[1]),</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        },</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea16f04cfe5871f6a14faa8690f26b8dd2">ATROUS_ITER_2</a>] = {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_ASVGF_ATROUS_COMP, VK_SHADER_STAGE_COMPUTE_BIT, &amp;specInfo[2]),</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        },</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eae0cb2760f63da9fda44e48ded87bd849">ATROUS_ITER_3</a>] = {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_ASVGF_ATROUS_COMP, VK_SHADER_STAGE_COMPUTE_BIT, &amp;specInfo[3]),</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        },</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eabd4d537916ba81c31b5d1a19823dca62">CHECKERBOARD_INTERLEAVE</a>] = {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_CHECKERBOARD_INTERLEAVE_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        },</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea186f86ef458845ef9d87fda6d2bea80a">TAA</a>] = {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ASVGF_TAA_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        },</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        [<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea5f4014197508efea073e20136e52dd2f">COMPOSITING</a>] = {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            .stage  = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_COMPOSITING_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            .layout = <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        },</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    };</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateComputePipelines(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(pipeline_info), pipeline_info, 0, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa09f27edd7c526ad6e8ed6b738723867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa09f27edd7c526ad6e8ed6b738723867">&#9670;&nbsp;</a></span>vkpt_asvgf_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_asvgf_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00081">81</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,     NULL);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>,   NULL);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../da/d96/asvgf_8c.html#a0986d67453f63f3c447240c05e5c1c94">pipeline_layout_taa</a>,   NULL);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8be0a08832509931d1c34e17f2d185c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8be0a08832509931d1c34e17f2d185c">&#9670;&nbsp;</a></span>vkpt_asvgf_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_asvgf_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00185">185</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea4275cc694788b2484541f2cfabb486d6">ASVGF_NUM_PIPELINES</a>; i++)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[i], NULL);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4bd36ef1c0e2e74eedc41b8a84f70d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bd36ef1c0e2e74eedc41b8a84f70d00">&#9670;&nbsp;</a></span>vkpt_asvgf_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_asvgf_filter </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>enable_lf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00325">325</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    };</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_SH]);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_COCG]);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_HF]);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_SPEC]);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_RECONSTRUCT_GRADIENT);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">/* create gradient image */</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eadf555c15cf1ad0129175c0d56fc65aef">GRADIENT_IMAGE</a>]);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">gpu_slice_width</a> / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            1);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// XXX BARRIERS!!!</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_GRAD_LF_PING]);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_GRAD_HF_SPEC_PING]);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">//vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, pipeline_asvgf[GRADIENT_ATROUS]);</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">/* reconstruct gradient image */</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_atrous_iterations_gradient = 7;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; num_atrous_iterations_gradient; i++) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        uint32_t <a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>[1] = {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            i</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        };</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        vkCmdPushConstants(cmd_buf, <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            VK_SHADER_STAGE_COMPUTE_BIT, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>), <a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea779e3829b4fba1f138ba57f85d08c8fd">GRADIENT_ATROUS</a>]);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">gpu_slice_width</a> / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                1);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_GRAD_LF_PING + !(i &amp; 1)]);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_GRAD_HF_SPEC_PING + !(i &amp; 1)]);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_RECONSTRUCT_GRADIENT);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_TEMPORAL);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">/* temporal accumulation / filtering */</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea595a759e93543e08875d64f4dbf08e9c">TEMPORAL</a>]);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">gpu_slice_width</a> + 14) / 15,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + 14) / 15,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            1);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_SH]);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_COCG]);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_HF]);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_MOMENTS]);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_FILTERED_SPEC_A + (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1)]);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_HIST_MOMENTS_HF_A]);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_HIST_MOMENTS_HF_B]);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_TEMPORAL);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_ATROUS);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">//vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, pipeline_asvgf[ATROUS]);</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">/* spatial reconstruction filtering */</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_atrous_iterations = 4;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; num_atrous_iterations; i++) </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span> (enable_lf)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            uint32_t <a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>[1] = {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                i</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            };</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            vkCmdPushConstants(cmd_buf, <a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                VK_SHADER_STAGE_COMPUTE_BIT, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>), <a class="code" href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eac226d727d3574a90e3cb682327c178eb">ATROUS_LF</a>]);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">gpu_slice_width</a> / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height / <a class="code" href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a> + 15) / 16,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                1);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">if</span> (i == num_atrous_iterations - 1)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_SH]);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_COCG]);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordtype">int</span> specialization = <a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eac5682e6efb0a5a31420114425adb75f4">ATROUS_ITER_0</a> + i;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[specialization]);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">gpu_slice_width</a> + 15) / 16,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + 15) / 16,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                1);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_SH]);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_COCG]);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_HF]);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_MOMENTS]);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PONG_LF_SH]);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PONG_LF_COCG]);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PONG_HF]);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PONG_MOMENTS]);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_HIST_COLOR_HF]);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_SH + !(i &amp; 1)]);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_ATROUS_PING_LF_COCG + !(i &amp; 1)]);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_COLOR]);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_ATROUS);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a5627c2d5305cce85dfec1c305a44affa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5627c2d5305cce85dfec1c305a44affa">&#9670;&nbsp;</a></span>vkpt_asvgf_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_asvgf_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00045">45</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    VkDescriptorSetLayout desc_set_layouts[] = {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    };</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    VkPushConstantRange push_constant_range_atrous = {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        .stageFlags = VK_SHADER_STAGE_COMPUTE_BIT,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        .offset     = 0,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        .size       = <span class="keyword">sizeof</span>(uint32_t)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    };</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>, </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        .setLayoutCount         = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        .pSetLayouts            = desc_set_layouts,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        .pushConstantRangeCount = 1,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        .pPushConstantRanges    = &amp;push_constant_range_atrous</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    );</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>, </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        .setLayoutCount         = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        .pSetLayouts            = desc_set_layouts,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    );</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../da/d96/asvgf_8c.html#a0986d67453f63f3c447240c05e5c1c94">pipeline_layout_taa</a>, </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        .setLayoutCount         = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        .pSetLayouts            = desc_set_layouts,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    );</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../da/d96/asvgf_8c.html#a0986d67453f63f3c447240c05e5c1c94">pipeline_layout_taa</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afdce3396bb9d2af9cc8c65b55c37844a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdce3396bb9d2af9cc8c65b55c37844a">&#9670;&nbsp;</a></span>vkpt_begin_command_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkCommandBuffer vkpt_begin_command_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *&#160;</td>
          <td class="paramname"><em>group</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03301">3301</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;{</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    <span class="keywordflow">if</span> (group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae58af1b4dc98b53615c1187115d3ee05">used_this_frame</a> == group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a>)</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    {</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        uint32_t new_count = max(4, group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * 2);</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        VkCommandBuffer* new_buffers = Z_Mallocz(new_count * <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a> * <span class="keyword">sizeof</span>(VkCommandBuffer));</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160; </div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; frame++)</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;        {</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;            <span class="keywordflow">if</span> (group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> &gt; 0)</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;            {</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;                memcpy(new_buffers + new_count * frame, group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a> + group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * frame, group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * <span class="keyword">sizeof</span>(VkCommandBuffer));</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;            }</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160; </div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;            VkCommandBufferAllocateInfo cmd_buf_alloc_info = {</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;                .sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_ALLOCATE_INFO,</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;                .commandPool = group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#adaa714c5f2627919f990835b732826ed">command_pool</a>,</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;                .level = VK_COMMAND_BUFFER_LEVEL_PRIMARY,</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;                .commandBufferCount = new_count - group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a></div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;            };</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160; </div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;            <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkAllocateCommandBuffers(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;cmd_buf_alloc_info, new_buffers + new_count * frame + group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a>));</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;        }</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160; </div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;        <span class="keywordtype">void</span>** new_addrs = Z_Mallocz(new_count * <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*));</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;        <span class="keywordflow">if</span> (group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> &gt; 0)</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        {</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; frame++)</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;            {</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                memcpy(new_addrs + new_count * frame, group-&gt;buffer_begin_addrs + group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * frame, group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*));</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            }</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;        }</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160; </div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(group-&gt;buffer_begin_addrs);</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;        group-&gt;buffer_begin_addrs = new_addrs;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160; </div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a>);</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a> = new_buffers;</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> = new_count;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160; </div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    VkCommandBuffer cmd_buf = group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a>[group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> + group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae58af1b4dc98b53615c1187115d3ee05">used_this_frame</a>];</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160; </div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    VkCommandBufferBeginInfo begin_info = {</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        .sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO,</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;        .flags = VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT,</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        .pInheritanceInfo = NULL,</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    };</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkResetCommandBuffer(cmd_buf, 0));</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkBeginCommandBuffer(cmd_buf, &amp;begin_info));</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160; </div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160; </div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="keywordtype">void</span>** begin_addr = group-&gt;buffer_begin_addrs + group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> + group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae58af1b4dc98b53615c1187115d3ee05">used_this_frame</a>;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160; </div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;<span class="preprocessor">#if (defined __GNUC__)</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    *begin_addr = __builtin_return_address(0);</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;<span class="preprocessor">#elif (defined _MSC_VER)</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    *begin_addr = _ReturnAddress();</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    *begin_addr = NULL;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae58af1b4dc98b53615c1187115d3ee05">used_this_frame</a> += 1;</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    <span class="keywordflow">return</span> cmd_buf;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d9/d62/physical__sky_8c.html#a977cfafcb313ca2271f80ae10ce3019e">change_image_layouts()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a5b6a743c8f681996eaa2bf1208196cdd">create_invalid_texture()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#addf2a935c207649d0f0d5dfa3fffed28">create_swapchain()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a85d64555fd82c387df7d5c195574ff9d">fill_index_buffer()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a8bafa7514c9592f473bf8f84ce6d2710">FillVertexAndIndexBuffers()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#acab7ddea0c6abee1c21455b2b9fdf176">IMG_ReadPixels_RTX()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a912617d2640c1bb05a0d548cf5bae766">load_blue_noise()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a6e118e55bb20687cff735f03176035e4">R_EndFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a80f2878a633e064cb2ae497c3641a27f">UploadImage()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a6f5ac4c032c1495193e5727181523c98">vkpt_create_images()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a774c3999c366b4e23083a5d8c7bffbba">vkpt_pt_create_static()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8bb2565a316eaf3b591917f8537598e1">vkpt_shadow_map_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a40254cf863faddc4832cd3290e7211c4">vkpt_textures_end_registration()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#af1fc65cdd72e8bf78ed544c97606eb24">vkpt_textures_upload_envmap()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a46bfc3621c727fa0bfe39a01d47e126f">vkpt_vertex_buffer_upload_staging()</a>.</p>

</div>
</div>
<a id="a88cd9059e66f1f9be99bd810fccd3d08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88cd9059e66f1f9be99bd810fccd3d08">&#9670;&nbsp;</a></span>vkpt_bloom_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_bloom_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbb/bloom_8c_source.html#l00176">176</a> of file <a class="el" href="../../d8/dbb/bloom_8c_source.html">bloom.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    VkComputePipelineCreateInfo pipeline_info[<a class="code" href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4dab8c2bda4428c2d5d54c6342a178c8bc3">BLOOM_NUM_PIPELINES</a>] = {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        [<a class="code" href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4da7a562f950347a0a59df25b55cfcc7316">BLUR</a>] = {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_BLOOM_BLUR_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            .layout = <a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a>,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        },</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        [<a class="code" href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4dada5dfb226839d481009b7a30c3cc5eaf">COMPOSITE</a>] = {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_BLOOM_COMPOSITE_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            .layout = <a class="code" href="../../d8/dbb/bloom_8c.html#ac89cd0579ecc06de0be4c39d1a4650de">pipeline_layout_composite</a>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    };</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateComputePipelines(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(pipeline_info), pipeline_info, 0, <a class="code" href="../../d8/dbb/bloom_8c.html#a4909d9591c04f1e31a62b1b73c731908">pipelines</a>));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a512e32fa400e0c3e7623f1e0c3873374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a512e32fa400e0c3e7623f1e0c3873374">&#9670;&nbsp;</a></span>vkpt_bloom_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_bloom_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbb/bloom_8c_source.html#l00165">165</a> of file <a class="el" href="../../d8/dbb/bloom_8c_source.html">bloom.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a>, NULL);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a> = NULL;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d8/dbb/bloom_8c.html#ac89cd0579ecc06de0be4c39d1a4650de">pipeline_layout_composite</a>, NULL);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#ac89cd0579ecc06de0be4c39d1a4650de">pipeline_layout_composite</a> = NULL;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1852caaa11bcee562ecfd4c3217197e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1852caaa11bcee562ecfd4c3217197e3">&#9670;&nbsp;</a></span>vkpt_bloom_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_bloom_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbb/bloom_8c_source.html#l00196">196</a> of file <a class="el" href="../../d8/dbb/bloom_8c_source.html">bloom.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4dab8c2bda4428c2d5d54c6342a178c8bc3">BLOOM_NUM_PIPELINES</a>; i++)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d8/dbb/bloom_8c.html#a4909d9591c04f1e31a62b1b73c731908">pipelines</a>[i], NULL);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a16f22f4c0cbaafecde222d5e30df5052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f22f4c0cbaafecde222d5e30df5052">&#9670;&nbsp;</a></span>vkpt_bloom_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_bloom_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbb/bloom_8c_source.html#l00127">127</a> of file <a class="el" href="../../d8/dbb/bloom_8c_source.html">bloom.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#a510d2391e71f352630843f1e23a8c824">cvar_bloom_enable</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;bloom_enable&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, 0);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#a8cc40c3794e3f946f0f78cf2d6d74fa4">cvar_bloom_debug</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;bloom_debug&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, 0);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#ab7808bcea011d307f1822a0447cd1cde">cvar_bloom_sigma</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;bloom_sigma&quot;</span>, <span class="stringliteral">&quot;0.037&quot;</span>, 0); <span class="comment">// relative to screen height</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#ad107308d59efb4d631ebab44cdb4704c">cvar_bloom_intensity</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;bloom_intensity&quot;</span>, <span class="stringliteral">&quot;0.002&quot;</span>, 0);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#afee94e7ee61b7caee60141d6fe2b50cc">cvar_bloom_sigma_water</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;bloom_sigma_water&quot;</span>, <span class="stringliteral">&quot;0.037&quot;</span>, 0);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#a2338f9e3e5cee5c54e5162b5ce633481">cvar_bloom_intensity_water</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;bloom_intensity_water&quot;</span>, <span class="stringliteral">&quot;0.2&quot;</span>, 0);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    VkDescriptorSetLayout desc_set_layouts[] = {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    };</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    VkPushConstantRange push_constant_range = {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        .stageFlags = VK_SHADER_STAGE_COMPUTE_BIT,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        .offset     = 0,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        .size       = <span class="keyword">sizeof</span>(<a class="code" href="../../d8/dbb/bloom_8c.html#a4c02d401ca0cc0257388319e86cc474b">push_constants_hblur</a>)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    };</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a>,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        .setLayoutCount         = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        .pSetLayouts            = desc_set_layouts,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        .pushConstantRangeCount = 1,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        .pPushConstantRanges    = &amp;push_constant_range</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    );</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d8/dbb/bloom_8c.html#ac89cd0579ecc06de0be4c39d1a4650de">pipeline_layout_composite</a>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        .setLayoutCount         = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        .pSetLayouts            = desc_set_layouts,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d8/dbb/bloom_8c.html#ac89cd0579ecc06de0be4c39d1a4650de">pipeline_layout_composite</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0457ce27045f3cb587c7f46022836219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0457ce27045f3cb587c7f46022836219">&#9670;&nbsp;</a></span>vkpt_bloom_record_cmd_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_bloom_record_cmd_buffer </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbb/bloom_8c_source.html#l00301">301</a> of file <a class="el" href="../../d8/dbb/bloom_8c_source.html">bloom.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#acb0912a304a5209f485fa2ad8b1a089b">compute_push_constants</a>();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// downscale TAA_OUTPUT -&gt; BLOOM_DOWNSCALE_MIP_1 -&gt; BLOOM_VBLUR</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        VkImageSubresourceLayers subresource = {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            .mipLevel = 0,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            .baseArrayLayer = 0,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            .layerCount = 1</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        };</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        VkOffset3D offset_UL = {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            .x = 0,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            .y = 0,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            .z = 0</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        };</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        VkOffset3D offset_LR_mip_0 = {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            .x = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.width,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            .y = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.height,</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            .z = 1</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        };</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        VkOffset3D offset_LR_mip_1 = {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            .x = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.width / 2,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            .y = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.height / 2,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            .z = 1</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        };</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        VkOffset3D offset_LR_mip_2 = {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            .x = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.width / 4,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            .y =  <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.height / 4,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            .z = 1</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        };</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        VkImageBlit blit_mip_0_to_1 = {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            .srcSubresource = subresource,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            .srcOffsets[0] = offset_UL,</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            .srcOffsets[1] = offset_LR_mip_0,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            .dstSubresource = subresource,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            .dstOffsets[0] = offset_UL,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            .dstOffsets[1] = offset_LR_mip_1,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        };</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        VkImageBlit blit_mip_1_to_2 = {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            .srcSubresource = subresource,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            .srcOffsets[0] = offset_UL,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            .srcOffsets[1] = offset_LR_mip_1,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            .dstSubresource = subresource,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            .dstOffsets[0] = offset_UL,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            .dstOffsets[1] = offset_LR_mip_2,</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        };</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#a341924051d3e05678b44e33ab4d251fd">BARRIER_TO_COPY_SRC</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#acc38fca31bd73f84277c402dc8c0d028">BARRIER_TO_COPY_DEST</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_DOWNSCALE_MIP_1]);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        vkCmdBlitImage(cmd_buf,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT], VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_DOWNSCALE_MIP_1], VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            1, &amp;blit_mip_0_to_1, VK_FILTER_LINEAR);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#aa41d12d6696af32438cee4225ac3ad60">BARRIER_FROM_COPY_SRC</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#ad425a7581d73e4b73497d7bca55001b8">BARRIER_FROM_COPY_DEST</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_DOWNSCALE_MIP_1]);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#a341924051d3e05678b44e33ab4d251fd">BARRIER_TO_COPY_SRC</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_DOWNSCALE_MIP_1]);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#acc38fca31bd73f84277c402dc8c0d028">BARRIER_TO_COPY_DEST</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_VBLUR]);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        vkCmdBlitImage(cmd_buf,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_DOWNSCALE_MIP_1], VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_VBLUR], VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            1, &amp;blit_mip_1_to_2, VK_FILTER_LINEAR);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#aa41d12d6696af32438cee4225ac3ad60">BARRIER_FROM_COPY_SRC</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_DOWNSCALE_MIP_1]);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#ad425a7581d73e4b73497d7bca55001b8">BARRIER_FROM_COPY_DEST</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_VBLUR]);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    };</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_VBLUR]);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_HBLUR]);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// apply horizontal blur from BLOOM_VBLUR -&gt; BLOOM_HBLUR</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d8/dbb/bloom_8c.html#a4909d9591c04f1e31a62b1b73c731908">pipelines</a>[<a class="code" href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4da7a562f950347a0a59df25b55cfcc7316">BLUR</a>]);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    vkCmdPushConstants(cmd_buf, <a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a>, VK_SHADER_STAGE_COMPUTE_BIT,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        0, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/dbb/bloom_8c.html#a4c02d401ca0cc0257388319e86cc474b">push_constants_hblur</a>), &amp;<a class="code" href="../../d8/dbb/bloom_8c.html#a4c02d401ca0cc0257388319e86cc474b">push_constants_hblur</a>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 4 + 15) / 16,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height / 4 + 15) / 16,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        1);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_HBLUR]);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// vertical blur from BLOOM_HBLUR -&gt; BLOOM_VBLUR</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    vkCmdPushConstants(cmd_buf, <a class="code" href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a>, VK_SHADER_STAGE_COMPUTE_BIT,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        0, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/dbb/bloom_8c.html#a9a309999d27a8d305d348bd107c012a5">push_constants_vblur</a>), &amp;<a class="code" href="../../d8/dbb/bloom_8c.html#a9a309999d27a8d305d348bd107c012a5">push_constants_vblur</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 4 + 15) / 16,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height / 4 + 15) / 16,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        1);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_VBLUR]);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dbb/bloom_8c.html#a8cc40c3794e3f946f0f78cf2d6d74fa4">cvar_bloom_debug</a>-&gt;integer)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        VkImageSubresourceLayers subresource = {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            .mipLevel = 0,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            .baseArrayLayer = 0,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            .layerCount = 1</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        };</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        VkOffset3D offset_UL = {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            .x = 0,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            .y = 0,</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            .z = 0</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        };</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        VkOffset3D offset_LR_input = {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            .x = <a class="code" href="../../df/dcb/global__textures_8h.html#a6a5a49798a96db987404c8aa3b804fe3">IMG_WIDTH</a>,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            .y = <a class="code" href="../../df/dcb/global__textures_8h.html#a509566621a0b52524e800f69546c94be">IMG_HEIGHT</a>,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            .z = 1</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        };</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        VkImageBlit blit_region = {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            .srcSubresource = subresource,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            .srcOffsets[0] = offset_UL,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            .dstSubresource = subresource,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            .dstOffsets[0] = offset_UL,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            .dstOffsets[1] = offset_LR_input,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        };</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#acc38fca31bd73f84277c402dc8c0d028">BARRIER_TO_COPY_DEST</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordtype">int</span> vis_img;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">switch</span>(<a class="code" href="../../d8/dbb/bloom_8c.html#a8cc40c3794e3f946f0f78cf2d6d74fa4">cvar_bloom_debug</a>-&gt;integer)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                vis_img = VKPT_IMG_BLOOM_DOWNSCALE_MIP_1;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                blit_region.srcOffsets[1].x = <a class="code" href="../../df/dcb/global__textures_8h.html#a6a5a49798a96db987404c8aa3b804fe3">IMG_WIDTH</a> / 2;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                blit_region.srcOffsets[1].y = <a class="code" href="../../df/dcb/global__textures_8h.html#a509566621a0b52524e800f69546c94be">IMG_HEIGHT</a> / 2;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                vis_img = VKPT_IMG_BLOOM_HBLUR;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                blit_region.srcOffsets[1].x = <a class="code" href="../../df/dcb/global__textures_8h.html#a6a5a49798a96db987404c8aa3b804fe3">IMG_WIDTH</a> / 4;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                blit_region.srcOffsets[1].y = <a class="code" href="../../df/dcb/global__textures_8h.html#a509566621a0b52524e800f69546c94be">IMG_HEIGHT</a> / 4;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                vis_img = VKPT_IMG_BLOOM_VBLUR;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                blit_region.srcOffsets[1].x = <a class="code" href="../../df/dcb/global__textures_8h.html#a6a5a49798a96db987404c8aa3b804fe3">IMG_WIDTH</a> / 4;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                blit_region.srcOffsets[1].y = <a class="code" href="../../df/dcb/global__textures_8h.html#a509566621a0b52524e800f69546c94be">IMG_HEIGHT</a> / 4;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        vkCmdBlitImage(cmd_buf,</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[vis_img], VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT], VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            1, &amp;blit_region, VK_FILTER_LINEAR);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#ad425a7581d73e4b73497d7bca55001b8">BARRIER_FROM_COPY_DEST</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">// composite bloom into TAA_OUTPUT</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d8/dbb/bloom_8c.html#a4909d9591c04f1e31a62b1b73c731908">pipelines</a>[<a class="code" href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4dada5dfb226839d481009b7a30c3cc5eaf">COMPOSITE</a>]);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <a class="code" href="../../d8/dbb/bloom_8c.html#ac89cd0579ecc06de0be4c39d1a4650de">pipeline_layout_composite</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width + 15) / 16,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + 15) / 16,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            1);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_BLOOM_VBLUR]);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a71ae826e0a00d9cbba8208e6fc3bb7b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71ae826e0a00d9cbba8208e6fc3bb7b2">&#9670;&nbsp;</a></span>vkpt_bloom_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_bloom_reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbb/bloom_8c_source.html#l00076">76</a> of file <a class="el" href="../../d8/dbb/bloom_8c_source.html">bloom.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#a8e4647f99979504e2f7fe2e33cddcae3">bloom_intensity</a> = <a class="code" href="../../d8/dbb/bloom_8c.html#ad107308d59efb4d631ebab44cdb4704c">cvar_bloom_intensity</a>-&gt;value;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#aa913b85a1373167bdda9e04c62e7e474">bloom_sigma</a> = <a class="code" href="../../d8/dbb/bloom_8c.html#ab7808bcea011d307f1822a0447cd1cde">cvar_bloom_sigma</a>-&gt;value;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a> = 0.f;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="aac0d84d7e3e7d99814af4421653ee990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac0d84d7e3e7d99814af4421653ee990">&#9670;&nbsp;</a></span>vkpt_bloom_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_bloom_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc3/global__ubo_8h.html#a5692793c470dd4b97353d7ddab0edde8">QVKUniformBuffer_t</a> *&#160;</td>
          <td class="paramname"><em>ubo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>frame_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>under_water</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>menu_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbb/bloom_8c_source.html#l00088">88</a> of file <a class="el" href="../../d8/dbb/bloom_8c_source.html">bloom.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (under_water)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a> = min(1.f, <a class="code" href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a> + frame_time * 3.f);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#a8e4647f99979504e2f7fe2e33cddcae3">bloom_intensity</a> = <a class="code" href="../../d8/dbb/bloom_8c.html#a2338f9e3e5cee5c54e5162b5ce633481">cvar_bloom_intensity_water</a>-&gt;value;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#aa913b85a1373167bdda9e04c62e7e474">bloom_sigma</a> = <a class="code" href="../../d8/dbb/bloom_8c.html#ab7808bcea011d307f1822a0447cd1cde">cvar_bloom_sigma</a>-&gt;value;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a> = max(0.f, <a class="code" href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a> - frame_time * 3.f);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#a8e4647f99979504e2f7fe2e33cddcae3">bloom_intensity</a> = <a class="code" href="../../d8/dbb/bloom_8c.html#a654e2e6753c58b7e4e887129ebcf374d">mix</a>(<a class="code" href="../../d8/dbb/bloom_8c.html#ad107308d59efb4d631ebab44cdb4704c">cvar_bloom_intensity</a>-&gt;value, <a class="code" href="../../d8/dbb/bloom_8c.html#a2338f9e3e5cee5c54e5162b5ce633481">cvar_bloom_intensity_water</a>-&gt;value, <a class="code" href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#aa913b85a1373167bdda9e04c62e7e474">bloom_sigma</a> = <a class="code" href="../../d8/dbb/bloom_8c.html#a654e2e6753c58b7e4e887129ebcf374d">mix</a>(<a class="code" href="../../d8/dbb/bloom_8c.html#ab7808bcea011d307f1822a0447cd1cde">cvar_bloom_sigma</a>-&gt;value, <a class="code" href="../../d8/dbb/bloom_8c.html#afee94e7ee61b7caee60141d6fe2b50cc">cvar_bloom_sigma_water</a>-&gt;value, <a class="code" href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> menu_start_ms = -1;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> (menu_mode)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (menu_start_ms &lt; 0)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            menu_start_ms = <a class="code" href="../../d4/dfd/system_8c.html#af38cb394048091823541c780e6e9ff35">Sys_Milliseconds</a>();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordtype">int</span> current_ms = <a class="code" href="../../d4/dfd/system_8c.html#af38cb394048091823541c780e6e9ff35">Sys_Milliseconds</a>();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordtype">float</span> phase = max(0.f, min(1.f, (<span class="keywordtype">float</span>)(current_ms - menu_start_ms) / 150.f));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        phase = powf(phase, 0.25f);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="../../d8/dbb/bloom_8c.html#aa913b85a1373167bdda9e04c62e7e474">bloom_sigma</a> = phase * 0.03f;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        ubo-&gt;bloom_intensity = 1.f;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        menu_start_ms = -1;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        ubo-&gt;bloom_intensity = <a class="code" href="../../d8/dbb/bloom_8c.html#a8e4647f99979504e2f7fe2e33cddcae3">bloom_intensity</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a808959ba4018c9ad425e06158be74985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a808959ba4018c9ad425e06158be74985">&#9670;&nbsp;</a></span>vkpt_build_beam_lights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_build_beam_lights </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a> *&#160;</td>
          <td class="paramname"><em>light_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>num_lights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>max_lights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bsp_t *&#160;</td>
          <td class="paramname"><em>bsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">entity_t *&#160;</td>
          <td class="paramname"><em>entities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_entites</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>adapted_luminance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00492">492</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> beam_width = <a class="code" href="../../d6/dae/transparency_8c.html#ac5baedefc7e2e41bbc6027b848a3b904">cvar_pt_beam_width</a>-&gt;value;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> hdr_factor = <a class="code" href="../../d6/dae/transparency_8c.html#ae13f02cb6e520411114108151e70eb19">cvar_pt_beam_lights</a>-&gt;value * adapted_luminance * 20.f;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (hdr_factor &lt;= 0.f)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">int</span> num_beams = 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keyword">static</span> entity_t* beams[<a class="code" href="../../d6/dae/transparency_8c.html#a4d63039a7367379f6b712ad926163abc">MAX_BEAMS</a>];</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_entites; i++)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span>(num_beams == <a class="code" href="../../d6/dae/transparency_8c.html#a4d63039a7367379f6b712ad926163abc">MAX_BEAMS</a>)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> ((entities[i].flags &amp; RF_BEAM) != 0)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            beams[num_beams++] = entities + i;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (num_beams == 0)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    qsort(beams, num_beams, <span class="keyword">sizeof</span>(entity_t*), <a class="code" href="../../d6/dae/transparency_8c.html#aa96b49f19552bd8624752644a13c92d4">compare_beams</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_beams; i++)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">if</span> (*num_lights &gt;= max_lights)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keyword">const</span> entity_t* beam = beams[i];</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        vec3_t begin;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        vec3_t end;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        VectorCopy(beam-&gt;oldorigin, begin);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        VectorCopy(beam-&gt;origin, end);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        vec3_t to_end;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        VectorSubtract(end, begin, to_end);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        vec3_t norm_dir;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        VectorCopy(to_end, norm_dir);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(norm_dir);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        VectorMA(begin, -5.f, norm_dir, begin);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        VectorMA(end, 5.f, norm_dir, end);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        vec3_t <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#a866d6c37460e219119bda22fd7e854a5">cast_u32_to_f32_color</a>(beam-&gt;skinnum, &amp;beam-&gt;rgba, <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>, hdr_factor);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#aac6c8f16c038616ba967759a02055b19">vkpt_build_cylinder_light</a>(light_list, num_lights, max_lights, bsp, begin, end, <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>, beam_width);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="aac6c8f16c038616ba967759a02055b19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac6c8f16c038616ba967759a02055b19">&#9670;&nbsp;</a></span>vkpt_build_cylinder_light()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qboolean vkpt_build_cylinder_light </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a> *&#160;</td>
          <td class="paramname"><em>light_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a> *&#160;</td>
          <td class="paramname"><em>num_lights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>max_lights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bsp_t *&#160;</td>
          <td class="paramname"><em>bsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vec3_t&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vec3_t&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vec3_t&#160;</td>
          <td class="paramname"><em>color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dae/transparency_8c_source.html#l00408">408</a> of file <a class="el" href="../../d6/dae/transparency_8c_source.html">transparency.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    vec3_t dir, norm_dir;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    VectorSubtract(end, begin, dir);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    VectorCopy(dir, norm_dir);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(norm_dir);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    vec3_t <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a> = { 0.f, 0.f, 1.f };</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    vec3_t left = { 1.f, 0.f, 0.f };</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (fabsf(norm_dir[2]) &lt; 0.9f)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        CrossProduct(<a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>, norm_dir, left);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(left);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        CrossProduct(norm_dir, left, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(<a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        CrossProduct(norm_dir, left, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(<a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        CrossProduct(<a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>, norm_dir, left);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(left);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    vec3_t vertices[6] = {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        { 0.f, 1.f, 0.f },</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        { 0.866f, -0.5f, 0.f },</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        { -0.866f, -0.5f, 0.f },</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        { 0.f, -1.f, 1.f },</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        { -0.866f, 0.5f, 1.f },</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        { 0.866f, 0.5f, 1.f },</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    };</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> indices[18] = {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        0, 4, 2,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        2, 4, 3,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        2, 3, 1,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        1, 3, 5,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        1, 5, 0,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        0, 5, 4</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    };</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> vert = 0; vert &lt; 6; vert++)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        vec3_t transformed;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        VectorCopy(begin, transformed);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        VectorMA(transformed, vertices[vert][0] * radius, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>, transformed);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        VectorMA(transformed, vertices[vert][1] * radius, left, transformed);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        VectorMA(transformed, vertices[vert][2], dir, transformed);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        VectorCopy(transformed, vertices[vert]);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> tri = 0; tri &lt; 6; tri++)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">if</span> (*num_lights &gt;= max_lights)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">return</span> qfalse;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordtype">int</span> i0 = indices[tri * 3 + 0];</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordtype">int</span> i1 = indices[tri * 3 + 1];</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordtype">int</span> i2 = indices[tri * 3 + 2];</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="../../d4/db6/structlight__poly__s.html">light_poly_t</a>* light = light_list + *num_lights;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        VectorCopy(vertices[i0], light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a224b5cd9f105a635bd66fbaad438401b">positions</a> + 0);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        VectorCopy(vertices[i1], light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a224b5cd9f105a635bd66fbaad438401b">positions</a> + 3);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        VectorCopy(vertices[i2], light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a224b5cd9f105a635bd66fbaad438401b">positions</a> + 6);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="../../d1/d51/bsp__mesh_8c.html#a76bda46cee7c8c83ecda0a3fdf944aab">get_triangle_off_center</a>(light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a224b5cd9f105a635bd66fbaad438401b">positions</a>, light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a5ad08d0154a4fe9705ba7a9af5e03727">off_center</a>, NULL);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a01bd9db96bdb4fe477dd49ca07badd43">cluster</a> = <a class="code" href="../../da/d3b/common_2bsp_8c.html#a9151c67139adecf22c86f78c74e94372">BSP_PointLeaf</a>(bsp-&gt;nodes, light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a5ad08d0154a4fe9705ba7a9af5e03727">off_center</a>)-&gt;cluster;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#ad1b44851f4b9aa2027f6e056965319fe">material</a> = NULL;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a8f6db572f63d365284a4ce3f65fb13e8">style</a> = 0;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        VectorCopy(<a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>, light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#ab07aa2454e689734b69d250b0ff8cf6e">color</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (light-&gt;<a class="code" href="../../d4/db6/structlight__poly__s.html#a01bd9db96bdb4fe477dd49ca07badd43">cluster</a> &gt;= 0)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            (*num_lights)++;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">return</span> qtrue;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af9c083228edd32c9a7b2d9737fc7f38b">process_regular_entity()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a808959ba4018c9ad425e06158be74985">vkpt_build_beam_lights()</a>.</p>

</div>
</div>
<a id="a25e47021bbf1a07485f43930fbbe2c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25e47021bbf1a07485f43930fbbe2c6c">&#9670;&nbsp;</a></span>vkpt_compositing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_compositing </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00460">460</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    };</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_SH]);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_COCG]);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_HF]);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_SPEC]);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_COMPOSITING);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">/* create gradient image */</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea5f4014197508efea073e20136e52dd2f">COMPOSITING</a>]);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">gpu_slice_width</a> + 15) / 16,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + 15) / 16,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        1);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_COMPOSITING);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_COLOR]);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a6f5ac4c032c1495193e5727181523c98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f5ac4c032c1495193e5727181523c98">&#9670;&nbsp;</a></span>vkpt_create_images()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_create_images </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l01442">1442</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;{</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    VkImageCreateInfo images_create_info[<a class="code" href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a>] = {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, _vkformat, _glslformat, _w, _h) \</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="preprocessor">    [VKPT_IMG_##_name] = { \</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="preprocessor">        .sType = VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO, \</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="preprocessor">        .imageType = VK_IMAGE_TYPE_2D, \</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="preprocessor">        .format = VK_FORMAT_##_vkformat, \</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="preprocessor">        .extent = { \</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="preprocessor">            .width  = _w, \</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="preprocessor">            .height = _h, \</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="preprocessor">            .depth  = 1 \</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="preprocessor">        }, \</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="preprocessor">        .mipLevels             = 1, \</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="preprocessor">        .arrayLayers           = 1, \</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="preprocessor">        .samples               = VK_SAMPLE_COUNT_1_BIT, \</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="preprocessor">        .tiling                = VK_IMAGE_TILING_OPTIMAL, \</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="preprocessor">        .usage                 = VK_IMAGE_USAGE_STORAGE_BIT \</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="preprocessor">                               | VK_IMAGE_USAGE_TRANSFER_SRC_BIT \</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="preprocessor">                               | VK_IMAGE_USAGE_TRANSFER_DST_BIT \</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="preprocessor">                               | VK_IMAGE_USAGE_SAMPLED_BIT \</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="preprocessor">                               | VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, \</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="preprocessor">        .sharingMode           = VK_SHARING_MODE_EXCLUSIVE, \</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="preprocessor">        .queueFamilyIndexCount = qvk.queue_idx_graphics, \</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="preprocessor">        .initialLayout         = VK_IMAGE_LAYOUT_UNDEFINED, \</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="preprocessor">    },</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    };</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, _vkformat, _glslformat, _w, _h) \</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="preprocessor">    images_create_info[VKPT_IMG_##_name].flags |= \</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="preprocessor">        VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT;</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordtype">size_t</span> total_size = 0;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a>; i++)</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, images_create_info + i, NULL, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a> + i));</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[i], IMAGE);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        VkMemoryRequirements mem_req;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        vkGetImageMemoryRequirements(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[i], &amp;mem_req);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        total_size += <a class="code" href="../../db/d74/vk__util_8h.html#a6d5d99cbe4eae95d7010aa1062847105">align</a>(mem_req.size, mem_req.alignment);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d9/d7e/vk__util_8c.html#ad8c2ae656cad4dae55abbd83892bcd99">allocate_gpu_memory</a>(mem_req, &amp;<a class="code" href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a>[i]));</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a>[i], DEVICE_MEMORY);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkBindImageMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[i], <a class="code" href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a>[i], 0));</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            <span class="comment">// create per-device local image bindings so we can copy back and forth</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            <span class="comment">// create copies of the same image object that will receive full per-GPU mappings</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; d++)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, images_create_info + i, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i]));</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i], IMAGE);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160; </div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                uint32_t device_indices[<a class="code" href="../../db/d74/vk__util_8h.html#aa1f93aa95687e4d5b9d2322385a83091">VKPT_MAX_GPUS</a>];</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="../../db/d74/vk__util_8h.html#aa1f93aa95687e4d5b9d2322385a83091">VKPT_MAX_GPUS</a>; j++)</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                    <span class="comment">// all GPUs attach to memory on one device for this image object</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                    device_indices[j] = (uint32_t)d;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160; </div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                <span class="comment">// shut up lunarg</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                    VkMemoryRequirements mem_req;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                    vkGetImageMemoryRequirements(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i], &amp;mem_req);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                VkBindImageMemoryDeviceGroupInfoKHR device_group_info = {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                    .sType = VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_DEVICE_GROUP_INFO_KHR,</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                    .pNext = NULL,</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                    .deviceIndexCount = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>,</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                    .pDeviceIndices = device_indices,</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                    .splitInstanceBindRegionCount = 0,</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                    .pSplitInstanceBindRegions = NULL,</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                };</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                VkBindImageMemoryInfoKHR bind_info = {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                    .sType = VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_INFO_KHR,</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                    .pNext = &amp;device_group_info,</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                    .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i],</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                    .memory = <a class="code" href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a>[i],</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                    .memoryOffset = 0,</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                };</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(qvkBindImageMemory2KHR(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;bind_info));</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    Com_Printf(<span class="stringliteral">&quot;Screen-space image memory: %.2f MB\n&quot;</span>, (<span class="keywordtype">float</span>)total_size / 1048576.f);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="comment">/* attach labels to images */</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, ...) \</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="preprocessor">    ATTACH_LABEL_VARIABLE_NAME(qvk.images[VKPT_IMG_##_name], IMAGE, #_name);</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="comment">/* attach labels to images */</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, ...) \</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="preprocessor">    ATTACH_LABEL_VARIABLE_NAME(qvk.images[VKPT_IMG_##_name], IMAGE, #_name);</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, _vkformat, _glslformat, _w, _h) \</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="preprocessor">    [VKPT_IMG_##_name] = { \</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="preprocessor">        .sType      = VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO, \</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="preprocessor">        .viewType   = VK_IMAGE_VIEW_TYPE_2D, \</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="preprocessor">        .format     = VK_FORMAT_##_vkformat, \</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="preprocessor">        .image      = qvk.images[VKPT_IMG_##_name], \</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="preprocessor">        .subresourceRange = { \</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="preprocessor">            .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT, \</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="preprocessor">            .baseMipLevel   = 0, \</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="preprocessor">            .levelCount     = 1, \</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="preprocessor">            .baseArrayLayer = 0, \</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="preprocessor">            .layerCount     = 1 \</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="preprocessor">        }, \</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="preprocessor">        .components     = { \</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="preprocessor">            VK_COMPONENT_SWIZZLE_R, \</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="preprocessor">            VK_COMPONENT_SWIZZLE_G, \</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="preprocessor">            VK_COMPONENT_SWIZZLE_B, \</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="preprocessor">            VK_COMPONENT_SWIZZLE_A \</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="preprocessor">        }, \</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="preprocessor">    },</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    VkImageViewCreateInfo images_view_create_info[<a class="code" href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a>] = {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    };</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a>; i++) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, images_view_create_info + i, NULL, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a502a1a9359495267b3a90dd23dd2c0e1">images_views</a> + i));</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; d++) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                VkImageViewCreateInfo info = images_view_create_info[i];</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                info.image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i];</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;info, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_views_local[d][i]));</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    }</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="comment">/* attach labels to image views */</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="preprocessor">#define IMG_DO(_name, ...) \</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="preprocessor">    ATTACH_LABEL_VARIABLE_NAME(qvk.images_views[VKPT_IMG_##_name], IMAGE_VIEW, #_name);</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="preprocessor">#define IMG_DO(_name, ...) \</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="preprocessor">    [VKPT_IMG_##_name] = { \</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="preprocessor">        .sampler     = VK_NULL_HANDLE, \</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="preprocessor">        .imageView   = qvk.images_views[VKPT_IMG_##_name], \</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="preprocessor">        .imageLayout = VK_IMAGE_LAYOUT_GENERAL \</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="preprocessor">    },</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    VkDescriptorImageInfo desc_output_img_info[] = {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    };</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    VkDescriptorImageInfo img_info[] = {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="preprocessor">#define IMG_DO(_name, ...) \</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="preprocessor">        [VKPT_IMG_##_name] = { \</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="preprocessor">            .imageLayout = VK_IMAGE_LAYOUT_GENERAL, \</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="preprocessor">            .imageView   = qvk.images_views[VKPT_IMG_##_name], \</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="preprocessor">            .sampler     = qvk.tex_sampler, \</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="preprocessor">        },</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160; </div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    };</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = VKPT_IMG_BLOOM_HBLUR; i &lt;= VKPT_IMG_BLOOM_VBLUR; i++) {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        img_info[i].sampler = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7d6ba384be74739107017ef3b0263d08">tex_sampler_linear_clamp</a>;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    }</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    VkWriteDescriptorSet output_img_write[<a class="code" href="../../df/dcb/global__textures_8h.html#a9cb64526659b4bebea0d36565debb187">NUM_IMAGES</a> * 2];</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> even_odd = 0; even_odd &lt; 2; even_odd++)</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="comment">/* create information to update descriptor sets */</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, ...) { \</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="preprocessor">            VkWriteDescriptorSet elem_image = { \</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="preprocessor">                .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET, \</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="preprocessor">                .dstSet          = even_odd ? qvk.desc_set_textures_odd : qvk.desc_set_textures_even, \</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="preprocessor">                .dstBinding      = BINDING_OFFSET_IMAGES + _binding, \</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="preprocessor">                .dstArrayElement = 0, \</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="preprocessor">                .descriptorCount = 1, \</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="preprocessor">                .descriptorType  = VK_DESCRIPTOR_TYPE_STORAGE_IMAGE, \</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="preprocessor">                .pImageInfo      = desc_output_img_info + VKPT_IMG_##_name, \</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="preprocessor">            }; \</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="preprocessor">            VkWriteDescriptorSet elem_texture = { \</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="preprocessor">                .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET, \</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="preprocessor">                .dstSet          = even_odd ? qvk.desc_set_textures_odd : qvk.desc_set_textures_even, \</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="preprocessor">                .dstBinding      = BINDING_OFFSET_TEXTURES + _binding, \</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="preprocessor">                .dstArrayElement = 0, \</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="preprocessor">                .descriptorCount = 1, \</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="preprocessor">                .descriptorType  = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER, \</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="preprocessor">                .pImageInfo      = img_info + VKPT_IMG_##_name, \</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="preprocessor">            }; \</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="preprocessor">            output_img_write[VKPT_IMG_##_name] = elem_image; \</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="preprocessor">            output_img_write[VKPT_IMG_##_name + NUM_VKPT_IMAGES] = elem_texture; \</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="preprocessor">        }</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">if</span> (even_odd)</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            <a class="code" href="../../df/dcb/global__textures_8h.html#a738e45240e5929caa318ed55e16485bb">LIST_IMAGES_B_A</a>;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        }</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(output_img_write), output_img_write, 0, NULL);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160; </div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#a11f2fd61d3ade68066123dc9e6449fb9">create_readback_image</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">screenshot_image</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1c4219b9b544793270d5a1a338649b1e">screenshot_image_memory</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0b17db91e89ea7d4df6272b41ed69139">screenshot_image_memory_size</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adc06751982961eeba364d716b804359b">surf_format</a>.format, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.width, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.height);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="preprocessor">#ifdef VKPT_IMAGE_DUMPS</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#a11f2fd61d3ade68066123dc9e6449fb9">create_readback_image</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.dump_image, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.dump_image_memory, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.dump_image_memory_size, VK_FORMAT_R16G16B16A16_SFLOAT, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.width, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.height);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    VkCommandBuffer cmd_buf = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160; </div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        .baseMipLevel   = 0,</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        .levelCount     = 1,</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        .baseArrayLayer = 0,</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        .layerCount     = 1</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    };</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a>; i++) {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[i],</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            .srcAccessMask = 0,</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            .dstAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            .oldLayout = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            .newLayout = VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        );</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; d++) </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;            {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, d);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                    .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i],</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                    .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                    .srcAccessMask = 0,</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                    .dstAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                    .oldLayout = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                    .newLayout = VK_IMAGE_LAYOUT_GENERAL</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                );</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160; </div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160; </div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">screenshot_image</a>,</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        .srcAccessMask = 0,</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        .dstAccessMask = VK_ACCESS_HOST_READ_BIT,</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        );</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="preprocessor">#ifdef VKPT_IMAGE_DUMPS</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.dump_image,</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        .srcAccessMask = 0,</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        .dstAccessMask = VK_ACCESS_HOST_READ_BIT,</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    );</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, qtrue);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    vkQueueWaitIdle(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1b830e72878c5c441616708ba56c568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1b830e72878c5c441616708ba56c568">&#9670;&nbsp;</a></span>vkpt_destroy_god_rays()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_destroy_god_rays </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00065">65</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    vkDestroySampler(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.shadow_sampler, NULL);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    vkDestroyDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.descriptor_pool, NULL);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d1aa5d8710a1a49eb230d74a6a82e0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d1aa5d8710a1a49eb230d74a6a82e0d">&#9670;&nbsp;</a></span>vkpt_destroy_images()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_destroy_images </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l01757">1757</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;{</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a>; i++) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a502a1a9359495267b3a90dd23dd2c0e1">images_views</a>[i], NULL);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        vkDestroyImage    (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[i],       NULL);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a502a1a9359495267b3a90dd23dd2c0e1">images_views</a>[i] = VK_NULL_HANDLE;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[i]       = VK_NULL_HANDLE;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160; </div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; d++)</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_views_local[d][i], NULL);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                vkDestroyImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i], NULL);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_views_local[d][i] = VK_NULL_HANDLE;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.images_local[d][i] = VK_NULL_HANDLE;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        }</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160; </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a>[i])</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a>[i], NULL);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <a class="code" href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a>[i] = VK_NULL_HANDLE;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160; </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#a9d65499458d9ed03c598ba43df35b8df">destroy_readback_image</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">screenshot_image</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1c4219b9b544793270d5a1a338649b1e">screenshot_image_memory</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0b17db91e89ea7d4df6272b41ed69139">screenshot_image_memory_size</a>);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="preprocessor">#ifdef VKPT_IMAGE_DUMPS </span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#a9d65499458d9ed03c598ba43df35b8df">destroy_readback_image</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.dump_image, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.dump_image_memory, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.dump_image_memory_size);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5fa4f7bd563b4063f5348780d99dddc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5fa4f7bd563b4063f5348780d99dddc">&#9670;&nbsp;</a></span>vkpt_destroy_shader_modules()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_destroy_shader_modules </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l01180">1180</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="preprocessor">#define SHADER_MODULE_DO(a) \</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="preprocessor">    vkDestroyShaderModule(qvk.device, qvk.shader_modules[a], NULL); \</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="preprocessor">    qvk.shader_modules[a] = VK_NULL_HANDLE;</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a077ffee32baed268bcfef6e7229edc8a">LIST_SHADER_MODULES</a></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="preprocessor">#undef SHADER_MODULE_DO</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4bcaf2c106f70dcad7f14ad59fbca99b">R_Shutdown_RTX()</a>, and <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab099e080cef0f76efcf6bdb5d49e00d1">vkpt_reload_shader()</a>.</p>

</div>
</div>
<a id="a7d59a0397ce639236f6d497c2a94630b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d59a0397ce639236f6d497c2a94630b">&#9670;&nbsp;</a></span>vkpt_draw_clear_stretch_pics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_draw_clear_stretch_pics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00492">492</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a6b902c867d637cb156f07f33a8258e78">num_stretch_pics</a> = 0;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>.</p>

</div>
</div>
<a id="a2b76c29a05f293eedf0e6a92c63cf2ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b76c29a05f293eedf0e6a92c63cf2ee">&#9670;&nbsp;</a></span>vkpt_draw_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_draw_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00323">323</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    assert(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#af5b49e0bb61c944b0ed67751148dd2eb">desc_set_layout_sbo</a>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    VkDescriptorSetLayout desc_set_layouts[] = {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#af5b49e0bb61c944b0ed67751148dd2eb">desc_set_layout_sbo</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    };</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab01fd5e015543f9dfc29f868fbee4f2e">pipeline_layout_stretch_pic</a>, </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        .setLayoutCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        .pSetLayouts    = desc_set_layouts</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    );</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    desc_set_layouts[0] = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1f9f94b83c2c86b74f6db9e7b5357747">pipeline_layout_final_blit</a>,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        .setLayoutCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        .pSetLayouts = desc_set_layouts</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    VkPipelineShaderStageCreateInfo shader_info[] = {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_STRETCH_PIC_VERT, VK_SHADER_STAGE_VERTEX_BIT),</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_STRETCH_PIC_FRAG, VK_SHADER_STAGE_FRAGMENT_BIT)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    };</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    VkPipelineVertexInputStateCreateInfo vertex_input_info = {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        .sType                           = VK_STRUCTURE_TYPE_PIPELINE_VERTEX_INPUT_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        .vertexBindingDescriptionCount   = 0,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        .pVertexBindingDescriptions      = NULL,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        .vertexAttributeDescriptionCount = 0,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        .pVertexAttributeDescriptions    = NULL,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    };</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    VkPipelineInputAssemblyStateCreateInfo input_assembly_info = {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        .sType                  = VK_STRUCTURE_TYPE_PIPELINE_INPUT_ASSEMBLY_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        .topology               = VK_PRIMITIVE_TOPOLOGY_TRIANGLE_STRIP,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        .primitiveRestartEnable = VK_FALSE,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    };</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    VkViewport viewport = {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        .x        = 0.0f,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        .y        = 0.0f,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        .width    = (float) <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a>().width,</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        .height   = (float) <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a>().height,</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        .minDepth = 0.0f,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        .maxDepth = 1.0f,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    };</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    VkRect2D scissor = {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        .offset = { 0, 0 },</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        .extent = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a>(),</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    };</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    VkPipelineViewportStateCreateInfo viewport_state = {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        .sType         = VK_STRUCTURE_TYPE_PIPELINE_VIEWPORT_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        .viewportCount = 1,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        .pViewports    = &amp;viewport,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        .scissorCount  = 1,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        .pScissors     = &amp;scissor,</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    };</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    VkPipelineRasterizationStateCreateInfo rasterizer_state = {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        .sType                   = VK_STRUCTURE_TYPE_PIPELINE_RASTERIZATION_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        .depthClampEnable        = VK_FALSE,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        .rasterizerDiscardEnable = VK_FALSE, <span class="comment">/* skip rasterizer */</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        .polygonMode             = VK_POLYGON_MODE_FILL,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        .lineWidth               = 1.0f,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        .cullMode                = VK_CULL_MODE_BACK_BIT,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        .frontFace               = VK_FRONT_FACE_CLOCKWISE,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        .depthBiasEnable         = VK_FALSE,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        .depthBiasConstantFactor = 0.0f,</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        .depthBiasClamp          = 0.0f,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        .depthBiasSlopeFactor    = 0.0f,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    };</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    VkPipelineMultisampleStateCreateInfo multisample_state = {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        .sType                 = VK_STRUCTURE_TYPE_PIPELINE_MULTISAMPLE_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        .sampleShadingEnable   = VK_FALSE,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        .rasterizationSamples  = VK_SAMPLE_COUNT_1_BIT,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        .minSampleShading      = 1.0f,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        .pSampleMask           = NULL,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        .alphaToCoverageEnable = VK_FALSE,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        .alphaToOneEnable      = VK_FALSE,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    };</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    VkPipelineColorBlendAttachmentState color_blend_attachment = {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        .colorWriteMask      = VK_COLOR_COMPONENT_R_BIT</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                             | VK_COLOR_COMPONENT_G_BIT</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                             | VK_COLOR_COMPONENT_B_BIT</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                             | VK_COLOR_COMPONENT_A_BIT,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        .blendEnable         = VK_TRUE,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        .srcColorBlendFactor = VK_BLEND_FACTOR_SRC_ALPHA,</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        .dstColorBlendFactor = VK_BLEND_FACTOR_ONE_MINUS_SRC_ALPHA,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        .colorBlendOp        = VK_BLEND_OP_ADD,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        .srcAlphaBlendFactor = VK_BLEND_FACTOR_ONE,</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        .dstAlphaBlendFactor = VK_BLEND_FACTOR_ZERO,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        .alphaBlendOp        = VK_BLEND_OP_ADD,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    };</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    VkPipelineColorBlendStateCreateInfo color_blend_state = {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        .sType           = VK_STRUCTURE_TYPE_PIPELINE_COLOR_BLEND_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        .logicOpEnable   = VK_FALSE,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        .logicOp         = VK_LOGIC_OP_COPY,</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        .attachmentCount = 1,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        .pAttachments    = &amp;color_blend_attachment,</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        .blendConstants  = { 0.0f, 0.0f, 0.0f, 0.0f },</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    };</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    VkGraphicsPipelineCreateInfo pipeline_info = {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        .sType      = VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        .stageCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(shader_info),</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        .pStages    = shader_info,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        .pVertexInputState   = &amp;vertex_input_info,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        .pInputAssemblyState = &amp;input_assembly_info,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        .pViewportState      = &amp;viewport_state,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        .pRasterizationState = &amp;rasterizer_state,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        .pMultisampleState   = &amp;multisample_state,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        .pDepthStencilState  = NULL,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        .pColorBlendState    = &amp;color_blend_state,</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        .pDynamicState       = NULL,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        .layout              = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab01fd5e015543f9dfc29f868fbee4f2e">pipeline_layout_stretch_pic</a>,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        .renderPass          = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afa95fe01a2cd6919068a1ab1b6a33721">render_pass_stretch_pic</a>,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        .subpass             = 0,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        .basePipelineHandle  = VK_NULL_HANDLE,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        .basePipelineIndex   = -1,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    };</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateGraphicsPipelines(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, VK_NULL_HANDLE, 1, &amp;pipeline_info, NULL, &amp;<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a465d2168c39bd20c39b45e4fcb3f35d5">pipeline_stretch_pic</a>));</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a465d2168c39bd20c39b45e4fcb3f35d5">pipeline_stretch_pic</a>, PIPELINE);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    VkPipelineShaderStageCreateInfo shader_info_final_blit[] = {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_FINAL_BLIT_VERT, VK_SHADER_STAGE_VERTEX_BIT),</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_FINAL_BLIT_LANCZOS_FRAG, VK_SHADER_STAGE_FRAGMENT_BIT)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    };</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    pipeline_info.pStages = shader_info_final_blit;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    pipeline_info.layout = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1f9f94b83c2c86b74f6db9e7b5357747">pipeline_layout_final_blit</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateGraphicsPipelines(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, VK_NULL_HANDLE, 1, &amp;pipeline_info, NULL, &amp;<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a219b97ba3a4b0e0cc255fe2b480466a1">pipeline_final_blit</a>));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a219b97ba3a4b0e0cc255fe2b480466a1">pipeline_final_blit</a>, PIPELINE);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a91e4d128a2a9c30c9fc8381ddb185473">num_swap_chain_images</a>; i++) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        VkImageView attachments[] = {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adab3147e5962f0f298ea9ebc22fa4b8f">swap_chain_image_views</a>[i]</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        };</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        VkFramebufferCreateInfo fb_create_info = {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            .sType           = VK_STRUCTURE_TYPE_FRAMEBUFFER_CREATE_INFO,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            .renderPass      = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afa95fe01a2cd6919068a1ab1b6a33721">render_pass_stretch_pic</a>,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            .attachmentCount = 1,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            .pAttachments    = attachments,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            .width           = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a>().width,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            .height          = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a>().height,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            .layers          = 1,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        };</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateFramebuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;fb_create_info, NULL, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1102c197be33367e2b187d5a655ebb8a">framebuffer_stretch_pic</a> + i));</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1102c197be33367e2b187d5a655ebb8a">framebuffer_stretch_pic</a>[i], FRAMEBUFFER);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b30fe5d77a5cc95aeaff6ebe70f8130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b30fe5d77a5cc95aeaff6ebe70f8130">&#9670;&nbsp;</a></span>vkpt_draw_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_draw_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00295">295</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ae51c95b35d36bbabe412da86b8b44671">buf_stretch_pic_queue</a> + i);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    vkDestroyRenderPass(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afa95fe01a2cd6919068a1ab1b6a33721">render_pass_stretch_pic</a>, NULL);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    vkDestroyDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a5e34b1f9a78cd3f014efa22c75233678">desc_pool_sbo</a>, NULL);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    vkDestroyDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#af5b49e0bb61c944b0ed67751148dd2eb">desc_set_layout_sbo</a>, NULL);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2412ecc29207cbe4c2161984ecf54fcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2412ecc29207cbe4c2161984ecf54fcd">&#9670;&nbsp;</a></span>vkpt_draw_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_draw_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00309">309</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a465d2168c39bd20c39b45e4fcb3f35d5">pipeline_stretch_pic</a>, NULL);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a219b97ba3a4b0e0cc255fe2b480466a1">pipeline_final_blit</a>, NULL);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab01fd5e015543f9dfc29f868fbee4f2e">pipeline_layout_stretch_pic</a>, NULL);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1f9f94b83c2c86b74f6db9e7b5357747">pipeline_layout_final_blit</a>, NULL);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a91e4d128a2a9c30c9fc8381ddb185473">num_swap_chain_images</a>; i++) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        vkDestroyFramebuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1102c197be33367e2b187d5a655ebb8a">framebuffer_stretch_pic</a>[i], NULL);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e927d9fb98531919f82caba825f3777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e927d9fb98531919f82caba825f3777">&#9670;&nbsp;</a></span>vkpt_draw_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_draw_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00217">217</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a6b902c867d637cb156f07f33a8258e78">num_stretch_pics</a> = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#acd09c4018a3e30440e1529a316a7cf04">create_render_pass</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ae51c95b35d36bbabe412da86b8b44671">buf_stretch_pic_queue</a> + i, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d22/struct_stretch_pic__t.html">StretchPic_t</a>) * <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a365b4447a30f96ffdbdae5ea602e47ed">MAX_STRETCH_PICS</a>, </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            VK_BUFFER_USAGE_STORAGE_BUFFER_BIT,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT));</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    VkDescriptorSetLayoutBinding layout_bindings[] = {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            .binding         = 0,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            .stageFlags      = VK_SHADER_STAGE_VERTEX_BIT,</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        },</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    };</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    VkDescriptorSetLayoutCreateInfo layout_info = {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        .sType        = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        .bindingCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(layout_bindings),</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        .pBindings    = layout_bindings,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    };</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;layout_info, NULL, &amp;<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#af5b49e0bb61c944b0ed67751148dd2eb">desc_set_layout_sbo</a>));</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#af5b49e0bb61c944b0ed67751148dd2eb">desc_set_layout_sbo</a>, DESCRIPTOR_SET_LAYOUT);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    VkDescriptorPoolSize pool_size = {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        .type            = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        .descriptorCount = <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    };</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    VkDescriptorPoolCreateInfo pool_info = {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        .sType         = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        .poolSizeCount = 1,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        .pPoolSizes    = &amp;pool_size,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        .maxSets       = <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    };</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;pool_info, NULL, &amp;<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a5e34b1f9a78cd3f014efa22c75233678">desc_pool_sbo</a>));</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a5e34b1f9a78cd3f014efa22c75233678">desc_pool_sbo</a>, DESCRIPTOR_POOL);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    VkDescriptorSetAllocateInfo descriptor_set_alloc_info = {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        .sType              = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        .descriptorPool     = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a5e34b1f9a78cd3f014efa22c75233678">desc_pool_sbo</a>,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        .descriptorSetCount = 1,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        .pSetLayouts        = &amp;<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#af5b49e0bb61c944b0ed67751148dd2eb">desc_set_layout_sbo</a>,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    };</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkAllocateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;descriptor_set_alloc_info, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a12ba48f77681fe479f1259aee01e2cf0">desc_set_sbo</a> + i));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a> *sbo = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ae51c95b35d36bbabe412da86b8b44671">buf_stretch_pic_queue</a> + i;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        VkDescriptorBufferInfo buf_info = {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            .<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a> = sbo-&gt;<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            .offset = 0,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            .range  = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a5c28f21fb4134658625d2e9b4aaf52ee">stretch_pic_queue</a>),</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        };</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        VkWriteDescriptorSet output_buf_write = {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            .dstSet          = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a12ba48f77681fe479f1259aee01e2cf0">desc_set_sbo</a>[i],</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            .dstBinding      = 0,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            .dstArrayElement = 0,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            .pBufferInfo     = &amp;buf_info,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        };</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a638e1699e2e9b547d3b2c20deed8f2e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a638e1699e2e9b547d3b2c20deed8f2e6">&#9670;&nbsp;</a></span>vkpt_draw_submit_stretch_pics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_draw_submit_stretch_pics </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00499">499</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a6b902c867d637cb156f07f33a8258e78">num_stretch_pics</a> == 0)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a> *buf_spq = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ae51c95b35d36bbabe412da86b8b44671">buf_stretch_pic_queue</a> + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="../../dd/d22/struct_stretch_pic__t.html">StretchPic_t</a> *spq_dev = (<a class="code" href="../../dd/d22/struct_stretch_pic__t.html">StretchPic_t</a> *) <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(buf_spq);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    memcpy(spq_dev, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a5c28f21fb4134658625d2e9b4aaf52ee">stretch_pic_queue</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d22/struct_stretch_pic__t.html">StretchPic_t</a>) * <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a6b902c867d637cb156f07f33a8258e78">num_stretch_pics</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(buf_spq);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    spq_dev = NULL;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    VkRenderPassBeginInfo render_pass_info = {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        .sType             = VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        .renderPass        = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afa95fe01a2cd6919068a1ab1b6a33721">render_pass_stretch_pic</a>,</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        .framebuffer       = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1102c197be33367e2b187d5a655ebb8a">framebuffer_stretch_pic</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aec1ff219ca7e90f046e71ed586298eb4">current_swap_chain_image_index</a>],</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        .renderArea.offset = { 0, 0 },</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        .renderArea.extent = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a>()</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    };</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a12ba48f77681fe479f1259aee01e2cf0">desc_set_sbo</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>],</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>()</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    };</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    vkCmdBeginRenderPass(cmd_buf, &amp;render_pass_info, VK_SUBPASS_CONTENTS_INLINE);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_GRAPHICS,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#ab01fd5e015543f9dfc29f868fbee4f2e">pipeline_layout_stretch_pic</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_GRAPHICS, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a465d2168c39bd20c39b45e4fcb3f35d5">pipeline_stretch_pic</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    vkCmdDraw(cmd_buf, 4, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a6b902c867d637cb156f07f33a8258e78">num_stretch_pics</a>, 0, 0);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    vkCmdEndRenderPass(cmd_buf);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a6b902c867d637cb156f07f33a8258e78">num_stretch_pics</a> = 0;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a6e118e55bb20687cff735f03176035e4">R_EndFrame_RTX()</a>.</p>

</div>
</div>
<a id="ab28c26fd0af9d89a9ce5b7237fdf5c10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab28c26fd0af9d89a9ce5b7237fdf5c10">&#9670;&nbsp;</a></span>vkpt_extract_emissive_texture_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_extract_emissive_texture_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00532">532</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;{</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordtype">int</span> w = image-&gt;upload_width;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordtype">int</span> h = image-&gt;upload_height;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">byte</span>* current_pixel = image-&gt;pix_data;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    vec3_t emissive_color;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    VectorClear(emissive_color);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordtype">int</span> min_x = w;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">int</span> max_x = -1;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">int</span> min_y = h;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">int</span> max_y = -1;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; h; y++) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; w; x++) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">if</span>(current_pixel[0] + current_pixel[1] + current_pixel[2] &gt; 0)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                vec3_t <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] = <a class="code" href="../../dd/dbb/textures_8c.html#ac556a040809e7043ffd7a56aeb8eab43">decode_srgb</a>(current_pixel[0]);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] = <a class="code" href="../../dd/dbb/textures_8c.html#ac556a040809e7043ffd7a56aeb8eab43">decode_srgb</a>(current_pixel[1]);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[2] = <a class="code" href="../../dd/dbb/textures_8c.html#ac556a040809e7043ffd7a56aeb8eab43">decode_srgb</a>(current_pixel[2]);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] = max(0.f, <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] + <a class="code" href="../../d2/d6f/constants_8h.html#a338f10a9af357b8924f92afe245d47be">EMISSIVE_TRANSFORM_BIAS</a>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] = max(0.f, <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] + <a class="code" href="../../d2/d6f/constants_8h.html#a338f10a9af357b8924f92afe245d47be">EMISSIVE_TRANSFORM_BIAS</a>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[2] = max(0.f, <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[2] + <a class="code" href="../../d2/d6f/constants_8h.html#a338f10a9af357b8924f92afe245d47be">EMISSIVE_TRANSFORM_BIAS</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                VectorAdd(emissive_color, <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>, emissive_color);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                min_x = min(min_x, x);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                min_y = min(min_y, y);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                max_x = max(max_x, x);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                max_y = max(max_y, y);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            current_pixel += 4;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> (min_x &lt;= max_x &amp;&amp; min_y &lt;= max_y)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordtype">float</span> normalization = 1.f / (float)((max_x - min_x + 1) * (max_y - min_y + 1));</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        VectorScale(emissive_color, normalization, image-&gt;light_color);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        VectorSet(image-&gt;light_color, 0.f, 0.f, 0.f);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    image-&gt;min_light_texcoord[0] = (float)min_x / (<span class="keywordtype">float</span>)w;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    image-&gt;min_light_texcoord[1] = (float)min_y / (<span class="keywordtype">float</span>)h;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    image-&gt;max_light_texcoord[0] = (float)(max_x + 1) / (float)w;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    image-&gt;max_light_texcoord[1] = (float)(max_y + 1) / (float)h;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    image-&gt;entire_texture_emissive = (min_x == 0) &amp;&amp; (min_y == 0) &amp;&amp; (max_x == w - 1) &amp;&amp; (max_y == h - 1);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    image-&gt;processing_complete = qtrue;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#a69d36a4facff2ae7900172ce3cae1ff5">bsp_mesh_register_textures()</a>.</p>

</div>
</div>
<a id="aaa3e9e8741c94c705e280461e82fd83a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3e9e8741c94c705e280461e82fd83a">&#9670;&nbsp;</a></span>vkpt_final_blit_filtered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_final_blit_filtered </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00604">604</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    VkRenderPassBeginInfo render_pass_info = {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        .sType = VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        .renderPass = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afa95fe01a2cd6919068a1ab1b6a33721">render_pass_stretch_pic</a>,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        .framebuffer = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1102c197be33367e2b187d5a655ebb8a">framebuffer_stretch_pic</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aec1ff219ca7e90f046e71ed586298eb4">current_swap_chain_image_index</a>],</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        .renderArea.offset = { 0, 0 },</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        .renderArea.extent = <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a>()</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    };</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>()</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    };</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    vkCmdBeginRenderPass(cmd_buf, &amp;render_pass_info, VK_SUBPASS_CONTENTS_INLINE);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_GRAPHICS,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a1f9f94b83c2c86b74f6db9e7b5357747">pipeline_layout_final_blit</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_GRAPHICS, <a class="code" href="../../d0/ded/vkpt_2draw_8c.html#a219b97ba3a4b0e0cc255fe2b480466a1">pipeline_final_blit</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    vkCmdDraw(cmd_buf, 4, 1, 0, 0);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    vkCmdEndRenderPass(cmd_buf);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a6e118e55bb20687cff735f03176035e4">R_EndFrame_RTX()</a>.</p>

</div>
</div>
<a id="af0a3990b82cb05cba762a9099e9b8fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0a3990b82cb05cba762a9099e9b8fe7">&#9670;&nbsp;</a></span>vkpt_final_blit_simple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_final_blit_simple </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html#l00535">535</a> of file <a class="el" href="../../d0/ded/vkpt_2draw_8c_source.html">draw.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        .baseMipLevel = 0,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        .levelCount = 1,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        .baseArrayLayer = 0,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        .layerCount = 1</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    };</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a35e6d8d722910a211710b44dd713b5de">swap_chain_images</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aec1ff219ca7e90f046e71ed586298eb4">current_swap_chain_image_index</a>],</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        .srcAccessMask = 0,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        .dstAccessMask = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_PRESENT_SRC_KHR,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    );</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordtype">int</span> output_img = VKPT_IMG_TAA_OUTPUT;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[output_img],</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        .srcAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        .dstAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    );</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    VkOffset3D blit_size = {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        .x = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width,.y = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height,.z = 1</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    };</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    VkOffset3D blit_size_unscaled = {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        .x = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.width,.y = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">extent_unscaled</a>.height,.z = 1</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    };</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    VkImageBlit img_blit = {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        .srcSubresource = { VK_IMAGE_ASPECT_COLOR_BIT, 0, 0, 1 },</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        .dstSubresource = { VK_IMAGE_ASPECT_COLOR_BIT, 0, 0, 1 },</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        .srcOffsets = { [1] = blit_size },</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        .dstOffsets = { [1] = blit_size_unscaled },</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    };</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    vkCmdBlitImage(cmd_buf,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[output_img], VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a35e6d8d722910a211710b44dd713b5de">swap_chain_images</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aec1ff219ca7e90f046e71ed586298eb4">current_swap_chain_image_index</a>], VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        1, &amp;img_blit, VK_FILTER_NEAREST);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a35e6d8d722910a211710b44dd713b5de">swap_chain_images</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aec1ff219ca7e90f046e71ed586298eb4">current_swap_chain_image_index</a>],</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        .srcAccessMask = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        .dstAccessMask = 0,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    );</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        .image = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[output_img],</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        .subresourceRange = subresource_range,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        .srcAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        .dstAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_GENERAL</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    );</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a6e118e55bb20687cff735f03176035e4">R_EndFrame_RTX()</a>.</p>

</div>
</div>
<a id="aa15637806eef38c08ae952805089762b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa15637806eef38c08ae952805089762b">&#9670;&nbsp;</a></span>vkpt_free_command_buffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_free_command_buffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *&#160;</td>
          <td class="paramname"><em>group</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03373">3373</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;{</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;    <span class="keywordflow">if</span> (group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> == 0)</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160; </div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    vkFreeCommandBuffers(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#adaa714c5f2627919f990835b732826ed">command_pool</a>, group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>, group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a>);</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160; </div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a>);</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;    group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a> = NULL;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160; </div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    <a class="code" href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(group-&gt;buffer_begin_addrs);</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    group-&gt;buffer_begin_addrs = NULL;</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> = 0;</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae58af1b4dc98b53615c1187115d3ee05">used_this_frame</a> = 0;</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ad4a0a652f9b2266ed85c501c822434a3">destroy_vulkan()</a>.</p>

</div>
</div>
<a id="a4b61164254f6a7ee55d56f4894b2e88c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b61164254f6a7ee55d56f4894b2e88c">&#9670;&nbsp;</a></span>vkpt_freecam_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_freecam_reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d09/freecam_8c_source.html#l00055">55</a> of file <a class="el" href="../../da/d09/freecam_8c_source.html">freecam.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../da/d09/freecam_8c.html#ab0b38df0e1e1e335be67256bd7d2c35d">freecam_active</a>)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../d7/de8/cvar_8c.html#af8073267db27dfba071ef3c2cdc2c751">Cvar_SetByVar</a>(<a class="code" href="../../d0/da6/client_2client_8h.html#a26b3965778674ca93982ac5eeafa4c41">cl_player_model</a>, <a class="code" href="../../d1/d8c/shared_8c.html#aa64168c27e0f1b6341cc31ea309081b2">va</a>(<span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="../../da/d09/freecam_8c.html#ae80be44d42b1a932dbf5a4ac9d072410">freecam_player_model</a>), FROM_CODE);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../da/d09/freecam_8c.html#ab0b38df0e1e1e335be67256bd7d2c35d">freecam_active</a> = qfalse;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4bcaf2c106f70dcad7f14ad59fbca99b">R_Shutdown_RTX()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#aff905f638b31e388828370e560697f15">vkpt_freecam_update()</a>.</p>

</div>
</div>
<a id="aff905f638b31e388828370e560697f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff905f638b31e388828370e560697f15">&#9670;&nbsp;</a></span>vkpt_freecam_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_freecam_update </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>frame_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d09/freecam_8c_source.html#l00120">120</a> of file <a class="el" href="../../da/d09/freecam_8c_source.html">freecam.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (cl_paused-&gt;integer != 2 || !<a class="code" href="../../d8/d19/common_8c.html#a459a66c52a2c28d316084ac4280c561e">sv_paused</a>-&gt;integer || !<a class="code" href="../../da/d09/freecam_8c.html#a1bfcfdeb17bf80d6a8ef1427bd0b2f3f">cvar_pt_freecam</a>-&gt;integer)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="../../da/d09/freecam_8c.html#a4b61164254f6a7ee55d56f4894b2e88c">vkpt_freecam_reset</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../da/d09/freecam_8c.html#ab0b38df0e1e1e335be67256bd7d2c35d">freecam_active</a>)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        VectorCopy(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;vieworg, <a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        VectorCopy(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;viewangles, <a class="code" href="../../da/d09/freecam_8c.html#ac9c22342dfbf619d329468acd09be9fe">freecam_viewangles</a>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="../../da/d09/freecam_8c.html#ae2255dc333d14505e46569db839fcf78">freecam_zoom</a> = 1.f;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="../../da/d09/freecam_8c.html#ae80be44d42b1a932dbf5a4ac9d072410">freecam_player_model</a> = <a class="code" href="../../d0/da6/client_2client_8h.html#a26b3965778674ca93982ac5eeafa4c41">cl_player_model</a>-&gt;integer;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="../../da/d09/freecam_8c.html#ab0b38df0e1e1e335be67256bd7d2c35d">freecam_active</a> = qtrue;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    vec3_t prev_vieworg;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    vec3_t prev_viewangles;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    VectorCopy(<a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>, prev_vieworg);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    VectorCopy(<a class="code" href="../../da/d09/freecam_8c.html#ac9c22342dfbf619d329468acd09be9fe">freecam_viewangles</a>, prev_viewangles);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">float</span> prev_zoom = <a class="code" href="../../da/d09/freecam_8c.html#ae2255dc333d14505e46569db839fcf78">freecam_zoom</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    vec3_t velocity = { 0.f };</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[0]) velocity[0] += 1.f;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[1]) velocity[0] -= 1.f;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[2]) velocity[1] += 1.f;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[3]) velocity[1] -= 1.f;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[4]) velocity[2] += 1.f;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a>[5]) velocity[2] -= 1.f;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/de3/keys_8c.html#a38240210679b9f3092cdaa34479444d6">Key_IsDown</a>(K_SHIFT))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        VectorScale(velocity, 5.f, velocity);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/de3/keys_8c.html#a38240210679b9f3092cdaa34479444d6">Key_IsDown</a>(K_CTRL))</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        VectorScale(velocity, 0.1f, velocity);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    vec3_t <a class="code" href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, <a class="code" href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a>, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../d1/d8c/shared_8c.html#a2e5fea4a84281f9ee70628579750f9f1">AngleVectors</a>(<a class="code" href="../../da/d09/freecam_8c.html#ac9c22342dfbf619d329468acd09be9fe">freecam_viewangles</a>, <a class="code" href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, <a class="code" href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a>, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">float</span> speed = 100.f;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    VectorMA(<a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>, velocity[0] * frame_time * speed, <a class="code" href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, <a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    VectorMA(<a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>, velocity[1] * frame_time * speed, <a class="code" href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a>, <a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    VectorMA(<a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>, velocity[2] * frame_time * speed, <a class="code" href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>, <a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="../../da/d09/freecam_8c.html#a610ded0fb94ca9d6661976af29fb6b2a">vkpt_freecam_mousemove</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    VectorCopy(<a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;vieworg);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    VectorCopy(<a class="code" href="../../da/d09/freecam_8c.html#ac9c22342dfbf619d329468acd09be9fe">freecam_viewangles</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;viewangles);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;fov_x = RAD2DEG(atanf(tanf(DEG2RAD(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;fov_x) * 0.5f) / <a class="code" href="../../da/d09/freecam_8c.html#ae2255dc333d14505e46569db839fcf78">freecam_zoom</a>)) * 2.f;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;fov_y = RAD2DEG(atanf(tanf(DEG2RAD(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;fov_y) * 0.5f) / <a class="code" href="../../da/d09/freecam_8c.html#ae2255dc333d14505e46569db839fcf78">freecam_zoom</a>)) * 2.f;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (!VectorCompare(<a class="code" href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a>, prev_vieworg) || !VectorCompare(<a class="code" href="../../da/d09/freecam_8c.html#ac9c22342dfbf619d329468acd09be9fe">freecam_viewangles</a>, prev_viewangles))</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#ae80be44d42b1a932dbf5a4ac9d072410">freecam_player_model</a> != <a class="code" href="../../d0/da6/client_2client_8h.html#a647adebf2b744d7a926a0cf2492563ca">CL_PLAYER_MODEL_DISABLED</a> &amp;&amp; <a class="code" href="../../d0/da6/client_2client_8h.html#a26b3965778674ca93982ac5eeafa4c41">cl_player_model</a>-&gt;integer != <a class="code" href="../../d0/da6/client_2client_8h.html#a9b0f52f589fca39c41e15d63d637369f">CL_PLAYER_MODEL_THIRD_PERSON</a>)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <a class="code" href="../../d7/de8/cvar_8c.html#af8073267db27dfba071ef3c2cdc2c751">Cvar_SetByVar</a>(<a class="code" href="../../d0/da6/client_2client_8h.html#a26b3965778674ca93982ac5eeafa4c41">cl_player_model</a>, <a class="code" href="../../d1/d8c/shared_8c.html#aa64168c27e0f1b6341cc31ea309081b2">va</a>(<span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="../../d0/da6/client_2client_8h.html#a9b0f52f589fca39c41e15d63d637369f">CL_PLAYER_MODEL_THIRD_PERSON</a>), FROM_CODE);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a622f04c9260a47d3a1fea876787bca51">vkpt_reset_accumulation</a>();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d09/freecam_8c.html#ae2255dc333d14505e46569db839fcf78">freecam_zoom</a> != prev_zoom)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">// zoom doesn&#39;t reset the player model, but does reset the accumulation</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a622f04c9260a47d3a1fea876787bca51">vkpt_reset_accumulation</a>();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a2733c97ab8b32b7f5aa52a7dc913b28e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2733c97ab8b32b7f5aa52a7dc913b28e">&#9670;&nbsp;</a></span>vkpt_get_profiler_result()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double vkpt_get_profiler_result </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/ddb/profiler_8c_source.html#l00183">183</a> of file <a class="el" href="../../d2/ddb/profiler_8c_source.html">profiler.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">double</span> ms = (double)(<a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>[idx * 2 + 1] - <a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>[idx * 2 + 0]) * 1e-6;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> ms;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d2/ddb/profiler_8c.html#ab892d60f3f2e0e71cc1d8c8015238fa9">draw_query()</a>, and <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab31aa07aeffbfd0e744216453fdcb030">drs_process()</a>.</p>

</div>
</div>
<a id="a4167f8c1c048cac516bc599d629ae56b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4167f8c1c048cac516bc599d629ae56b">&#9670;&nbsp;</a></span>vkpt_god_rays_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_god_rays_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00073">73</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#a91fdddb083a7a9b3206de455a7bc69c0">create_pipeline_layout</a>();</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#a23de6c51612503a371bced5c02776cba">create_pipelines</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#ab3a2397c181b1fc2d834adf7f0466f00">create_descriptor_set</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// this is a noop outside a shader reload</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#ad58f8ad296e0708d51476665f1accbad">update_descriptor_set</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac78a081ffd36ec4eb9c5c80137eebb4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac78a081ffd36ec4eb9c5c80137eebb4d">&#9670;&nbsp;</a></span>vkpt_god_rays_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_god_rays_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00085">85</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(<a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipelines); i++) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipelines[i]) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipelines[i], NULL);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipelines[i] = NULL;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipeline_layout) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipeline_layout, NULL);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipeline_layout = NULL;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.descriptor_set_layout) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        vkDestroyDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.descriptor_set_layout, NULL);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.descriptor_set_layout = NULL;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e25a5e1c4f6bb95cb4d9eedf081d2ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e25a5e1c4f6bb95cb4d9eedf081d2ed">&#9670;&nbsp;</a></span>vkpt_god_rays_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qboolean vkpt_god_rays_enabled </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/dc6/vkpt_8h.html#af03b78a9f5854e1c40560a96476cd8eb">sun_light_t</a> *&#160;</td>
          <td class="paramname"><em>sun_light</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00379">379</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.enable-&gt;integer</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        &amp;&amp; <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.intensity-&gt;value &gt; 0.f</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        &amp;&amp; sun_light-&gt;<a class="code" href="../../d4/db8/structsun__light__s.html#a2b6d5fd9424600e1df15399f0ecf608c">visible</a></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        &amp;&amp; !<a class="code" href="../../d1/dc7/god__rays_8c.html#a3c4ce9a0c4f1c7e24070dee86e2d3b14">physical_sky_space</a>-&gt;integer;  <span class="comment">// god rays look weird in space because they also appear outside of the station</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a847abeb85e9f219608020b31a5d69a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847abeb85e9f219608020b31a5d69a30">&#9670;&nbsp;</a></span>vkpt_god_rays_noop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_god_rays_noop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00116">116</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a26ec44c72c99f761d2e2376cec5d90ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26ec44c72c99f761d2e2376cec5d90ce">&#9670;&nbsp;</a></span>vkpt_god_rays_prepare_ubo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_god_rays_prepare_ubo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc3/global__ubo_8h.html#a5692793c470dd4b97353d7ddab0edde8">QVKUniformBuffer_t</a> *&#160;</td>
          <td class="paramname"><em>ubo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dc6/vkpt_8h.html#a8c59a878a5117a08032ceb85ae3bb8fd">aabb_t</a> *&#160;</td>
          <td class="paramname"><em>world_aabb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>proj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>view</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>shadowmap_viewproj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>shadowmap_depth_scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00203">203</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    VectorAdd(world_aabb-&gt;<a class="code" href="../../dd/d0f/structaabb__s.html#a400047d96c36ab9f9bd28a771f7cc746">mins</a>, world_aabb-&gt;<a class="code" href="../../dd/d0f/structaabb__s.html#aea21b704019e817339d64537332dd22b">maxs</a>, ubo-&gt;world_center);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    VectorScale(ubo-&gt;world_center, 0.5f, ubo-&gt;world_center);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    VectorSubtract(world_aabb-&gt;<a class="code" href="../../dd/d0f/structaabb__s.html#aea21b704019e817339d64537332dd22b">maxs</a>, world_aabb-&gt;<a class="code" href="../../dd/d0f/structaabb__s.html#a400047d96c36ab9f9bd28a771f7cc746">mins</a>, ubo-&gt;world_size);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    VectorScale(ubo-&gt;world_size, 0.5f, ubo-&gt;world_half_size_inv);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    ubo-&gt;world_half_size_inv[0] = 1.f / ubo-&gt;world_half_size_inv[0];</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    ubo-&gt;world_half_size_inv[1] = 1.f / ubo-&gt;world_half_size_inv[1];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    ubo-&gt;world_half_size_inv[2] = 1.f / ubo-&gt;world_half_size_inv[2];</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    ubo-&gt;shadow_map_depth_scale = shadowmap_depth_scale;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    ubo-&gt;god_rays_intensity = max(0.f, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.intensity-&gt;value);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    ubo-&gt;god_rays_eccentricity = <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.eccentricity-&gt;value;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Shadow parameters</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    memcpy(ubo-&gt;shadow_map_VP, shadowmap_viewproj, 16 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a1617ea89752c871aa2c818709343572e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1617ea89752c871aa2c818709343572e">&#9670;&nbsp;</a></span>vkpt_god_rays_update_images()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_god_rays_update_images </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00108">108</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#ad34a7bddc4a7022335724019d13bddef">create_image_views</a>();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#ad58f8ad296e0708d51476665f1accbad">update_descriptor_set</a>();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8455cc1fe63d6930a1d2b7ca2b4afff4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8455cc1fe63d6930a1d2b7ca2b4afff4">&#9670;&nbsp;</a></span>vkpt_image_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_image_copy </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>src_image_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>dst_image_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkOffset2D&#160;</td>
          <td class="paramname"><em>src_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkOffset2D&#160;</td>
          <td class="paramname"><em>dst_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkExtent2D&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d65/mgpu_8c_source.html#l00111">111</a> of file <a class="el" href="../../d9/d65/mgpu_8c_source.html">mgpu.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        .baseMipLevel = 0,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        .levelCount = 1,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        .baseArrayLayer = 0,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        .layerCount = 1</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    };</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    VkImageSubresourceLayers subresource_layers = {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        .mipLevel = 0,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        .baseArrayLayer = 0,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        .layerCount = 1</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    };</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    VkImageCopy copy_region = {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        .srcSubresource = subresource_layers,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        .srcOffset.x = src_offset.x,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        .srcOffset.y = src_offset.y,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        .srcOffset.z = 0,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        .dstSubresource = subresource_layers,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        .dstOffset.x = dst_offset.x,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        .dstOffset.y = dst_offset.y,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        .dstOffset.z = 0,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        .extent.width = size.width,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        .extent.height = size.height,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        .extent.depth = 1</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    };</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    VkMemoryBarrier mem_barrier = {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        .sType = VK_STRUCTURE_TYPE_MEMORY_BARRIER,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        .pNext = NULL,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        .srcAccessMask = VK_ACCESS_MEMORY_READ_BIT | VK_ACCESS_MEMORY_WRITE_BIT,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        .dstAccessMask = VK_ACCESS_MEMORY_READ_BIT | VK_ACCESS_MEMORY_WRITE_BIT,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    };</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    vkCmdPipelineBarrier(cmd_buf,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        VK_PIPELINE_STAGE_ALL_COMMANDS_BIT, VK_PIPELINE_STAGE_ALL_COMMANDS_BIT,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        0,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        1, &amp;mem_barrier,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        0, NULL,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        0, NULL);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    vkCmdCopyImage(cmd_buf,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[src_image_index], VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[dst_image_index], VK_IMAGE_LAYOUT_GENERAL,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        1, &amp;copy_region);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e5ba08af37d59ad89f990ff6e18fd0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e5ba08af37d59ad89f990ff6e18fd0e">&#9670;&nbsp;</a></span>vkpt_init_light_textures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_init_light_textures </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adfbeecea706ef351b5ef6d0ad4048195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfbeecea706ef351b5ef6d0ad4048195">&#9670;&nbsp;</a></span>vkpt_initialize_god_rays()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_initialize_god_rays </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00051">51</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    memset(&amp;<a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>));</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    VkPhysicalDeviceProperties properties;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    vkGetPhysicalDeviceProperties(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#acb9a5f5745cc88f7cb7915301d43635a">physical_device</a>, &amp;properties);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.intensity = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;gr_intensity&quot;</span>, <span class="stringliteral">&quot;2.0&quot;</span>, 0);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.eccentricity = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;gr_eccentricity&quot;</span>, <span class="stringliteral">&quot;0.75&quot;</span>, 0);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.enable = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;gr_enable&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, 0);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5ba03a85548570c2f046b8f42ce8cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5ba03a85548570c2f046b8f42ce8cb0">&#9670;&nbsp;</a></span>vkpt_interleave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_interleave </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00492">492</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    };</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_MGPU_TRANSFERS);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="comment">// create full interleaved motion and color buffers on GPU 0</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        VkOffset2D offset_left = { 0, 0 };</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        VkOffset2D offset_right = { <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 2, 0 };</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        VkExtent2D extent = { <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 2, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height };</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        vkpt_mgpu_image_copy(cmd_buf,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                            VKPT_IMG_PT_MOTION,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            VKPT_IMG_PT_MOTION,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                            1,</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            0,</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                            offset_left,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                            offset_right,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                            extent);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        vkpt_mgpu_image_copy(cmd_buf,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                            VKPT_IMG_ASVGF_COLOR,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                            VKPT_IMG_ASVGF_COLOR,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                            1,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                            0,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                            offset_left,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                            offset_right,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                            extent);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        vkpt_mgpu_global_barrier(cmd_buf);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_MGPU_TRANSFERS);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_INTERLEAVE);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eabd4d537916ba81c31b5d1a19823dca62">CHECKERBOARD_INTERLEAVE</a>]);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, 0);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">// dispatch using the image dimensions, not render dimensions - to clear the unused area with black color</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.width + 15) / 16,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.height + 15) / 16,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        1);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_INTERLEAVE);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_FLAT_COLOR]);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_FLAT_MOTION]);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a39fee7fae872c54fad1e72a5051c8d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39fee7fae872c54fad1e72a5051c8d4c">&#9670;&nbsp;</a></span>vkpt_light_buffer_reset_counts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_light_buffer_reset_counts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00131">131</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    memset(<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a4b49e25d8f529f93a0d30bee9f2d6911">max_cluster_model_lights</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a4b49e25d8f529f93a0d30bee9f2d6911">max_cluster_model_lights</a>));</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#aa90059894888d08671e55bbdfed913ad">max_model_lights</a> = 0;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="ada2dabf29038ee22fa17f7f94d3ce986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada2dabf29038ee22fa17f7f94d3ce986">&#9670;&nbsp;</a></span>vkpt_light_buffer_upload_staging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_light_buffer_upload_staging </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00069">69</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a>* staging = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a56804afd1c570ec99c3bf7c41cc18448">buf_light_staging</a> + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    assert(!staging-&gt;<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#afaa8ea49829c0d0efe59fabea9be1234">is_mapped</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    VkBufferCopy copyRegion = {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        .size = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#abbd03be6da2ffcf36826b06da7f171a0">LightBuffer</a>),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    };</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    vkCmdCopyBuffer(cmd_buf, staging-&gt;<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a104d13278d6f70f380c091502abdaba4">buf_light</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 1, &amp;copyRegion);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">int</span> buffer_idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> % 3;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[buffer_idx].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        vkCmdFillBuffer(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[buffer_idx].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[buffer_idx].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>, 0);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="ace3861808100d3f8c198bd92447bef16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace3861808100d3f8c198bd92447bef16">&#9670;&nbsp;</a></span>vkpt_light_buffer_upload_to_staging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_light_buffer_upload_to_staging </td>
          <td>(</td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>render_world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *&#160;</td>
          <td class="paramname"><em>bsp_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bsp_t *&#160;</td>
          <td class="paramname"><em>bsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_model_lights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a21e74bb8df0ff83444d9357cb56893f1">light_poly_t</a> *&#160;</td>
          <td class="paramname"><em>transformed_model_lights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>sky_radiance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00310">310</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    assert(bsp_mesh);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a>* staging = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a56804afd1c570ec99c3bf7c41cc18448">buf_light_staging</a> + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="../../de/dce/struct_light_buffer.html">LightBuffer</a> *lbo = (<a class="code" href="../../de/dce/struct_light_buffer.html">LightBuffer</a> *)<a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(staging);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    assert(lbo);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (render_world)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        assert(bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">num_clusters</a> + 1 &lt; <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a393cfcb10f6ffd3ad71a834f35eb025c">MAX_LIGHT_LISTS</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        assert(bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a486dd3c1b0a3d0b5fa7dbcf9faabf2ea">num_cluster_lights</a> &lt; <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#add2ab5151f2b34d4176f0b4cf334419b">MAX_LIGHT_LIST_NODES</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        assert(<a class="code" href="../../de/d87/material_8c.html#a72610e8e48bcaea3c54878d86330ea19">MAT_GetNumPBRMaterials</a>() &lt; <a class="code" href="../../d3/d65/material_8h.html#a46de70ae7e13925f2c8cbf61ce780c0a">MAX_PBR_MATERIALS</a>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        assert(bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9e646f1f1fa8d42f978917a8c6ae2772">num_light_polys</a> + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af137c35bc22dc9606d74bb18071b4022">num_model_lights</a> &lt; <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#aaa0583c2e7df78095ee18b682863b970">MAX_LIGHT_POLYS</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordtype">int</span> model_light_offset = bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9e646f1f1fa8d42f978917a8c6ae2772">num_light_polys</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <a class="code" href="../../d8/d51/vertex__buffer_8c.html#aa90059894888d08671e55bbdfed913ad">max_model_lights</a> = max(<a class="code" href="../../d8/d51/vertex__buffer_8c.html#aa90059894888d08671e55bbdfed913ad">max_model_lights</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af137c35bc22dc9606d74bb18071b4022">num_model_lights</a>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../d8/d51/vertex__buffer_8c.html#aa90059894888d08671e55bbdfed913ad">max_model_lights</a> &gt; 0)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="comment">// If any of the BSP models contain lights, inject these lights right into the visibility lists.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="comment">// The shader doesn&#39;t know that these lights are dynamic.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <a class="code" href="../../d8/d51/vertex__buffer_8c.html#afe63962de708d7ff2062fb013a1ba6f7">inject_model_lights</a>(bsp_mesh, bsp, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af137c35bc22dc9606d74bb18071b4022">num_model_lights</a>, transformed_model_lights, model_light_offset, lbo-&gt;light_list_offsets, lbo-&gt;light_list_lights);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            memcpy(lbo-&gt;light_list_offsets, bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a473af1351495a759ac2c3ac331abce2f">cluster_light_offsets</a>, (bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">num_clusters</a> + 1) * <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            memcpy(lbo-&gt;light_list_lights, bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a334a9b1d2bd6e116c30c6264a7c194ba">cluster_lights</a>, bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a486dd3c1b0a3d0b5fa7dbcf9faabf2ea">num_cluster_lights</a> * <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nlight = 0; nlight &lt; bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9e646f1f1fa8d42f978917a8c6ae2772">num_light_polys</a>; nlight++)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <a class="code" href="../../d4/db6/structlight__poly__s.html">light_poly_t</a>* light = bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a8dec0909604ae168774770416a165ee8">light_polys</a> + nlight;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordtype">float</span>* vblight = lbo-&gt;light_polys + nlight * (<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a0c9893a46fbb9475e0544de657eda02a">LIGHT_POLY_VEC4S</a> * 4);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="../../d8/d51/vertex__buffer_8c.html#adf14b7ab9821135ca30bcba6f2272942">copy_light</a>(light, vblight, sky_radiance);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nlight = 0; nlight &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af137c35bc22dc9606d74bb18071b4022">num_model_lights</a>; nlight++)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="../../d4/db6/structlight__poly__s.html">light_poly_t</a>* light = transformed_model_lights + nlight;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keywordtype">float</span>* vblight = lbo-&gt;light_polys + (nlight + model_light_offset) * (<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a0c9893a46fbb9475e0544de657eda02a">LIGHT_POLY_VEC4S</a> * 4);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <a class="code" href="../../d8/d51/vertex__buffer_8c.html#adf14b7ab9821135ca30bcba6f2272942">copy_light</a>(light, vblight, sky_radiance);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        lbo-&gt;light_list_offsets[0] = 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        lbo-&gt;light_list_offsets[1] = 0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">/* effects.c declares this - hence the assert below:</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">        typedef struct clightstyle_s {</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">            ...</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">            float   map[MAX_QPATH];</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">        } clightstyle_t;</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    assert(<a class="code" href="../../d2/d6f/constants_8h.html#a8628675c16877fb611943428bde9d4e7">MAX_LIGHT_STYLES</a> == MAX_QPATH);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nstyle = 0; nstyle &lt; <a class="code" href="../../d2/d6f/constants_8h.html#a8628675c16877fb611943428bde9d4e7">MAX_LIGHT_STYLES</a>; nstyle++)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordtype">float</span> style_scale = 1.f;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;lightstyles)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            style_scale = <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">fd</a>-&gt;lightstyles[nstyle].white;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            style_scale = max(0, min(1, style_scale));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        lbo-&gt;light_styles[nstyle] = style_scale;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// materials</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">int</span> nmaterials = <a class="code" href="../../de/d87/material_8c.html#a72610e8e48bcaea3c54878d86330ea19">MAT_GetNumPBRMaterials</a>();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="../../d7/d66/structpbr__material__s.html">pbr_material_t</a> <span class="keyword">const</span> * materials = <a class="code" href="../../de/d87/material_8c.html#a5a5ffa33ae9922760685fca9e8341e40">MAT_GetPBRMaterialsTable</a>();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nmat = 0; nmat &lt; nmaterials; nmat++)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="../../d7/d66/structpbr__material__s.html">pbr_material_t</a> <span class="keyword">const</span> * material = materials + nmat;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        uint32_t* mat_data = lbo-&gt;material_table + nmat * 4;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        memset(mat_data, 0, <span class="keyword">sizeof</span>(uint32_t) * 4);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">if</span> (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#a7116f74b029cce1c5e7b7d7d1b5827c8">image_diffuse</a>) mat_data[0] |= (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#a7116f74b029cce1c5e7b7d7d1b5827c8">image_diffuse</a> - <a class="code" href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span> (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#aed9a63b66f4b0c93306b5f8d2997df24">image_normals</a>) mat_data[0] |= (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#aed9a63b66f4b0c93306b5f8d2997df24">image_normals</a> - <a class="code" href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a>) &lt;&lt; 16;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span> (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#a4deea99cb19e4bda05958e070fc781be">image_emissive</a>) mat_data[1] |= (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#a4deea99cb19e4bda05958e070fc781be">image_emissive</a> - <a class="code" href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        mat_data[1] |= (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#ade97ffa6279b943e52e7350d6a08f6c5">num_frames</a> &amp; 0x000f) &lt;&lt; 28;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        mat_data[1] |= (material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#a794c1d120897d6a4b53f4ffd887e6250">next_frame</a> &amp; 0x0fff) &lt;&lt; 16;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        mat_data[2] = <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a34a9d4af7cb83ee28b100723fb6e8216">floatToHalf</a>(material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#ae7c72dbc0820dbfd68de79fd8f48f68f">bump_scale</a>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        mat_data[2] |= <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a34a9d4af7cb83ee28b100723fb6e8216">floatToHalf</a>(material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#af7aac7d41d73539b7b9229475f665f2b">rough_override</a>) &lt;&lt; 16;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        mat_data[3] = <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a34a9d4af7cb83ee28b100723fb6e8216">floatToHalf</a>(material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#a0e05d73375c1e9be7150f1b9e1af03dc">specular_scale</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        mat_data[3] |= <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a34a9d4af7cb83ee28b100723fb6e8216">floatToHalf</a>(material-&gt;<a class="code" href="../../d7/d66/structpbr__material__s.html#aa3262b3d306917690e1c9f6ef3cdbe07">emissive_scale</a>) &lt;&lt; 16;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    memcpy(lbo-&gt;cluster_debug_mask, <a class="code" href="../../d8/d51/vertex__buffer_8c.html#aa25989afdfaaee9d2a4b52a353e55291">cluster_debug_mask</a>, <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a393cfcb10f6ffd3ad71a834f35eb025c">MAX_LIGHT_LISTS</a> / 8);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(staging);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    lbo = NULL;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a2913dc26be7dfa0e37608da682558402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2913dc26be7dfa0e37608da682558402">&#9670;&nbsp;</a></span>vkpt_light_stats_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_light_stats_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *&#160;</td>
          <td class="paramname"><em>bsp_mesh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00699">699</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;{</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#aa7c0ae3ac941d9d6cd75e39cfc50a7f1">vkpt_light_stats_destroy</a>();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// Light statistics: 2 uints (shadowed, unshadowed) per light per surface orientation (6) per cluster.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    uint32_t num_stats = bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">num_clusters</a> * bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a9e646f1f1fa8d42f978917a8c6ae2772">num_light_polys</a> * 6 * 2;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// Handle rare cases when the map has zero lights</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (num_stats == 0)</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        num_stats = 1;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; <a class="code" href="../../d2/d6f/constants_8h.html#ad26db0a52a630795900a3017a6f292fa">NUM_LIGHT_STATS_BUFFERS</a>; frame++)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a> + frame, <span class="keyword">sizeof</span>(uint32_t) * num_stats,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            VK_BUFFER_USAGE_TRANSFER_DST_BIT | VK_BUFFER_USAGE_STORAGE_BUFFER_BIT,</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    assert(<a class="code" href="../../d2/d6f/constants_8h.html#ad26db0a52a630795900a3017a6f292fa">NUM_LIGHT_STATS_BUFFERS</a> == 3);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    VkDescriptorBufferInfo light_stats_buf_info[] = { {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[0].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            .offset = 0,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            .range = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[0].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>,</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }, {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[1].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            .offset = 0,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            .range = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[1].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        }, {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[2].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            .offset = 0,</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            .range = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[2].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>,</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        } };</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    VkWriteDescriptorSet output_buf_write = {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        .sType = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        .dstSet = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a>,</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        .dstBinding = 6,</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        .dstArrayElement = 0,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        .descriptorCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(light_stats_buf_info),</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        .pBufferInfo = light_stats_buf_info,</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    };</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="aa7c0ae3ac941d9d6cd75e39cfc50a7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7c0ae3ac941d9d6cd75e39cfc50a7f1">&#9670;&nbsp;</a></span>vkpt_light_stats_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_light_stats_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00748">748</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; <a class="code" href="../../d2/d6f/constants_8h.html#ad26db0a52a630795900a3017a6f292fa">NUM_LIGHT_STATS_BUFFERS</a>; frame++)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a> + frame);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2428bc84b774f1b53e765b81b84973a9">vkpt_destroy_all()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a2913dc26be7dfa0e37608da682558402">vkpt_light_stats_create()</a>.</p>

</div>
</div>
<a id="ad374eb90dcd53f94b5fbf47b9ec54ce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad374eb90dcd53f94b5fbf47b9ec54ce6">&#9670;&nbsp;</a></span>vkpt_load_shader_modules()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_load_shader_modules </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l01162">1162</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;{</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    VkResult ret = VK_SUCCESS;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="preprocessor">#define SHADER_MODULE_DO(a) do { \</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="preprocessor">    qvk.shader_modules[a] = create_shader_module_from_file(shader_module_file_names[a], #a); \</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="preprocessor">    ret = (ret == VK_SUCCESS &amp;&amp; qvk.shader_modules[a]) ? VK_SUCCESS : VK_ERROR_INITIALIZATION_FAILED; \</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="preprocessor">    if(qvk.shader_modules[a]) { \</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="preprocessor">        ATTACH_LABEL_VARIABLE_NAME((uint64_t)qvk.shader_modules[a], SHADER_MODULE, #a); \</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="preprocessor">    }\</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="preprocessor">    } while(0);</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a077ffee32baed268bcfef6e7229edc8a">LIST_SHADER_MODULES</a></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="preprocessor">#undef SHADER_MODULE_DO</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af3df904c9bd30ae0762cc1aa15cc94b8">R_Init_RTX()</a>, and <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab099e080cef0f76efcf6bdb5d49e00d1">vkpt_reload_shader()</a>.</p>

</div>
</div>
<a id="adf9f289fcaf29e68d4ed69c516bba79b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9f289fcaf29e68d4ed69c516bba79b">&#9670;&nbsp;</a></span>vkpt_normalize_normal_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_normalize_normal_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00592">592</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordtype">int</span> w = image-&gt;upload_width;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">int</span> h = image-&gt;upload_height;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordtype">byte</span>* current_pixel = image-&gt;pix_data;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; h; y++) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; w; x++) </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            vec3_t <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] = <a class="code" href="../../dd/dbb/textures_8c.html#a8ae8057b8f66b72fd1d15429ecec947c">decode_linear</a>(current_pixel[0]);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] = <a class="code" href="../../dd/dbb/textures_8c.html#a8ae8057b8f66b72fd1d15429ecec947c">decode_linear</a>(current_pixel[1]);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[2] = <a class="code" href="../../dd/dbb/textures_8c.html#a8ae8057b8f66b72fd1d15429ecec947c">decode_linear</a>(current_pixel[2]);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] = <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] * 2.f - 1.f;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] = <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] * 2.f - 1.f;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(<a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>) == 0.f)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] = 0.f;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] = 0.f;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[2] = 1.f;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] = <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0] * 0.5f + 0.5f;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] = <a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1] * 0.5f + 0.5f;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            current_pixel[0] = <a class="code" href="../../dd/dbb/textures_8c.html#a57bbf2e13f9413755a18f32f5fc75e65">encode_linear</a>(<a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[0]);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            current_pixel[1] = <a class="code" href="../../dd/dbb/textures_8c.html#a57bbf2e13f9413755a18f32f5fc75e65">encode_linear</a>(<a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[1]);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            current_pixel[2] = <a class="code" href="../../dd/dbb/textures_8c.html#a57bbf2e13f9413755a18f32f5fc75e65">encode_linear</a>(<a class="code" href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a>[2]);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            current_pixel += 4;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    image-&gt;processing_complete = qtrue;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#a69d36a4facff2ae7900172ce3cae1ff5">bsp_mesh_register_textures()</a>, and <a class="el" href="../../dd/dbb/textures_8c.html#af4cca0db7dcedf8ad93689601dc75a82">IMG_ReloadAll()</a>.</p>

</div>
</div>
<a id="ae37bd5149ebe12c33df8c5b5d37003a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae37bd5149ebe12c33df8c5b5d37003a0">&#9670;&nbsp;</a></span>vkpt_profiler_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_profiler_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/ddb/profiler_8c_source.html#l00042">42</a> of file <a class="el" href="../../d2/ddb/profiler_8c_source.html">profiler.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    vkDestroyQueryPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d2/ddb/profiler_8c.html#af018e253c24c717041787f5894a7e969">query_pool</a>, NULL);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa78152979581d3b5e56823f9d15dc73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa78152979581d3b5e56823f9d15dc73">&#9670;&nbsp;</a></span>vkpt_profiler_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_profiler_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/ddb/profiler_8c_source.html#l00030">30</a> of file <a class="el" href="../../d2/ddb/profiler_8c_source.html">profiler.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    VkQueryPoolCreateInfo query_pool_info = {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        .sType = VK_STRUCTURE_TYPE_QUERY_POOL_CREATE_INFO,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        .queryType = VK_QUERY_TYPE_TIMESTAMP,</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        .queryCount = <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a> * <a class="code" href="../../d1/dc6/vkpt_8h.html#a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0">NUM_PROFILER_ENTRIES</a> * 2,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    };</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    vkCreateQueryPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;query_pool_info, NULL, &amp;<a class="code" href="../../d2/ddb/profiler_8c.html#af018e253c24c717041787f5894a7e969">query_pool</a>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aee781e4948f9e38f07cba4ce1af39db0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee781e4948f9e38f07cba4ce1af39db0">&#9670;&nbsp;</a></span>vkpt_profiler_next_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_profiler_next_frame </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/ddb/profiler_8c_source.html#l00066">66</a> of file <a class="el" href="../../d2/ddb/profiler_8c_source.html">profiler.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    qboolean any_queries_used = qfalse;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>; idx++)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/ddb/profiler_8c.html#aabfcb78c30dcb8926e14b50c29aae6fc">profiler_queries_used</a>[idx + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> * <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>])</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            any_queries_used = qtrue;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (any_queries_used)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        VkResult result = vkGetQueryPoolResults(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d2/ddb/profiler_8c.html#af018e253c24c717041787f5894a7e969">query_pool</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a> * <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keyword">sizeof</span>(<a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>),</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keyword">sizeof</span>(<a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>[0]),</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            VK_QUERY_RESULT_64_BIT | VK_QUERY_RESULT_WITH_AVAILABILITY_BIT);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">if</span> (result != VK_SUCCESS &amp;&amp; result != VK_NOT_READY)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            Com_EPrintf(<span class="stringliteral">&quot;Failed call to vkGetQueryPoolResults, error code = %d\n&quot;</span>, result);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            any_queries_used = qfalse;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (any_queries_used)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>; idx++)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d2/ddb/profiler_8c.html#aabfcb78c30dcb8926e14b50c29aae6fc">profiler_queries_used</a>[idx + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> * <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>])</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>[idx] = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        memset(<a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a>));</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    vkCmdResetQueryPool(cmd_buf, <a class="code" href="../../d2/ddb/profiler_8c.html#af018e253c24c717041787f5894a7e969">query_pool</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a> * <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>, </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    memset(<a class="code" href="../../d2/ddb/profiler_8c.html#aabfcb78c30dcb8926e14b50c29aae6fc">profiler_queries_used</a> + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> * <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>, 0, <span class="keyword">sizeof</span>(qboolean) * <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>.</p>

</div>
</div>
<a id="aa07bf23807800e110da5519e58bdfcc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa07bf23807800e110da5519e58bdfcc9">&#9670;&nbsp;</a></span>vkpt_profiler_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_profiler_query </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3">VKPTProfilerAction</a>&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/ddb/profiler_8c_source.html#l00049">49</a> of file <a class="el" href="../../d2/ddb/profiler_8c_source.html">profiler.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    idx = idx * 2 + action + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> * <a class="code" href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, 0);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    vkCmdWriteTimestamp(cmd_buf, VK_PIPELINE_STAGE_BOTTOM_OF_PIPE_BIT,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <a class="code" href="../../d2/ddb/profiler_8c.html#af018e253c24c717041787f5894a7e969">query_pool</a>, idx);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../d2/ddb/profiler_8c.html#aabfcb78c30dcb8926e14b50c29aae6fc">profiler_queries_used</a>[idx] = qtrue;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#a4ff9548b2af58b7744864f86b80ced42">begin_perf_marker()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#af648dfb8c915a7c581b972f2701d1aa7">end_perf_marker()</a>, and <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a8abf55d703a78e69f74bf712155168c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8abf55d703a78e69f74bf712155168c0">&#9670;&nbsp;</a></span>vkpt_pt_create_all_dynamic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_create_all_dynamic </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkBuffer&#160;</td>
          <td class="paramname"><em>vertex_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/dbb/struct_entity_upload_info.html">EntityUploadInfo</a> *&#160;</td>
          <td class="paramname"><em>upload_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l00781">781</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;{</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a> = 0;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a0a319f9b9a4bafbd95d9e24e86d9b5e1">vkpt_pt_create_dynamic</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        offsetof(<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_instanced), upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#aad6e5b31c69033f019ea730ae3d4b3ad">dynamic_vertex_num</a>);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a5ddbabd02e4a68577939a1f7bb59876c">vkpt_pt_create_transparent_models</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        offsetof(<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_instanced), upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#a3ef8fb8d2a63befc3e41d32b089a65f2">transparent_model_vertex_num</a>,</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#a88516fde620395eb517ba57f7d030206">transparent_model_vertex_offset</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a87a8a63e8a3aff06d5204a0855e7e1ac">vkpt_pt_create_viewer_models</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        offsetof(<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_instanced), upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#a47c36315723ceab4301cf29d577c8a1e">viewer_model_vertex_num</a>,</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#a3d970e2ff7586f2fecc361c41b94ca22">viewer_model_vertex_offset</a>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a01e31978f8f420f6a5708d1a9210cbba">vkpt_pt_create_viewer_weapon</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        offsetof(<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_instanced), upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#a8d9d0a0ff3b24da57a64bb7d2f006ffa">viewer_weapon_vertex_num</a>,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#ab1ec3a68c455bcd1cd93ef6a6bf19ac1">viewer_weapon_vertex_offset</a>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a137b4c438251dda30e094526289efde5">vkpt_pt_create_explosions</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        offsetof(<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_instanced), upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#a00942e5f4975aa2d8ffb0a9cfad52e66">explosions_vertex_num</a>,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        upload_info-&gt;<a class="code" href="../../d6/dbb/struct_entity_upload_info.html#a85e4b8e1c666ee300f8a251059df15f5">explosions_vertex_offset</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a4687fb7bfc20f54d3fa5bea7d0ed61db">MEM_BARRIER_BUILD_ACCEL</a>(cmd_buf);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a> = 0;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a31cc123cafd01a9c20b121ed811b16e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31cc123cafd01a9c20b121ed811b16e9">&#9670;&nbsp;</a></span>vkpt_pt_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l01216">1216</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;{</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    VkSpecializationMapEntry specEntry = {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        .constantID = 0,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        .size = <span class="keyword">sizeof</span>(uint32_t),</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    };</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    uint32_t numbers[2] = { 0, 1 };</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    VkSpecializationInfo specInfo[2] = {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            .mapEntryCount = 1,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            .pMapEntries = &amp;specEntry,</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            .dataSize = <span class="keyword">sizeof</span>(uint32_t),</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            .pData = &amp;numbers[0],</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        },</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            .mapEntryCount = 1,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            .pMapEntries = &amp;specEntry,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            .dataSize = <span class="keyword">sizeof</span>(uint32_t),</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            .pData = &amp;numbers[1],</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    };</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    VkPipelineShaderStageCreateInfo shader_stages[] = {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PRIMARY_RAYS_RGEN,               VK_SHADER_STAGE_RAYGEN_BIT_NV),</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_REFLECT_REFRACT_RGEN,       VK_SHADER_STAGE_RAYGEN_BIT_NV, &amp;specInfo[0]),</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_REFLECT_REFRACT_RGEN,       VK_SHADER_STAGE_RAYGEN_BIT_NV, &amp;specInfo[1]),</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_DIRECT_LIGHTING_RGEN,       VK_SHADER_STAGE_RAYGEN_BIT_NV, &amp;specInfo[0]),</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_DIRECT_LIGHTING_RGEN,       VK_SHADER_STAGE_RAYGEN_BIT_NV, &amp;specInfo[1]),</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_INDIRECT_LIGHTING_RGEN,     VK_SHADER_STAGE_RAYGEN_BIT_NV, &amp;specInfo[0]),</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a>(QVK_MOD_INDIRECT_LIGHTING_RGEN,     VK_SHADER_STAGE_RAYGEN_BIT_NV, &amp;specInfo[1]),</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PATH_TRACER_RMISS,               VK_SHADER_STAGE_MISS_BIT_NV),</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PATH_TRACER_SHADOW_RMISS,        VK_SHADER_STAGE_MISS_BIT_NV),</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PATH_TRACER_RCHIT,               VK_SHADER_STAGE_CLOSEST_HIT_BIT_NV),</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PATH_TRACER_PARTICLE_RAHIT,      VK_SHADER_STAGE_ANY_HIT_BIT_NV),</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PATH_TRACER_BEAM_RAHIT,          VK_SHADER_STAGE_ANY_HIT_BIT_NV),</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PATH_TRACER_EXPLOSION_RAHIT,     VK_SHADER_STAGE_ANY_HIT_BIT_NV),</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_PATH_TRACER_SPRITE_RAHIT,        VK_SHADER_STAGE_ANY_HIT_BIT_NV),</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    };</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    VkRayTracingShaderGroupCreateInfoNV rt_shader_group_info[] = {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#aa8f900e5c1322742d6e03296f1725e5c">SBT_RGEN_PRIMARY_RAYS</a>] = {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            .generalShader      = 0,</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        },</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#ac55b17f6fec4f7dd88381ad8f54a96be">SBT_RGEN_REFLECT_REFRACT1</a>] = {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            .generalShader      = 1,</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        },</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a88a0f6e540b0896baa4b1c4e9c386556">SBT_RGEN_REFLECT_REFRACT2</a>] = {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            .generalShader      = 2,</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        },</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a4cb210bed54da782c7270a46b99fa924">SBT_RGEN_DIRECT_LIGHTING</a>] = {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            .generalShader      = 3,</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        },</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a701ff06e090f10a6bfd6b2c95ec3589f">SBT_RGEN_DIRECT_LIGHTING_CAUSTICS</a>] = {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            .generalShader      = 4,</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        },</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a4472378d98524b028d549bbd62710518">SBT_RGEN_INDIRECT_LIGHTING_FIRST</a>] = {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            .generalShader      = 5,</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        },</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a1384a6c867216b1ba912d34046eb7cdf">SBT_RGEN_INDIRECT_LIGHTING_SECOND</a>] = {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            .generalShader      = 6,</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        },</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a41eae052eb3a1e2de6aa247404e2e14d">SBT_RMISS_PATH_TRACER</a>] = {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            .generalShader      = 7,</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        },</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a538e69faec07485a3d6c6a2a192f3ef2">SBT_RMISS_SHADOW</a>] = {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_GENERAL_NV,</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            .generalShader      = 8,</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        },</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a21d9478ad5761b65f79a3232db3928de">SBT_RCHIT_OPAQUE</a>] = {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_NV,</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            .generalShader      = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            .closestHitShader   = 9,</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        },</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#ae8efa41d7b39f4e0596b93430f9c3129">SBT_RAHIT_PARTICLE</a>] = {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_NV,</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            .generalShader      = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            .anyHitShader       = 10,</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        },</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a4300826074918a8b7dbae5cfd2acbaf1">SBT_RAHIT_BEAM</a>] = {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_NV,</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            .generalShader      = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            .anyHitShader       = 11,</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        },</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#af551f99e2c2326abff24e9483b6d95f3">SBT_RAHIT_EXPLOSION</a>] = {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_NV,</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            .generalShader      = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            .anyHitShader       = 12,</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        },</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#aec3df863304e612e9764209e3e9f8af8">SBT_RAHIT_SPRITE</a>] = {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_NV,</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            .generalShader      = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            .anyHitShader       = 13,</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        },</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        [<a class="code" href="../../d2/d6f/constants_8h.html#a5788d34a367e20de671f1b605df3c412">SBT_RCHIT_EMPTY</a>] = {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            .sType              = VK_STRUCTURE_TYPE_RAY_TRACING_SHADER_GROUP_CREATE_INFO_NV,</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            .type               = VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_NV,</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            .generalShader      = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            .closestHitShader   = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            .anyHitShader       = VK_SHADER_UNUSED_NV,</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            .intersectionShader = VK_SHADER_UNUSED_NV</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        },</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    };</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160; </div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    VkRayTracingPipelineCreateInfoNV rt_pipeline_info = {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        .sType             = VK_STRUCTURE_TYPE_RAY_TRACING_PIPELINE_CREATE_INFO_NV,</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        .stageCount        = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(shader_stages),</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        .pStages           = shader_stages,</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        .groupCount        = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(rt_shader_group_info),</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        .pGroups           = rt_shader_group_info,</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        .layout            = <a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>,</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        .maxRecursionDepth = 1,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    };</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(qvkCreateRayTracingPipelinesNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, NULL, 1, &amp;rt_pipeline_info,     NULL, &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a5389534adde7c6475b99957cb3e603c3">rt_pipeline</a>    ));</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    uint32_t num_groups = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(rt_shader_group_info);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    uint32_t shader_binding_table_size = <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize * num_groups;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">/* pt */</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>, shader_binding_table_size,</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                VK_BUFFER_USAGE_TRANSFER_SRC_BIT, VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT));</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordtype">void</span> *shader_binding_table = <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(&amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(qvkGetRayTracingShaderGroupHandlesNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a5389534adde7c6475b99957cb3e603c3">rt_pipeline</a>, 0, num_groups,</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                shader_binding_table_size, shader_binding_table));</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(&amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    shader_binding_table = NULL;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a774c3999c366b4e23083a5d8c7bffbba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a774c3999c366b4e23083a5d8c7bffbba">&#9670;&nbsp;</a></span>vkpt_pt_create_static()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_create_static </td>
          <td>(</td>
          <td class="paramtype">VkBuffer&#160;</td>
          <td class="paramname"><em>vertex_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_vertices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_vertices_transparent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_vertices_sky</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_vertices_custom_sky</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l00574">574</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;{</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    VkCommandBuffer cmd_buf = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a> = 0;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    VkResult ret = <a class="code" href="../../d5/d02/path__tracer_8c.html#ab6809ce8eae1c0ba5e694402b1040ff7">vkpt_pt_create_accel_bottom</a>(</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#ac8fed96b68318d66c1b503f7a2ff68d4">vertex_buffer</a>,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        buffer_offset,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        num_vertices,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#aa39f2bc1930ca846539aa9140d3e7e91">accel_static</a>,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        NULL,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a9a08b54e757139289429a294e40c8252">mem_accel_static</a>,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        cmd_buf,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        VK_FALSE);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a4687fb7bfc20f54d3fa5bea7d0ed61db">MEM_BARRIER_BUILD_ACCEL</a>(cmd_buf);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a> = 0;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    ret = <a class="code" href="../../d5/d02/path__tracer_8c.html#ab6809ce8eae1c0ba5e694402b1040ff7">vkpt_pt_create_accel_bottom</a>(</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#ac8fed96b68318d66c1b503f7a2ff68d4">vertex_buffer</a>,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        buffer_offset + num_vertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        num_vertices_transparent,</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#aca88190d71c18b7e86f6df6f95ce1423">accel_transparent</a>,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        NULL,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a409c5afc5f0b34a27628db2b18ccf86a">mem_accel_transparent</a>,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        cmd_buf,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        VK_FALSE);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a4687fb7bfc20f54d3fa5bea7d0ed61db">MEM_BARRIER_BUILD_ACCEL</a>(cmd_buf);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a> = 0;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    ret = <a class="code" href="../../d5/d02/path__tracer_8c.html#ab6809ce8eae1c0ba5e694402b1040ff7">vkpt_pt_create_accel_bottom</a>(</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#ac8fed96b68318d66c1b503f7a2ff68d4">vertex_buffer</a>,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        buffer_offset + (num_vertices + num_vertices_transparent) * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        num_vertices_sky,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a058a164aacd1604c00b87e9ece68e93b">accel_sky</a>,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        NULL,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#ad514896349cac34cfd0ff32f6b8be0ea">mem_accel_sky</a>,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        cmd_buf,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        VK_FALSE);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a4687fb7bfc20f54d3fa5bea7d0ed61db">MEM_BARRIER_BUILD_ACCEL</a>(cmd_buf);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a> = 0;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    ret = <a class="code" href="../../d5/d02/path__tracer_8c.html#ab6809ce8eae1c0ba5e694402b1040ff7">vkpt_pt_create_accel_bottom</a>(</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="../../d6/dae/transparency_8c.html#ac8fed96b68318d66c1b503f7a2ff68d4">vertex_buffer</a>,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        buffer_offset + (num_vertices + num_vertices_transparent + num_vertices_sky) * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3,</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        num_vertices_custom_sky,</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a68e227246ebfd3e0c359d0be1d2344c8">accel_custom_sky</a>,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        NULL,</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a61d77c4bc304096699bf62a70e0cd835">mem_accel_custom_sky</a>,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        cmd_buf,</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        VK_FALSE);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a4687fb7bfc20f54d3fa5bea7d0ed61db">MEM_BARRIER_BUILD_ACCEL</a>(cmd_buf);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a> = 0;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a91cd3a0f518c462a8eaa2f144d3966a0">transparent_primitive_offset</a> = num_vertices / 3;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a5e330921a2a2bebf13ebfae458a86663">sky_primitive_offset</a> = <a class="code" href="../../d5/d02/path__tracer_8c.html#a91cd3a0f518c462a8eaa2f144d3966a0">transparent_primitive_offset</a> + num_vertices_transparent / 3;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aa21042e04c540f3cf11021661fd73b5b">custom_sky_primitive_offset</a> = <a class="code" href="../../d5/d02/path__tracer_8c.html#a5e330921a2a2bebf13ebfae458a86663">sky_primitive_offset</a> + num_vertices_sky / 3;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, qtrue);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4b6a8e87531a795daeb57355822eb915">vkpt_wait_idle</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="afa98cd801df2f0c4a1c984354db6ec13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa98cd801df2f0c4a1c984354db6ec13">&#9670;&nbsp;</a></span>vkpt_pt_create_toplevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_create_toplevel </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>include_world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>weapon_left_handed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l00852">852</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;{</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="../../d0/dd7/struct_qvk_geometry_instance__s.html">QvkGeometryInstance_t</a> instances[<a class="code" href="../../d5/d02/path__tracer_8c.html#a3a7af2216de6a3f65c80de7e13a0e3a5">INSTANCE_MAX_NUM</a>];</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordtype">int</span> num_instances = 0;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (include_world)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#aa39f2bc1930ca846539aa9140d3e7e91">accel_static</a>, 0, <a class="code" href="../../d2/d6f/constants_8h.html#a480c4717e75559ace575d255f8816392">AS_FLAG_OPAQUE</a>, 0, 0);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#aca88190d71c18b7e86f6df6f95ce1423">accel_transparent</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a91cd3a0f518c462a8eaa2f144d3966a0">transparent_primitive_offset</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a84a486b4d3d9aed7df67173bebb7a6a9">AS_FLAG_TRANSPARENT</a>, 0, 0);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#a058a164aacd1604c00b87e9ece68e93b">accel_sky</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a28dc79480eb73e947553b7a2d11c058e">AS_INSTANCE_FLAG_SKY</a> | <a class="code" href="../../d5/d02/path__tracer_8c.html#a5e330921a2a2bebf13ebfae458a86663">sky_primitive_offset</a>, <a class="code" href="../../d2/d6f/constants_8h.html#afcb422634f7f9c7b6eb93903c12734f1">AS_FLAG_SKY</a>, 0, 0);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#a68e227246ebfd3e0c359d0be1d2344c8">accel_custom_sky</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a28dc79480eb73e947553b7a2d11c058e">AS_INSTANCE_FLAG_SKY</a> | <a class="code" href="../../d5/d02/path__tracer_8c.html#aa21042e04c540f3cf11021661fd73b5b">custom_sky_primitive_offset</a>, <a class="code" href="../../d2/d6f/constants_8h.html#abb0a3e131d7acabbc158174ceb958f8d">AS_FLAG_CUSTOM_SKY</a>, 0, 0);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#ac38bb7be9e0058ae24fe5a925dc0bbca">accel_dynamic</a>[idx], <a class="code" href="../../d2/d6f/constants_8h.html#a77b14ce4bce340a12ff4812cd8d44476">AS_INSTANCE_FLAG_DYNAMIC</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a480c4717e75559ace575d255f8816392">AS_FLAG_OPAQUE</a>, 0, 0);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#aba54c30aebc1bb4079c338f51cb2849c">transparent_models_present</a>)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#abac8aab4721aac02fd7f1e50a8a8279f">accel_transparent_models</a>[idx], <a class="code" href="../../d2/d6f/constants_8h.html#a77b14ce4bce340a12ff4812cd8d44476">AS_INSTANCE_FLAG_DYNAMIC</a> | <a class="code" href="../../d5/d02/path__tracer_8c.html#adecc0b38eed69279656d3dfa9bc019cc">transparent_model_primitive_offset</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a84a486b4d3d9aed7df67173bebb7a6a9">AS_FLAG_TRANSPARENT</a>, 0, 0);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/da6/client_2client_8h.html#a26b3965778674ca93982ac5eeafa4c41">cl_player_model</a>-&gt;integer == <a class="code" href="../../d0/da6/client_2client_8h.html#a14e09ab8ea85a92cb6d84d21227b9201">CL_PLAYER_MODEL_FIRST_PERSON</a>)</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#a1d06d25c74f4920131f2779da685500b">accel_viewer_models</a>[idx], <a class="code" href="../../d2/d6f/constants_8h.html#a77b14ce4bce340a12ff4812cd8d44476">AS_INSTANCE_FLAG_DYNAMIC</a> | <a class="code" href="../../d5/d02/path__tracer_8c.html#ad1daf58b38785ab98d88ffe50d310101">viewer_model_primitive_offset</a>, <a class="code" href="../../d2/d6f/constants_8h.html#afff1be7b2d70ddcee62fc1727a3edeac">AS_FLAG_VIEWER_MODELS</a>, VK_GEOMETRY_INSTANCE_TRIANGLE_CULL_DISABLE_BIT_NV, 0);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#aa39d8ccf23e66cda3105676d16a556ed">accel_viewer_weapon</a>[idx], <a class="code" href="../../d2/d6f/constants_8h.html#a77b14ce4bce340a12ff4812cd8d44476">AS_INSTANCE_FLAG_DYNAMIC</a> | <a class="code" href="../../d5/d02/path__tracer_8c.html#a3e6a90c3bc8b4e6ecd005a3a3166f50b">viewer_weapon_primitive_offset</a>, <a class="code" href="../../d2/d6f/constants_8h.html#aa3fa657d25d7ad5d49f5d7cef7401ad5">AS_FLAG_VIEWER_WEAPON</a>, weapon_left_handed ? VK_GEOMETRY_INSTANCE_TRIANGLE_FRONT_COUNTERCLOCKWISE_BIT_NV : 0, 0);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a>, <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a>, <a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="../../d6/dae/transparency_8c.html#a5b8ac7af5b695b722ffb82ba3ea2a63b">get_transparency_counts</a>(&amp;<a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a>, &amp;<a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a>, &amp;<a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#acac8ce7ed01a5414939d203016d85e16">cvar_pt_enable_particles</a>-&gt;integer != 0 &amp;&amp; <a class="code" href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a> &gt; 0)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d6/dae/transparency_8c.html#a95f9a40fb2711235e3b923f9b4d9d98b">get_transparency_particle_blas</a>(), 0, <a class="code" href="../../d2/d6f/constants_8h.html#abec5f46f075c151a8a2483275d916289">AS_FLAG_PARTICLES</a>, VK_GEOMETRY_INSTANCE_TRIANGLE_CULL_DISABLE_BIT_NV, 1);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#ac82d58a0323c35ecb2c45fed29f30126">cvar_pt_enable_beams</a>-&gt;integer != 0 &amp;&amp; <a class="code" href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a> &gt; 0)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d6/dae/transparency_8c.html#a7051461bfc27150372b710955371ca07">get_transparency_beam_blas</a>(), 0, <a class="code" href="../../d2/d6f/constants_8h.html#abec5f46f075c151a8a2483275d916289">AS_FLAG_PARTICLES</a>, VK_GEOMETRY_INSTANCE_TRIANGLE_CULL_DISABLE_BIT_NV, 2);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#afa10fe90e0f0173aa8eb347720e2fb05">cvar_pt_enable_sprites</a>-&gt;integer != 0 &amp;&amp; <a class="code" href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a> &gt; 0)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d6/dae/transparency_8c.html#a69794649ae804404c4fc54cbdfe9cc06">get_transparency_sprite_blas</a>(), 0, <a class="code" href="../../d2/d6f/constants_8h.html#a5eec86ef24b85e5dd1d7d6c9b09f9825">AS_FLAG_EXPLOSIONS</a>, VK_GEOMETRY_INSTANCE_TRIANGLE_CULL_DISABLE_BIT_NV, 4);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d5/d02/path__tracer_8c.html#ae382708530566afbeb8db921b7146cc8">explosions_present</a>)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a>(instances, &amp;num_instances, <a class="code" href="../../d5/d02/path__tracer_8c.html#a837e2eef289f3be9602a4c7073df111e">accel_explosions</a>[idx], <a class="code" href="../../d2/d6f/constants_8h.html#a77b14ce4bce340a12ff4812cd8d44476">AS_INSTANCE_FLAG_DYNAMIC</a> | <a class="code" href="../../d5/d02/path__tracer_8c.html#a1b874341f8518fb512e6b40b4cf87cee">explosions_primitive_offset</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a5eec86ef24b85e5dd1d7d6c9b09f9825">AS_FLAG_EXPLOSIONS</a>, 0, 3);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordtype">void</span> *instance_data = <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#aff4cf678d4eb8e268daef24100fa1649">buf_instances</a> + idx);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    memcpy(instance_data, &amp;instances, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd7/struct_qvk_geometry_instance__s.html">QvkGeometryInstance_t</a>) * num_instances);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#aff4cf678d4eb8e268daef24100fa1649">buf_instances</a> + idx);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    instance_data = NULL;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    VkAccelerationStructureCreateInfoNV accel_create_info = {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        .sType = VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_CREATE_INFO_NV,</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        .info = {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            .sType = VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_INFO_NV,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            .instanceCount = num_instances,</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            .geometryCount = 0,</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            .pGeometries   = NULL,</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            .type         = VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_NV</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    };</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#a3b3ecd5cb86be79b632480e8fa50092b">accel_top_match</a>[idx].instanceCount &lt; accel_create_info.info.<a class="code" href="../../d8/de1/structaccel__top__match__info__s.html#af9dd7ccf9b460b6182d826f18ff03afe">instanceCount</a>) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a47f79304c4f95c06df8e64b65affa50d">vkpt_pt_destroy_toplevel</a>(idx);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        qvkCreateAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;accel_create_info, NULL, <a class="code" href="../../d5/d02/path__tracer_8c.html#ae1f3ad1476aaa24156e744dfbef1bff1">accel_top</a> + idx);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="comment">/* XXX: do allocation only once with safety margin */</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        VkAccelerationStructureMemoryRequirementsInfoNV mem_req_info = {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            .sType = VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_INFO_NV,</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            .accelerationStructure = <a class="code" href="../../d5/d02/path__tracer_8c.html#ae1f3ad1476aaa24156e744dfbef1bff1">accel_top</a>[idx],</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            .type = VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        };</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        VkMemoryRequirements2 mem_req = { 0 };</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        mem_req.sType = VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        qvkGetAccelerationStructureMemoryRequirementsNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;mem_req_info, &amp;mem_req);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d9/d7e/vk__util_8c.html#ad8c2ae656cad4dae55abbd83892bcd99">allocate_gpu_memory</a>(mem_req.memoryRequirements, <a class="code" href="../../d5/d02/path__tracer_8c.html#ac88bcbba777f404c3e5138b28602294d">mem_accel_top</a> + idx));</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        VkBindAccelerationStructureMemoryInfoNV bind_info = {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            .sType = VK_STRUCTURE_TYPE_BIND_ACCELERATION_STRUCTURE_MEMORY_INFO_NV,</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            .accelerationStructure = <a class="code" href="../../d5/d02/path__tracer_8c.html#ae1f3ad1476aaa24156e744dfbef1bff1">accel_top</a>[idx],</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            .memory = <a class="code" href="../../d5/d02/path__tracer_8c.html#ac88bcbba777f404c3e5138b28602294d">mem_accel_top</a>[idx],</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        };</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(qvkBindAccelerationStructureMemoryNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;bind_info));</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        assert(<a class="code" href="../../d5/d02/path__tracer_8c.html#a4b9a06b23f04b95a398950e8f0189ea6">get_scratch_buffer_size</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#ae1f3ad1476aaa24156e744dfbef1bff1">accel_top</a>[idx]) &lt; <a class="code" href="../../d5/d02/path__tracer_8c.html#ae7e90499572672ceb6bcfde7dff3b5ee">SIZE_SCRATCH_BUFFER</a>);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a3b3ecd5cb86be79b632480e8fa50092b">accel_top_match</a>[idx].<a class="code" href="../../d8/de1/structaccel__top__match__info__s.html#af9dd7ccf9b460b6182d826f18ff03afe">instanceCount</a> = accel_create_info.info.instanceCount;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    VkAccelerationStructureInfoNV as_info = {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        .sType = VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_INFO_NV,</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        .type = VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_NV,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        .geometryCount = 0,</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        .pGeometries = NULL,</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        .instanceCount = num_instances,</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    };</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    qvkCmdBuildAccelerationStructureNV(</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            cmd_buf,</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            &amp;as_info,</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#aff4cf678d4eb8e268daef24100fa1649">buf_instances</a>[idx].buffer, <span class="comment">/* instance buffer */</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            0 <span class="comment">/* instance offset */</span>,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            VK_FALSE,  <span class="comment">/* update */</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#ae1f3ad1476aaa24156e744dfbef1bff1">accel_top</a>[idx],</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            VK_NULL_HANDLE, <span class="comment">/* source acceleration structure ?? */</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#a1a763409094901fbe372c38c85579614">buf_accel_scratch</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            0 <span class="comment">/* scratch offset */</span>);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a4687fb7bfc20f54d3fa5bea7d0ed61db">MEM_BARRIER_BUILD_ACCEL</a>(cmd_buf); <span class="comment">/* probably not needed here but doesn&#39;t matter */</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a81d5c88a085077fdde28cd02f32caf85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81d5c88a085077fdde28cd02f32caf85">&#9670;&nbsp;</a></span>vkpt_pt_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l01196">1196</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;{</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a47f79304c4f95c06df8e64b65affa50d">vkpt_pt_destroy_toplevel</a>(i);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#aff4cf678d4eb8e268daef24100fa1649">buf_instances</a> + i);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#aee55ecf81802dc7a983fc5da19c82ee4">vkpt_pt_destroy_dynamic</a>(i);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ad789397590084a740c19e75bfd525410">vkpt_pt_destroy_transparent_models</a>(i);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a3f8420f9bdd4daaf9155cf86e2cfdb01">vkpt_pt_destroy_viewer_models</a>(i);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#aecceaa55fa5787ef4c8151e13a7c5418">vkpt_pt_destroy_viewer_weapon</a>(i);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ad614beedc7851a715267e7a9f1eec079">vkpt_pt_destroy_explosions</a>(i);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a921eec1be3e2b29c63ea29cfb610ee12">vkpt_pt_destroy_static</a>();</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a1a763409094901fbe372c38c85579614">buf_accel_scratch</a>);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    vkDestroyDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#aca00b9f34c4dd967c4d6bffeeb9bb4ce">rt_descriptor_set_layout</a>, NULL);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>, NULL);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    vkDestroyDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad87ec98bfa7ba3b9e60be5bea8947c85">rt_descriptor_pool</a>, NULL);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac77841ff12d4ba4044c3bc9d5a51306f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77841ff12d4ba4044c3bc9d5a51306f">&#9670;&nbsp;</a></span>vkpt_pt_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l01410">1410</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;{</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a5389534adde7c6475b99957cb3e603c3">rt_pipeline</a>, NULL);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a921eec1be3e2b29c63ea29cfb610ee12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921eec1be3e2b29c63ea29cfb610ee12">&#9670;&nbsp;</a></span>vkpt_pt_destroy_static()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_destroy_static </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l00345">345</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d5/d02/path__tracer_8c.html#a9a08b54e757139289429a294e40c8252">mem_accel_static</a>) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a9a08b54e757139289429a294e40c8252">mem_accel_static</a>, NULL);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a9a08b54e757139289429a294e40c8252">mem_accel_static</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#a409c5afc5f0b34a27628db2b18ccf86a">mem_accel_transparent</a>) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a409c5afc5f0b34a27628db2b18ccf86a">mem_accel_transparent</a>, NULL);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a409c5afc5f0b34a27628db2b18ccf86a">mem_accel_transparent</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#ad514896349cac34cfd0ff32f6b8be0ea">mem_accel_sky</a>) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad514896349cac34cfd0ff32f6b8be0ea">mem_accel_sky</a>, NULL);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#ad514896349cac34cfd0ff32f6b8be0ea">mem_accel_sky</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#a61d77c4bc304096699bf62a70e0cd835">mem_accel_custom_sky</a>) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a61d77c4bc304096699bf62a70e0cd835">mem_accel_custom_sky</a>, NULL);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a61d77c4bc304096699bf62a70e0cd835">mem_accel_custom_sky</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../d5/d02/path__tracer_8c.html#aa39f2bc1930ca846539aa9140d3e7e91">accel_static</a>) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        qvkDestroyAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#aa39f2bc1930ca846539aa9140d3e7e91">accel_static</a>, NULL);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#aa39f2bc1930ca846539aa9140d3e7e91">accel_static</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#aca88190d71c18b7e86f6df6f95ce1423">accel_transparent</a>) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        qvkDestroyAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#aca88190d71c18b7e86f6df6f95ce1423">accel_transparent</a>, NULL);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#aca88190d71c18b7e86f6df6f95ce1423">accel_transparent</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#a058a164aacd1604c00b87e9ece68e93b">accel_sky</a>) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        qvkDestroyAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a058a164aacd1604c00b87e9ece68e93b">accel_sky</a>, NULL);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a058a164aacd1604c00b87e9ece68e93b">accel_sky</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#a68e227246ebfd3e0c359d0be1d2344c8">accel_custom_sky</a>) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        qvkDestroyAccelerationStructureNV(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a68e227246ebfd3e0c359d0be1d2344c8">accel_custom_sky</a>, NULL);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#a68e227246ebfd3e0c359d0be1d2344c8">accel_custom_sky</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a81d5c88a085077fdde28cd02f32caf85">vkpt_pt_destroy()</a>.</p>

</div>
</div>
<a id="a715bde63d0ba29bd4789640b6556b0c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a715bde63d0ba29bd4789640b6556b0c6">&#9670;&nbsp;</a></span>vkpt_pt_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l00134">134</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    VkPhysicalDeviceProperties2 dev_props2 = {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        .sType      = VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_PROPERTIES_2,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        .pNext      = &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    };</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    vkGetPhysicalDeviceProperties2(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#acb9a5f5745cc88f7cb7915301d43635a">physical_device</a>, &amp;dev_props2);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    Com_Printf(<span class="stringliteral">&quot;Maximum recursion depth: %d\n&quot;</span>,  <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.maxRecursionDepth);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    Com_Printf(<span class="stringliteral">&quot;Shader group handle size: %d\n&quot;</span>, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#a1a763409094901fbe372c38c85579614">buf_accel_scratch</a>, <a class="code" href="../../d5/d02/path__tracer_8c.html#ae7e90499572672ceb6bcfde7dff3b5ee">SIZE_SCRATCH_BUFFER</a>, VK_BUFFER_USAGE_RAY_TRACING_BIT_NV,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#aff4cf678d4eb8e268daef24100fa1649">buf_instances</a> + i, <a class="code" href="../../d5/d02/path__tracer_8c.html#a3a7af2216de6a3f65c80de7e13a0e3a5">INSTANCE_MAX_NUM</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd7/struct_qvk_geometry_instance__s.html">QvkGeometryInstance_t</a>), VK_BUFFER_USAGE_RAY_TRACING_BIT_NV,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">/* create descriptor set layout */</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    VkDescriptorSetLayoutBinding bindings[] = {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            .binding         = <a class="code" href="../../d5/d02/path__tracer_8c.html#a9e8ac1ef2a700c3b867bb6cb48e58da2">RAY_GEN_ACCEL_STRUCTURE_BINDING_IDX</a>,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_ACCELERATION_STRUCTURE_NV,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            .stageFlags      = VK_SHADER_STAGE_RAYGEN_BIT_NV,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        },</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            .binding         = <a class="code" href="../../d5/d02/path__tracer_8c.html#a63611ec38e729cec465013e2e1bd90b2">RAY_GEN_PARTICLE_COLOR_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            .stageFlags      = VK_SHADER_STAGE_ANY_HIT_BIT_NV,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        },</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            .binding         = <a class="code" href="../../d5/d02/path__tracer_8c.html#a2ffef681de9a09e892a3e372772a822b">RAY_GEN_BEAM_COLOR_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            .stageFlags      = VK_SHADER_STAGE_ANY_HIT_BIT_NV,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        },</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            .binding         = <a class="code" href="../../d5/d02/path__tracer_8c.html#a3873829390a5a444ef4a2ef66668ea10">RAY_GEN_SPRITE_INFO_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            .stageFlags      = VK_SHADER_STAGE_ANY_HIT_BIT_NV,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        },</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    };</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    VkDescriptorSetLayoutCreateInfo layout_info = {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        .sType        = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        .bindingCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(bindings),</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        .pBindings    = bindings</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    };</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;layout_info, NULL, &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#aca00b9f34c4dd967c4d6bffeeb9bb4ce">rt_descriptor_set_layout</a>));</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#aca00b9f34c4dd967c4d6bffeeb9bb4ce">rt_descriptor_set_layout</a>, DESCRIPTOR_SET_LAYOUT);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    VkDescriptorSetLayout desc_set_layouts[] = {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="../../d5/d02/path__tracer_8c.html#aca00b9f34c4dd967c4d6bffeeb9bb4ce">rt_descriptor_set_layout</a>,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    };</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">/* create pipeline */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    VkPushConstantRange push_constant_range = {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        .stageFlags     = VK_SHADER_STAGE_RAYGEN_BIT_NV,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        .offset         = 0,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        .size           = <span class="keyword">sizeof</span>(<a class="code" href="../../de/dca/wgl_8c.html#a055b7e5795bf4b7cb77482fe2b6f4dd7">int</a>) * 2,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    };</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    VkPipelineLayoutCreateInfo pipeline_layout_create_info = {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        .sType          = VK_STRUCTURE_TYPE_PIPELINE_LAYOUT_CREATE_INFO,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        .setLayoutCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        .pSetLayouts    = desc_set_layouts,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        .pushConstantRangeCount = 1,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        .pPushConstantRanges = &amp;push_constant_range,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    };</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreatePipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;pipeline_layout_create_info, NULL, &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>));</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    VkDescriptorPoolSize pool_sizes[] = {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        { VK_DESCRIPTOR_TYPE_STORAGE_IMAGE,             <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a> },</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        { VK_DESCRIPTOR_TYPE_ACCELERATION_STRUCTURE_NV, <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a> }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    };</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    VkDescriptorPoolCreateInfo pool_create_info = {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        .sType         = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO,</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        .maxSets       = <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        .poolSizeCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(pool_sizes),</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        .pPoolSizes    = pool_sizes</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    };</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;pool_create_info, NULL, &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#ad87ec98bfa7ba3b9e60be5bea8947c85">rt_descriptor_pool</a>));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#ad87ec98bfa7ba3b9e60be5bea8947c85">rt_descriptor_pool</a>, DESCRIPTOR_POOL);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    VkDescriptorSetAllocateInfo descriptor_set_alloc_info = {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        .sType              = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        .descriptorPool     = <a class="code" href="../../d5/d02/path__tracer_8c.html#ad87ec98bfa7ba3b9e60be5bea8947c85">rt_descriptor_pool</a>,</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        .descriptorSetCount = 1,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        .pSetLayouts        = &amp;<a class="code" href="../../d5/d02/path__tracer_8c.html#aca00b9f34c4dd967c4d6bffeeb9bb4ce">rt_descriptor_set_layout</a>,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    };</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkAllocateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;descriptor_set_alloc_info, <a class="code" href="../../d5/d02/path__tracer_8c.html#a298155d6d04cff95c21416f9be421b6a">rt_descriptor_set</a> + i));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d02/path__tracer_8c.html#a298155d6d04cff95c21416f9be421b6a">rt_descriptor_set</a>[i], DESCRIPTOR_SET);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#acac8ce7ed01a5414939d203016d85e16">cvar_pt_enable_particles</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;pt_enable_particles&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, 0);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#ac82d58a0323c35ecb2c45fed29f30126">cvar_pt_enable_beams</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;pt_enable_beams&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, 0);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#afa10fe90e0f0173aa8eb347720e2fb05">cvar_pt_enable_sprites</a>= <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;pt_enable_sprites&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, 0);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1315c0f9ec55f91dd2737651246858aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1315c0f9ec55f91dd2737651246858aa">&#9670;&nbsp;</a></span>vkpt_pt_trace_lighting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_trace_lighting </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>num_bounce_rays</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l01105">1105</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;{</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordtype">int</span> frame_idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a7aa618f97b758bf9d39af3d08922f60a">setup_rt_pipeline</a>(cmd_buf);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_DIRECT_LIGHTING);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; i++)</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, i);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keywordtype">int</span> idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? -1 : i;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        vkCmdPushConstants(cmd_buf, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>, VK_SHADER_STAGE_RAYGEN_BIT_NV, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), &amp;idx);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordtype">int</span> rgen_index = <a class="code" href="../../d2/d6f/constants_8h.html#a4cb210bed54da782c7270a46b99fa924">SBT_RGEN_DIRECT_LIGHTING</a>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d02/path__tracer_8c.html#a175d7c4a99a51ff9c1648617feb95b0f">cvar_pt_caustics</a>-&gt;value != 0)</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            rgen_index = <a class="code" href="../../d2/d6f/constants_8h.html#a701ff06e090f10a6bfd6b2c95ec3589f">SBT_RGEN_DIRECT_LIGHTING_CAUSTICS</a>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        qvkCmdTraceRaysNV(cmd_buf,</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, rgen_index * <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            VK_NULL_HANDLE, 0, 0,</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 2, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? 2 : 1);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_DIRECT_LIGHTING);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_SH]);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_COCG]);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_HF]);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_SPEC]);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        .srcAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        .dstAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7b10c322800fbf3b96e5e1b6eb9c0b65">buf_readback</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        .size = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    );</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_INDIRECT_LIGHTING);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span> (num_bounce_rays &gt; 0)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; i++)</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, i);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="keywordtype">int</span> idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? -1 : i;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            vkCmdPushConstants(cmd_buf, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>, VK_SHADER_STAGE_RAYGEN_BIT_NV, 0, <span class="keyword">sizeof</span>(idx), &amp;idx);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bounce_ray = 0; bounce_ray &lt; (<a class="code" href="../../de/dca/wgl_8c.html#a055b7e5795bf4b7cb77482fe2b6f4dd7">int</a>)ceilf(num_bounce_rays); bounce_ray++)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                <span class="keywordflow">if</span> (num_bounce_rays == 0.5f)</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                    <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height / 2;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                    <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="keywordtype">int</span> rgen_index = (bounce_ray == 0) </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                    ? <a class="code" href="../../d2/d6f/constants_8h.html#a4472378d98524b028d549bbd62710518">SBT_RGEN_INDIRECT_LIGHTING_FIRST</a> </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                    : <a class="code" href="../../d2/d6f/constants_8h.html#a1384a6c867216b1ba912d34046eb7cdf">SBT_RGEN_INDIRECT_LIGHTING_SECOND</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                qvkCmdTraceRaysNV(cmd_buf,</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, rgen_index * <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                    <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                    <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    VK_NULL_HANDLE, 0, 0,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 2, <a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? 2 : 1);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_SH]);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_LF_COCG]);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_HF]);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_COLOR_SPEC]);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_BOUNCE_THROUGHPUT]);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_INDIRECT_LIGHTING);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="ac2c90dc6f27788d58feb57331c6366e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2c90dc6f27788d58feb57331c6366e6">&#9670;&nbsp;</a></span>vkpt_pt_trace_primary_rays()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_trace_primary_rays </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l01009">1009</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;{</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordtype">int</span> frame_idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            .srcAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            .dstAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7b10c322800fbf3b96e5e1b6eb9c0b65">buf_readback</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            .offset = 0,</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            .size = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    );</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a7aa618f97b758bf9d39af3d08922f60a">setup_rt_pipeline</a>(cmd_buf);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_PRIMARY_RAYS);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; i++)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, i);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordtype">int</span> idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? -1 : i;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        vkCmdPushConstants(cmd_buf, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>, VK_SHADER_STAGE_RAYGEN_BIT_NV, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), &amp;idx);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        qvkCmdTraceRaysNV(cmd_buf,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, <a class="code" href="../../d2/d6f/constants_8h.html#aa8f900e5c1322742d6e03296f1725e5c">SBT_RGEN_PRIMARY_RAYS</a> * <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                VK_NULL_HANDLE, 0, 0,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 2, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? 2 : 1);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_PRIMARY_RAYS);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_VISBUF]);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_TRANSPARENT]);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_TEX_GRADIENTS]);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_MOTION]);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_SHADING_POSITION]);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_VIEW_DIRECTION]);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_THROUGHPUT]);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_BOUNCE_THROUGHPUT]);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_GODRAYS_THROUGHPUT_DIST]);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_ALBEDO]);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_METALLIC]);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_CLUSTER]);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_VIEW_DEPTH_A + frame_idx]);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_NORMAL_A + frame_idx]);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a330450dd44754e34b600671d08c86112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a330450dd44754e34b600671d08c86112">&#9670;&nbsp;</a></span>vkpt_pt_trace_reflections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_trace_reflections </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>bounce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l01063">1063</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;{</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordtype">int</span> frame_idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> &amp; 1;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#a7aa618f97b758bf9d39af3d08922f60a">setup_rt_pipeline</a>(cmd_buf);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>; i++)</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, i);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordtype">int</span> idx = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? -1 : i;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        vkCmdPushConstants(cmd_buf, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>, VK_SHADER_STAGE_RAYGEN_BIT_NV, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), &amp;idx);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        vkCmdPushConstants(cmd_buf, <a class="code" href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a>, VK_SHADER_STAGE_RAYGEN_BIT_NV, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), &amp;bounce);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordtype">int</span> shader = (bounce == 0) ? <a class="code" href="../../d2/d6f/constants_8h.html#ac55b17f6fec4f7dd88381ad8f54a96be">SBT_RGEN_REFLECT_REFRACT1</a> : <a class="code" href="../../d2/d6f/constants_8h.html#a88a0f6e540b0896baa4b1c4e9c386556">SBT_RGEN_REFLECT_REFRACT2</a>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        qvkCmdTraceRaysNV(cmd_buf,</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, shader * <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <a class="code" href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a>.shaderGroupHandleSize,</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            VK_NULL_HANDLE, 0, 0,</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / 2, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> == 1 ? 2 : 1);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a>(cmd_buf, <a class="code" href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a>);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_TRANSPARENT]);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_MOTION]);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_SHADING_POSITION]);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_VIEW_DIRECTION]);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_THROUGHPUT]);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_GODRAYS_THROUGHPUT_DIST]);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_ALBEDO]);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_METALLIC]);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_CLUSTER]);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_VIEW_DEPTH_A + frame_idx]);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <a class="code" href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_NORMAL_A + frame_idx]);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a32f476bb9016fdcdf5128f4af95f67dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32f476bb9016fdcdf5128f4af95f67dc">&#9670;&nbsp;</a></span>vkpt_pt_update_descripter_set_bindings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_pt_update_descripter_set_bindings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d02/path__tracer_8c_source.html#l00251">251</a> of file <a class="el" href="../../d5/d02/path__tracer_8c_source.html">path_tracer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">/* update descriptor set bindings */</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    VkWriteDescriptorSetAccelerationStructureNV desc_accel_struct_info = {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        .sType = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET_ACCELERATION_STRUCTURE_NV,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        .accelerationStructureCount = 1,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        .pAccelerationStructures    = <a class="code" href="../../d5/d02/path__tracer_8c.html#ae1f3ad1476aaa24156e744dfbef1bff1">accel_top</a> + idx</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    };</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    VkBufferView <a class="code" href="../../d6/dae/transparency_8c.html#aa02dd57141887b98aa4657ca64ff0e32">particle_color_buffer_view</a> = <a class="code" href="../../d6/dae/transparency_8c.html#aa8860c71b63f7d3e90bd4718329efca7">get_transparency_particle_color_buffer_view</a>();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    VkBufferView <a class="code" href="../../d6/dae/transparency_8c.html#ae931a5f2ed4206ace1c91bd06113c333">beam_color_buffer_view</a> = <a class="code" href="../../d6/dae/transparency_8c.html#ada1567bc5639b4f13fc4bce48a6238c6">get_transparency_beam_color_buffer_view</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    VkBufferView <a class="code" href="../../d6/dae/transparency_8c.html#a268456044198b4e5ba61272a6f58016e">sprite_info_buffer_view</a> = <a class="code" href="../../d6/dae/transparency_8c.html#a0e557871c9800aa81aa4ccea5d5748d8">get_transparency_sprite_info_buffer_view</a>();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    VkWriteDescriptorSet writes[] = {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            .pNext           = &amp;desc_accel_struct_info,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            .dstSet          = <a class="code" href="../../d5/d02/path__tracer_8c.html#a298155d6d04cff95c21416f9be421b6a">rt_descriptor_set</a>[idx],</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            .dstBinding      = <a class="code" href="../../d5/d02/path__tracer_8c.html#a9e8ac1ef2a700c3b867bb6cb48e58da2">RAY_GEN_ACCEL_STRUCTURE_BINDING_IDX</a>,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_ACCELERATION_STRUCTURE_NV</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        },</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            .dstSet          = <a class="code" href="../../d5/d02/path__tracer_8c.html#a298155d6d04cff95c21416f9be421b6a">rt_descriptor_set</a>[idx],</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            .dstBinding      = <a class="code" href="../../d5/d02/path__tracer_8c.html#a63611ec38e729cec465013e2e1bd90b2">RAY_GEN_PARTICLE_COLOR_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            .pTexelBufferView = &amp;<a class="code" href="../../d6/dae/transparency_8c.html#aa02dd57141887b98aa4657ca64ff0e32">particle_color_buffer_view</a></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        },</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            .dstSet          = <a class="code" href="../../d5/d02/path__tracer_8c.html#a298155d6d04cff95c21416f9be421b6a">rt_descriptor_set</a>[idx],</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            .dstBinding      = <a class="code" href="../../d5/d02/path__tracer_8c.html#a2ffef681de9a09e892a3e372772a822b">RAY_GEN_BEAM_COLOR_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            .pTexelBufferView = &amp;<a class="code" href="../../d6/dae/transparency_8c.html#ae931a5f2ed4206ace1c91bd06113c333">beam_color_buffer_view</a></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        },</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            .dstSet          = <a class="code" href="../../d5/d02/path__tracer_8c.html#a298155d6d04cff95c21416f9be421b6a">rt_descriptor_set</a>[idx],</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            .dstBinding      = <a class="code" href="../../d5/d02/path__tracer_8c.html#a3873829390a5a444ef4a2ef66668ea10">RAY_GEN_SPRITE_INFO_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            .pTexelBufferView = &amp;<a class="code" href="../../d6/dae/transparency_8c.html#a268456044198b4e5ba61272a6f58016e">sprite_info_buffer_view</a></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        },</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    };</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(writes), writes, 0, NULL);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a9ca07e6161780fd8552f4e74d6ee3392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ca07e6161780fd8552f4e74d6ee3392">&#9670;&nbsp;</a></span>vkpt_readback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_readback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d67/struct_readback_buffer.html">ReadbackBuffer</a> *&#160;</td>
          <td class="paramname"><em>dst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00659">659</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;{</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a>* buffer = &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1b5c5104e30e472bc3e70a3f7fc7effb">buf_readback_staging</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>];</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordtype">void</span>* mapped = <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(buffer);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (mapped == NULL)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">return</span> VK_ERROR_MEMORY_MAP_FAILED;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    memcpy(dst, mapped, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d67/struct_readback_buffer.html">ReadbackBuffer</a>));</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(buffer);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a7f3d0bcb6ad1976fa5ce07905671e4ad">process_render_feedback()</a>.</p>

</div>
</div>
<a id="a9f11af5519a3f6a6eefdd3fb9add8693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f11af5519a3f6a6eefdd3fb9add8693">&#9670;&nbsp;</a></span>vkpt_record_god_rays_filter_command_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_record_god_rays_filter_command_buffer </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>command_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00169">169</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(command_buffer, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_TRANSPARENT]);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">const</span> VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        .levelCount = 1,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        .layerCount = 1</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    };</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    vkCmdBindPipeline(command_buffer, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipelines[1]);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.descriptor_set,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a>,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    };</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    vkCmdBindDescriptorSets(command_buffer, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipeline_layout, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets),</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        desc_sets, 0, NULL);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">int</span> pass = 0;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    vkCmdPushConstants(command_buffer, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipeline_layout, VK_SHADER_STAGE_COMPUTE_BIT, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), &amp;pass);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    uint32_t group_size = <a class="code" href="../../d1/dc7/god__rays_8c.html#ada8665ca4bd33e3c2f517aa660bd18cc">FILTER_THREAD_GROUP_SIZE</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    uint32_t group_num_x = (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> + (group_size - 1)) / group_size;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    uint32_t group_num_y = (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + (group_size - 1)) / group_size;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    vkCmdDispatch(command_buffer, group_num_x, group_num_y, 1);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(command_buffer, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_TRANSPARENT]);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="ac1d97ab8b6122131e8264a041f761a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1d97ab8b6122131e8264a041f761a13">&#9670;&nbsp;</a></span>vkpt_record_god_rays_trace_command_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_record_god_rays_trace_command_buffer </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>command_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>pass</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc7/god__rays_8c_source.html#l00140">140</a> of file <a class="el" href="../../d1/dc7/god__rays_8c_source.html">god_rays.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(command_buffer, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_GODRAYS_THROUGHPUT_DIST]);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(command_buffer, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_COLOR]);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    vkCmdBindPipeline(command_buffer, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipelines[0]);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.descriptor_set,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a>,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    };</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    vkCmdBindDescriptorSets(command_buffer, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipeline_layout, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets),</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        desc_sets, 0, NULL);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    vkCmdPushConstants(command_buffer, <a class="code" href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a>.pipeline_layout, VK_SHADER_STAGE_COMPUTE_BIT, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), &amp;pass);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    uint32_t group_size = <a class="code" href="../../d1/dc7/god__rays_8c.html#a06e8fa7c5114fa85b6dec0586c8be4e6">THREAD_GROUP_SIZE</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    uint32_t group_num_x = (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width / (2 * <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>) + (group_size - 1)) / group_size;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    uint32_t group_num_y = (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height / 2 + (group_size - 1)) / group_size;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    vkCmdDispatch(command_buffer, group_num_x, group_num_y, 1);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(command_buffer, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_PT_GODRAYS_THROUGHPUT_DIST]);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d1/dc7/god__rays_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(command_buffer, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_COLOR]);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a622f04c9260a47d3a1fea876787bca51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a622f04c9260a47d3a1fea876787bca51">&#9670;&nbsp;</a></span>vkpt_reset_accumulation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_reset_accumulation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00219">219</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a63b4e8acf483b810725a70abeda99d2d">num_accumulated_frames</a> = 0;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d9/d62/physical__sky_8c.html#ae8b8257850ec20b8734679f0b06213cc">physical_sky_cvar_changed()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#aff905f638b31e388828370e560697f15">vkpt_freecam_update()</a>.</p>

</div>
</div>
<a id="aa1776331030c090b50d4770d06a4532e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1776331030c090b50d4770d06a4532e">&#9670;&nbsp;</a></span>vkpt_reset_command_buffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_reset_command_buffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *&#160;</td>
          <td class="paramname"><em>group</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03392">3392</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;{</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae58af1b4dc98b53615c1187115d3ee05">used_this_frame</a> = 0;</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160; </div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a>; i++)</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    {</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;        <span class="keywordtype">void</span>* addr = group-&gt;buffer_begin_addrs[group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a> * <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> + i];</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;        assert(addr == 0);</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a4b6a8e87531a795daeb57355822eb915">vkpt_wait_idle()</a>.</p>

</div>
</div>
<a id="a34042f61738dfca646ec235c18f8d584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34042f61738dfca646ec235c18f8d584">&#9670;&nbsp;</a></span>vkpt_shadow_map_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_shadow_map_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d5f/shadow__map_8c_source.html#l00209">209</a> of file <a class="el" href="../../d5/d5f/shadow__map_8c_source.html">shadow_map.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    VkPipelineShaderStageCreateInfo shader_info[] = {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_SHADOW_MAP_VERT, VK_SHADER_STAGE_VERTEX_BIT)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    };</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    VkVertexInputBindingDescription vertex_binding_desc = {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        .binding = 0,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        .stride = <span class="keyword">sizeof</span>(float) * 3,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        .inputRate = VK_VERTEX_INPUT_RATE_VERTEX</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    };</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    VkVertexInputAttributeDescription vertex_attribute_desc = {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        .location = 0,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        .binding = 0,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        .format = VK_FORMAT_R32G32B32_SFLOAT,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        .offset = 0</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    };</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    VkPipelineVertexInputStateCreateInfo vertex_input_info = {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        .sType                           = VK_STRUCTURE_TYPE_PIPELINE_VERTEX_INPUT_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        .vertexBindingDescriptionCount   = 1,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        .pVertexBindingDescriptions      = &amp;vertex_binding_desc,</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        .vertexAttributeDescriptionCount = 1,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        .pVertexAttributeDescriptions    = &amp;vertex_attribute_desc,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    };</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    VkPipelineInputAssemblyStateCreateInfo input_assembly_info = {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        .sType    = VK_STRUCTURE_TYPE_PIPELINE_INPUT_ASSEMBLY_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        .topology = VK_PRIMITIVE_TOPOLOGY_TRIANGLE_LIST,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    };</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    VkViewport viewport = {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        .x        = 0.0f,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        .y        = 0.0f,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        .width    = (float)<a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        .<a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>   = (<span class="keywordtype">float</span>)<a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        .minDepth = 0.0f,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        .maxDepth = 1.0f,</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    };</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    VkRect2D scissor = {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        .offset = { 0, 0 },</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        .extent = { <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a> }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    };</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    VkPipelineViewportStateCreateInfo viewport_state = {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        .sType         = VK_STRUCTURE_TYPE_PIPELINE_VIEWPORT_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        .viewportCount = 1,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        .pViewports    = &amp;viewport,</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        .scissorCount  = 1,</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        .pScissors     = &amp;scissor,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    };</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    VkPipelineRasterizationStateCreateInfo rasterizer_state = {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        .sType                   = VK_STRUCTURE_TYPE_PIPELINE_RASTERIZATION_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        .polygonMode             = VK_POLYGON_MODE_FILL,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        .lineWidth               = 1.0f,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        .cullMode                = VK_CULL_MODE_FRONT_BIT,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        .frontFace               = VK_FRONT_FACE_CLOCKWISE,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    };</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    VkPipelineMultisampleStateCreateInfo multisample_state = {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        .sType                 = VK_STRUCTURE_TYPE_PIPELINE_MULTISAMPLE_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        .sampleShadingEnable   = VK_FALSE,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        .rasterizationSamples  = VK_SAMPLE_COUNT_1_BIT,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        .minSampleShading      = 1.0f,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        .pSampleMask           = NULL,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        .alphaToCoverageEnable = VK_FALSE,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        .alphaToOneEnable      = VK_FALSE,</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    };</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    VkPipelineDepthStencilStateCreateInfo depth_stencil_state = {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        .sType = VK_STRUCTURE_TYPE_PIPELINE_DEPTH_STENCIL_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        .depthTestEnable = VK_TRUE,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        .depthWriteEnable = VK_TRUE,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        .depthCompareOp = VK_COMPARE_OP_LESS,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    };</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    VkDynamicState dynamic_states[] = {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        VK_DYNAMIC_STATE_VIEWPORT,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        VK_DYNAMIC_STATE_SCISSOR</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    };</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    VkPipelineDynamicStateCreateInfo dynamic_state_info = {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        .sType = VK_STRUCTURE_TYPE_PIPELINE_DYNAMIC_STATE_CREATE_INFO,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        .dynamicStateCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(dynamic_states),</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        .pDynamicStates = dynamic_states</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    };</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    VkGraphicsPipelineCreateInfo pipeline_info = {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        .sType      = VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        .stageCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(shader_info),</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        .pStages    = shader_info,</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        .pVertexInputState   = &amp;vertex_input_info,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        .pInputAssemblyState = &amp;input_assembly_info,</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        .pViewportState      = &amp;viewport_state,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        .pRasterizationState = &amp;rasterizer_state,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        .pMultisampleState   = &amp;multisample_state,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        .pDepthStencilState  = &amp;depth_stencil_state,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        .pColorBlendState    = NULL,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        .pDynamicState       = &amp;dynamic_state_info,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        .layout              = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a8ce180b480a022c44a916143860aaabc">pipeline_layout_smap</a>,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        .renderPass          = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a6838b12c80f0d4a7f5bac40565a6a6de">render_pass_smap</a>,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        .subpass             = 0,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        .basePipelineHandle  = VK_NULL_HANDLE,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        .basePipelineIndex   = -1,</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    };</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateGraphicsPipelines(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, VK_NULL_HANDLE, 1, &amp;pipeline_info, NULL, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#a0b03dd34b37c12e40fea1478349d46e9">pipeline_smap</a>));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d5f/shadow__map_8c.html#a0b03dd34b37c12e40fea1478349d46e9">pipeline_smap</a>, PIPELINE);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    VkImageView attachments[] = {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <a class="code" href="../../d5/d5f/shadow__map_8c.html#a4d665bcf42aa4bbf87b9c832b616bf17">imv_smap_depth</a></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    };</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    VkFramebufferCreateInfo fb_create_info = {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        .sType           = VK_STRUCTURE_TYPE_FRAMEBUFFER_CREATE_INFO,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        .renderPass      = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a6838b12c80f0d4a7f5bac40565a6a6de">render_pass_smap</a>,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        .attachmentCount = 1,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        .pAttachments    = attachments,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        .width           = <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        .height          = <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        .layers          = 1,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    };</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateFramebuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;fb_create_info, NULL, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#a0df0abce5b2b04f7918fe7885930c323">framebuffer_smap</a>));</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d5f/shadow__map_8c.html#a0df0abce5b2b04f7918fe7885930c323">framebuffer_smap</a>, FRAMEBUFFER);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    attachments[0] = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a1bdf61642bd9213340d365c850744b48">imv_smap_depth2</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateFramebuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;fb_create_info, NULL, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#adea63bbf381e772f59b24e5d2405d30f">framebuffer_smap2</a>));</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d5f/shadow__map_8c.html#adea63bbf381e772f59b24e5d2405d30f">framebuffer_smap2</a>, FRAMEBUFFER);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a16f7ceb69a716fcac81142adeab28c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f7ceb69a716fcac81142adeab28c2c">&#9670;&nbsp;</a></span>vkpt_shadow_map_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_shadow_map_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d5f/shadow__map_8c_source.html#l00182">182</a> of file <a class="el" href="../../d5/d5f/shadow__map_8c_source.html">shadow_map.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a4d665bcf42aa4bbf87b9c832b616bf17">imv_smap_depth</a>, NULL);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a4d665bcf42aa4bbf87b9c832b616bf17">imv_smap_depth</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a1bdf61642bd9213340d365c850744b48">imv_smap_depth2</a>, NULL);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a1bdf61642bd9213340d365c850744b48">imv_smap_depth2</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#aa992d4465098ffa6cd5063aa536c396d">imv_smap_depth_array</a>, NULL);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#aa992d4465098ffa6cd5063aa536c396d">imv_smap_depth_array</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    vkDestroyImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>, NULL);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a4685016a431d9c4411c9673d1779fc0a">mem_smap</a>, NULL);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a4685016a431d9c4411c9673d1779fc0a">mem_smap</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    vkDestroyRenderPass(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a6838b12c80f0d4a7f5bac40565a6a6de">render_pass_smap</a>, NULL);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a6838b12c80f0d4a7f5bac40565a6a6de">render_pass_smap</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a8ce180b480a022c44a916143860aaabc">pipeline_layout_smap</a>, NULL);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a8ce180b480a022c44a916143860aaabc">pipeline_layout_smap</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2c91ef4dfab8cbc1703fd6484a3f4d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c91ef4dfab8cbc1703fd6484a3f4d0">&#9670;&nbsp;</a></span>vkpt_shadow_map_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_shadow_map_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d5f/shadow__map_8c_source.html#l00351">351</a> of file <a class="el" href="../../d5/d5f/shadow__map_8c_source.html">shadow_map.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    vkDestroyFramebuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a0df0abce5b2b04f7918fe7885930c323">framebuffer_smap</a>, NULL);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a0df0abce5b2b04f7918fe7885930c323">framebuffer_smap</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    vkDestroyFramebuffer(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#adea63bbf381e772f59b24e5d2405d30f">framebuffer_smap2</a>, NULL);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#adea63bbf381e772f59b24e5d2405d30f">framebuffer_smap2</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a0b03dd34b37c12e40fea1478349d46e9">pipeline_smap</a>, NULL);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#a0b03dd34b37c12e40fea1478349d46e9">pipeline_smap</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aef51bf4978199c1a15d1218239921cdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef51bf4978199c1a15d1218239921cdc">&#9670;&nbsp;</a></span>vkpt_shadow_map_get_view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkImageView vkpt_shadow_map_get_view </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d5f/shadow__map_8c_source.html#l00203">203</a> of file <a class="el" href="../../d5/d5f/shadow__map_8c_source.html">shadow_map.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d5/d5f/shadow__map_8c.html#aa992d4465098ffa6cd5063aa536c396d">imv_smap_depth_array</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc7/god__rays_8c.html#ad34a7bddc4a7022335724019d13bddef">create_image_views()</a>.</p>

</div>
</div>
<a id="a8bb2565a316eaf3b591917f8537598e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bb2565a316eaf3b591917f8537598e1">&#9670;&nbsp;</a></span>vkpt_shadow_map_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_shadow_map_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d5f/shadow__map_8c_source.html#l00087">87</a> of file <a class="el" href="../../d5/d5f/shadow__map_8c_source.html">shadow_map.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="../../d5/d5f/shadow__map_8c.html#acd09c4018a3e30440e1529a316a7cf04">create_render_pass</a>();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    VkPushConstantRange push_constant_range = {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        .stageFlags = VK_SHADER_STAGE_VERTEX_BIT,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        .size = <span class="keyword">sizeof</span>(float) * 16,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    };</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#a8ce180b480a022c44a916143860aaabc">pipeline_layout_smap</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        .pushConstantRangeCount = 1,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        .pPushConstantRanges = &amp;push_constant_range,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    );</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    VkImageCreateInfo img_info = {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        .sType = VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        .extent = {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            .width = <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            .height = <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            .depth = 1,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        },</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        .imageType = VK_IMAGE_TYPE_2D,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        .format = VK_FORMAT_D32_SFLOAT,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        .mipLevels = 1,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        .arrayLayers = 2,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        .samples = VK_SAMPLE_COUNT_1_BIT,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        .tiling = VK_IMAGE_TILING_OPTIMAL,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        .usage = VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;               | VK_IMAGE_USAGE_SAMPLED_BIT,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        .sharingMode = VK_SHARING_MODE_EXCLUSIVE,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        .queueFamilyIndexCount = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aead77274a082ebafba7a8ac7ec306b98">queue_idx_graphics</a>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        .initialLayout = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    };</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_info, NULL, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>, IMAGE);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    VkMemoryRequirements mem_req;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    vkGetImageMemoryRequirements(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>, &amp;mem_req);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d9/d7e/vk__util_8c.html#ad8c2ae656cad4dae55abbd83892bcd99">allocate_gpu_memory</a>(mem_req, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#a4685016a431d9c4411c9673d1779fc0a">mem_smap</a>));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkBindImageMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a4685016a431d9c4411c9673d1779fc0a">mem_smap</a>, 0));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    VkImageViewCreateInfo img_view_info = {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        .sType = VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        .viewType = VK_IMAGE_VIEW_TYPE_2D,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        .format = VK_FORMAT_D32_SFLOAT,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        .image = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        .subresourceRange = {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            .aspectMask = VK_IMAGE_ASPECT_DEPTH_BIT,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            .baseMipLevel = 0,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            .levelCount = 1,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            .baseArrayLayer = 0,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            .layerCount = 1,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        },</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        .components = {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            VK_COMPONENT_SWIZZLE_R,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            VK_COMPONENT_SWIZZLE_G,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            VK_COMPONENT_SWIZZLE_B,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            VK_COMPONENT_SWIZZLE_A,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        },</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    };</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_view_info, NULL, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#a4d665bcf42aa4bbf87b9c832b616bf17">imv_smap_depth</a>));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d5f/shadow__map_8c.html#a4d665bcf42aa4bbf87b9c832b616bf17">imv_smap_depth</a>, IMAGE_VIEW);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    img_view_info.subresourceRange.baseArrayLayer = 1;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_view_info, NULL, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#a1bdf61642bd9213340d365c850744b48">imv_smap_depth2</a>));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d5f/shadow__map_8c.html#a1bdf61642bd9213340d365c850744b48">imv_smap_depth2</a>, IMAGE_VIEW);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    img_view_info.viewType = VK_IMAGE_VIEW_TYPE_2D_ARRAY;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    img_view_info.subresourceRange.baseArrayLayer = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    img_view_info.subresourceRange.layerCount = 2;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_view_info, NULL, &amp;<a class="code" href="../../d5/d5f/shadow__map_8c.html#aa992d4465098ffa6cd5063aa536c396d">imv_smap_depth_array</a>));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d5/d5f/shadow__map_8c.html#aa992d4465098ffa6cd5063aa536c396d">imv_smap_depth_array</a>, IMAGE_VIEW);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    VkCommandBuffer cmd_buf = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        .image = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        .subresourceRange = { .aspectMask = VK_IMAGE_ASPECT_DEPTH_BIT,.levelCount = 1,.layerCount = 2 },</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        .srcAccessMask = VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT | VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        .dstAccessMask = VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    );</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, qtrue);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aff23a22d9b9befeb38c65fe14adbd23b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff23a22d9b9befeb38c65fe14adbd23b">&#9670;&nbsp;</a></span>vkpt_shadow_map_render()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_shadow_map_render </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>view_projection_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_static_verts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_dynamic_verts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>transparent_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>num_transparent_verts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d5f/shadow__map_8c_source.html#l00364">364</a> of file <a class="el" href="../../d5/d5f/shadow__map_8c_source.html">shadow_map.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        .image = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        .subresourceRange = { .aspectMask = VK_IMAGE_ASPECT_DEPTH_BIT, .levelCount = 1, .layerCount = 2 },</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        .srcAccessMask = VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        .dstAccessMask = VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT | VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    );</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    VkClearValue clear_depth = { .depthStencil = { .depth = 1.f } };</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    VkRenderPassBeginInfo render_pass_info = {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        .sType             = VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        .renderPass        = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a6838b12c80f0d4a7f5bac40565a6a6de">render_pass_smap</a>,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        .framebuffer       = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a0df0abce5b2b04f7918fe7885930c323">framebuffer_smap</a>,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        .renderArea.offset = { 0, 0 },</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        .renderArea.extent = { <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>, <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a> },</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        .clearValueCount   = 1,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        .pClearValues      = &amp;clear_depth</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    };</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    vkCmdBeginRenderPass(cmd_buf, &amp;render_pass_info, VK_SUBPASS_CONTENTS_INLINE);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_GRAPHICS, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a0b03dd34b37c12e40fea1478349d46e9">pipeline_smap</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    VkViewport viewport =</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        .width = (float)<a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        .<a class="code" href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = (<span class="keywordtype">float</span>)<a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        .minDepth = 0,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        .maxDepth = 1.0f,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    };</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    vkCmdSetViewport(cmd_buf, 0, 1, &amp;viewport);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    VkRect2D scissor =</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        .extent.width = <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        .extent.height = <a class="code" href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a>,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        .offset.x = 0,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        .offset.y = 0,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    };</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    vkCmdSetScissor(cmd_buf, 0, 1, &amp;scissor);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    vkCmdPushConstants(cmd_buf, <a class="code" href="../../d5/d5f/shadow__map_8c.html#a8ce180b480a022c44a916143860aaabc">pipeline_layout_smap</a>, VK_SHADER_STAGE_VERTEX_BIT, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 16, view_projection_matrix);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    VkDeviceSize vertex_offset = offsetof(<span class="keyword">struct</span> <a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_bsp);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    vkCmdBindVertexBuffers(cmd_buf, 0, 1, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, &amp;vertex_offset);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    vkCmdDraw(cmd_buf, num_static_verts, 1, 0, 0);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    vertex_offset = offsetof(<span class="keyword">struct</span> <a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_instanced);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    vkCmdBindVertexBuffers(cmd_buf, 0, 1, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, &amp;vertex_offset);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    vkCmdDraw(cmd_buf, num_dynamic_verts, 1, 0, 0);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    vkCmdEndRenderPass(cmd_buf);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    render_pass_info.framebuffer = <a class="code" href="../../d5/d5f/shadow__map_8c.html#adea63bbf381e772f59b24e5d2405d30f">framebuffer_smap2</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    vkCmdBeginRenderPass(cmd_buf, &amp;render_pass_info, VK_SUBPASS_CONTENTS_INLINE);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    vertex_offset = offsetof(<span class="keyword">struct</span> <a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>, positions_bsp);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    vkCmdBindVertexBuffers(cmd_buf, 0, 1, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, &amp;vertex_offset);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    vkCmdDraw(cmd_buf, num_transparent_verts, 1, transparent_offset, 0);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    vkCmdEndRenderPass(cmd_buf);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        .image = <a class="code" href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a>,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        .subresourceRange = { .aspectMask = VK_IMAGE_ASPECT_DEPTH_BIT,.levelCount = 1,.layerCount = 2 },</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        .srcAccessMask = VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT | VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        .dstAccessMask = VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        .oldLayout = VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        .newLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        );</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a87eef903712cce745b7550cd2079729e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87eef903712cce745b7550cd2079729e">&#9670;&nbsp;</a></span>vkpt_shadow_map_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_shadow_map_setup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/dc6/vkpt_8h.html#af03b78a9f5854e1c40560a96476cd8eb">sun_light_t</a> *&#160;</td>
          <td class="paramname"><em>light</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>bbox_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>bbox_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>VP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>depth_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>random_sampling</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d5f/shadow__map_8c_source.html#l00460">460</a> of file <a class="el" href="../../d5/d5f/shadow__map_8c_source.html">shadow_map.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    vec3_t up_dir = { 0.0f, 0.0f, 1.0f };</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (light-&gt;<a class="code" href="../../d4/db8/structsun__light__s.html#a18bce201d8bedd72a6c5e6e4cb6f4d2b">direction</a>[2] &gt;= 0.99f)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        VectorSet(up_dir, 1.f, 0.f, 0.f);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    vec3_t look_dir;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    VectorScale(light-&gt;<a class="code" href="../../d4/db8/structsun__light__s.html#a18bce201d8bedd72a6c5e6e4cb6f4d2b">direction</a>, -1.f, look_dir);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(look_dir);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    vec3_t left_dir;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    CrossProduct(up_dir, look_dir, left_dir);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(left_dir);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    CrossProduct(look_dir, left_dir, up_dir);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(up_dir);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span> (random_sampling)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordtype">float</span> u, v;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="../../d5/d5f/shadow__map_8c.html#a808abb4369ed70d7011e6087f75d060f">sample_disk</a>(&amp;u, &amp;v);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        VectorMA(look_dir, u * light-&gt;<a class="code" href="../../d4/db8/structsun__light__s.html#a7a6cace7a64176996f1c10119a421e10">angular_size_rad</a> * 0.5f, left_dir, look_dir);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        VectorMA(look_dir, v * light-&gt;<a class="code" href="../../d4/db8/structsun__light__s.html#a7a6cace7a64176996f1c10119a421e10">angular_size_rad</a> * 0.5f, up_dir, look_dir);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(look_dir);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        CrossProduct(up_dir, look_dir, left_dir);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(left_dir);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        CrossProduct(look_dir, left_dir, up_dir);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a>(up_dir);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">float</span> view_matrix[16] = {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        left_dir[0], up_dir[0], look_dir[0], 0.f,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        left_dir[1], up_dir[1], look_dir[1], 0.f,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        left_dir[2], up_dir[2], look_dir[2], 0.f,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        0.f, 0.f, 0.f, 1.f</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    };</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    vec3_t view_aabb_min = { FLT_MAX, FLT_MAX, FLT_MAX };</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    vec3_t view_aabb_max = { -FLT_MAX, -FLT_MAX, -FLT_MAX };</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; i++)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordtype">float</span> corner[4];</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        corner[0] = (i &amp; 1) ? bbox_max[0] : bbox_min[0];</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        corner[1] = (i &amp; 2) ? bbox_max[1] : bbox_min[1];</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        corner[2] = (i &amp; 4) ? bbox_max[2] : bbox_min[2];</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        corner[3] = 1.f;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordtype">float</span> view_corner[4];</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="../../dc/dca/matrix_8c.html#a0b6a46ad562be9e2457b2701a7c8d758">mult_matrix_vector</a>(view_corner, view_matrix, corner);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        view_aabb_min[0] = min(view_aabb_min[0], view_corner[0]);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        view_aabb_min[1] = min(view_aabb_min[1], view_corner[1]);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        view_aabb_min[2] = min(view_aabb_min[2], view_corner[2]);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        view_aabb_max[0] = max(view_aabb_max[0], view_corner[0]);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        view_aabb_max[1] = max(view_aabb_max[1], view_corner[1]);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        view_aabb_max[2] = max(view_aabb_max[2], view_corner[2]);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    vec3_t diagonal;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    VectorSubtract(view_aabb_max, view_aabb_min, diagonal);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordtype">float</span> maxXY = max(diagonal[0], diagonal[1]);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    vec3_t <a class="code" href="../../d6/d4f/hq2x_8c.html#ae4ef68398af64fc287aafae2c9e9e68c">diff</a>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="../../d6/d4f/hq2x_8c.html#ae4ef68398af64fc287aafae2c9e9e68c">diff</a>[0] = (maxXY - diagonal[0]) * 0.5f;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="../../d6/d4f/hq2x_8c.html#ae4ef68398af64fc287aafae2c9e9e68c">diff</a>[1] = (maxXY - diagonal[1]) * 0.5f;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="../../d6/d4f/hq2x_8c.html#ae4ef68398af64fc287aafae2c9e9e68c">diff</a>[2] = 0.f;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    VectorSubtract(view_aabb_min, <a class="code" href="../../d6/d4f/hq2x_8c.html#ae4ef68398af64fc287aafae2c9e9e68c">diff</a>, view_aabb_min);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    VectorAdd(view_aabb_max, <a class="code" href="../../d6/d4f/hq2x_8c.html#ae4ef68398af64fc287aafae2c9e9e68c">diff</a>, view_aabb_max);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordtype">float</span> projection_matrix[16];</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="../../dc/dca/matrix_8c.html#ae5a9045fcc3f820845ae78a1fd903ea7">create_orthographic_matrix</a>(projection_matrix, view_aabb_min[0], view_aabb_max[0], view_aabb_min[1], view_aabb_max[1], view_aabb_min[2], view_aabb_max[2]);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="../../dc/dca/matrix_8c.html#aa50601a67cbead379e68850f3d204f8c">mult_matrix_matrix</a>(VP, projection_matrix, view_matrix);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    *depth_scale = view_aabb_max[2] - view_aabb_min[2];</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a1eb8166387dae1ee9ef6b32e4ec94367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eb8166387dae1ee9ef6b32e4ec94367">&#9670;&nbsp;</a></span>vkpt_submit_command_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_submit_command_buffer </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkQueue&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>execute_device_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>wait_semaphore_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkSemaphore *&#160;</td>
          <td class="paramname"><em>wait_semaphores</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkPipelineStageFlags *&#160;</td>
          <td class="paramname"><em>wait_stages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>wait_device_indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>signal_semaphore_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkSemaphore *&#160;</td>
          <td class="paramname"><em>signal_semaphores</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>signal_device_indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkFence&#160;</td>
          <td class="paramname"><em>fence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03411">3411</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;{</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkEndCommandBuffer(cmd_buf));</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160; </div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    VkSubmitInfo submit_info = {</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;        .sType = VK_STRUCTURE_TYPE_SUBMIT_INFO,</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;        .waitSemaphoreCount = wait_semaphore_count,</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;        .pWaitSemaphores = wait_semaphores,</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        .pWaitDstStageMask = wait_stages,</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;        .signalSemaphoreCount = signal_semaphore_count,</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;        .pSignalSemaphores = signal_semaphores,</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;        .commandBufferCount = 1,</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        .pCommandBuffers = &amp;cmd_buf,</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    };</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160; </div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    VkDeviceGroupSubmitInfoKHR device_group_submit_info = {</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;        .sType = VK_STRUCTURE_TYPE_DEVICE_GROUP_SUBMIT_INFO_KHR,</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;        .pNext = NULL,</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;        .waitSemaphoreCount = wait_semaphore_count,</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;        .pWaitSemaphoreDeviceIndices = wait_device_indices,</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;        .commandBufferCount = 1,</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;        .pCommandBufferDeviceMasks = &amp;execute_device_mask,</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;        .signalSemaphoreCount = signal_semaphore_count,</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        .pSignalSemaphoreDeviceIndices = signal_device_indices,</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    };</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160; </div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;        submit_info.pNext = &amp;device_group_submit_info;</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    }</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160; </div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkQueueSubmit(queue, 1, &amp;submit_info, fence));</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160; </div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <a class="code" href="../../db/dbd/structcmd__buf__group__s.html">cmd_buf_group_t</a>* groups[] = { &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a336b8770f03748a386ae98591da63fea">cmd_buffers_compute</a>, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a54a98ba75f8e4dede0063fdd74cd9ace">cmd_buffers_transfer</a> };</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ngroup = 0; ngroup &lt; <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(groups); ngroup++)</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    {</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;        <a class="code" href="../../db/dbd/structcmd__buf__group__s.html">cmd_buf_group_t</a>* group = groups[ngroup];</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a> * group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">count_per_frame</a>; i++)</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;        {</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;            <span class="keywordflow">if</span> (group-&gt;<a class="code" href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">buffers</a>[i] == cmd_buf)</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;            {</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                group-&gt;buffer_begin_addrs[i] = NULL;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;            }</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;        }</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    }</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a6e118e55bb20687cff735f03176035e4">R_EndFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a46bfc3621c727fa0bfe39a01d47e126f">vkpt_vertex_buffer_upload_staging()</a>.</p>

</div>
</div>
<a id="a4f7dadb153104a8321ac371462fa9184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f7dadb153104a8321ac371462fa9184">&#9670;&nbsp;</a></span>vkpt_submit_command_buffer_simple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_submit_command_buffer_simple </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkQueue&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>all_gpus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03473">3473</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;{</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a1eb8166387dae1ee9ef6b32e4ec94367">vkpt_submit_command_buffer</a>(cmd_buf, queue, all_gpus ? (1 &lt;&lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>) - 1 : 1, 0, NULL, NULL, NULL, 0, NULL, NULL, 0);</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d9/d62/physical__sky_8c.html#a977cfafcb313ca2271f80ae10ce3019e">change_image_layouts()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a5b6a743c8f681996eaa2bf1208196cdd">create_invalid_texture()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#addf2a935c207649d0f0d5dfa3fffed28">create_swapchain()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a85d64555fd82c387df7d5c195574ff9d">fill_index_buffer()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a8bafa7514c9592f473bf8f84ce6d2710">FillVertexAndIndexBuffers()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#acab7ddea0c6abee1c21455b2b9fdf176">IMG_ReadPixels_RTX()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a912617d2640c1bb05a0d548cf5bae766">load_blue_noise()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a80f2878a633e064cb2ae497c3641a27f">UploadImage()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a6f5ac4c032c1495193e5727181523c98">vkpt_create_images()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a774c3999c366b4e23083a5d8c7bffbba">vkpt_pt_create_static()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8bb2565a316eaf3b591917f8537598e1">vkpt_shadow_map_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a40254cf863faddc4832cd3290e7211c4">vkpt_textures_end_registration()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#af1fc65cdd72e8bf78ed544c97606eb24">vkpt_textures_upload_envmap()</a>.</p>

</div>
</div>
<a id="ae1a8749a3b3ebbb0111a1982c699fc13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1a8749a3b3ebbb0111a1982c699fc13">&#9670;&nbsp;</a></span>vkpt_taa()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_taa </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d96/asvgf_8c_source.html#l00555">555</a> of file <a class="el" href="../../da/d96/asvgf_8c_source.html">asvgf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    };</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_TAA);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a>[<a class="code" href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea186f86ef458845ef9d87fda6d2bea80a">TAA</a>]);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="../../da/d96/asvgf_8c.html#a0986d67453f63f3c447240c05e5c1c94">pipeline_layout_taa</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    VkExtent2D dispatch_size = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span>(dispatch_size.width &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.width)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        dispatch_size.width += 8;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (dispatch_size.height &lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">extent_screen_images</a>.height)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        dispatch_size.height += 8;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            (dispatch_size.width + 15) / 16,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            (dispatch_size.height + 15) / 16,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            1);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_TAA_A]);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_TAA_B]);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_ASVGF_TAA_B]);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a>(cmd_buf, PROFILER_ASVGF_TAA);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a0ef9aec7b26da74e1071f63ed59c6a61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef9aec7b26da74e1071f63ed59c6a61">&#9670;&nbsp;</a></span>vkpt_textures_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_textures_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l01045">1045</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;{</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#aeb315e35c97d75ad07e2665f8f8a2c64">destroy_tex_images</a>();</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    vkDestroyDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>, NULL);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    vkDestroyDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#ab2d6a67459125d5a7e2513ec50aa68fa">desc_pool_textures</a>, NULL);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    vkFreeMemory      (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#af74c55cf42b294b4bb89379897f7e3ce">mem_blue_noise</a>,      NULL);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    vkDestroyImage    (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a1fca70948814b8c5ccc19ac9bf5cba22">img_blue_noise</a>,      NULL);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#abe59b604817a1907dad48695e9d183a7">imv_blue_noise</a>,      NULL);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    vkDestroySampler  (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8c3f3ff9e41d6d9cb4be1833b3075ede">tex_sampler</a>,         NULL);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    vkDestroySampler  (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adbb1ede9315d6460cbdeb923fa7fa794">tex_sampler_nearest</a>, NULL);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    vkDestroySampler  (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7d6ba384be74739107017ef3b0263d08">tex_sampler_linear_clamp</a>, NULL);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a> != VK_NULL_HANDLE) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a>, NULL);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a> = NULL;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a> != VK_NULL_HANDLE) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        vkDestroyImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>, NULL);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a> = NULL;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbb/textures_8c.html#aea72a9d504c79601b5371a0e034dc4aa">mem_envmap</a> != VK_NULL_HANDLE) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        vkFreeMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#aea72a9d504c79601b5371a0e034dc4aa">mem_envmap</a>, NULL);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <a class="code" href="../../dd/dbb/textures_8c.html#aea72a9d504c79601b5371a0e034dc4aa">mem_envmap</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#af05d3cbff32a3cad3e25a4b74adc5af5">destroy_invalid_texture</a>();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="../../d1/d2f/device__memory__allocator_8c.html#a8216ab0e60e993fd5ba896828c213ec1">destroy_device_memory_allocator</a>(<a class="code" href="../../dd/dbb/textures_8c.html#aa2b83ea18e52711e4ce7fb58ac1e513e">tex_device_memory_allocator</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#aa2b83ea18e52711e4ce7fb58ac1e513e">tex_device_memory_allocator</a> = NULL;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a76488e5ff38c3ca8e9a6901124f52c25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76488e5ff38c3ca8e9a6901124f52c25">&#9670;&nbsp;</a></span>vkpt_textures_destroy_unused()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_textures_destroy_unused </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00144">144</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#a5864bf283229d7397ebda7758ba5d584">textures_destroy_unused_set</a>((<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a>) % <a class="code" href="../../dd/dbb/textures_8c.html#a2b643e6acc78f2f583d076b662464e73">DESTROY_LATENCY</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>, and <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4bcaf2c106f70dcad7f14ad59fbca99b">R_Shutdown_RTX()</a>.</p>

</div>
</div>
<a id="a40254cf863faddc4832cd3290e7211c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40254cf863faddc4832cd3290e7211c4">&#9670;&nbsp;</a></span>vkpt_textures_end_registration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_textures_end_registration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l01087">1087</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;{</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="../../dd/dbb/textures_8c.html#adaa1fb45714cf8322f2a26ca33d6c049">image_loading_dirty_flag</a>)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#adaa1fb45714cf8322f2a26ca33d6c049">image_loading_dirty_flag</a> = 0;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    VkImageCreateInfo img_info = {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        .sType = VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO,</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        .extent = {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            .width  = 1337,</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            .height = 1337,</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            .depth  = 1</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        },</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        .imageType             = VK_IMAGE_TYPE_2D,</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        .format                = VK_FORMAT_UNDEFINED,</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        .mipLevels             = 1,</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        .arrayLayers           = 1,</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        .samples               = VK_SAMPLE_COUNT_1_BIT,</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        .tiling                = VK_IMAGE_TILING_OPTIMAL,</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        .usage                 = VK_IMAGE_USAGE_TRANSFER_DST_BIT</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                               | VK_IMAGE_USAGE_TRANSFER_SRC_BIT</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                               | VK_IMAGE_USAGE_SAMPLED_BIT,</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        .sharingMode           = VK_SHARING_MODE_EXCLUSIVE,</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        .queueFamilyIndexCount = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aead77274a082ebafba7a8ac7ec306b98">queue_idx_graphics</a>,</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        .initialLayout         = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    };</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    VkImageViewCreateInfo img_view_info = {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        .sType      = VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO,</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        .viewType   = VK_IMAGE_VIEW_TYPE_2D,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        .format     = VK_FORMAT_UNDEFINED,</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        .subresourceRange = {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            .baseMipLevel   = 0,</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            .levelCount     = 1,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            .baseArrayLayer = 0,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            .layerCount     = 1</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        },</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        .components     = {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            VK_COMPONENT_SWIZZLE_R,</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            VK_COMPONENT_SWIZZLE_G,</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            VK_COMPONENT_SWIZZLE_B,</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            VK_COMPONENT_SWIZZLE_A</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        },</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    };</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="preprocessor">#ifdef VKPT_DEVICE_GROUPS</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a> &gt; 1) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        mem_alloc_flags_broadcast.deviceMask = (1 &lt;&lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>) - 1;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    uint32_t new_image_num = 0;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordtype">size_t</span>   total_size = 0;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; MAX_RIMAGES; i++) {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *q_img = <a class="code" href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a> + i;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i] != VK_NULL_HANDLE || !q_img-&gt;registration_sequence || q_img-&gt;pix_data == NULL)</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        img_info.extent.width = q_img-&gt;upload_width;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        img_info.extent.height = q_img-&gt;upload_height;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        img_info.mipLevels = <a class="code" href="../../dd/dbb/textures_8c.html#a27a4c4519243dfd2f5b9dffcd3efc9ff">get_num_miplevels</a>(q_img-&gt;upload_width, q_img-&gt;upload_height);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        img_info.format = q_img-&gt;is_srgb ? VK_FORMAT_R8G8B8A8_SRGB : VK_FORMAT_R8G8B8A8_UNORM;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_info, NULL, <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a> + i));</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i], IMAGE);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        VkMemoryRequirements mem_req;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        vkGetImageMemoryRequirements(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i], &amp;mem_req);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        assert(!(mem_req.alignment &amp; (mem_req.alignment - 1)));</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        total_size += mem_req.alignment - 1;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        total_size &amp;= ~(mem_req.alignment - 1);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        total_size += mem_req.size;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <a class="code" href="../../d8/dc9/struct_device_memory.html">DeviceMemory</a>* image_memory = <a class="code" href="../../dd/dbb/textures_8c.html#adb33152db674c2b3301fc9f44f78f60b">tex_image_memory</a> + i;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        image_memory-&gt;<a class="code" href="../../d8/dc9/struct_device_memory.html#ad027d00a144741e7d24c28dc8ba56c1a">size</a> = mem_req.size;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        image_memory-&gt;<a class="code" href="../../d8/dc9/struct_device_memory.html#a0a7b1db4e757c41686323bbe9864dcaa">alignment</a> = mem_req.alignment;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        image_memory-&gt;<a class="code" href="../../d8/dc9/struct_device_memory.html#a8eeb8a7fb6ec1f6f6bc485362840a41c">memory_type</a> = <a class="code" href="../../d9/d7e/vk__util_8c.html#aa2e20fc611839bb931f41c1f087c07e0">get_memory_type</a>(mem_req.memoryTypeBits, VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <a class="code" href="../../d1/d2f/device__memory__allocator_8c.html#afb442496ff43c0437e3e683cff810340">allocate_device_memory</a>(<a class="code" href="../../dd/dbb/textures_8c.html#aa2b83ea18e52711e4ce7fb58ac1e513e">tex_device_memory_allocator</a>, image_memory);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        VkBindImageMemoryInfo* bind_info = <a class="code" href="../../dd/dbb/textures_8c.html#a7241d05ed505797f422bd9084875e7bb">tex_bind_image_info</a> + new_image_num;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        bind_info-&gt;sType = VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_INFO;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        bind_info-&gt;image = <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i];</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        bind_info-&gt;memory = image_memory-&gt;<a class="code" href="../../d8/dc9/struct_device_memory.html#adeb6f263c7fe2009f289e02ba0c63443">memory</a>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        bind_info-&gt;memoryOffset = image_memory-&gt;<a class="code" href="../../d8/dc9/struct_device_memory.html#ae09d490244106ed4fc74d0f9a670f43e">memory_offset</a>;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        new_image_num++;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">if</span> (new_image_num == 0)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    vkBindImageMemory2(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, new_image_num, <a class="code" href="../../dd/dbb/textures_8c.html#a7241d05ed505797f422bd9084875e7bb">tex_bind_image_info</a>);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a> buf_img_upload;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;buf_img_upload, total_size, VK_BUFFER_USAGE_TRANSFER_SRC_BIT,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    VkCommandBuffer cmd_buf = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordtype">char</span> *staging_buffer = <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(&amp;buf_img_upload);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordtype">size_t</span> offset = 0;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; MAX_RIMAGES; i++) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *q_img = <a class="code" href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a> + i;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i] == VK_NULL_HANDLE || <a class="code" href="../../dd/dbb/textures_8c.html#a64d158160ba40ce5e712294b3fcf6155">tex_image_views</a>[i] != VK_NULL_HANDLE)</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordtype">int</span> num_mip_levels = <a class="code" href="../../dd/dbb/textures_8c.html#a27a4c4519243dfd2f5b9dffcd3efc9ff">get_num_miplevels</a>(q_img-&gt;upload_width, q_img-&gt;upload_height);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        VkMemoryRequirements mem_req;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        vkGetImageMemoryRequirements(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i], &amp;mem_req);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        assert(!(mem_req.alignment &amp; (mem_req.alignment - 1)));</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        offset += mem_req.alignment - 1;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        offset &amp;= ~(mem_req.alignment - 1);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        uint32_t wd = q_img-&gt;upload_width;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        uint32_t ht = q_img-&gt;upload_height;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            .baseMipLevel   = 0,</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            .levelCount     = num_mip_levels,</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            .baseArrayLayer = 0,</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            .layerCount     = 1</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        };</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                .image            = <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i],</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                .srcAccessMask    = 0,</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                .dstAccessMask    = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                .oldLayout        = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                .newLayout        = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        );</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            memcpy(staging_buffer + offset, q_img-&gt;pix_data, wd * ht * 4);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            VkBufferImageCopy cpy_info = {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                .bufferOffset = offset,</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                .imageSubresource = { </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                    .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                    .mipLevel       = 0,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                    .baseArrayLayer = 0,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                    .layerCount     = 1,</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                },</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                .imageOffset    = { 0, 0, 0 },</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                .imageExtent    = { wd, ht, 1 }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            };</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            vkCmdCopyBufferToImage(cmd_buf, buf_img_upload.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i],</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL, 1, &amp;cpy_info);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        subresource_range.levelCount = 1;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160; </div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip = 1; mip &lt; num_mip_levels; mip++) </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            subresource_range.baseMipLevel = mip - 1;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                .image = <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i],</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                .srcAccessMask = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                .dstAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                .oldLayout = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                .newLayout = VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                );</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <span class="keywordtype">int</span> nwd = (wd &gt; 1) ? (wd &gt;&gt; 1) : wd;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordtype">int</span> nht = (ht &gt; 1) ? (ht &gt;&gt; 1) : ht;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            VkImageBlit region = {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                .srcSubresource = {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                    .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                    .mipLevel = mip - 1,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                    .baseArrayLayer = 0,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                    .layerCount = 1</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                },</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                .srcOffsets = { </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                    { 0, 0, 0 }, </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                    { wd, ht, 1 } },</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                .dstSubresource = {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                    .aspectMask = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                    .mipLevel = mip,</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    .baseArrayLayer = 0,</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    .layerCount = 1</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                },</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                .dstOffsets = { </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                    { 0, 0, 0 }, </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                    { nwd, nht, 1 } }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            };</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            vkCmdBlitImage(</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                cmd_buf, </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i], VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL, </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i], VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL, </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                1, &amp;region, </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                VK_FILTER_LINEAR);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            subresource_range.baseMipLevel = mip - 1;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                .image = <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i],</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                .srcAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                .dstAccessMask = VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                .oldLayout = VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL,</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                .newLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                );</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            wd = nwd;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            ht = nht;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        subresource_range.baseMipLevel = num_mip_levels - 1;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            .image = <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i],</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            .subresourceRange = subresource_range,</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            .srcAccessMask = VK_ACCESS_TRANSFER_READ_BIT,</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            .dstAccessMask = VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            .oldLayout = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            .newLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            );</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        img_view_info.image = <a class="code" href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a>[i];</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        img_view_info.subresourceRange.levelCount = num_mip_levels;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        img_view_info.format = q_img-&gt;is_srgb ? VK_FORMAT_R8G8B8A8_SRGB : VK_FORMAT_R8G8B8A8_UNORM;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_view_info, NULL, <a class="code" href="../../dd/dbb/textures_8c.html#a64d158160ba40ce5e712294b3fcf6155">tex_image_views</a> + i));</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../dd/dbb/textures_8c.html#a64d158160ba40ce5e712294b3fcf6155">tex_image_views</a>[i], IMAGE_VIEW);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        offset += mem_req.size;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(&amp;buf_img_upload);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    staging_buffer = NULL; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160; </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, qtrue);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keyword">const</span> uint32_t destroy_frame_index = (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">frame_counter</a> + <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>) % <a class="code" href="../../dd/dbb/textures_8c.html#a2b643e6acc78f2f583d076b662464e73">DESTROY_LATENCY</a>;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <a class="code" href="../../d4/d78/struct_unused_resources.html">UnusedResources</a>* unused_resources = <a class="code" href="../../dd/dbb/textures_8c.html#a32e23efedfcfeb0a7e5db920fd2be360">texture_system</a>.<a class="code" href="../../d5/dac/struct_texture_system.html#a745c3787154030d4b54117df55326f4b">unused_resources</a> + destroy_frame_index;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keyword">const</span> uint32_t unused_index = unused_resources-&gt;<a class="code" href="../../d4/d78/struct_unused_resources.html#ad7d917fe0e13d473e03d0fbd8e15e76f">buffer_num</a>++;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    unused_resources-&gt;<a class="code" href="../../d4/d78/struct_unused_resources.html#a617576f30a152259dee6792562cd65f9">buffers</a>[unused_index] = buf_img_upload.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    unused_resources-&gt;<a class="code" href="../../d4/d78/struct_unused_resources.html#a8c5bf24772db770d95eaa4356c8b6701">buffer_memory</a>[unused_index] = buf_img_upload.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#af6bd4dda5b49c3ea18d01c1d5fc5bf68">memory</a>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    memset(<a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>, 0xff, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>));</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>.</p>

</div>
</div>
<a id="ad1aba87f798f7e4b3acda4216e26dba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1aba87f798f7e4b3acda4216e26dba7">&#9670;&nbsp;</a></span>vkpt_textures_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_textures_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00821">821</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    memset(<a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>, 0xff, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>));</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    memset(&amp;<a class="code" href="../../dd/dbb/textures_8c.html#a32e23efedfcfeb0a7e5db920fd2be360">texture_system</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dbb/textures_8c.html#a32e23efedfcfeb0a7e5db920fd2be360">texture_system</a>));</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#aa2b83ea18e52711e4ce7fb58ac1e513e">tex_device_memory_allocator</a> = <a class="code" href="../../d1/d2f/device__memory__allocator_8c.html#a11bdd6db8af25f9e5496f8b2d7a15ef3">create_device_memory_allocator</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#a5b6a743c8f681996eaa2bf1208196cdd">create_invalid_texture</a>();</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    VkSamplerCreateInfo sampler_info = {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        .sType                   = VK_STRUCTURE_TYPE_SAMPLER_CREATE_INFO,</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        .magFilter               = VK_FILTER_LINEAR,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        .minFilter               = VK_FILTER_LINEAR,</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        .addressModeU            = VK_SAMPLER_ADDRESS_MODE_REPEAT,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        .addressModeV            = VK_SAMPLER_ADDRESS_MODE_REPEAT,</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        .addressModeW            = VK_SAMPLER_ADDRESS_MODE_REPEAT,</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        .anisotropyEnable        = VK_TRUE,</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        .maxAnisotropy           = 16,</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        .borderColor             = VK_BORDER_COLOR_INT_OPAQUE_BLACK,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        .unnormalizedCoordinates = VK_FALSE,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        .mipmapMode              = VK_SAMPLER_MIPMAP_MODE_LINEAR,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        .minLod                  = 0.0f,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        .maxLod                  = 128.0f,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    };</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateSampler(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;sampler_info, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8c3f3ff9e41d6d9cb4be1833b3075ede">tex_sampler</a>));</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8c3f3ff9e41d6d9cb4be1833b3075ede">tex_sampler</a>, SAMPLER);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    VkSamplerCreateInfo sampler_nearest_info = {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        .sType                   = VK_STRUCTURE_TYPE_SAMPLER_CREATE_INFO,</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        .magFilter               = VK_FILTER_NEAREST,</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        .minFilter               = VK_FILTER_NEAREST,</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        .addressModeU            = VK_SAMPLER_ADDRESS_MODE_REPEAT,</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        .addressModeV            = VK_SAMPLER_ADDRESS_MODE_REPEAT,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        .addressModeW            = VK_SAMPLER_ADDRESS_MODE_REPEAT,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        .anisotropyEnable        = VK_FALSE,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        .maxAnisotropy           = 16,</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        .borderColor             = VK_BORDER_COLOR_INT_OPAQUE_BLACK,</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        .unnormalizedCoordinates = VK_FALSE,</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        .mipmapMode              = VK_SAMPLER_MIPMAP_MODE_NEAREST,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    };</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateSampler(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;sampler_nearest_info, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adbb1ede9315d6460cbdeb923fa7fa794">tex_sampler_nearest</a>));</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adbb1ede9315d6460cbdeb923fa7fa794">tex_sampler_nearest</a>, SAMPLER);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    VkSamplerCreateInfo sampler_linear_clamp_info = {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        .sType                   = VK_STRUCTURE_TYPE_SAMPLER_CREATE_INFO,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        .magFilter               = VK_FILTER_LINEAR,</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        .minFilter               = VK_FILTER_LINEAR,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        .addressModeU            = VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE,</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        .addressModeV            = VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        .addressModeW            = VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE,</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        .anisotropyEnable        = VK_FALSE,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        .maxAnisotropy           = 16,</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        .borderColor             = VK_BORDER_COLOR_INT_OPAQUE_BLACK,</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        .unnormalizedCoordinates = VK_FALSE,</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        .mipmapMode              = VK_SAMPLER_MIPMAP_MODE_LINEAR,</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    };</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateSampler(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;sampler_linear_clamp_info, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7d6ba384be74739107017ef3b0263d08">tex_sampler_linear_clamp</a>));</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7d6ba384be74739107017ef3b0263d08">tex_sampler_linear_clamp</a>, SAMPLER);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    VkDescriptorSetLayoutBinding layout_bindings[] = {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            .descriptorCount = MAX_RIMAGES,</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            .binding         = 0,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            .stageFlags      = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        },</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, ...) \</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="preprocessor">        { \</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="preprocessor">            .descriptorType  = VK_DESCRIPTOR_TYPE_STORAGE_IMAGE, \</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="preprocessor">            .descriptorCount = 1, \</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="preprocessor">            .binding         = BINDING_OFFSET_IMAGES + _binding, \</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">            .stageFlags      = VK_SHADER_STAGE_ALL, \</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="preprocessor">        },</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="preprocessor">#define IMG_DO(_name, _binding, ...) \</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">        { \</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="preprocessor">            .descriptorType  = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER, \</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="preprocessor">            .descriptorCount = 1, \</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="preprocessor">            .binding         = BINDING_OFFSET_TEXTURES + _binding, \</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="preprocessor">            .stageFlags      = VK_SHADER_STAGE_ALL, \</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="preprocessor">        },</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">#undef IMG_DO</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            .binding         = <a class="code" href="../../df/dcb/global__textures_8h.html#a7b5847014756cb3abf81f1c10a17737a">BINDING_OFFSET_BLUE_NOISE</a>,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            .stageFlags      = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        },</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            .binding         = <a class="code" href="../../df/dcb/global__textures_8h.html#a25196994ca169733d3dddd49ca1d455e">BINDING_OFFSET_ENVMAP</a>,</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            .stageFlags      = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        },</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#af1a739a2422a1a5db235d28f878dc535">BINDING_OFFSET_PHYSICAL_SKY</a>,</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        },</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_IMAGE,</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a10a2032d96838036ea6e5a63cd6e83d5">BINDING_OFFSET_PHYSICAL_SKY_IMG</a>,</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        },</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a33e53f8610b00ec2aff4bfc20122d997">BINDING_OFFSET_SKY_TRANSMITTANCE</a>,</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        },</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a8c8a4fecc807e8177d5a3b559239881d">BINDING_OFFSET_SKY_SCATTERING</a>,</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        },</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a881812cc2b78d2f480244c1a29368c3b">BINDING_OFFSET_SKY_IRRADIANCE</a>,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        },</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a5f1da35c7ad7eff0b6f0c7e94582974e">BINDING_OFFSET_SKY_CLOUDS</a>,</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        },</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a7e3bec00c79bcb45cde2f72dd5e359dd">BINDING_OFFSET_TERRAIN_ALBEDO</a>,</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        },</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#ab14bb5e6cdcfd31667f9bb38984baeeb">BINDING_OFFSET_TERRAIN_NORMALS</a>,</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        },</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a941e131b3de8e0d60d6463f953ef5db6">BINDING_OFFSET_TERRAIN_DEPTH</a>,</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        },</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            .binding = <a class="code" href="../../df/dcb/global__textures_8h.html#a0f235b34465e71a4c26e4de56e3613d5">BINDING_OFFSET_TERRAIN_SHADOWMAP</a>,</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    };</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    VkDescriptorSetLayoutCreateInfo layout_info = {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        .sType        = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO,</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        .bindingCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(layout_bindings),</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        .pBindings    = layout_bindings,</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    };</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;layout_info, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>));</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>, DESCRIPTOR_SET_LAYOUT);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    VkDescriptorPoolSize pool_size = {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        .type            = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        .descriptorCount = MAX_RIMAGES + 2 * <a class="code" href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a> + 128,</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    };</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    VkDescriptorPoolCreateInfo pool_info = {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        .sType         = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO,</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        .poolSizeCount = 1,</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        .pPoolSizes    = &amp;pool_size,</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        .maxSets       = 2,</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    };</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;pool_info, NULL, &amp;<a class="code" href="../../dd/dbb/textures_8c.html#ab2d6a67459125d5a7e2513ec50aa68fa">desc_pool_textures</a>));</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../dd/dbb/textures_8c.html#ab2d6a67459125d5a7e2513ec50aa68fa">desc_pool_textures</a>, DESCRIPTOR_POOL);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    VkDescriptorSetAllocateInfo descriptor_set_alloc_info = {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        .sType              = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO,</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        .descriptorPool     = <a class="code" href="../../dd/dbb/textures_8c.html#ab2d6a67459125d5a7e2513ec50aa68fa">desc_pool_textures</a>,</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        .descriptorSetCount = 1,</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        .pSetLayouts        = &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>,</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    };</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkAllocateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;descriptor_set_alloc_info, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ae95c312eedf560c3b4d3b8d141fcfc77">desc_set_textures_even</a>));</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkAllocateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;descriptor_set_alloc_info, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7dd1e65d418b116f6f2bb2e3d4bfc03a">desc_set_textures_odd</a>));</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ae95c312eedf560c3b4d3b8d141fcfc77">desc_set_textures_even</a>, DESCRIPTOR_SET);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7dd1e65d418b116f6f2bb2e3d4bfc03a">desc_set_textures_odd</a>, DESCRIPTOR_SET);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/dbb/textures_8c.html#a912617d2640c1bb05a0d548cf5bae766">load_blue_noise</a>() != VK_SUCCESS)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">return</span> VK_ERROR_INITIALIZATION_FAILED;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a>();</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2775e8aa851dc8980395b386aa89f08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2775e8aa851dc8980395b386aa89f08">&#9670;&nbsp;</a></span>vkpt_textures_prefetch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_textures_prefetch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00075">75</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">byte</span>* buffer = NULL;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    ssize_t buffer_size = 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">char</span> <span class="keyword">const</span> * filename = <span class="stringliteral">&quot;prefetch.txt&quot;</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    buffer_size = FS_LoadFile(filename, (<span class="keywordtype">void</span>**)&amp;buffer);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (buffer == NULL)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        Com_EPrintf(<span class="stringliteral">&quot;Can&#39;t load &#39;%s&#39;\n&quot;</span>, filename);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">char</span> <span class="keyword">const</span> * ptr = buffer;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">char</span> linebuf[MAX_QPATH];</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d9/d7e/vk__util_8c.html#abea818d497136ea9dea9fe0f6086e647">sgets</a>(linebuf, <span class="keyword">sizeof</span>(linebuf), &amp;ptr))</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordtype">char</span>* line = strtok(linebuf, <span class="stringliteral">&quot; \t\r\n&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">if</span> (!line)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> <span class="keyword">const</span> * img1 = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(line, IT_SKIN, IF_PERMANENT | IF_SRGB);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordtype">char</span> other_name[MAX_QPATH];</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="comment">// attempt loading a matching normal map</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8c/shared_8c.html#a91dc50598bececc7b4064e7b63aef71e">Q_strlcpy</a>(other_name, line, strlen(line) - 3))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a>(other_name, <span class="keyword">sizeof</span>(other_name), other_name, <span class="stringliteral">&quot;_n.tga&quot;</span>, NULL);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(other_name, other_name);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> <span class="keyword">const</span> * img2 = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(other_name, IT_SKIN, IF_PERMANENT);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">/* if (img2 != R_NOTEXTURE)</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">            Com_Printf(&quot;Prefetched &#39;%s&#39; (%d)\n&quot;, other_name, (int)(img2 - r_images)); */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// attempt loading a matching emissive map</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8c/shared_8c.html#a91dc50598bececc7b4064e7b63aef71e">Q_strlcpy</a>(other_name, line, strlen(line) - 3))</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a>(other_name, <span class="keyword">sizeof</span>(other_name), other_name, <span class="stringliteral">&quot;_light.tga&quot;</span>, NULL);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a>(other_name, other_name);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> <span class="keyword">const</span> * img3 = <a class="code" href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a>(other_name, IT_SKIN, IF_PERMANENT | IF_SRGB);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// Com_Printf(&quot;Loaded &#39;%s&#39;\n&quot;, filename);</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    FS_FreeFile(buffer);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab2123d85b2c89033c980ed9d50feaee8">vkpt_initialize_all()</a>.</p>

</div>
</div>
<a id="aa27d53467b9af07282216a93d6f2f729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27d53467b9af07282216a93d6f2f729">&#9670;&nbsp;</a></span>vkpt_textures_update_descriptor_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_textures_update_descriptor_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l01346">1346</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>])</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a>[<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>] = 0;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; MAX_RIMAGES; i++) {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <a class="code" href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a> *q_img = <a class="code" href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a> + i;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        VkImageView image_view = <a class="code" href="../../dd/dbb/textures_8c.html#a64d158160ba40ce5e712294b3fcf6155">tex_image_views</a>[i];</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        <span class="keywordflow">if</span> (image_view == VK_NULL_HANDLE)</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            image_view = <a class="code" href="../../dd/dbb/textures_8c.html#a3b5a892ea60eeca2e0927661680a52eb">tex_invalid_texture_image_view</a>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        VkSampler sampler = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8c3f3ff9e41d6d9cb4be1833b3075ede">tex_sampler</a>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="keywordflow">if</span> (!strcmp(q_img-&gt;name, <span class="stringliteral">&quot;pics/conchars.pcx&quot;</span>) || !strcmp(q_img-&gt;name, <span class="stringliteral">&quot;pics/ch1.pcx&quot;</span>))</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            sampler = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#adbb1ede9315d6460cbdeb923fa7fa794">tex_sampler_nearest</a>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (q_img-&gt;type == IT_SPRITE)</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            sampler = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7d6ba384be74739107017ef3b0263d08">tex_sampler_linear_clamp</a>;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        VkDescriptorImageInfo img_info = {</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            .imageLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            .imageView   = image_view,</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            .sampler     = sampler,</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        };</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <span class="keywordflow">if</span> (i &gt;= VKPT_IMG_BLOOM_HBLUR &amp;&amp;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            i &lt;= VKPT_IMG_BLOOM_VBLUR) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            img_info.sampler = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7d6ba384be74739107017ef3b0263d08">tex_sampler_linear_clamp</a>;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        VkWriteDescriptorSet descriptor_set_write = {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            .dstSet          = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            .dstBinding      = <a class="code" href="../../df/dcb/global__textures_8h.html#a0522ef51adee72be08d716261e2448b5">GLOBAL_TEXTURES_TEX_ARR_BINDING_IDX</a>,</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;            .dstArrayElement = i,</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            .descriptorType  = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            .pImageInfo      = &amp;img_info,</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        };</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160; </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;descriptor_set_write, 0, NULL);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>.</p>

</div>
</div>
<a id="af1fc65cdd72e8bf78ed544c97606eb24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1fc65cdd72e8bf78ed544c97606eb24">&#9670;&nbsp;</a></span>vkpt_textures_upload_envmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_textures_upload_envmap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d8d/wgl_8h.html#a8a0f6e3b0b1aa4aede38b7bdb428ec8b">int</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dbb/textures_8c_source.html#l00150">150</a> of file <a class="el" href="../../dd/dbb/textures_8c_source.html">textures.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    vkDeviceWaitIdle(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a> != VK_NULL_HANDLE) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        vkDestroyImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a>, NULL);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a> = NULL;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a> != VK_NULL_HANDLE) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        vkDestroyImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>, NULL);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a> = NULL;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_images = 6;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">size_t</span> img_size = w * h * 4;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a> buf_img_upload;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;buf_img_upload, img_size * num_images, VK_BUFFER_USAGE_TRANSFER_SRC_BIT,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">byte</span> *envmap = (<span class="keywordtype">byte</span> *) <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(&amp;buf_img_upload);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    memcpy(envmap, data, img_size * num_images);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(&amp;buf_img_upload);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    envmap = NULL;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    VkImageCreateInfo img_info = {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        .sType = VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        .extent = {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            .width  = w,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            .height = h,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            .depth  = 1,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        },</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        .imageType             = VK_IMAGE_TYPE_2D,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        .format                = VK_FORMAT_R8G8B8A8_UNORM,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        .mipLevels             = 1,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        .arrayLayers           = num_images,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        .samples               = VK_SAMPLE_COUNT_1_BIT,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        .tiling                = VK_IMAGE_TILING_OPTIMAL,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        .usage                 = VK_IMAGE_USAGE_STORAGE_BIT</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                               | VK_IMAGE_USAGE_TRANSFER_DST_BIT</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                               | VK_IMAGE_USAGE_SAMPLED_BIT,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        .flags                 = VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        .sharingMode           = VK_SHARING_MODE_EXCLUSIVE,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        .queueFamilyIndexCount = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aead77274a082ebafba7a8ac7ec306b98">queue_idx_graphics</a>,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        .initialLayout         = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    };</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImage(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_info, NULL, &amp;<a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>, IMAGE);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    VkMemoryRequirements mem_req;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    vkGetImageMemoryRequirements(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>, &amp;mem_req);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    assert(mem_req.size &gt;= buf_img_upload.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(<a class="code" href="../../d9/d7e/vk__util_8c.html#ad8c2ae656cad4dae55abbd83892bcd99">allocate_gpu_memory</a>(mem_req, &amp;<a class="code" href="../../dd/dbb/textures_8c.html#aea72a9d504c79601b5371a0e034dc4aa">mem_envmap</a>));</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkBindImageMemory(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>, <a class="code" href="../../dd/dbb/textures_8c.html#aea72a9d504c79601b5371a0e034dc4aa">mem_envmap</a>, 0));</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    VkImageViewCreateInfo img_view_info = {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        .sType      = VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        .viewType   = VK_IMAGE_VIEW_TYPE_CUBE,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        .format     = VK_FORMAT_R8G8B8A8_UNORM,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        .image      = <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        .subresourceRange = {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            .baseMipLevel   = 0,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            .levelCount     = 1,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            .baseArrayLayer = 0,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            .layerCount     = num_images,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        },</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        .components     = {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            VK_COMPONENT_SWIZZLE_R,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            VK_COMPONENT_SWIZZLE_G,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            VK_COMPONENT_SWIZZLE_B,</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            VK_COMPONENT_SWIZZLE_A,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        },</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    };</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateImageView(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;img_view_info, NULL, &amp;<a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a>));</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a>, IMAGE_VIEW);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    VkCommandBuffer cmd_buf = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> layer = 0; layer &lt; num_images; layer++) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        VkImageSubresourceRange subresource_range = {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            .baseMipLevel   = 0,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            .levelCount     = 1,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            .baseArrayLayer = layer,</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            .layerCount     = 1,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        };</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                .image            = <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                .subresourceRange = subresource_range,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                .srcAccessMask    = 0,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                .dstAccessMask    = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                .oldLayout        = VK_IMAGE_LAYOUT_UNDEFINED,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                .newLayout        = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        );</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        VkBufferImageCopy cpy_info = {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            .bufferOffset = img_size * layer,</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            .imageSubresource = { </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                .mipLevel       = 0,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                .baseArrayLayer = layer,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                .layerCount     = 1,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            },</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            .imageOffset    = { 0, 0, 0 },</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            .imageExtent    = { w, h, 1 }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        };</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        vkCmdCopyBufferToImage(cmd_buf, buf_img_upload.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>,</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL, 1, &amp;cpy_info);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                .image            = <a class="code" href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a>,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                .subresourceRange = subresource_range,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                .srcAccessMask    = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                .dstAccessMask    = VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                .oldLayout        = VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                .newLayout        = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        );</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, qtrue);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    VkDescriptorImageInfo desc_img_info = {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        .imageLayout = VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        .imageView   = <a class="code" href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a>,</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        .sampler     = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8c3f3ff9e41d6d9cb4be1833b3075ede">tex_sampler</a>,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    };</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    VkWriteDescriptorSet s = {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        .dstSet          = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ae95c312eedf560c3b4d3b8d141fcfc77">desc_set_textures_even</a>,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        .dstBinding      = <a class="code" href="../../df/dcb/global__textures_8h.html#a25196994ca169733d3dddd49ca1d455e">BINDING_OFFSET_ENVMAP</a>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        .dstArrayElement = 0,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        .descriptorType  = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        .descriptorCount = 1,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        .pImageInfo      = &amp;desc_img_info,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    };</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;s, 0, NULL);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    s.dstSet = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7dd1e65d418b116f6f2bb2e3d4bfc03a">desc_set_textures_odd</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;s, 0, NULL);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    vkQueueWaitIdle(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;buf_img_upload);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#acbf75c55db42b2784e9cb6f06dd747a3">R_SetSky_RTX()</a>.</p>

</div>
</div>
<a id="a8f06a6a7fc657c7089763d27ce833a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f06a6a7fc657c7089763d27ce833a35">&#9670;&nbsp;</a></span>vkpt_tone_mapping_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_tone_mapping_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dad/tone__mapping_8c_source.html#l00146">146</a> of file <a class="el" href="../../d6/dad/tone__mapping_8c_source.html">tone_mapping.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    VkComputePipelineCreateInfo pipeline_info[<a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcea946ed3a1cda69b626d4f042daca20c86">TM_NUM_PIPELINES</a>] = {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        [<a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcead2001d5fce76c3a523383ec1071ff9b4">TONE_MAPPING_HISTOGRAM</a>] = {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_TONE_MAPPING_HISTOGRAM_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            .layout = <a class="code" href="../../d6/dad/tone__mapping_8c.html#ac7ca3a7370c3a2f51140f4d15aaa798f">pipeline_layout_tone_mapping_histogram</a>,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        },</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        [<a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcea64dc5ae2d864dd4b5e0e0d72137426f4">TONE_MAPPING_CURVE</a>] = {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_TONE_MAPPING_CURVE_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            .layout = <a class="code" href="../../d6/dad/tone__mapping_8c.html#a770130e797a9b3a8ae4c7308920c9ee5">pipeline_layout_tone_mapping_curve</a>,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        },</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        [<a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fceaa4b94ffaa6663aedd31a699c14ede56d">TONE_MAPPING_APPLY</a>] = {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_TONE_MAPPING_APPLY_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            .layout = <a class="code" href="../../d6/dad/tone__mapping_8c.html#a18dc21528713260bd87b6a3ba9a73199">pipeline_layout_tone_mapping_apply</a>,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        },</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    };</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateComputePipelines(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(pipeline_info), pipeline_info, 0, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a115b4b6a9644305988574ad23159cbed">pipelines</a>));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d6/dad/tone__mapping_8c.html#a2a8d705cd1b853072596494fb7ae60d5">reset_required</a> = 1;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a68a1eaed590178d27dde0ce32ea610cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68a1eaed590178d27dde0ce32ea610cb">&#9670;&nbsp;</a></span>vkpt_tone_mapping_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_tone_mapping_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dad/tone__mapping_8c_source.html#l00126">126</a> of file <a class="el" href="../../d6/dad/tone__mapping_8c_source.html">tone_mapping.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dad/tone__mapping_8c.html#ac7ca3a7370c3a2f51140f4d15aaa798f">pipeline_layout_tone_mapping_histogram</a>, NULL);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a770130e797a9b3a8ae4c7308920c9ee5">pipeline_layout_tone_mapping_curve</a>, NULL);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a18dc21528713260bd87b6a3ba9a73199">pipeline_layout_tone_mapping_apply</a>, NULL);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c052ba6e0002ec85ff3d6ff29527681"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c052ba6e0002ec85ff3d6ff29527681">&#9670;&nbsp;</a></span>vkpt_tone_mapping_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_tone_mapping_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dad/tone__mapping_8c_source.html#l00207">207</a> of file <a class="el" href="../../d6/dad/tone__mapping_8c_source.html">tone_mapping.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcea946ed3a1cda69b626d4f042daca20c86">TM_NUM_PIPELINES</a>; i++)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a115b4b6a9644305988574ad23159cbed">pipelines</a>[i], NULL);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1f338cec57ae663e8fe2eae2f0251bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1f338cec57ae663e8fe2eae2f0251bf">&#9670;&nbsp;</a></span>vkpt_tone_mapping_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_tone_mapping_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dad/tone__mapping_8c_source.html#l00076">76</a> of file <a class="el" href="../../d6/dad/tone__mapping_8c_source.html">tone_mapping.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    VkDescriptorSetLayout desc_set_layouts[] = {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>, </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">desc_set_layout_textures</a>,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    };</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    VkPushConstantRange push_constant_range_curve = {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        .stageFlags = VK_SHADER_STAGE_COMPUTE_BIT,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        .size = 16*<span class="keyword">sizeof</span>(float)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    };</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    VkPushConstantRange push_constant_range_apply = {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        .stageFlags = VK_SHADER_STAGE_COMPUTE_BIT,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        .size = 3*<span class="keyword">sizeof</span>(float)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    };</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d6/dad/tone__mapping_8c.html#ac7ca3a7370c3a2f51140f4d15aaa798f">pipeline_layout_tone_mapping_histogram</a>,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        .setLayoutCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        .pSetLayouts = desc_set_layouts,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        .pushConstantRangeCount = 0,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        .pPushConstantRanges = NULL</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    );</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d6/dad/tone__mapping_8c.html#ac7ca3a7370c3a2f51140f4d15aaa798f">pipeline_layout_tone_mapping_histogram</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d6/dad/tone__mapping_8c.html#a770130e797a9b3a8ae4c7308920c9ee5">pipeline_layout_tone_mapping_curve</a>,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        .setLayoutCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        .pSetLayouts = desc_set_layouts,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        .pushConstantRangeCount = 1,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        .pPushConstantRanges = &amp;push_constant_range_curve</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d6/dad/tone__mapping_8c.html#a770130e797a9b3a8ae4c7308920c9ee5">pipeline_layout_tone_mapping_curve</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d6/dad/tone__mapping_8c.html#a18dc21528713260bd87b6a3ba9a73199">pipeline_layout_tone_mapping_apply</a>,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        .setLayoutCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        .pSetLayouts = desc_set_layouts,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        .pushConstantRangeCount = 1,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        .pPushConstantRanges = &amp;push_constant_range_apply</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    );</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a>(<a class="code" href="../../d6/dad/tone__mapping_8c.html#a18dc21528713260bd87b6a3ba9a73199">pipeline_layout_tone_mapping_apply</a>, PIPELINE_LAYOUT);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acd17aea9ae80e16e9f2916bbfa54aeeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd17aea9ae80e16e9f2916bbfa54aeeb">&#9670;&nbsp;</a></span>vkpt_tone_mapping_record_cmd_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_tone_mapping_record_cmd_buffer </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>frame_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dad/tone__mapping_8c_source.html#l00241">241</a> of file <a class="el" href="../../d6/dad/tone__mapping_8c_source.html">tone_mapping.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dad/tone__mapping_8c.html#a2a8d705cd1b853072596494fb7ae60d5">reset_required</a>)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment">// Clear the histogram image.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="../../d6/dad/tone__mapping_8c.html#ad07cc107aaa54492a7adcd72b20ba9e5">vkpt_tone_mapping_reset</a>(cmd_buf);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a>(),</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    };</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// Record instructions to run the compute shader that updates the histogram.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a115b4b6a9644305988574ad23159cbed">pipelines</a>[<a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcead2001d5fce76c3a523383ec1071ff9b4">TONE_MAPPING_HISTOGRAM</a>]);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="../../d6/dad/tone__mapping_8c.html#ac7ca3a7370c3a2f51140f4d15aaa798f">pipeline_layout_tone_mapping_histogram</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width + 15) / 16,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + 15) / 16,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        1);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        .size = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        .srcAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        .dstAccessMask = VK_ACCESS_SHADER_READ_BIT</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    );</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Record instructions to run the compute shader that computes the tone</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// curve and autoexposure constants from the histogram.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a115b4b6a9644305988574ad23159cbed">pipelines</a>[<a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcea64dc5ae2d864dd4b5e0e0d72137426f4">TONE_MAPPING_CURVE</a>]);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="../../d6/dad/tone__mapping_8c.html#a770130e797a9b3a8ae4c7308920c9ee5">pipeline_layout_tone_mapping_curve</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Compute the push constants for the tone curve generation shader:</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// whether to ignore previous tone curve results, how much to blend this</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// frame&#39;s tone curve with the previous frame&#39;s tone curve, and the kernel</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// used to filter the tone curve&#39;s slopes.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// This is one of the things we added to Eilertsen&#39;s tone mapper, and helps</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// prevent artifacts that occur when the tone curve&#39;s slopes become flat or</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// change too suddenly (much like when you specify a curve in an image </span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// processing application that is too intense). This especially helps on</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">// shadow edges in some scenes.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// In addition, we assume the kernel is symmetric; this allows us to only</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// specify half of it in our push constant buffer.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Note that the second argument of Cvar_Get only specifies the default</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// value in code if none is set; the value of tm_slope_blur_sigma specified</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// in global_ubo.h will override this.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">float</span> slope_blur_sigma = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;tm_slope_blur_sigma&quot;</span>, <span class="stringliteral">&quot;6.0&quot;</span>, 0)-&gt;value;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">float</span> push_constants_tm2_curve[16] = {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;         <a class="code" href="../../d6/dad/tone__mapping_8c.html#a2a8d705cd1b853072596494fb7ae60d5">reset_required</a> ? 1.0 : 0.0, <span class="comment">// 1 means reset the histogram</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;         frame_time, <span class="comment">// Frame time</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;         0.0, 0.0, 0.0, 0.0, <span class="comment">// Slope kernel filter</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         0.0, 0.0, 0.0, 0.0,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         0.0, 0.0, 0.0, 0.0,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         0.0, 0.0</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    };</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Compute Gaussian curve and sum, taking symmetry into account.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">float</span> gaussian_sum = 0.0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 14; ++i)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordtype">float</span> kernel_value = exp(-i * i / (2.0 * slope_blur_sigma * slope_blur_sigma));</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        gaussian_sum += kernel_value * (i == 0 ? 1 : 2);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        push_constants_tm2_curve[i + 2] = kernel_value;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// Normalize the result (since even with an analytic normalization factor,</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// the results may not sum to one).</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 14; ++i) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        push_constants_tm2_curve[i + 2] /= gaussian_sum;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    vkCmdPushConstants(cmd_buf, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a770130e797a9b3a8ae4c7308920c9ee5">pipeline_layout_tone_mapping_curve</a>,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        VK_SHADER_STAGE_COMPUTE_BIT, 0, <span class="keyword">sizeof</span>(push_constants_tm2_curve), push_constants_tm2_curve);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    vkCmdDispatch(cmd_buf, 1, 1, 1);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        .size = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        .srcAccessMask = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        .dstAccessMask = VK_ACCESS_SHADER_READ_BIT</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    );</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Record instructions to apply our tone curve to the final image, apply</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// the autoexposure tone mapper to the final image, and blend the results</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// of the two techniques.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a115b4b6a9644305988574ad23159cbed">pipelines</a>[<a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fceaa4b94ffaa6663aedd31a699c14ede56d">TONE_MAPPING_APPLY</a>]);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="../../d6/dad/tone__mapping_8c.html#a18dc21528713260bd87b6a3ba9a73199">pipeline_layout_tone_mapping_apply</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// At the end of the hue-preserving tone mapper, the luminance of every</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// pixel is mapped to the range [0,1]. However, because this tone</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// mapper adjusts luminance while preserving hue and saturation, the values</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// of some RGB channels may lie outside [0,1]. To finish off the tone</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// mapping pipeline and since we want the brightest colors in the scene to</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// be desaturated a bit for display, we apply a subtle user-configurable</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// Reinhard tone mapping curve to the brighest values in the image at this</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// point, preserving pixels with luminance below tm_knee_start.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// If we wanted to support an arbitrary SDR color grading pipeline here or</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// implement an additional filmic tone mapping pass, for instance, this is</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// roughly around where it would be applied. For applications that need to</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// output both SDR and HDR images but for which creating custom grades</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// for each format is impractical, one common approach is to</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// (roughly) use the HDR-&gt;SDR transformation to map an SDR color grading</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// function back to an HDR color grading function.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// Defines the white point and where we switch from an identity transform</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// to a Reinhard transform in the additional tone mapper we apply at the</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// end of the previous tone mapping pipeline.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// Must be between 0 and 1; pixels with luminances above this value have</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// their RGB values slowly clamped to 1, up to tm_white_point.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">float</span> knee_start = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;tm_knee_start&quot;</span>, <span class="stringliteral">&quot;0.9&quot;</span>, 0)-&gt;value;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// Should be greater than 1; defines those RGB values that get mapped to 1.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">float</span> knee_white_point = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;tm_white_point&quot;</span>, <span class="stringliteral">&quot;10.0&quot;</span>, 0)-&gt;value;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// We modify Reinhard to smoothly blend with the identity transform up to tm_knee_start.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// We need to find w, a, and b such that in y(x) = (wx+a)/(x+b),</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// * y(knee_start) = tm_knee_start</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// * dy/dx(knee_start) = 1</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// * y(knee_white_point) = tm_white_point.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// The solution is as follows:</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordtype">float</span> knee_w = (knee_start*(knee_start - 2.0) + knee_white_point) / (knee_white_point - 1.0);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordtype">float</span> knee_a = -knee_start * knee_start;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">float</span> knee_b = knee_w - 2.0*knee_start;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">float</span> push_constants_tm2_apply[3] = {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        knee_w, <span class="comment">// knee_w in piecewise knee adjustment</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        knee_a, <span class="comment">// knee_a in piecewise knee adjustment</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        knee_b, <span class="comment">// knee_b in piecewise knee adjustment</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    };</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    vkCmdPushConstants(cmd_buf, <a class="code" href="../../d6/dad/tone__mapping_8c.html#a18dc21528713260bd87b6a3ba9a73199">pipeline_layout_tone_mapping_apply</a>,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        VK_SHADER_STAGE_COMPUTE_BIT, 0, <span class="keyword">sizeof</span>(push_constants_tm2_apply), push_constants_tm2_apply);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    vkCmdDispatch(cmd_buf,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.width + 15) / 16,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">extent_render</a>.height + 15) / 16,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        1);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// Because VKPT_IMG_TAA_OUTPUT changed, we make sure to wait for the image</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// to be written before continuing. This could be ensured in several</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// other ways as well.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="../../d6/dad/tone__mapping_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">images</a>[VKPT_IMG_TAA_OUTPUT]);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="../../d6/dad/tone__mapping_8c.html#a2a8d705cd1b853072596494fb7ae60d5">reset_required</a> = 0;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="aefb32ea00c9c6eb2df5efe6bac2250a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefb32ea00c9c6eb2df5efe6bac2250a9">&#9670;&nbsp;</a></span>vkpt_tone_mapping_request_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_tone_mapping_request_reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dad/tone__mapping_8c_source.html#l00138">138</a> of file <a class="el" href="../../d6/dad/tone__mapping_8c_source.html">tone_mapping.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d6/dad/tone__mapping_8c.html#a2a8d705cd1b853072596494fb7ae60d5">reset_required</a> = 1;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="ad07cc107aaa54492a7adcd72b20ba9e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad07cc107aaa54492a7adcd72b20ba9e5">&#9670;&nbsp;</a></span>vkpt_tone_mapping_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_tone_mapping_reset </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dad/tone__mapping_8c_source.html#l00176">176</a> of file <a class="el" href="../../d6/dad/tone__mapping_8c_source.html">tone_mapping.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    VkClearColorValue clear_histogram = {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        .uint32 = { 0, 0, 0, 0 }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    };</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        .size = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        .srcAccessMask = 0,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        .dstAccessMask = 0</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    );</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    vkCmdFillBuffer(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        0, VK_WHOLE_SIZE, 0);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        .size = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        .srcAccessMask = 0,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        .dstAccessMask = VK_ACCESS_SHADER_WRITE_BIT</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/dc6/vkpt_8h.html#acd17aea9ae80e16e9f2916bbfa54aeeb">vkpt_tone_mapping_record_cmd_buffer()</a>.</p>

</div>
</div>
<a id="ace535f6f7271f59469fc3fb8c87e8373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace535f6f7271f59469fc3fb8c87e8373">&#9670;&nbsp;</a></span>vkpt_uniform_buffer_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_uniform_buffer_create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d22/uniform__buffer_8c_source.html#l00030">30</a> of file <a class="el" href="../../dd/d22/uniform__buffer_8c_source.html">uniform_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    VkDescriptorSetLayoutBinding ubo_layout_bindings[2] = { 0 };</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    ubo_layout_bindings[0].descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    ubo_layout_bindings[0].descriptorCount  = 1;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    ubo_layout_bindings[0].binding  = <a class="code" href="../../dd/dc3/global__ubo_8h.html#a75db9a8f9789bce657c8199fb42f058b">GLOBAL_UBO_BINDING_IDX</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    ubo_layout_bindings[0].stageFlags  = VK_SHADER_STAGE_ALL;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    ubo_layout_bindings[1].descriptorType  = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    ubo_layout_bindings[1].descriptorCount  = 1;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    ubo_layout_bindings[1].binding  = <a class="code" href="../../dd/dc3/global__ubo_8h.html#a88d6c57c03536c2619b19d569dcc7362">GLOBAL_INSTANCE_BUFFER_BINDING_IDX</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    ubo_layout_bindings[1].stageFlags  = VK_SHADER_STAGE_ALL;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    VkDescriptorSetLayoutCreateInfo layout_info = {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        .sType        = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        .bindingCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(ubo_layout_bindings),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        .pBindings    = ubo_layout_bindings,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    };</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;layout_info, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>));</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">const</span> VkMemoryPropertyFlags host_memory_flags = VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_CACHED_BIT |</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        VK_MEMORY_PROPERTY_HOST_COHERENT_BIT;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">const</span> VkMemoryPropertyFlags device_memory_flags = VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    VkPhysicalDeviceProperties properties;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    vkGetPhysicalDeviceProperties(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#acb9a5f5745cc88f7cb7915301d43635a">physical_device</a>, &amp;properties);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../dd/d22/uniform__buffer_8c.html#ad9345dc15cdce6e1defc4d2c801147d1">ubo_alignment</a> = properties.limits.minUniformBufferOffsetAlignment;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> buffer_size = <a class="code" href="../../db/d74/vk__util_8h.html#a6d5d99cbe4eae95d7010aa1062847105">align</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/ded/struct_q_v_k_uniform_buffer__s.html">QVKUniformBuffer_t</a>), <a class="code" href="../../dd/d22/uniform__buffer_8c.html#ad9345dc15cdce6e1defc4d2c801147d1">ubo_alignment</a>) + <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dc3/global__ubo_8h.html#a979019dadcb6525c9b4ed04e49549859">QVKInstanceBuffer_t</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(<a class="code" href="../../dd/d22/uniform__buffer_8c.html#ae4dec735a8fa4784787de6d3b024d6b2">host_uniform_buffers</a> + i, buffer_size, VK_BUFFER_USAGE_TRANSFER_SRC_BIT, host_memory_flags);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../dd/d22/uniform__buffer_8c.html#a4901f50113921a1f8505d93c3e20c997">device_uniform_buffer</a>, buffer_size, VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT | VK_BUFFER_USAGE_STORAGE_BUFFER_BIT | VK_BUFFER_USAGE_TRANSFER_DST_BIT,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        device_memory_flags);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    VkDescriptorPoolSize pool_size = {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        .type            = VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        .descriptorCount = <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    };</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    VkDescriptorPoolCreateInfo pool_info = {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        .sType         = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        .poolSizeCount = 1,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        .pPoolSizes    = &amp;pool_size,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        .maxSets       = <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    };</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;pool_info, NULL, &amp;<a class="code" href="../../dd/d22/uniform__buffer_8c.html#a351f76da2e6e8a958bc83245f8b14bce">desc_pool_ubo</a>));</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    VkDescriptorSetAllocateInfo descriptor_set_alloc_info = {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        .sType = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        .descriptorPool = <a class="code" href="../../dd/d22/uniform__buffer_8c.html#a351f76da2e6e8a958bc83245f8b14bce">desc_pool_ubo</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        .descriptorSetCount = 1,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        .pSetLayouts = &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    };</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkAllocateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;descriptor_set_alloc_info, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    VkDescriptorBufferInfo buf_info = {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        .buffer = <a class="code" href="../../dd/d22/uniform__buffer_8c.html#a4901f50113921a1f8505d93c3e20c997">device_uniform_buffer</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        .range  = <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dc3/global__ubo_8h.html#a5692793c470dd4b97353d7ddab0edde8">QVKUniformBuffer_t</a>),</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    };</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    VkDescriptorBufferInfo buf1_info = {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        .buffer = <a class="code" href="../../dd/d22/uniform__buffer_8c.html#a4901f50113921a1f8505d93c3e20c997">device_uniform_buffer</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        .offset = <a class="code" href="../../db/d74/vk__util_8h.html#a6d5d99cbe4eae95d7010aa1062847105">align</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/ded/struct_q_v_k_uniform_buffer__s.html">QVKUniformBuffer_t</a>), <a class="code" href="../../dd/d22/uniform__buffer_8c.html#ad9345dc15cdce6e1defc4d2c801147d1">ubo_alignment</a>),</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        .range  = <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dc3/global__ubo_8h.html#a979019dadcb6525c9b4ed04e49549859">QVKInstanceBuffer_t</a>),</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    };</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    VkWriteDescriptorSet writes[2] = { 0 };</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    writes[0].sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    writes[0].dstSet          = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    writes[0].dstBinding      = <a class="code" href="../../dd/dc3/global__ubo_8h.html#a75db9a8f9789bce657c8199fb42f058b">GLOBAL_UBO_BINDING_IDX</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    writes[0].dstArrayElement = 0,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    writes[0].descriptorType  = VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    writes[0].descriptorCount = 1,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    writes[0].pBufferInfo     = &amp;buf_info,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    writes[1].sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    writes[1].dstSet          = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    writes[1].dstBinding      = <a class="code" href="../../dd/dc3/global__ubo_8h.html#a88d6c57c03536c2619b19d569dcc7362">GLOBAL_INSTANCE_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    writes[1].dstArrayElement = 0,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    writes[1].descriptorType  = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    writes[1].descriptorCount = 1,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    writes[1].pBufferInfo     = &amp;buf1_info,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(writes), writes, 0, NULL);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a24be3cc9e2377438fa950efe8ecc3b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24be3cc9e2377438fa950efe8ecc3b5f">&#9670;&nbsp;</a></span>vkpt_uniform_buffer_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_uniform_buffer_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d22/uniform__buffer_8c_source.html#l00127">127</a> of file <a class="el" href="../../dd/d22/uniform__buffer_8c_source.html">uniform_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    vkDestroyDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../dd/d22/uniform__buffer_8c.html#a351f76da2e6e8a958bc83245f8b14bce">desc_pool_ubo</a>, NULL);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    vkDestroyDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>, NULL);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../dd/d22/uniform__buffer_8c.html#a351f76da2e6e8a958bc83245f8b14bce">desc_pool_ubo</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; i++)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(<a class="code" href="../../dd/d22/uniform__buffer_8c.html#ae4dec735a8fa4784787de6d3b024d6b2">host_uniform_buffers</a> + i);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../dd/d22/uniform__buffer_8c.html#a4901f50113921a1f8505d93c3e20c997">device_uniform_buffer</a>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9705d9ffca9ae933fb91b2f61030bfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9705d9ffca9ae933fb91b2f61030bfc">&#9670;&nbsp;</a></span>vkpt_uniform_buffer_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_uniform_buffer_update </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>command_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d22/uniform__buffer_8c_source.html#l00142">142</a> of file <a class="el" href="../../dd/d22/uniform__buffer_8c_source.html">uniform_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_t</a> *ubo = <a class="code" href="../../dd/d22/uniform__buffer_8c.html#ae4dec735a8fa4784787de6d3b024d6b2">host_uniform_buffers</a> + <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    assert(ubo);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    assert(ubo-&gt;<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#af6bd4dda5b49c3ea18d01c1d5fc5bf68">memory</a> != VK_NULL_HANDLE);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    assert(ubo-&gt;<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a> != VK_NULL_HANDLE);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    assert(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">current_frame_index</a> &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../d2/ded/struct_q_v_k_uniform_buffer__s.html">QVKUniformBuffer_t</a> *mapped_ubo = <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(ubo);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    assert(mapped_ubo);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    memcpy(mapped_ubo, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#ada1b2d90edfc1074ff5d96ab33f0c689">uniform_buffer</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/ded/struct_q_v_k_uniform_buffer__s.html">QVKUniformBuffer_t</a>));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> offset = <a class="code" href="../../db/d74/vk__util_8h.html#a6d5d99cbe4eae95d7010aa1062847105">align</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/ded/struct_q_v_k_uniform_buffer__s.html">QVKUniformBuffer_t</a>), <a class="code" href="../../dd/d22/uniform__buffer_8c.html#ad9345dc15cdce6e1defc4d2c801147d1">ubo_alignment</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    memcpy((uint8_t*)mapped_ubo + offset, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#ae98dab290cc044b9a4b8118484d1b3a0">uniform_instance_buffer</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d36/struct_q_v_k_instance_buffer__s.html">QVKInstanceBuffer_t</a>));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(ubo);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    mapped_ubo = NULL;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    VkBufferCopy copy = { 0 };</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    copy.size = <a class="code" href="../../db/d74/vk__util_8h.html#a6d5d99cbe4eae95d7010aa1062847105">align</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/ded/struct_q_v_k_uniform_buffer__s.html">QVKUniformBuffer_t</a>), <a class="code" href="../../dd/d22/uniform__buffer_8c.html#ad9345dc15cdce6e1defc4d2c801147d1">ubo_alignment</a>) + <span class="keyword">sizeof</span>(<a class="code" href="../../dd/dc3/global__ubo_8h.html#a979019dadcb6525c9b4ed04e49549859">QVKInstanceBuffer_t</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    vkCmdCopyBuffer(command_buffer, ubo-&gt;<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, <a class="code" href="../../dd/d22/uniform__buffer_8c.html#a4901f50113921a1f8505d93c3e20c997">device_uniform_buffer</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 1, &amp;copy);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    VkBufferMemoryBarrier barrier = {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        .sType = VK_STRUCTURE_TYPE_BUFFER_MEMORY_BARRIER,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        .srcAccessMask = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        .dstAccessMask = VK_ACCESS_UNIFORM_READ_BIT | VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        .srcQueueFamilyIndex = VK_QUEUE_FAMILY_IGNORED,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        .dstQueueFamilyIndex = VK_QUEUE_FAMILY_IGNORED,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        .buffer = <a class="code" href="../../dd/d22/uniform__buffer_8c.html#a4901f50113921a1f8505d93c3e20c997">device_uniform_buffer</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        .size = copy.size</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    };</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    vkCmdPipelineBarrier(command_buffer, VK_PIPELINE_STAGE_TRANSFER_BIT, VK_PIPELINE_STAGE_COMPUTE_SHADER_BIT,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        0, 0, NULL, 1, &amp;barrier, 0, NULL);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a520ce9a40997c27284f2fdac0b171f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a520ce9a40997c27284f2fdac0b171f17">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00492">492</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    VkDescriptorSetLayoutBinding vbo_layout_bindings[] = {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            .binding = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a993c8631d8077d2a933868e5b69ad6a5">VERTEX_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        },</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            .binding = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#adc424cc75fe92902fff5bc22d746c6f1">LIGHT_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        },</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            .binding = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#acb2492985734040ed8503afa0261855f">READBACK_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        },</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            .binding = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#aeaf42176f2a55503538eb900345a4e06">TONE_MAPPING_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        },</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            .binding = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a2a8b93156bfb61ff0f40379cdcbfc718">SUN_COLOR_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        },</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            .descriptorCount = 1,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            .binding = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a86432e50a0963b61c6e6a9efbe57ab74">SUN_COLOR_UBO_BINDING_IDX</a>,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        },</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            .descriptorType = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            .descriptorCount = 3,</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            .binding = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a708880c3664efcca2183b16cf2f57cce">LIGHT_STATS_BUFFER_BINDING_IDX</a>,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            .stageFlags = VK_SHADER_STAGE_ALL,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    };</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    VkDescriptorSetLayoutCreateInfo layout_info = {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        .sType        = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        .bindingCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(vbo_layout_bindings),</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        .pBindings    = vbo_layout_bindings,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    };</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;layout_info, NULL, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a>));</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment">// Com_Printf(&quot;allocating %.02f MB of memory for vertex buffer\n&quot;, (double) sizeof(VertexBuffer) / (1024.0 * 1024.0));</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>),</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        VK_BUFFER_USAGE_TRANSFER_DST_BIT | VK_BUFFER_USAGE_STORAGE_BUFFER_BIT | VK_BUFFER_USAGE_VERTEX_BUFFER_BIT,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">// Com_Printf(&quot;allocating %.02f MB of memory for staging vertex buffer\n&quot;, (double) sizeof(VertexBuffer) / (1024.0 * 1024.0));</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">buf_vertex_staging</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a>),</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        VK_BUFFER_USAGE_TRANSFER_SRC_BIT,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a104d13278d6f70f380c091502abdaba4">buf_light</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/dce/struct_light_buffer.html">LightBuffer</a>),</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        VK_BUFFER_USAGE_TRANSFER_DST_BIT | VK_BUFFER_USAGE_STORAGE_BUFFER_BIT,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; frame++)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a56804afd1c570ec99c3bf7c41cc18448">buf_light_staging</a> + frame, <span class="keyword">sizeof</span>(<a class="code" href="../../de/dce/struct_light_buffer.html">LightBuffer</a>),</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            VK_BUFFER_USAGE_TRANSFER_SRC_BIT,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7b10c322800fbf3b96e5e1b6eb9c0b65">buf_readback</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d67/struct_readback_buffer.html">ReadbackBuffer</a>),</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        VK_BUFFER_USAGE_TRANSFER_SRC_BIT | VK_BUFFER_USAGE_STORAGE_BUFFER_BIT,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../df/db4/struct_tone_mapping_buffer.html">ToneMappingBuffer</a>),</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        VK_BUFFER_USAGE_TRANSFER_DST_BIT | VK_BUFFER_USAGE_STORAGE_BUFFER_BIT,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a17d406b62a66c7aa3fd95c3d874ed99e">buf_sun_color</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/dc0/struct_sun_color_buffer.html">SunColorBuffer</a>),</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        VK_BUFFER_USAGE_TRANSFER_DST_BIT | VK_BUFFER_USAGE_STORAGE_BUFFER_BIT | VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; frame++)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1b5c5104e30e472bc3e70a3f7fc7effb">buf_readback_staging</a> + frame, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d67/struct_readback_buffer.html">ReadbackBuffer</a>),</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            VK_BUFFER_USAGE_TRANSFER_DST_BIT,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    VkDescriptorPoolSize pool_size = {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        .type            = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        .descriptorCount = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(vbo_layout_bindings),</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    };</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    VkDescriptorPoolCreateInfo pool_info = {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        .sType         = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        .poolSizeCount = 1,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        .pPoolSizes    = &amp;pool_size,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        .maxSets       = 1,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    };</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;pool_info, NULL, &amp;<a class="code" href="../../d8/d51/vertex__buffer_8c.html#aedff8b499477c22ed20b50732dd09610">desc_pool_vertex_buffer</a>));</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    VkDescriptorSetAllocateInfo descriptor_set_alloc_info = {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        .sType              = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        .descriptorPool     = <a class="code" href="../../d8/d51/vertex__buffer_8c.html#aedff8b499477c22ed20b50732dd09610">desc_pool_vertex_buffer</a>,</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        .descriptorSetCount = 1,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        .pSetLayouts        = &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a>,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    };</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkAllocateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;descriptor_set_alloc_info, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a>));</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    VkDescriptorBufferInfo buf_info = {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        .range  = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#ae843c484249a0656d27595e8ea250f5d">VertexBuffer</a>),</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    };</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    VkWriteDescriptorSet output_buf_write = {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        .sType           = VK_STRUCTURE_TYPE_WRITE_DESCRIPTOR_SET,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        .dstSet          = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a>,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        .dstBinding      = 0,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        .dstArrayElement = 0,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        .descriptorType  = VK_DESCRIPTOR_TYPE_STORAGE_BUFFER,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        .descriptorCount = 1,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        .pBufferInfo     = &amp;buf_info,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    };</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    output_buf_write.dstBinding = 1;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    buf_info.buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a104d13278d6f70f380c091502abdaba4">buf_light</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    buf_info.range = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#abbd03be6da2ffcf36826b06da7f171a0">LightBuffer</a>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    output_buf_write.dstBinding = 2;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    buf_info.buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7b10c322800fbf3b96e5e1b6eb9c0b65">buf_readback</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    buf_info.range = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#ae7a8435d3c882a06066c7d6cadcba60a">ReadbackBuffer</a>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    output_buf_write.dstBinding = 3;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    buf_info.buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    buf_info.range = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#abbabe8104e530a84a8107abad44fc79a">ToneMappingBuffer</a>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    output_buf_write.dstBinding = 4;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    buf_info.buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a17d406b62a66c7aa3fd95c3d874ed99e">buf_sun_color</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    buf_info.range = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a3cd52340bef869b038f8353202920199">SunColorBuffer</a>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    output_buf_write.dstBinding = 5;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    output_buf_write.descriptorType = VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    buf_info.buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a17d406b62a66c7aa3fd95c3d874ed99e">buf_sun_color</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    buf_info.range = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a3cd52340bef869b038f8353202920199">SunColorBuffer</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    vkUpdateDescriptorSets(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;output_buf_write, 0, NULL);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3683b400858cf99977dfef315629eb38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3683b400858cf99977dfef315629eb38">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_create_instance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_create_instance </td>
          <td>(</td>
          <td class="paramtype">VkCommandBuffer&#160;</td>
          <td class="paramname"><em>cmd_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_instances</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qboolean&#160;</td>
          <td class="paramname"><em>update_world_animations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00818">818</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;{</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    VkDescriptorSet desc_sets[] = {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">desc_set_ubo</a>,</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">desc_set_vertex_buffer</a></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    };</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d8/d51/vertex__buffer_8c.html#ac833f20026e98603aafdb72f580cafe0">pipeline_instance_geometry</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    vkCmdBindDescriptorSets(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_sets), desc_sets, 0, 0);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    vkCmdDispatch(cmd_buf, num_instances, 1, 1);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">if</span> (update_world_animations)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        vkCmdBindPipeline(cmd_buf, VK_PIPELINE_BIND_POINT_COMPUTE, <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a0244fb4395f567fe80d8a8c08f7a8fe7">pipeline_animate_materials</a>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordtype">int</span> num_groups = (((<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a7aeeecbc1e866618627d3cb8a89af586">bsp_mesh_world</a>.<a class="code" href="../../db/d50/structbsp__mesh__s.html#a07fd2502d3bf0dde33994b3cea0d7628">world_idx_count</a> + <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a>.<a class="code" href="../../d1/dbe/structvkpt__refdef__s.html#a7aeeecbc1e866618627d3cb8a89af586">bsp_mesh_world</a>.<a class="code" href="../../db/d50/structbsp__mesh__s.html#a2e7e5a4fa97e204266620f9107f06c3b">world_transparent_count</a>) / 3) + 255) / 256;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        vkCmdDispatch(cmd_buf, num_groups, 1, 1);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    VkBufferMemoryBarrier barrier = {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        .sType               = VK_STRUCTURE_TYPE_BUFFER_MEMORY_BARRIER,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        .srcAccessMask       = VK_ACCESS_SHADER_WRITE_BIT,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        .dstAccessMask       = VK_ACCESS_SHADER_READ_BIT,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        .buffer              = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        .size                = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        .srcQueueFamilyIndex = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aead77274a082ebafba7a8ac7ec306b98">queue_idx_graphics</a>,</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        .dstQueueFamilyIndex = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aead77274a082ebafba7a8ac7ec306b98">queue_idx_graphics</a></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    };</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    vkCmdPipelineBarrier(</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            cmd_buf,</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            VK_PIPELINE_STAGE_COMPUTE_SHADER_BIT,</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            VK_PIPELINE_STAGE_COMPUTE_SHADER_BIT,</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            0,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            0, NULL,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            1, &amp;barrier,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            0, NULL);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>.</p>

</div>
</div>
<a id="a66d5f714c9677c2ce5103e7e3cc7bd6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66d5f714c9677c2ce5103e7e3cc7bd6c">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_create_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_create_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00759">759</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    assert(!<a class="code" href="../../d8/d51/vertex__buffer_8c.html#ac833f20026e98603aafdb72f580cafe0">pipeline_instance_geometry</a>);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    assert(!<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a0244fb4395f567fe80d8a8c08f7a8fe7">pipeline_animate_materials</a>);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    assert(!<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    assert(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    assert(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a>); </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    VkDescriptorSetLayout desc_set_layouts[] = {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">desc_set_layout_ubo</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    };</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, &amp;<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a>, </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        .setLayoutCount         = <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(desc_set_layouts),</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        .pSetLayouts            = desc_set_layouts,</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    );</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    VkComputePipelineCreateInfo compute_pipeline_info[] = {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_INSTANCE_GEOMETRY_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            .layout = <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        },</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            .sType = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            .stage = <a class="code" href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a>(QVK_MOD_ANIMATE_MATERIALS_COMP, VK_SHADER_STAGE_COMPUTE_BIT),</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            .layout = <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        },</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    };</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    VkPipeline <a class="code" href="../../d1/dc7/god__rays_8c.html#a65dd38449565cd3c429fa65766590c4c">pipelines</a>[2];</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <a class="code" href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a>(vkCreateComputePipelines(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 0, <a class="code" href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(compute_pipeline_info), compute_pipeline_info, 0, <a class="code" href="../../d1/dc7/god__rays_8c.html#a65dd38449565cd3c429fa65766590c4c">pipelines</a>));</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#ac833f20026e98603aafdb72f580cafe0">pipeline_instance_geometry</a> = <a class="code" href="../../d1/dc7/god__rays_8c.html#a65dd38449565cd3c429fa65766590c4c">pipelines</a>[0];</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a0244fb4395f567fe80d8a8c08f7a8fe7">pipeline_animate_materials</a> = <a class="code" href="../../d1/dc7/god__rays_8c.html#a65dd38449565cd3c429fa65766590c4c">pipelines</a>[1];</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ca9e840c841cdef453b1acd80351620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ca9e840c841cdef453b1acd80351620">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00675">675</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    vkDestroyDescriptorPool(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d8/d51/vertex__buffer_8c.html#aedff8b499477c22ed20b50732dd09610">desc_pool_vertex_buffer</a>, NULL);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    vkDestroyDescriptorSetLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a>, NULL);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#aedff8b499477c22ed20b50732dd09610">desc_pool_vertex_buffer</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">desc_set_layout_vertex_buffer</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">buf_vertex_staging</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a104d13278d6f70f380c091502abdaba4">buf_light</a>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a7b10c322800fbf3b96e5e1b6eb9c0b65">buf_readback</a>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; <a class="code" href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a>; frame++)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a56804afd1c570ec99c3bf7c41cc18448">buf_light_staging</a> + frame);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a1b5c5104e30e472bc3e70a3f7fc7effb">buf_readback_staging</a> + frame);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">buf_tonemap</a>);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a17d406b62a66c7aa3fd95c3d874ed99e">buf_sun_color</a>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bcec178775f32671c9051376d094bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bcec178775f32671c9051376d094bcb">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_destroy_pipelines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_destroy_pipelines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00800">800</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;{</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    assert(<a class="code" href="../../d8/d51/vertex__buffer_8c.html#ac833f20026e98603aafdb72f580cafe0">pipeline_instance_geometry</a>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    assert(<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a0244fb4395f567fe80d8a8c08f7a8fe7">pipeline_animate_materials</a>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    assert(<a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d8/d51/vertex__buffer_8c.html#ac833f20026e98603aafdb72f580cafe0">pipeline_instance_geometry</a>, NULL);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    vkDestroyPipeline(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a0244fb4395f567fe80d8a8c08f7a8fe7">pipeline_animate_materials</a>, NULL);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a>, NULL);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#ac833f20026e98603aafdb72f580cafe0">pipeline_instance_geometry</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a0244fb4395f567fe80d8a8c08f7a8fe7">pipeline_animate_materials</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a> = VK_NULL_HANDLE;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a01b5224a58a2363dddc18a6bab0159d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01b5224a58a2363dddc18a6bab0159d8">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_upload_bsp_mesh_to_staging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_upload_bsp_mesh_to_staging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#a3409d334dedfd1f14090a9159e15e6b6">bsp_mesh_t</a> *&#160;</td>
          <td class="paramname"><em>bsp_mesh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00090">90</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    assert(bsp_mesh);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a> *vbo = (<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a> *) <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">buf_vertex_staging</a>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    assert(vbo);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">int</span> num_vertices = bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#aa1ef9d907d695e7cb333a7fae79a19a1">num_vertices</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (num_vertices &gt; <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a>)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        assert(!<span class="stringliteral">&quot;Vertex buffer overflow&quot;</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        num_vertices = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    memcpy(vbo-&gt;positions_bsp,  bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a576969c1fc26fc521921c54dc67df01e">positions</a>, num_vertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3   );</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    memcpy(vbo-&gt;tex_coords_bsp, bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ad6c2d7a20fc4ca025f9cc3e0f88c94d6">tex_coords</a>,num_vertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2   );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    memcpy(vbo-&gt;tangents_bsp,   bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a8a350aba9ef172a175054fc2c2b0063d">tangents</a>,  num_vertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    memcpy(vbo-&gt;materials_bsp,  bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#ade37a58abe3ddf61ac024d666dec3638">materials</a>, num_vertices * <span class="keyword">sizeof</span>(uint32_t) / 3);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    memcpy(vbo-&gt;clusters_bsp, bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a673610a720ad405ec3d60647c5db94f3">clusters</a>, num_vertices * <span class="keyword">sizeof</span>(uint32_t) / 3);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    memcpy(vbo-&gt;texel_density_bsp, bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af9a2795a6ef738706942d30fdfd8fea5">texel_density</a>, num_vertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) / 3);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">int</span> num_clusters = bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">num_clusters</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (num_clusters &gt; <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a393cfcb10f6ffd3ad71a834f35eb025c">MAX_LIGHT_LISTS</a>)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        assert(!<span class="stringliteral">&quot;Visibility buffer overflow&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        num_clusters = <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#a393cfcb10f6ffd3ad71a834f35eb025c">MAX_LIGHT_LISTS</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    memcpy(vbo-&gt;sky_visibility, bsp_mesh-&gt;<a class="code" href="../../db/d50/structbsp__mesh__s.html#a5480ed91e8ea233634d7d60212cb4423">sky_visibility</a>, (num_clusters + 7) / 8);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">buf_vertex_staging</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    vbo = NULL;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="ab4d13a4e050ceb12bdbb4f6d70a51d97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4d13a4e050ceb12bdbb4f6d70a51d97">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_upload_models_to_staging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_upload_models_to_staging </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00412">412</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a> *vbo = (<a class="code" href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a> *) <a class="code" href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">buf_vertex_staging</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    assert(vbo);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">int</span> idx_offset = 0;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordtype">int</span> vertex_offset = 0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; MAX_MODELS; i++) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="../../d0/deb/models_8c.html#a2f3844b4fe731b7672cf514b6a48af73">r_models</a>[i].meshes) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nmesh = 0; nmesh &lt; <a class="code" href="../../d0/deb/models_8c.html#a2f3844b4fe731b7672cf514b6a48af73">r_models</a>[i].nummeshes; nmesh++)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <a class="code" href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_t</a> *<a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a> = <a class="code" href="../../d0/deb/models_8c.html#a2f3844b4fe731b7672cf514b6a48af73">r_models</a>[i].meshes + nmesh;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;idx_offset = idx_offset;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;vertex_offset = vertex_offset;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            assert(<a class="code" href="../../d0/deb/models_8c.html#a2f3844b4fe731b7672cf514b6a48af73">r_models</a>[i].numframes &gt; 0);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordtype">int</span> num_verts = <a class="code" href="../../d0/deb/models_8c.html#a2f3844b4fe731b7672cf514b6a48af73">r_models</a>[i].numframes * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;numverts;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            assert(num_verts &gt; 0);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; num_verts; j++)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                Com_Printf(<span class="stringliteral">&quot;%f %f %f\n&quot;</span>,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;positions[j][0],</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;positions[j][1],</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;positions[j][2]);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;numtris; j++)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                Com_Printf(<span class="stringliteral">&quot;%d %d %d\n&quot;</span>,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;indices[j * 3 + 0],</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;indices[j * 3 + 1],</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;indices[j * 3 + 2]);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordtype">char</span> buf[1024];</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            snprintf(buf, <span class="keyword">sizeof</span> buf, <span class="stringliteral">&quot;model_%04d.obj&quot;</span>, i);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            FILE *f = fopen(buf, <span class="stringliteral">&quot;wb+&quot;</span>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            assert(f);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;numverts; j++) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                fprintf(f, <span class="stringliteral">&quot;v %f %f %f\n&quot;</span>,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;positions[j][0],</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;positions[j][1],</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;positions[j][2]);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;numindices / 3; j++) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                fprintf(f, <span class="stringliteral">&quot;f %d %d %d\n&quot;</span>,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;indices[j * 3 + 0] + 1,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;indices[j * 3 + 1] + 1,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                    <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;indices[j * 3 + 2] + 1);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            fclose(f);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            memcpy(vbo-&gt;positions_model + vertex_offset * 3, <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;positions, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3 * num_verts);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            memcpy(vbo-&gt;normals_model + vertex_offset * 3, <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;normals, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 3 * num_verts);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            memcpy(vbo-&gt;tex_coords_model + vertex_offset * 2, <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;tex_coords, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 2 * num_verts);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            memcpy(vbo-&gt;tangents_model + vertex_offset * 4, <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;tangents, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 4 * num_verts);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            memcpy(vbo-&gt;idx_model + idx_offset, <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;indices, <span class="keyword">sizeof</span>(uint32_t) * <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;numindices);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            vertex_offset += num_verts;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            idx_offset += <a class="code" href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a>-&gt;numtris * 3;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            assert(vertex_offset &lt; <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#aa7e2e880ed691656fc210c62cd6ce0f1">MAX_VERT_MODEL</a>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            assert(idx_offset &lt; <a class="code" href="../../d3/dbd/vertex__buffer_8h.html#ae47b31c315ff4fd470bb372161829340">MAX_IDX_MODEL</a>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">buf_vertex_staging</a>);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    vbo = NULL;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// Com_Printf(&quot;uploaded %d vert, %d idx\n&quot;, vertex_offset, idx_offset);</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>.</p>

</div>
</div>
<a id="a46bfc3621c727fa0bfe39a01d47e126f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46bfc3621c727fa0bfe39a01d47e126f">&#9670;&nbsp;</a></span>vkpt_vertex_buffer_upload_staging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkpt_vertex_buffer_upload_staging </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html#l00036">36</a> of file <a class="el" href="../../d8/d51/vertex__buffer_8c_source.html">vertex_buffer.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    vkWaitForFences(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aac50c5da8d3934a18abf2a72a316fd2f">fence_vertex_sync</a>, VK_TRUE, ~((uint64_t)0));</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    vkResetFences(<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">device</a>, 1, &amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aac50c5da8d3934a18abf2a72a316fd2f">fence_vertex_sync</a>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    VkCommandBuffer cmd_buf = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a>(&amp;<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">cmd_buffers_graphics</a>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    VkBufferCopy copyRegion = {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        .size = <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbd/vertex__buffer_8h.html#ae843c484249a0656d27595e8ea250f5d">VertexBuffer</a>),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    };</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    vkCmdCopyBuffer(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">buf_vertex_staging</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 1, &amp;copyRegion);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a>(cmd_buf,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        .srcAccessMask = VK_ACCESS_TRANSFER_WRITE_BIT,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        .dstAccessMask = VK_ACCESS_ACCELERATION_STRUCTURE_READ_BIT_NV,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        .buffer = <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">buf_vertex</a>.<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        .offset = 0,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        .size = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    );</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[0].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        vkCmdFillBuffer(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[0].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[0].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>, 0);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        vkCmdFillBuffer(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[1].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[1].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>, 0);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        vkCmdFillBuffer(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[2].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">buffer</a>, 0, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">buf_light_stats</a>[2].<a class="code" href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">size</a>, 0);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a1eb8166387dae1ee9ef6b32e4ec94367">vkpt_submit_command_buffer</a>(cmd_buf, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">queue_graphics</a>, (1 &lt;&lt; <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">device_count</a>) - 1, 0, NULL, NULL, NULL, 0, NULL, NULL, <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a>.<a class="code" href="../../de/dc0/struct_q_v_k__s.html#aac50c5da8d3934a18abf2a72a316fd2f">fence_vertex_sync</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>, and <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>.</p>

</div>
</div>
<a id="a4b6a8e87531a795daeb57355822eb915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6a8e87531a795daeb57355822eb915">&#9670;&nbsp;</a></span>vkpt_wait_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d8d/wgl_8h.html#a763ff46d9a4d5de799bda0216b08553e">void</a> vkpt_wait_idle </td>
          <td>(</td>
          <td class="paramtype">VkQueue&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dc6/vkpt_8h.html#ae9a208f6e66e95bd7be48d692ddefce5">cmd_buf_group_t</a> *&#160;</td>
          <td class="paramname"><em>group</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03405">3405</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;{</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    vkQueueWaitIdle(queue);</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;    <a class="code" href="../../d7/d21/refresh_2vkpt_2main_8c.html#aa1776331030c090b50d4770d06a4532e">vkpt_reset_command_buffers</a>(group);</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d9/d62/physical__sky_8c.html#a977cfafcb313ca2271f80ae10ce3019e">change_image_layouts()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#addf2a935c207649d0f0d5dfa3fffed28">create_swapchain()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a85d64555fd82c387df7d5c195574ff9d">fill_index_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#acab7ddea0c6abee1c21455b2b9fdf176">IMG_ReadPixels_RTX()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a774c3999c366b4e23083a5d8c7bffbba">vkpt_pt_create_static()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1aaa1ca537ac62c710edba96049423e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aaa1ca537ac62c710edba96049423e0">&#9670;&nbsp;</a></span>draw</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/db0/structdraw_static__t.html">drawStatic_t</a> draw</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/da4/gl_2draw_8c_source.html#l00021">21</a> of file <a class="el" href="../../d9/da4/gl_2draw_8c_source.html">draw.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/da4/gl_2draw_8c.html#a267f49b9d518e7685d01e1f40a52b652">_GL_StretchPic()</a>, <a class="el" href="../../d9/da4/gl_2draw_8c.html#ac0724390ce0831318f5849565c8896e6">draw_char()</a>, <a class="el" href="../../d0/ded/vkpt_2draw_8c.html#aed6a19c0ba50425e3d10a82e41a1493c">enqueue_stretch_pic()</a>, <a class="el" href="../../d0/dc9/state_8c.html#aaccb387cff6b2ef7cff1585322514ed5">GL_Setup2D()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#a664850a4c3ec8afe2fe1aa2b852a03ae">R_ClearColor()</a>, <a class="el" href="../../d2/d61/gl_8h.html#a571f9e1feadaed6c8a873d0aa64b18f6">R_ClearColor_GL()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a6300542d75d2ded26f787ac2f1f83fa8">R_ClearColor_RTX()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#a3c0fba4a4137415545054c79c62cb1e8">R_DrawFixedData()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#a994a041d43b598934db9cdebfe39e319">R_DrawPic()</a>, <a class="el" href="../../d2/d61/gl_8h.html#a3c58872138732dc3f8a16c5e9d857981">R_DrawPic_GL()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#aa971b8d97451d0d508f890d3b773ca08">R_DrawStretchData()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#aef7e722ae2c49fff389987aa1b5b6e18">R_DrawStretchPic()</a>, <a class="el" href="../../d2/d61/gl_8h.html#accf0db45a93d12d0781e770ca93ffb3e">R_DrawStretchPic_GL()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a1da891f9f3e32eec2988c725fa9cdc4e">R_DrawStretchPic_RTX()</a>, <a class="el" href="../../d4/de8/sw_8h.html#aaeb7af55ef795fd08fe31a4d92392625">R_InitDraw()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#a0fc4425a9bb1eb94afcbb1ddd018b942">R_SetAlpha()</a>, <a class="el" href="../../d2/d61/gl_8h.html#ae9c3930316636df4287a928fea90b3f6">R_SetAlpha_GL()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a9bea44e8ea4ffd6e5cd6394ee6f35abc">R_SetAlpha_RTX()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a022e9fb80a8f12a86da200acfd26f9f1">R_SetAlphaScale_RTX()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#a745f45b47890742993262b2aa464fa8c">R_SetClipRect()</a>, <a class="el" href="../../d2/d61/gl_8h.html#a3090dcde78964a07500285ae2ede87f0">R_SetClipRect_GL()</a>, <a class="el" href="../../dd/d7b/sw_2draw_8c.html#adebc2cb5df98ed2a09553f0d759a46b3">R_SetColor()</a>, <a class="el" href="../../d2/d61/gl_8h.html#a559b6a3c27387fbc4bee0730ca1356ec">R_SetColor_GL()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a405b508e7226f2441209503697f61963">R_SetColor_RTX()</a>, <a class="el" href="../../d2/d61/gl_8h.html#a23938b7a684d09b0fc6f5f95cdf01af9">R_SetScale_GL()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a92c042a6e8c6cd5d74cedb7077676622">R_SetScale_RTX()</a>, and <a class="el" href="../../d5/d88/screen_8c.html#adf608b31fa9a8deeebc1149b3463bc04">SCR_DrawLayout()</a>.</p>

</div>
</div>
<a id="a2f3deaccfaa1c50957e71fca16564df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f3deaccfaa1c50957e71fca16564df6">&#9670;&nbsp;</a></span>qvk</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/dc6/vkpt_8h.html#a270e591c20257285ecaab65ba99b1723">QVK_t</a> qvk</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00377">377</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dae/transparency_8c.html#a70cf3cde9ec3463bc4ac12874798416c">allocate_and_bind_memory_to_blas()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a59be0fe6dc4be3ad8a57b4ee2ee6049e">allocate_and_bind_memory_to_buffers()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ad8c2ae656cad4dae55abbd83892bcd99">allocate_gpu_memory()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas()</a>, <a class="el" href="../../db/d74/vk__util_8h.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create()</a>, <a class="el" href="../../db/d74/vk__util_8h.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy()</a>, <a class="el" href="../../db/d74/vk__util_8h.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map()</a>, <a class="el" href="../../db/d74/vk__util_8h.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#aaca86e9d21e9f8585b4db6040dfdc8e1">calculate_scratch_buffer_size()</a>, <a class="el" href="../../d9/d62/physical__sky_8c.html#a977cfafcb313ca2271f80ae10ce3019e">change_image_layouts()</a>, <a class="el" href="../../d8/dbb/bloom_8c.html#acb0912a304a5209f485fa2ad8b1a089b">compute_push_constants()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a2b5f25a5c879b41224e3f79fdb3aa6f5">create_blas()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#aa985d4456b6d0533a62ec9d29e859b87">create_buffer_views()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a4f47809eecfd4ef9218f91ecc8494460">create_buffers()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#aa885d5eaa380c7600c40f5f66dcdc778">create_command_pool_and_fences()</a>, <a class="el" href="../../d1/dc7/god__rays_8c.html#ab3a2397c181b1fc2d834adf7f0466f00">create_descriptor_set()</a>, <a class="el" href="../../d1/dc7/god__rays_8c.html#ad34a7bddc4a7022335724019d13bddef">create_image_views()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a5b6a743c8f681996eaa2bf1208196cdd">create_invalid_texture()</a>, <a class="el" href="../../d1/dc7/god__rays_8c.html#a91fdddb083a7a9b3206de455a7bc69c0">create_pipeline_layout()</a>, <a class="el" href="../../d1/dc7/god__rays_8c.html#a23de6c51612503a371bced5c02776cba">create_pipelines()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a11f2fd61d3ade68066123dc9e6449fb9">create_readback_image()</a>, <a class="el" href="../../d0/ded/vkpt_2draw_8c.html#acd09c4018a3e30440e1529a316a7cf04">create_render_pass()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab94b741c7159ddae2cb3561838039c4b">create_shader_module_from_file()</a>, <a class="el" href="../../d1/d2f/device__memory__allocator_8c.html#ae6dc87c54764b3bfe412c98c0a4c1e7f">create_sub_allocator()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#addf2a935c207649d0f0d5dfa3fffed28">create_swapchain()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a0b7440c3e7f50c923a62f9703a5b62f9">CreateShadowMap()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#af05d3cbff32a3cad3e25a4b74adc5af5">destroy_invalid_texture()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a9d65499458d9ed03c598ba43df35b8df">destroy_readback_image()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a98854cafee2401e1e0e821ac7bf03df9">destroy_swapchain()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#aeb315e35c97d75ad07e2665f8f8a2c64">destroy_tex_images()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#acfc0d83899f0170e77817df971d1de02">destroy_transparency()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ad4a0a652f9b2266ed85c501c822434a3">destroy_vulkan()</a>, <a class="el" href="../../d9/d62/physical__sky_8c.html#a9b9b3992d4480d291c9fd4c449581f7f">destroyEnvTexture()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a45bba9a99aeff4853a094ac93567c135">draw_profiler()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a85d64555fd82c387df7d5c195574ff9d">fill_index_buffer()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a8bafa7514c9592f473bf8f84ce6d2710">FillVertexAndIndexBuffers()</a>, <a class="el" href="../../db/d74/vk__util_8h.html#aa2e20fc611839bb931f41c1f087c07e0">get_memory_type()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abae0a65ecbad0eb73a77fefd746c2b2f">get_render_extent()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#a4b9a06b23f04b95a398950e8f0189ea6">get_scratch_buffer_size()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab30b7df76cdd0f194c5343472d8eb600">get_screen_image_extent()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#acab7ddea0c6abee1c21455b2b9fdf176">IMG_ReadPixels_RTX()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#af4cca0db7dcedf8ad93689601dc75a82">IMG_ReloadAll()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a322bbec75bb1aeece99bf67c56aaa434">IMG_Unload_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ad921080761c27d39895d5c0f1d731a76">init_vulkan()</a>, <a class="el" href="../../d9/d62/physical__sky_8c.html#a40944bef115659237a822c3389f59b8f">initializeEnvTexture()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a912617d2640c1bb05a0d548cf5bae766">load_blue_noise()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9cf5dce297daa568001088c0e2a96313">prepare_ubo()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a6e118e55bb20687cff735f03176035e4">R_EndFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af3df904c9bd30ae0762cc1aa15cc94b8">R_Init_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a7d25ba2d2b3827d8d6eae2a579d43b24">R_ModeChanged_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4bcaf2c106f70dcad7f14ad59fbca99b">R_Shutdown_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab4fee5745208bd4a6c6ac6e89eeddf98">recreate_swapchain()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a853ced37139a0a1943d3ad1533b2ced9">ReleaseInfo()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#adf37c481d2b1fe00248f50869542a773">ReleaseShadowmap()</a>, <a class="el" href="../../d9/d62/physical__sky_8c.html#ab89cdeaa8f665a031259465b6a1ce1de">reset_sun_color_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#a7aa618f97b758bf9d39af3d08922f60a">setup_rt_pipeline()</a>, <a class="el" href="../../dd/dbb/textures_8c.html#a5864bf283229d7397ebda7758ba5d584">textures_destroy_unused_set()</a>, <a class="el" href="../../d1/dc7/god__rays_8c.html#ad58f8ad296e0708d51476665f1accbad">update_descriptor_set()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a80f2878a633e064cb2ae497c3641a27f">UploadImage()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac3c40f18bd3b5e3141d1158bdacb5e0d">vkpt_asvgf_create_gradient_samples()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8459898bd764724938182651ed22b57e">vkpt_asvgf_create_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa09f27edd7c526ad6e8ed6b738723867">vkpt_asvgf_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa8be0a08832509931d1c34e17f2d185c">vkpt_asvgf_destroy_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a4bd36ef1c0e2e74eedc41b8a84f70d00">vkpt_asvgf_filter()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a5627c2d5305cce85dfec1c305a44affa">vkpt_asvgf_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a88cd9059e66f1f9be99bd810fccd3d08">vkpt_bloom_create_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a512e32fa400e0c3e7623f1e0c3873374">vkpt_bloom_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a1852caaa11bcee562ecfd4c3217197e3">vkpt_bloom_destroy_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a16f22f4c0cbaafecde222d5e30df5052">vkpt_bloom_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a0457ce27045f3cb587c7f46022836219">vkpt_bloom_record_cmd_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a25e47021bbf1a07485f43930fbbe2c6c">vkpt_compositing()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a6f5ac4c032c1495193e5727181523c98">vkpt_create_images()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2428bc84b774f1b53e765b81b84973a9">vkpt_destroy_all()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ad1b830e72878c5c441616708ba56c568">vkpt_destroy_god_rays()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a9d1aa5d8710a1a49eb230d74a6a82e0d">vkpt_destroy_images()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a2b76c29a05f293eedf0e6a92c63cf2ee">vkpt_draw_create_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a3b30fe5d77a5cc95aeaff6ebe70f8130">vkpt_draw_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a2412ecc29207cbe4c2161984ecf54fcd">vkpt_draw_destroy_pipelines()</a>, <a class="el" href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a7e927d9fb98531919f82caba825f3777">vkpt_draw_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a638e1699e2e9b547d3b2c20deed8f2e6">vkpt_draw_submit_stretch_pics()</a>, <a class="el" href="../../db/de4/physical__sky_8h.html#a0771bbfbe8c9cfd00a6da4910f3af7b3">vkpt_evaluate_sun_light()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aaa3e9e8741c94c705e280461e82fd83a">vkpt_final_blit_filtered()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#af0a3990b82cb05cba762a9099e9b8fe7">vkpt_final_blit_simple()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa15637806eef38c08ae952805089762b">vkpt_free_command_buffers()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac78a081ffd36ec4eb9c5c80137eebb4d">vkpt_god_rays_destroy_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8455cc1fe63d6930a1d2b7ca2b4afff4">vkpt_image_copy()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ab2123d85b2c89033c980ed9d50feaee8">vkpt_initialize_all()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#adfbeecea706ef351b5ef6d0ad4048195">vkpt_initialize_god_rays()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa5ba03a85548570c2f046b8f42ce8cb0">vkpt_interleave()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ada2dabf29038ee22fa17f7f94d3ce986">vkpt_light_buffer_upload_staging()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ace3861808100d3f8c198bd92447bef16">vkpt_light_buffer_upload_to_staging()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a2913dc26be7dfa0e37608da682558402">vkpt_light_stats_create()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa7c0ae3ac941d9d6cd75e39cfc50a7f1">vkpt_light_stats_destroy()</a>, <a class="el" href="../../db/de4/physical__sky_8h.html#a0092aa2ad5fa0ca6a384fa615f6106c4">vkpt_physical_sky_create_pipelines()</a>, <a class="el" href="../../db/de4/physical__sky_8h.html#a4fc04e8c35b1fe0b892a5786eee367ff">vkpt_physical_sky_destroy()</a>, <a class="el" href="../../db/de4/physical__sky_8h.html#a482d59ee6c9c936e74ac5cfb5333b215">vkpt_physical_sky_destroy_pipelines()</a>, <a class="el" href="../../db/de4/physical__sky_8h.html#a3f7e5d06a7055279a2d417a2e1ca200e">vkpt_physical_sky_initialize()</a>, <a class="el" href="../../db/de4/physical__sky_8h.html#ab00aeeecf47c8523b750abc4c706feff">vkpt_physical_sky_record_cmd_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ae37bd5149ebe12c33df8c5b5d37003a0">vkpt_profiler_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aaa78152979581d3b5e56823f9d15dc73">vkpt_profiler_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aee781e4948f9e38f07cba4ce1af39db0">vkpt_profiler_next_frame()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa07bf23807800e110da5519e58bdfcc9">vkpt_profiler_query()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#ab6809ce8eae1c0ba5e694402b1040ff7">vkpt_pt_create_accel_bottom()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8abf55d703a78e69f74bf712155168c0">vkpt_pt_create_all_dynamic()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a31cc123cafd01a9c20b121ed811b16e9">vkpt_pt_create_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a774c3999c366b4e23083a5d8c7bffbba">vkpt_pt_create_static()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#afa98cd801df2f0c4a1c984354db6ec13">vkpt_pt_create_toplevel()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a81d5c88a085077fdde28cd02f32caf85">vkpt_pt_destroy()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#aee55ecf81802dc7a983fc5da19c82ee4">vkpt_pt_destroy_dynamic()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#ad614beedc7851a715267e7a9f1eec079">vkpt_pt_destroy_explosions()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac77841ff12d4ba4044c3bc9d5a51306f">vkpt_pt_destroy_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a921eec1be3e2b29c63ea29cfb610ee12">vkpt_pt_destroy_static()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#a47f79304c4f95c06df8e64b65affa50d">vkpt_pt_destroy_toplevel()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#ad789397590084a740c19e75bfd525410">vkpt_pt_destroy_transparent_models()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#a3f8420f9bdd4daaf9155cf86e2cfdb01">vkpt_pt_destroy_viewer_models()</a>, <a class="el" href="../../d5/d02/path__tracer_8c.html#aecceaa55fa5787ef4c8151e13a7c5418">vkpt_pt_destroy_viewer_weapon()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a715bde63d0ba29bd4789640b6556b0c6">vkpt_pt_init()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a1315c0f9ec55f91dd2737651246858aa">vkpt_pt_trace_lighting()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac2c90dc6f27788d58feb57331c6366e6">vkpt_pt_trace_primary_rays()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a330450dd44754e34b600671d08c86112">vkpt_pt_trace_reflections()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a32f476bb9016fdcdf5128f4af95f67dc">vkpt_pt_update_descripter_set_bindings()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a9ca07e6161780fd8552f4e74d6ee3392">vkpt_readback()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a9f11af5519a3f6a6eefdd3fb9add8693">vkpt_record_god_rays_filter_command_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac1d97ab8b6122131e8264a041f761a13">vkpt_record_god_rays_trace_command_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa1776331030c090b50d4770d06a4532e">vkpt_reset_command_buffers()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a34042f61738dfca646ec235c18f8d584">vkpt_shadow_map_create_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a16f7ceb69a716fcac81142adeab28c2c">vkpt_shadow_map_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ae2c91ef4dfab8cbc1703fd6484a3f4d0">vkpt_shadow_map_destroy_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8bb2565a316eaf3b591917f8537598e1">vkpt_shadow_map_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aff23a22d9b9befeb38c65fe14adbd23b">vkpt_shadow_map_render()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a1eb8166387dae1ee9ef6b32e4ec94367">vkpt_submit_command_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ae1a8749a3b3ebbb0111a1982c699fc13">vkpt_taa()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a0ef9aec7b26da74e1071f63ed59c6a61">vkpt_textures_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a76488e5ff38c3ca8e9a6901124f52c25">vkpt_textures_destroy_unused()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a40254cf863faddc4832cd3290e7211c4">vkpt_textures_end_registration()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ad1aba87f798f7e4b3acda4216e26dba7">vkpt_textures_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aa27d53467b9af07282216a93d6f2f729">vkpt_textures_update_descriptor_set()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#af1fc65cdd72e8bf78ed544c97606eb24">vkpt_textures_upload_envmap()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8f06a6a7fc657c7089763d27ce833a35">vkpt_tone_mapping_create_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a68a1eaed590178d27dde0ce32ea610cb">vkpt_tone_mapping_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a8c052ba6e0002ec85ff3d6ff29527681">vkpt_tone_mapping_destroy_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ae1f338cec57ae663e8fe2eae2f0251bf">vkpt_tone_mapping_initialize()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#acd17aea9ae80e16e9f2916bbfa54aeeb">vkpt_tone_mapping_record_cmd_buffer()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ad07cc107aaa54492a7adcd72b20ba9e5">vkpt_tone_mapping_reset()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ace535f6f7271f59469fc3fb8c87e8373">vkpt_uniform_buffer_create()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a24be3cc9e2377438fa950efe8ecc3b5f">vkpt_uniform_buffer_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac9705d9ffca9ae933fb91b2f61030bfc">vkpt_uniform_buffer_update()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a25cd53d376d1b186d030a4beba63c1d2">vkpt_uniform_precomputed_buffer_create()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#a014a2f9a3b15a218d865bc5f6f81ec8c">vkpt_uniform_precomputed_buffer_destroy()</a>, <a class="el" href="../../de/db9/precomputed__sky_8c.html#abc12c30998ad332dc1314fd7dc6cea9f">vkpt_uniform_precomputed_buffer_update()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a520ce9a40997c27284f2fdac0b171f17">vkpt_vertex_buffer_create()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a3683b400858cf99977dfef315629eb38">vkpt_vertex_buffer_create_instance()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a66d5f714c9677c2ce5103e7e3cc7bd6c">vkpt_vertex_buffer_create_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a5ca9e840c841cdef453b1acd80351620">vkpt_vertex_buffer_destroy()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a1bcec178775f32671c9051376d094bcb">vkpt_vertex_buffer_destroy_pipelines()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#a01b5224a58a2363dddc18a6bab0159d8">vkpt_vertex_buffer_upload_bsp_mesh_to_staging()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ab4d13a4e050ceb12bdbb4f6d70a51d97">vkpt_vertex_buffer_upload_models_to_staging()</a>, and <a class="el" href="../../d1/dc6/vkpt_8h.html#a46bfc3621c727fa0bfe39a01d47e126f">vkpt_vertex_buffer_upload_staging()</a>.</p>

</div>
</div>
<a id="a11823e68ed3d985774c5def8659a9054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11823e68ed3d985774c5def8659a9054">&#9670;&nbsp;</a></span>vkpt_refdef</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/dc6/vkpt_8h.html#afc0cb043a61bc534c6b84eabeba043df">vkpt_refdef_t</a> vkpt_refdef</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00372">372</a> of file <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a123bd5b138d89688a3fc3310c99586aa">fill_model_instance()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#aa4b5003d8b5d1e5285bd14923f572645">prepare_entities()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a9cf5dce297daa568001088c0e2a96313">prepare_ubo()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#ad6ae26b32f0a01a6cdc6575ad7981fd4">process_bsp_entity()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af9c083228edd32c9a7b2d9737fc7f38b">process_regular_entity()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a7f3d0bcb6ad1976fa5ce07905671e4ad">process_render_feedback()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a47d80f782ce15b7b28193b73e0dbcf3a">R_BeginFrame_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abb9a791dcde3f225ed81c805671f16b7">R_BeginRegistration_RTX()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#af82ea7b6bad7970452570e6c2c35afe1">R_RenderFrame_RTX()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#aff905f638b31e388828370e560697f15">vkpt_freecam_update()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a51ae75e89b41cdf32d83f2b65c2d93a3">vkpt_print_material()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#a84b6d578915d81a24e39ab2e94fa6763">vkpt_set_material()</a>, <a class="el" href="../../d7/d21/refresh_2vkpt_2main_8c.html#abea3bd506830da29ce1ddbbf842850a5">vkpt_show_pvs()</a>, <a class="el" href="../../d1/dc6/vkpt_8h.html#ac9705d9ffca9ae933fb91b2f61030bfc">vkpt_uniform_buffer_update()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a471674e63250321eb0fbaad2eaf5f798">write_beam_geometry()</a>, <a class="el" href="../../d6/dae/transparency_8c.html#a8b1c47daeba298fc0a3f99c762f8fb4a">write_particle_geometry()</a>, and <a class="el" href="../../d6/dae/transparency_8c.html#acb4228a0d4473be61b39c62841d883a2">write_sprite_geometry()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="avertex__buffer_8h_html_add2ab5151f2b34d4176f0b4cf334419b"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#add2ab5151f2b34d4176f0b4cf334419b">MAX_LIGHT_LIST_NODES</a></div><div class="ttdeci">#define MAX_LIGHT_LIST_NODES</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00033">vertex_buffer.h:33</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a9a97505e60917a8e64a423b40ad7ea3e"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a9a97505e60917a8e64a423b40ad7ea3e">QVK_s::desc_set_ubo</a></div><div class="ttdeci">VkDescriptorSet desc_set_ubo</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00226">vkpt.h:226</a></div></div>
<div class="ttc" id="ashared_8c_html_ab6dddd234cc47c402ffb5e305d3ca8fb"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#ab6dddd234cc47c402ffb5e305d3ca8fb">RadiusFromBounds</a></div><div class="ttdeci">vec_t RadiusFromBounds(const vec3_t mins, const vec3_t maxs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00127">shared.c:127</a></div></div>
<div class="ttc" id="atransparency_8c_html_a455fa99a76e16674f727d6b183f5a453"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a455fa99a76e16674f727d6b183f5a453">update_sprite_blas</a></div><div class="ttdeci">static void update_sprite_blas(VkCommandBuffer command_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00797">transparency.c:797</a></div></div>
<div class="ttc" id="avk__util_8h_html_af86c2229d676ea93f62979863ad34f88"><div class="ttname"><a href="../../db/d74/vk__util_8h.html#af86c2229d676ea93f62979863ad34f88">BUFFER_BARRIER</a></div><div class="ttdeci">#define BUFFER_BARRIER(cmd_buf,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00068">vk_util.h:68</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ac38bb7be9e0058ae24fe5a925dc0bbca"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ac38bb7be9e0058ae24fe5a925dc0bbca">accel_dynamic</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_dynamic[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00070">path_tracer.c:70</a></div></div>
<div class="ttc" id="akeys_8c_html_a7ae466f1467b99ae7a9ac2138c181221"><div class="ttname"><a href="../../db/de3/keys_8c.html#a7ae466f1467b99ae7a9ac2138c181221">Key_GetBindingForKey</a></div><div class="ttdeci">char * Key_GetBindingForKey(int keynum)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de3/keys_8c_source.html#l00310">keys.c:310</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ac88bcbba777f404c3e5138b28602294d"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ac88bcbba777f404c3e5138b28602294d">mem_accel_top</a></div><div class="ttdeci">static VkDeviceMemory mem_accel_top[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00086">path_tracer.c:86</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_af3d521e05ce96c5bb215fb6bc76b9093"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#af3d521e05ce96c5bb215fb6bc76b9093">bsp_mesh_s::num_clusters</a></div><div class="ttdeci">int num_clusters</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00366">vkpt.h:366</a></div></div>
<div class="ttc" id="atransparency_8c_html_ad02cdb62b7e70e6545b2530e24b6ba77"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ad02cdb62b7e70e6545b2530e24b6ba77">update_particle_blas</a></div><div class="ttdeci">static void update_particle_blas(VkCommandBuffer command_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00697">transparency.c:697</a></div></div>
<div class="ttc" id="amaterial_8c_html_a72610e8e48bcaea3c54878d86330ea19"><div class="ttname"><a href="../../de/d87/material_8c.html#a72610e8e48bcaea3c54878d86330ea19">MAT_GetNumPBRMaterials</a></div><div class="ttdeci">int MAT_GetNumPBRMaterials()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/material_8c_source.html#l00144">material.c:144</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a738e45240e5929caa318ed55e16485bb"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a738e45240e5929caa318ed55e16485bb">LIST_IMAGES_B_A</a></div><div class="ttdeci">#define LIST_IMAGES_B_A</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00101">global_textures.h:101</a></div></div>
<div class="ttc" id="astructdraw_static__t_html_a04cc15b1a808d169227f05b4aa8aaac9"><div class="ttname"><a href="../../dc/db0/structdraw_static__t.html#a04cc15b1a808d169227f05b4aa8aaac9">drawStatic_t::alpha_scale</a></div><div class="ttdeci">float alpha_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00716">vkpt.h:716</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a86432e50a0963b61c6e6a9efbe57ab74"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a86432e50a0963b61c6e6a9efbe57ab74">SUN_COLOR_UBO_BINDING_IDX</a></div><div class="ttdeci">#define SUN_COLOR_UBO_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00050">vertex_buffer.h:50</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_aaf105ae5beaca1dee30ae54530691fceaa4b94ffaa6663aedd31a699c14ede56d"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fceaa4b94ffaa6663aedd31a699c14ede56d">TONE_MAPPING_APPLY</a></div><div class="ttdeci">@ TONE_MAPPING_APPLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00063">tone_mapping.c:63</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html">maliasmesh_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00232">gl.h:232</a></div></div>
<div class="ttc" id="auniform__buffer_8c_html_a351f76da2e6e8a958bc83245f8b14bce"><div class="ttname"><a href="../../dd/d22/uniform__buffer_8c.html#a351f76da2e6e8a958bc83245f8b14bce">desc_pool_ubo</a></div><div class="ttdeci">static VkDescriptorPool desc_pool_ubo</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d22/uniform__buffer_8c_source.html#l00026">uniform_buffer.c:26</a></div></div>
<div class="ttc" id="abloom_8c_html_afee94e7ee61b7caee60141d6fe2b50cc"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#afee94e7ee61b7caee60141d6fe2b50cc">cvar_bloom_sigma_water</a></div><div class="ttdeci">cvar_t * cvar_bloom_sigma_water</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00049">bloom.c:49</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a87a8a63e8a3aff06d5204a0855e7e1ac"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a87a8a63e8a3aff06d5204a0855e7e1ac">vkpt_pt_create_viewer_models</a></div><div class="ttdeci">static VkResult vkpt_pt_create_viewer_models(VkCommandBuffer cmd_buf, int idx, VkBuffer vertex_buffer, size_t buffer_offset, int num_vertices, int vertex_offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00703">path_tracer.c:703</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea186f86ef458845ef9d87fda6d2bea80a"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea186f86ef458845ef9d87fda6d2bea80a">TAA</a></div><div class="ttdeci">@ TAA</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00033">asvgf.c:33</a></div></div>
<div class="ttc" id="astruct_q_v_k_uniform_buffer__s_html"><div class="ttname"><a href="../../d2/ded/struct_q_v_k_uniform_buffer__s.html">QVKUniformBuffer_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc3/global__ubo_8h_source.html#l00247">global_ubo.h:247</a></div></div>
<div class="ttc" id="astructcmd__buf__group__s_html_ae58af1b4dc98b53615c1187115d3ee05"><div class="ttname"><a href="../../db/dbd/structcmd__buf__group__s.html#ae58af1b4dc98b53615c1187115d3ee05">cmd_buf_group_s::used_this_frame</a></div><div class="ttdeci">uint32_t used_this_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00145">vkpt.h:145</a></div></div>
<div class="ttc" id="astructlight__poly__s_html"><div class="ttname"><a href="../../d4/db6/structlight__poly__s.html">light_poly_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00315">vkpt.h:315</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a1d06d25c74f4920131f2779da685500b"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a1d06d25c74f4920131f2779da685500b">accel_viewer_models</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_viewer_models[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00074">path_tracer.c:74</a></div></div>
<div class="ttc" id="agl_8h_html_af40bd42d270cffe7e590392f64215712"><div class="ttname"><a href="../../d2/d61/gl_8h.html#af40bd42d270cffe7e590392f64215712">TESS_MAX_INDICES</a></div><div class="ttdeci">#define TESS_MAX_INDICES</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00460">gl.h:460</a></div></div>
<div class="ttc" id="avk__util_8h_html_a1d7c6ed1c58be856fac35888f97773c3"><div class="ttname"><a href="../../db/d74/vk__util_8h.html#a1d7c6ed1c58be856fac35888f97773c3">CREATE_PIPELINE_LAYOUT</a></div><div class="ttdeci">#define CREATE_PIPELINE_LAYOUT(dev, layout,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00082">vk_util.h:82</a></div></div>
<div class="ttc" id="atextures_8c_html_a0dced086b22464d5a58da23ce487155d"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a0dced086b22464d5a58da23ce487155d">mem_images</a></div><div class="ttdeci">static VkDeviceMemory mem_images[NUM_VKPT_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00066">textures.c:66</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a54fc4e51babdbb4d97029670ee078bfe"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a54fc4e51babdbb4d97029670ee078bfe">filter_static_sky</a></div><div class="ttdeci">static int filter_static_sky(int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00263">bsp_mesh.c:263</a></div></div>
<div class="ttc" id="atransparency_8c_html_a8ae7ece820563537c95bbaf6a6c95b65"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a8ae7ece820563537c95bbaf6a6c95b65">transparency</a></div><div class="ttdeci">struct @17 transparency</div></div>
<div class="ttc" id="astruct_unused_resources_html_a145110ce987e5a4906bfd6dfe89b0f4b"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html#a145110ce987e5a4906bfd6dfe89b0f4b">UnusedResources::image_num</a></div><div class="ttdeci">uint32_t image_num</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00038">textures.c:38</a></div></div>
<div class="ttc" id="avkpt_8h_html_a06f77523e750336bbb5bfb0388321698"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a06f77523e750336bbb5bfb0388321698">LOG_FUNC</a></div><div class="ttdeci">#define LOG_FUNC()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00054">vkpt.h:54</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a1ab8f6bea2a6b17935d39ca3371cd9be"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a1ab8f6bea2a6b17935d39ca3371cd9be">QVK_s::frame_counter</a></div><div class="ttdeci">uint64_t frame_counter</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00212">vkpt.h:212</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a795c681917cc3893ed209ef3d526680a"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a795c681917cc3893ed209ef3d526680a">maliasmesh_s::numindices</a></div><div class="ttdeci">int numindices</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00235">gl.h:235</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a2a8b93156bfb61ff0f40379cdcbfc718"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a2a8b93156bfb61ff0f40379cdcbfc718">SUN_COLOR_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define SUN_COLOR_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00049">vertex_buffer.h:49</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_acb2492985734040ed8503afa0261855f"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#acb2492985734040ed8503afa0261855f">READBACK_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define READBACK_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00047">vertex_buffer.h:47</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_aa90059894888d08671e55bbdfed913ad"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#aa90059894888d08671e55bbdfed913ad">max_model_lights</a></div><div class="ttdeci">static int max_model_lights</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00129">vertex_buffer.c:129</a></div></div>
<div class="ttc" id="avkpt_8h_html_a9f3182ad90ad3ba0cf65457c7384a9b3a7ae30dcb3e2583d6fa680f087aed7781"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7ae30dcb3e2583d6fa680f087aed7781">PROFILER_START</a></div><div class="ttdeci">@ PROFILER_START</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00469">vkpt.h:469</a></div></div>
<div class="ttc" id="avkpt_8h_html_a9f3182ad90ad3ba0cf65457c7384a9b3"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3">VKPTProfilerAction</a></div><div class="ttdeci">VKPTProfilerAction</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00468">vkpt.h:468</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_aa7e2e880ed691656fc210c62cd6ce0f1"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#aa7e2e880ed691656fc210c62cd6ce0f1">MAX_VERT_MODEL</a></div><div class="ttdeci">#define MAX_VERT_MODEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00025">vertex_buffer.h:25</a></div></div>
<div class="ttc" id="aconstants_8h_html_aa8f900e5c1322742d6e03296f1725e5c"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#aa8f900e5c1322742d6e03296f1725e5c">SBT_RGEN_PRIMARY_RAYS</a></div><div class="ttdeci">#define SBT_RGEN_PRIMARY_RAYS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00121">constants.h:121</a></div></div>
<div class="ttc" id="atextures_8c_html_ac556a040809e7043ffd7a56aeb8eab43"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#ac556a040809e7043ffd7a56aeb8eab43">decode_srgb</a></div><div class="ttdeci">static float decode_srgb(byte pix)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00497">textures.c:497</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a91e4d128a2a9c30c9fc8381ddb185473"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a91e4d128a2a9c30c9fc8381ddb185473">QVK_s::num_swap_chain_images</a></div><div class="ttdeci">uint32_t num_swap_chain_images</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00189">vkpt.h:189</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ad614beedc7851a715267e7a9f1eec079"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ad614beedc7851a715267e7a9f1eec079">vkpt_pt_destroy_explosions</a></div><div class="ttdeci">VkResult vkpt_pt_destroy_explosions(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00439">path_tracer.c:439</a></div></div>
<div class="ttc" id="astruct_unused_resources_html_a617576f30a152259dee6792562cd65f9"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html#a617576f30a152259dee6792562cd65f9">UnusedResources::buffers</a></div><div class="ttdeci">VkBuffer buffers[MAX_RBUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00039">textures.c:39</a></div></div>
<div class="ttc" id="aconstants_8h_html_a701ff06e090f10a6bfd6b2c95ec3589f"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a701ff06e090f10a6bfd6b2c95ec3589f">SBT_RGEN_DIRECT_LIGHTING_CAUSTICS</a></div><div class="ttdeci">#define SBT_RGEN_DIRECT_LIGHTING_CAUSTICS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00125">constants.h:125</a></div></div>
<div class="ttc" id="atransparency_8c_html_ac3e39090308180ed6e20816a2f57e980"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ac3e39090308180ed6e20816a2f57e980">TR_COLOR_SIZE</a></div><div class="ttdeci">#define TR_COLOR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00029">transparency.c:29</a></div></div>
<div class="ttc" id="aconstants_8h_html_acda77f7e03257112646c3bc1e9322d53"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#acda77f7e03257112646c3bc1e9322d53">MATERIAL_KIND_LAVA</a></div><div class="ttdeci">#define MATERIAL_KIND_LAVA</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00062">constants.h:62</a></div></div>
<div class="ttc" id="avkpt_8h_html_a84d3ea5135a58a3d5c7d802762e320ec"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a84d3ea5135a58a3d5c7d802762e320ec">MAX_FRAMES_IN_FLIGHT</a></div><div class="ttdeci">#define MAX_FRAMES_IN_FLIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00140">vkpt.h:140</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a5480ed91e8ea233634d7d60212cb4423"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a5480ed91e8ea233634d7d60212cb4423">bsp_mesh_s::sky_visibility</a></div><div class="ttdeci">char sky_visibility[VIS_MAX_BYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00384">vkpt.h:384</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a0522ef51adee72be08d716261e2448b5"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a0522ef51adee72be08d716261e2448b5">GLOBAL_TEXTURES_TEX_ARR_BINDING_IDX</a></div><div class="ttdeci">#define GLOBAL_TEXTURES_TEX_ARR_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00124">global_textures.h:124</a></div></div>
<div class="ttc" id="aphysical__sky_8c_html_ad12fc34ce789bce6c8a05d8a17138534"><div class="ttname"><a href="../../d9/d62/physical__sky_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a></div><div class="ttdeci">static int height</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d62/physical__sky_8c_source.html#l00039">physical_sky.c:39</a></div></div>
<div class="ttc" id="atransparency_8c_html_a7051461bfc27150372b710955371ca07"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a7051461bfc27150372b710955371ca07">get_transparency_beam_blas</a></div><div class="ttdeci">VkAccelerationStructureNV get_transparency_beam_blas()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00231">transparency.c:231</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a086fdb911c68fb1b12691541bba0e0fc"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a086fdb911c68fb1b12691541bba0e0fc">buf_shader_binding_table</a></div><div class="ttdeci">static BufferResource_t buf_shader_binding_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00093">path_tracer.c:93</a></div></div>
<div class="ttc" id="abloom_8c_html_ad425a7581d73e4b73497d7bca55001b8"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#ad425a7581d73e4b73497d7bca55001b8">BARRIER_FROM_COPY_DEST</a></div><div class="ttdeci">#define BARRIER_FROM_COPY_DEST(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00243">bloom.c:243</a></div></div>
<div class="ttc" id="ashared_8c_html_a31b145b30886e0cd49279e391d9df00f"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a31b145b30886e0cd49279e391d9df00f">Q_snprintf</a></div><div class="ttdeci">size_t Q_snprintf(char *dest, size_t size, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00846">shared.c:846</a></div></div>
<div class="ttc" id="astructmaliasframe__s_html_a0b7269b8aa3d161c26dcb6b9cfe8596a"><div class="ttname"><a href="../../d0/d28/structmaliasframe__s.html#a0b7269b8aa3d161c26dcb6b9cfe8596a">maliasframe_s::scale</a></div><div class="ttdeci">vec3_t scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00226">gl.h:226</a></div></div>
<div class="ttc" id="aasvgf_8c_html_af05a432358cba403d403868b39d5b739"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#af05a432358cba403d403868b39d5b739">pipeline_layout_atrous</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_atrous</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00040">asvgf.c:40</a></div></div>
<div class="ttc" id="atransparency_8c_html_a268456044198b4e5ba61272a6f58016e"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a268456044198b4e5ba61272a6f58016e">sprite_info_buffer_view</a></div><div class="ttdeci">VkBufferView sprite_info_buffer_view</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00074">transparency.c:74</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_aab6f58e03b7048fac78672f86f83aebf"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#aab6f58e03b7048fac78672f86f83aebf">bsp_mesh_s::cluster_aabbs</a></div><div class="ttdeci">aabb_t * cluster_aabbs</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00386">vkpt.h:386</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_a794c1d120897d6a4b53f4ffd887e6250"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#a794c1d120897d6a4b53f4ffd887e6250">pbr_material_s::next_frame</a></div><div class="ttdeci">int next_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00045">material.h:45</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_a63b4e8acf483b810725a70abeda99d2d"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#a63b4e8acf483b810725a70abeda99d2d">num_accumulated_frames</a></div><div class="ttdeci">int num_accumulated_frames</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00100">main.c:100</a></div></div>
<div class="ttc" id="avk__util_8c_html_ad8c2ae656cad4dae55abbd83892bcd99"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#ad8c2ae656cad4dae55abbd83892bcd99">allocate_gpu_memory</a></div><div class="ttdeci">VkResult allocate_gpu_memory(VkMemoryRequirements mem_req, VkDeviceMemory *pMemory)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00402">vk_util.c:402</a></div></div>
<div class="ttc" id="amaterial_8h_html_a963c39accd39ba325d31545df31cb748"><div class="ttname"><a href="../../d3/d65/material_8h.html#a963c39accd39ba325d31545df31cb748">image_t</a></div><div class="ttdeci">struct image_s image_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00027">material.h:27</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ad1daf58b38785ab98d88ffe50d310101"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ad1daf58b38785ab98d88ffe50d310101">viewer_model_primitive_offset</a></div><div class="ttdeci">static int viewer_model_primitive_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00066">path_tracer.c:66</a></div></div>
<div class="ttc" id="avkpt_8h_html_a54c3d7413fd65d551b669669917bb5da"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a54c3d7413fd65d551b669669917bb5da">SHADER_STAGE_SPEC</a></div><div class="ttdeci">#define SHADER_STAGE_SPEC(_module, _stage, _spec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00124">vkpt.h:124</a></div></div>
<div class="ttc" id="afreecam_8c_html_a610ded0fb94ca9d6661976af29fb6b2a"><div class="ttname"><a href="../../da/d09/freecam_8c.html#a610ded0fb94ca9d6661976af29fb6b2a">vkpt_freecam_mousemove</a></div><div class="ttdeci">static void vkpt_freecam_mousemove()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00064">freecam.c:64</a></div></div>
<div class="ttc" id="atextures_8c_html_af74c55cf42b294b4bb89379897f7e3ce"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#af74c55cf42b294b4bb89379897f7e3ce">mem_blue_noise</a></div><div class="ttdeci">static VkDeviceMemory mem_blue_noise</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00055">textures.c:55</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_ad432016f0e3ea4ed6094c583d800f52c"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#ad432016f0e3ea4ed6094c583d800f52c">QVK_s::buf_tonemap</a></div><div class="ttdeci">BufferResource_t buf_tonemap</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00252">vkpt.h:252</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a673610a720ad405ec3d60647c5db94f3"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a673610a720ad405ec3d60647c5db94f3">bsp_mesh_s::clusters</a></div><div class="ttdeci">int * clusters</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00367">vkpt.h:367</a></div></div>
<div class="ttc" id="atextures_8c_html_af05d3cbff32a3cad3e25a4b74adc5af5"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#af05d3cbff32a3cad3e25a4b74adc5af5">destroy_invalid_texture</a></div><div class="ttdeci">void destroy_invalid_texture()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00813">textures.c:813</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_a47c36315723ceab4301cf29d577c8a1e"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#a47c36315723ceab4301cf29d577c8a1e">EntityUploadInfo::viewer_model_vertex_num</a></div><div class="ttdeci">uint32_t viewer_model_vertex_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00481">vkpt.h:481</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a09e5ec5a21f286f2a69baad548fe49fe"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a09e5ec5a21f286f2a69baad548fe49fe">pipeline_asvgf</a></div><div class="ttdeci">static VkPipeline pipeline_asvgf[ASVGF_NUM_PIPELINES]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00039">asvgf.c:39</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_afa95fe01a2cd6919068a1ab1b6a33721"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#afa95fe01a2cd6919068a1ab1b6a33721">render_pass_stretch_pic</a></div><div class="ttdeci">static VkRenderPass render_pass_stretch_pic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00052">draw.c:52</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a4b9a06b23f04b95a398950e8f0189ea6"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a4b9a06b23f04b95a398950e8f0189ea6">get_scratch_buffer_size</a></div><div class="ttdeci">static size_t get_scratch_buffer_size(VkAccelerationStructureNV ac)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00306">path_tracer.c:306</a></div></div>
<div class="ttc" id="atransparency_8c_html_a59be0fe6dc4be3ad8a57b4ee2ee6049e"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a59be0fe6dc4be3ad8a57b4ee2ee6049e">allocate_and_bind_memory_to_buffers</a></div><div class="ttdeci">static qboolean allocate_and_bind_memory_to_buffers()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00932">transparency.c:932</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a8aed32f2b89af27b0ab0a3cff05563c0"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a8aed32f2b89af27b0ab0a3cff05563c0">QVK_s::device</a></div><div class="ttdeci">VkDevice device</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00172">vkpt.h:172</a></div></div>
<div class="ttc" id="ahunk_8c_html_a7209f1bf2d0b9da5fe7619f8b223bc37"><div class="ttname"><a href="../../d4/d68/hunk_8c.html#a7209f1bf2d0b9da5fe7619f8b223bc37">Hunk_Begin</a></div><div class="ttdeci">void Hunk_Begin(memhunk_t *hunk, size_t maxsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d68/hunk_8c_source.html#l00023">hunk.c:23</a></div></div>
<div class="ttc" id="amodels_8c_html_a16ed19af9f6edb2e3777227d4ce1d742"><div class="ttname"><a href="../../d0/deb/models_8c.html#a16ed19af9f6edb2e3777227d4ce1d742">MOD_ForHandle</a></div><div class="ttdeci">model_t * MOD_ForHandle(qhandle_t h)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/models_8c_source.html#l00430">models.c:430</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ad87ec98bfa7ba3b9e60be5bea8947c85"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ad87ec98bfa7ba3b9e60be5bea8947c85">rt_descriptor_pool</a></div><div class="ttdeci">static VkDescriptorPool rt_descriptor_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00095">path_tracer.c:95</a></div></div>
<div class="ttc" id="afreecam_8c_html_a249deff633c9e1c84b81188795effbf0"><div class="ttname"><a href="../../da/d09/freecam_8c.html#a249deff633c9e1c84b81188795effbf0">freecam_keystate</a></div><div class="ttdeci">static qboolean freecam_keystate[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00037">freecam.c:37</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_aed9a63b66f4b0c93306b5f8d2997df24"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#aed9a63b66f4b0c93306b5f8d2997df24">pbr_material_s::image_normals</a></div><div class="ttdeci">image_t * image_normals</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00036">material.h:36</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_abab26b909fe7d133d8f9cff3fef44a92"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#abab26b909fe7d133d8f9cff3fef44a92">compute_cluster_aabbs</a></div><div class="ttdeci">static void compute_cluster_aabbs(bsp_mesh_t *wm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01388">bsp_mesh.c:1388</a></div></div>
<div class="ttc" id="avkpt_8h_html_ae93e7ab74962fe2824b63f82027651b6"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#ae93e7ab74962fe2824b63f82027651b6">PROFILER_DO</a></div><div class="ttdeci">#define PROFILER_DO(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00460">vkpt.h:460</a></div></div>
<div class="ttc" id="agod__rays_8c_html_ada8665ca4bd33e3c2f517aa660bd18cc"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#ada8665ca4bd33e3c2f517aa660bd18cc">FILTER_THREAD_GROUP_SIZE</a></div><div class="ttdeci">static const uint32_t FILTER_THREAD_GROUP_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00024">god_rays.c:24</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a2ffef681de9a09e892a3e372772a822b"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a2ffef681de9a09e892a3e372772a822b">RAY_GEN_BEAM_COLOR_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define RAY_GEN_BEAM_COLOR_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00030">path_tracer.c:30</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a3f8420f9bdd4daaf9155cf86e2cfdb01"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a3f8420f9bdd4daaf9155cf86e2cfdb01">vkpt_pt_destroy_viewer_models</a></div><div class="ttdeci">VkResult vkpt_pt_destroy_viewer_models(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00411">path_tracer.c:411</a></div></div>
<div class="ttc" id="atextures_8c_html_a32e23efedfcfeb0a7e5db920fd2be360"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a32e23efedfcfeb0a7e5db920fd2be360">texture_system</a></div><div class="ttdeci">static TextureSystem texture_system</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00051">textures.c:51</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_af9a2795a6ef738706942d30fdfd8fea5"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#af9a2795a6ef738706942d30fdfd8fea5">bsp_mesh_s::texel_density</a></div><div class="ttdeci">float * texel_density</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00362">vkpt.h:362</a></div></div>
<div class="ttc" id="avk__util_8h_html_a6d5d99cbe4eae95d7010aa1062847105"><div class="ttname"><a href="../../db/d74/vk__util_8h.html#a6d5d99cbe4eae95d7010aa1062847105">align</a></div><div class="ttdeci">static size_t align(size_t x, size_t alignment)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00143">vk_util.h:143</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_ac7ca3a7370c3a2f51140f4d15aaa798f"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#ac7ca3a7370c3a2f51140f4d15aaa798f">pipeline_layout_tone_mapping_histogram</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_tone_mapping_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00068">tone_mapping.c:68</a></div></div>
<div class="ttc" id="abloom_8c_html_a1137ce9ab544051de3db0d11e681fa8e"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a1137ce9ab544051de3db0d11e681fa8e">pipeline_layout_blur</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_blur</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00030">bloom.c:30</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_aad6e5b31c69033f019ea730ae3d4b3ad"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#aad6e5b31c69033f019ea730ae3d4b3ad">EntityUploadInfo::dynamic_vertex_num</a></div><div class="ttdeci">uint32_t dynamic_vertex_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00477">vkpt.h:477</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_a11823e68ed3d985774c5def8659a9054"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a></div><div class="ttdeci">vkpt_refdef_t vkpt_refdef</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00372">main.c:372</a></div></div>
<div class="ttc" id="avkpt_2models_8c_html_a656690adb2de8fc9190a31d546f76392"><div class="ttname"><a href="../../d4/d03/vkpt_2models_8c.html#a656690adb2de8fc9190a31d546f76392">computeTangents</a></div><div class="ttdeci">static void computeTangents(model_t *model)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d03/vkpt_2models_8c_source.html#l00056">models.c:56</a></div></div>
<div class="ttc" id="astructcmd__buf__group__s_html_ae03e9f33a161f50c37980c265f1c5712"><div class="ttname"><a href="../../db/dbd/structcmd__buf__group__s.html#ae03e9f33a161f50c37980c265f1c5712">cmd_buf_group_s::count_per_frame</a></div><div class="ttdeci">uint32_t count_per_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00144">vkpt.h:144</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a3b3ecd5cb86be79b632480e8fa50092b"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a3b3ecd5cb86be79b632480e8fa50092b">accel_top_match</a></div><div class="ttdeci">static accel_top_match_info_t accel_top_match[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00081">path_tracer.c:81</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_aaf105ae5beaca1dee30ae54530691fcea64dc5ae2d864dd4b5e0e0d72137426f4"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcea64dc5ae2d864dd4b5e0e0d72137426f4">TONE_MAPPING_CURVE</a></div><div class="ttdeci">@ TONE_MAPPING_CURVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00062">tone_mapping.c:62</a></div></div>
<div class="ttc" id="atransparency_8c_html_a69794649ae804404c4fc54cbdfe9cc06"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a69794649ae804404c4fc54cbdfe9cc06">get_transparency_sprite_blas</a></div><div class="ttdeci">VkAccelerationStructureNV get_transparency_sprite_blas()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00236">transparency.c:236</a></div></div>
<div class="ttc" id="acvar_8c_html_a7a65b2c02a2762f4784e2a644e105c71"><div class="ttname"><a href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a></div><div class="ttdeci">cvar_t * Cvar_Get(const char *var_name, const char *var_value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de8/cvar_8c_source.html#l00257">cvar.c:257</a></div></div>
<div class="ttc" id="abloom_8c_html_a16af7b253440dadd46a80a4b9fddba4da7a562f950347a0a59df25b55cfcc7316"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4da7a562f950347a0a59df25b55cfcc7316">BLUR</a></div><div class="ttdeci">@ BLUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00023">bloom.c:23</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_a46782497dddbc3b945647992625634ee"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#a46782497dddbc3b945647992625634ee">bsp_model_s::light_polys</a></div><div class="ttdeci">light_poly_t * light_polys</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00333">vkpt.h:333</a></div></div>
<div class="ttc" id="amaterial_8c_html_ae429fb33b376e0692e7f8a8d88964c06"><div class="ttname"><a href="../../de/d87/material_8c.html#ae429fb33b376e0692e7f8a8d88964c06">MAT_UpdateRegistration</a></div><div class="ttdeci">void MAT_UpdateRegistration(pbr_material_t *mat)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/material_8c_source.html#l00421">material.c:421</a></div></div>
<div class="ttc" id="aeffects_8c_html_af0c1d1acea3b57e12805b6cb1ed87349"><div class="ttname"><a href="../../d5/dc9/effects_8c.html#af0c1d1acea3b57e12805b6cb1ed87349">particles</a></div><div class="ttdeci">static cparticle_t particles[MAX_PARTICLES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc9/effects_8c_source.html#l00830">effects.c:830</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a54a98ba75f8e4dede0063fdd74cd9ace"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a54a98ba75f8e4dede0063fdd74cd9ace">QVK_s::cmd_buffers_transfer</a></div><div class="ttdeci">cmd_buf_group_t cmd_buffers_transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00195">vkpt.h:195</a></div></div>
<div class="ttc" id="adevice__memory__allocator_8c_html_a11bdd6db8af25f9e5496f8b2d7a15ef3"><div class="ttname"><a href="../../d1/d2f/device__memory__allocator_8c.html#a11bdd6db8af25f9e5496f8b2d7a15ef3">create_device_memory_allocator</a></div><div class="ttdeci">DeviceMemoryAllocator * create_device_memory_allocator(VkDevice device)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2f/device__memory__allocator_8c_source.html#l00048">device_memory_allocator.c:48</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a171cd44198ae4e745b13870b571f0500"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a171cd44198ae4e745b13870b571f0500">collect_ligth_polys</a></div><div class="ttdeci">static void collect_ligth_polys(bsp_mesh_t *wm, bsp_t *bsp, int model_idx, int *num_lights, int *allocated_lights, light_poly_t **lights)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00729">bsp_mesh.c:729</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ad5c209481f90555818b075e94dbc689e"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ad5c209481f90555818b075e94dbc689e">rt_pipeline_layout</a></div><div class="ttdeci">static VkPipelineLayout rt_pipeline_layout</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00098">path_tracer.c:98</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a5f1da35c7ad7eff0b6f0c7e94582974e"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a5f1da35c7ad7eff0b6f0c7e94582974e">BINDING_OFFSET_SKY_CLOUDS</a></div><div class="ttdeci">#define BINDING_OFFSET_SKY_CLOUDS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00134">global_textures.h:134</a></div></div>
<div class="ttc" id="astruct_qvk_geometry_instance__s_html"><div class="ttname"><a href="../../d0/dd7/struct_qvk_geometry_instance__s.html">QvkGeometryInstance_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00109">path_tracer.c:109</a></div></div>
<div class="ttc" id="atransparency_8c_html_a866d6c37460e219119bda22fd7e854a5"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a866d6c37460e219119bda22fd7e854a5">cast_u32_to_f32_color</a></div><div class="ttdeci">void cast_u32_to_f32_color(int color_index, const color_t *pcolor, float *color_f32, float hdr_factor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00102">transparency.c:102</a></div></div>
<div class="ttc" id="aglobal__ubo_8h_html_a88d6c57c03536c2619b19d569dcc7362"><div class="ttname"><a href="../../dd/dc3/global__ubo_8h.html#a88d6c57c03536c2619b19d569dcc7362">GLOBAL_INSTANCE_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define GLOBAL_INSTANCE_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc3/global__ubo_8h_source.html#l00026">global_ubo.h:26</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_ab6c133d4003fda8960c739f287f986ee"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#ab6c133d4003fda8960c739f287f986ee">clip_rect</a></div><div class="ttdeci">static clipRect_t clip_rect</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00045">draw.c:45</a></div></div>
<div class="ttc" id="astruct_q_v_k_instance_buffer__s_html"><div class="ttname"><a href="../../d6/d36/struct_q_v_k_instance_buffer__s.html">QVKInstanceBuffer_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc3/global__ubo_8h_source.html#l00253">global_ubo.h:253</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_a4deea99cb19e4bda05958e070fc781be"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#a4deea99cb19e4bda05958e070fc781be">pbr_material_s::image_emissive</a></div><div class="ttdeci">image_t * image_emissive</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00037">material.h:37</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_a14bf6662f8f739f385e0a858e8dfe9cd"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#a14bf6662f8f739f385e0a858e8dfe9cd">pipeline_layout_instance_geometry</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_instance_geometry</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00033">vertex_buffer.c:33</a></div></div>
<div class="ttc" id="adevice__memory__allocator_8c_html_afb442496ff43c0437e3e683cff810340"><div class="ttname"><a href="../../d1/d2f/device__memory__allocator_8c.html#afb442496ff43c0437e3e683cff810340">allocate_device_memory</a></div><div class="ttdeci">DMAResult allocate_device_memory(DeviceMemoryAllocator *allocator, DeviceMemory *device_memory)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2f/device__memory__allocator_8c_source.html#l00060">device_memory_allocator.c:60</a></div></div>
<div class="ttc" id="astructlight__poly__s_html_ab07aa2454e689734b69d250b0ff8cf6e"><div class="ttname"><a href="../../d4/db6/structlight__poly__s.html#ab07aa2454e689734b69d250b0ff8cf6e">light_poly_s::color</a></div><div class="ttdeci">vec3_t color</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00318">vkpt.h:318</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a6bc18e6e0168dae1a7b1a64d1da1434a"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a6bc18e6e0168dae1a7b1a64d1da1434a">QVK_s::buf_vertex</a></div><div class="ttdeci">BufferResource_t buf_vertex</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00243">vkpt.h:243</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_aa25989afdfaaee9d2a4b52a353e55291"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#aa25989afdfaaee9d2a4b52a353e55291">cluster_debug_mask</a></div><div class="ttdeci">char cluster_debug_mask[VIS_MAX_BYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00083">main.c:83</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_aa3aaccb7a0270ae59db9383e443e47a1"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#aa3aaccb7a0270ae59db9383e443e47a1">pbr_material_s::flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00042">material.h:42</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_aac16569c5e2d79e52f56f87392866e50"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#aac16569c5e2d79e52f56f87392866e50">collect_surfaces</a></div><div class="ttdeci">static void collect_surfaces(int *idx_ctr, bsp_mesh_t *wm, bsp_t *bsp, int model_idx, int(*filter)(int))</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00457">bsp_mesh.c:457</a></div></div>
<div class="ttc" id="agod__rays_8c_html_a0f7cb18fda5ac5ddaa4932893a69fe89"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#a0f7cb18fda5ac5ddaa4932893a69fe89">god_rays</a></div><div class="ttdeci">struct @15 god_rays</div></div>
<div class="ttc" id="astructlight__poly__s_html_ad1b44851f4b9aa2027f6e056965319fe"><div class="ttname"><a href="../../d4/db6/structlight__poly__s.html#ad1b44851f4b9aa2027f6e056965319fe">light_poly_s::material</a></div><div class="ttdeci">struct pbr_material_s * material</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00319">vkpt.h:319</a></div></div>
<div class="ttc" id="atransparency_8c_html_a0d2dd1334be97bb1ac5e35dff0f7819a"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a0d2dd1334be97bb1ac5e35dff0f7819a">cvar_pt_particle_size</a></div><div class="ttdeci">cvar_t * cvar_pt_particle_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00095">transparency.c:95</a></div></div>
<div class="ttc" id="avkpt_8h_html_a43593b44eb7a13784e2802c7bcf56089"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a43593b44eb7a13784e2802c7bcf56089">_VK_EXTENSION_DO</a></div><div class="ttdeci">#define _VK_EXTENSION_DO(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00309">vkpt.h:309</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aaf637b78bcaad64ea5d71d9a219dcf73"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a></div><div class="ttdeci">#define BARRIER_COMPUTE(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00971">path_tracer.c:971</a></div></div>
<div class="ttc" id="atextures_8c_html_ab2d6a67459125d5a7e2513ec50aa68fa"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#ab2d6a67459125d5a7e2513ec50aa68fa">desc_pool_textures</a></div><div class="ttdeci">static VkDescriptorPool desc_pool_textures</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00060">textures.c:60</a></div></div>
<div class="ttc" id="atransparency_8c_html_aac6c8f16c038616ba967759a02055b19"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#aac6c8f16c038616ba967759a02055b19">vkpt_build_cylinder_light</a></div><div class="ttdeci">qboolean vkpt_build_cylinder_light(light_poly_t *light_list, int *num_lights, int max_lights, bsp_t *bsp, vec3_t begin, vec3_t end, vec3_t color, float radius)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00408">transparency.c:408</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9eac5682e6efb0a5a31420114425adb75f4"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eac5682e6efb0a5a31420114425adb75f4">ATROUS_ITER_0</a></div><div class="ttdeci">@ ATROUS_ITER_0</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00029">asvgf.c:29</a></div></div>
<div class="ttc" id="atextures_8c_html_a27a4c4519243dfd2f5b9dffcd3efc9ff"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a27a4c4519243dfd2f5b9dffcd3efc9ff">get_num_miplevels</a></div><div class="ttdeci">static int get_num_miplevels(int w, int h)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00485">textures.c:485</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aa39f2bc1930ca846539aa9140d3e7e91"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aa39f2bc1930ca846539aa9140d3e7e91">accel_static</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_static</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00057">path_tracer.c:57</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a08f90bf485355ce1d872664c0ca94245"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a08f90bf485355ce1d872664c0ca94245">compute_sky_visibility</a></div><div class="ttdeci">static void compute_sky_visibility(bsp_mesh_t *wm, bsp_t *bsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01354">bsp_mesh.c:1354</a></div></div>
<div class="ttc" id="avk__util_8c_html_a59b24a68affc1c22459e4ef9d0a3cc23"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#a59b24a68affc1c22459e4ef9d0a3cc23">buffer_unmap</a></div><div class="ttdeci">void buffer_unmap(BufferResource_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00159">vk_util.c:159</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_ad6c2d7a20fc4ca025f9cc3e0f88c94d6"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#ad6c2d7a20fc4ca025f9cc3e0f88c94d6">bsp_mesh_s::tex_coords</a></div><div class="ttdeci">float * tex_coords</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00359">vkpt.h:359</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_ab676342c4082f82b9e09f53cc6691f8c"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#ab676342c4082f82b9e09f53cc6691f8c">bsp_mesh_load_custom_sky</a></div><div class="ttdeci">static qboolean bsp_mesh_load_custom_sky(int *idx_ctr, bsp_mesh_t *wm, bsp_t *bsp, const char *map_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01538">bsp_mesh.c:1538</a></div></div>
<div class="ttc" id="atextures_8c_html_adb33152db674c2b3301fc9f44f78f60b"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#adb33152db674c2b3301fc9f44f78f60b">tex_image_memory</a></div><div class="ttdeci">static DeviceMemory tex_image_memory[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00068">textures.c:68</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a70f4aa64f4c73566d91affcbfdf4e782"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a70f4aa64f4c73566d91affcbfdf4e782">QVK_s::current_frame_index</a></div><div class="ttdeci">uint32_t current_frame_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00219">vkpt.h:219</a></div></div>
<div class="ttc" id="abloom_8c_html_a4c02d401ca0cc0257388319e86cc474b"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a4c02d401ca0cc0257388319e86cc474b">push_constants_hblur</a></div><div class="ttdeci">static struct bloom_blur_push_constants push_constants_hblur</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00042">bloom.c:42</a></div></div>
<div class="ttc" id="avkpt_8h_html_a7790096a7d0dd07c79f115b5cdb44589"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a7790096a7d0dd07c79f115b5cdb44589">NUM_PROFILER_QUERIES_PER_FRAME</a></div><div class="ttdeci">#define NUM_PROFILER_QUERIES_PER_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00466">vkpt.h:466</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a8c3f3ff9e41d6d9cb4be1833b3075ede"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a8c3f3ff9e41d6d9cb4be1833b3075ede">QVK_s::tex_sampler</a></div><div class="ttdeci">VkSampler tex_sampler</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00255">vkpt.h:255</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a7b10c322800fbf3b96e5e1b6eb9c0b65"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a7b10c322800fbf3b96e5e1b6eb9c0b65">QVK_s::buf_readback</a></div><div class="ttdeci">BufferResource_t buf_readback</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00249">vkpt.h:249</a></div></div>
<div class="ttc" id="atransparency_8c_html_a8b1c47daeba298fc0a3f99c762f8fb4a"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a8b1c47daeba298fc0a3f99c762f8fb4a">write_particle_geometry</a></div><div class="ttdeci">static void write_particle_geometry(const float *view_matrix, const particle_t *particles, int particle_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00263">transparency.c:263</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a9461153a020617c18d1f09f733d2d116"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a9461153a020617c18d1f09f733d2d116">QVK_s::gpu_slice_width</a></div><div class="ttdeci">uint32_t gpu_slice_width</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00187">vkpt.h:187</a></div></div>
<div class="ttc" id="aconstants_8h_html_afff1be7b2d70ddcee62fc1727a3edeac"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#afff1be7b2d70ddcee62fc1727a3edeac">AS_FLAG_VIEWER_MODELS</a></div><div class="ttdeci">#define AS_FLAG_VIEWER_MODELS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00110">constants.h:110</a></div></div>
<div class="ttc" id="atransparency_8c_html_a5b8ac7af5b695b722ffb82ba3ea2a63b"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a5b8ac7af5b695b722ffb82ba3ea2a63b">get_transparency_counts</a></div><div class="ttdeci">void get_transparency_counts(int *particle_num, int *beam_num, int *sprite_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00256">transparency.c:256</a></div></div>
<div class="ttc" id="astructdraw_static__t_html_acfb8479ca19794727396d3c9280f399a"><div class="ttname"><a href="../../dc/db0/structdraw_static__t.html#acfb8479ca19794727396d3c9280f399a">drawStatic_t::colors</a></div><div class="ttdeci">color_t colors[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00402">gl.h:402</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_a115b4b6a9644305988574ad23159cbed"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#a115b4b6a9644305988574ad23159cbed">pipelines</a></div><div class="ttdeci">static VkPipeline pipelines[TM_NUM_PIPELINES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00067">tone_mapping.c:67</a></div></div>
<div class="ttc" id="abloom_8c_html_aaf637b78bcaad64ea5d71d9a219dcf73"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a></div><div class="ttdeci">#define BARRIER_COMPUTE(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00205">bloom.c:205</a></div></div>
<div class="ttc" id="aconstants_8h_html_afcb422634f7f9c7b6eb93903c12734f1"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#afcb422634f7f9c7b6eb93903c12734f1">AS_FLAG_SKY</a></div><div class="ttdeci">#define AS_FLAG_SKY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00113">constants.h:113</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a0c9893a46fbb9475e0544de657eda02a"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a0c9893a46fbb9475e0544de657eda02a">LIGHT_POLY_VEC4S</a></div><div class="ttdeci">#define LIGHT_POLY_VEC4S</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00036">vertex_buffer.h:36</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ab6809ce8eae1c0ba5e694402b1040ff7"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ab6809ce8eae1c0ba5e694402b1040ff7">vkpt_pt_create_accel_bottom</a></div><div class="ttdeci">static VkResult vkpt_pt_create_accel_bottom(VkBuffer vertex_buffer, size_t buffer_offset, int num_vertices, VkAccelerationStructureNV *accel, accel_bottom_match_info_t *match, VkDeviceMemory *mem_accel, VkCommandBuffer cmd_buf, int fast_build)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00464">path_tracer.c:464</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a5ddbabd02e4a68577939a1f7bb59876c"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a5ddbabd02e4a68577939a1f7bb59876c">vkpt_pt_create_transparent_models</a></div><div class="ttdeci">static VkResult vkpt_pt_create_transparent_models(VkCommandBuffer cmd_buf, int idx, VkBuffer vertex_buffer, size_t buffer_offset, int num_vertices, int vertex_offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00670">path_tracer.c:670</a></div></div>
<div class="ttc" id="atransparency_8c_html_a0e557871c9800aa81aa4ccea5d5748d8"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a0e557871c9800aa81aa4ccea5d5748d8">get_transparency_sprite_info_buffer_view</a></div><div class="ttdeci">VkBufferView get_transparency_sprite_info_buffer_view()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00251">transparency.c:251</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a7b5847014756cb3abf81f1c10a17737a"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a7b5847014756cb3abf81f1c10a17737a">BINDING_OFFSET_BLUE_NOISE</a></div><div class="ttdeci">#define BINDING_OFFSET_BLUE_NOISE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00127">global_textures.h:127</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a365b4447a30f96ffdbdae5ea602e47ed"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a365b4447a30f96ffdbdae5ea602e47ed">MAX_STRETCH_PICS</a></div><div class="ttdeci">#define MAX_STRETCH_PICS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00031">draw.c:31</a></div></div>
<div class="ttc" id="acin_8c_html_adcf1db9b9ae24774a5965f05b2a93326"><div class="ttname"><a href="../../d4/de6/cin_8c.html#adcf1db9b9ae24774a5965f05b2a93326">d_8to24table</a></div><div class="ttdeci">uint32_t d_8to24table[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/images_8c_source.html#l00654">images.c:654</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a993c8631d8077d2a933868e5b69ad6a5"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a993c8631d8077d2a933868e5b69ad6a5">VERTEX_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define VERTEX_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00045">vertex_buffer.h:45</a></div></div>
<div class="ttc" id="asw_2draw_8c_html_aef7e722ae2c49fff389987aa1b5b6e18"><div class="ttname"><a href="../../dd/d7b/sw_2draw_8c.html#aef7e722ae2c49fff389987aa1b5b6e18">R_DrawStretchPic</a></div><div class="ttdeci">void R_DrawStretchPic(int x, int y, int w, int h, qhandle_t pic)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7b/sw_2draw_8c_source.html#l00384">draw.c:384</a></div></div>
<div class="ttc" id="avk__util_8c_html_a780f63fea7ca30b4df0feea3806234c9"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#a780f63fea7ca30b4df0feea3806234c9">buffer_destroy</a></div><div class="ttdeci">VkResult buffer_destroy(BufferResource_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00132">vk_util.c:132</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a837e2eef289f3be9602a4c7073df111e"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a837e2eef289f3be9602a4c7073df111e">accel_explosions</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_explosions[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00078">path_tracer.c:78</a></div></div>
<div class="ttc" id="astruct_unused_resources_html"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html">UnusedResources</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00033">textures.c:33</a></div></div>
<div class="ttc" id="acommon_8c_html_a459a66c52a2c28d316084ac4280c561e"><div class="ttname"><a href="../../d8/d19/common_8c.html#a459a66c52a2c28d316084ac4280c561e">sv_paused</a></div><div class="ttdeci">cvar_t * sv_paused</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00096">common.c:96</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_aac50c5da8d3934a18abf2a72a316fd2f"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#aac50c5da8d3934a18abf2a72a316fd2f">QVK_s::fence_vertex_sync</a></div><div class="ttdeci">VkFence fence_vertex_sync</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00207">vkpt.h:207</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_ae140ca721c1fc26dd89fc9069f8ee7a6"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#ae140ca721c1fc26dd89fc9069f8ee7a6">bsp_mesh_s::num_models</a></div><div class="ttdeci">int num_models</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00346">vkpt.h:346</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_ab38846f3757b59844bf48ab6d281bee2"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#ab38846f3757b59844bf48ab6d281bee2">filter_all</a></div><div class="ttdeci">static int filter_all(int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00271">bsp_mesh.c:271</a></div></div>
<div class="ttc" id="astruct_texture_system_html_a745c3787154030d4b54117df55326f4b"><div class="ttname"><a href="../../d5/dac/struct_texture_system.html#a745c3787154030d4b54117df55326f4b">TextureSystem::unused_resources</a></div><div class="ttdeci">UnusedResources unused_resources[DESTROY_LATENCY]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00048">textures.c:48</a></div></div>
<div class="ttc" id="aconstants_8h_html_a538e69faec07485a3d6c6a2a192f3ef2"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a538e69faec07485a3d6c6a2a192f3ef2">SBT_RMISS_SHADOW</a></div><div class="ttdeci">#define SBT_RMISS_SHADOW</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00129">constants.h:129</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a486dd3c1b0a3d0b5fa7dbcf9faabf2ea"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a486dd3c1b0a3d0b5fa7dbcf9faabf2ea">bsp_mesh_s::num_cluster_lights</a></div><div class="ttdeci">int num_cluster_lights</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00369">vkpt.h:369</a></div></div>
<div class="ttc" id="aconstants_8h_html_a212cb7c9530fb13f2ac74d440033ca56"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a212cb7c9530fb13f2ac74d440033ca56">MATERIAL_FLAG_LIGHT</a></div><div class="ttdeci">#define MATERIAL_FLAG_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00073">constants.h:73</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a7e3bec00c79bcb45cde2f72dd5e359dd"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a7e3bec00c79bcb45cde2f72dd5e359dd">BINDING_OFFSET_TERRAIN_ALBEDO</a></div><div class="ttdeci">#define BINDING_OFFSET_TERRAIN_ALBEDO</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00135">global_textures.h:135</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_ae47b31c315ff4fd470bb372161829340"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#ae47b31c315ff4fd470bb372161829340">MAX_IDX_MODEL</a></div><div class="ttdeci">#define MAX_IDX_MODEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00026">vertex_buffer.h:26</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a52b079f63711418e88f631a3f55a89ab"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a52b079f63711418e88f631a3f55a89ab">load_sky_and_lava_clusters</a></div><div class="ttdeci">static void load_sky_and_lava_clusters(bsp_mesh_t *wm, const char *map_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01222">bsp_mesh.c:1222</a></div></div>
<div class="ttc" id="aconstants_8h_html_a77b14ce4bce340a12ff4812cd8d44476"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a77b14ce4bce340a12ff4812cd8d44476">AS_INSTANCE_FLAG_DYNAMIC</a></div><div class="ttdeci">#define AS_INSTANCE_FLAG_DYNAMIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00117">constants.h:117</a></div></div>
<div class="ttc" id="atextures_8c_html_a9d65499458d9ed03c598ba43df35b8df"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a9d65499458d9ed03c598ba43df35b8df">destroy_readback_image</a></div><div class="ttdeci">static void destroy_readback_image(VkImage *image, VkDeviceMemory *memory, VkDeviceSize *memory_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l01431">textures.c:1431</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea5f4014197508efea073e20136e52dd2f"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea5f4014197508efea073e20136e52dd2f">COMPOSITING</a></div><div class="ttdeci">@ COMPOSITING</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00035">asvgf.c:35</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aecceaa55fa5787ef4c8151e13a7c5418"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aecceaa55fa5787ef4c8151e13a7c5418">vkpt_pt_destroy_viewer_weapon</a></div><div class="ttdeci">VkResult vkpt_pt_destroy_viewer_weapon(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00425">path_tracer.c:425</a></div></div>
<div class="ttc" id="amodels_8c_html_a0894fa373eda8e408d796d3c7dd3f46b"><div class="ttname"><a href="../../d0/deb/models_8c.html#a0894fa373eda8e408d796d3c7dd3f46b">MOD_ValidateMD2</a></div><div class="ttdeci">qerror_t MOD_ValidateMD2(dmd2header_t *header, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/models_8c_source.html#l00142">models.c:142</a></div></div>
<div class="ttc" id="atextures_8c_html_aa2b83ea18e52711e4ce7fb58ac1e513e"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#aa2b83ea18e52711e4ce7fb58ac1e513e">tex_device_memory_allocator</a></div><div class="ttdeci">static DeviceMemoryAllocator * tex_device_memory_allocator</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00070">textures.c:70</a></div></div>
<div class="ttc" id="atransparency_8c_html_ac405be9841a44c8b3d9340746d325439"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ac405be9841a44c8b3d9340746d325439">TR_SPRITE_MAX_NUM</a></div><div class="ttdeci">#define TR_SPRITE_MAX_NUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00025">transparency.c:25</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a9c3c5f24b091aeb84767660630d70581"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a9c3c5f24b091aeb84767660630d70581">bsp_mesh_s::allocated_light_polys</a></div><div class="ttdeci">int allocated_light_polys</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00374">vkpt.h:374</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a409c5afc5f0b34a27628db2b18ccf86a"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a409c5afc5f0b34a27628db2b18ccf86a">mem_accel_transparent</a></div><div class="ttdeci">static VkDeviceMemory mem_accel_transparent</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00083">path_tracer.c:83</a></div></div>
<div class="ttc" id="afreecam_8c_html_ab0b38df0e1e1e335be67256bd7d2c35d"><div class="ttname"><a href="../../da/d09/freecam_8c.html#ab0b38df0e1e1e335be67256bd7d2c35d">freecam_active</a></div><div class="ttdeci">static qboolean freecam_active</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00038">freecam.c:38</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_aa992d4465098ffa6cd5063aa536c396d"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#aa992d4465098ffa6cd5063aa536c396d">imv_smap_depth_array</a></div><div class="ttdeci">static VkImageView imv_smap_depth_array</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00032">shadow_map.c:32</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a219b97ba3a4b0e0cc255fe2b480466a1"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a219b97ba3a4b0e0cc255fe2b480466a1">pipeline_final_blit</a></div><div class="ttdeci">static VkPipeline pipeline_final_blit</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00054">draw.c:54</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_afe8ec4c0513ade7276e9314b3957a5f3"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#afe8ec4c0513ade7276e9314b3957a5f3">vkpt_draw_get_extent</a></div><div class="ttdeci">VkExtent2D vkpt_draw_get_extent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00062">draw.c:62</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_aff1405a62bd2df872fefa2c69c68cdb4"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#aff1405a62bd2df872fefa2c69c68cdb4">maliasmesh_s::indices</a></div><div class="ttdeci">QGL_INDEX_TYPE * indices</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00236">gl.h:236</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a68e227246ebfd3e0c359d0be1d2344c8"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a68e227246ebfd3e0c359d0be1d2344c8">accel_custom_sky</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_custom_sky</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00060">path_tracer.c:60</a></div></div>
<div class="ttc" id="aprofiler_8c_html_a1c5edb3c599b76cd5d5d95732ad2e247"><div class="ttname"><a href="../../d2/ddb/profiler_8c.html#a1c5edb3c599b76cd5d5d95732ad2e247">PROFILER_DO</a></div><div class="ttdeci">#define PROFILER_DO(name, indent)</div></div>
<div class="ttc" id="acommon_2bsp_8c_html_a1530bc295cc6c8f29ddd788fce98507d"><div class="ttname"><a href="../../da/d3b/common_2bsp_8c.html#a1530bc295cc6c8f29ddd788fce98507d">BSP_SavePatchedPVS</a></div><div class="ttdeci">qboolean BSP_SavePatchedPVS(bsp_t *bsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d3b/common_2bsp_8c_source.html#l01051">bsp.c:1051</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_aedff8b499477c22ed20b50732dd09610"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#aedff8b499477c22ed20b50732dd09610">desc_pool_vertex_buffer</a></div><div class="ttdeci">static VkDescriptorPool desc_pool_vertex_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00030">vertex_buffer.c:30</a></div></div>
<div class="ttc" id="atransparency_8c_html_a471674e63250321eb0fbaad2eaf5f798"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a471674e63250321eb0fbaad2eaf5f798">write_beam_geometry</a></div><div class="ttdeci">static void write_beam_geometry(const float *view_matrix, const entity_t *entities, int entity_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00325">transparency.c:325</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a8a350aba9ef172a175054fc2c2b0063d"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a8a350aba9ef172a175054fc2c2b0063d">bsp_mesh_s::tangents</a></div><div class="ttdeci">float * tangents</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00359">vkpt.h:359</a></div></div>
<div class="ttc" id="amatrix_8c_html_ae5a9045fcc3f820845ae78a1fd903ea7"><div class="ttname"><a href="../../dc/dca/matrix_8c.html#ae5a9045fcc3f820845ae78a1fd903ea7">create_orthographic_matrix</a></div><div class="ttdeci">void create_orthographic_matrix(float matrix[16], float xmin, float xmax, float ymin, float ymax, float znear, float zfar)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dca/matrix_8c_source.html#l00100">matrix.c:100</a></div></div>
<div class="ttc" id="afreecam_8c_html_a060db3a074ef3d29f20e375ec7e0641d"><div class="ttname"><a href="../../da/d09/freecam_8c.html#a060db3a074ef3d29f20e375ec7e0641d">cvar_pt_aperture</a></div><div class="ttdeci">cvar_t * cvar_pt_aperture</div></div>
<div class="ttc" id="avertex__buffer_8h_html_aeaf42176f2a55503538eb900345a4e06"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#aeaf42176f2a55503538eb900345a4e06">TONE_MAPPING_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define TONE_MAPPING_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00048">vertex_buffer.h:48</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a4d49b6fdb9163e382b0202779e5f96f0"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a4d49b6fdb9163e382b0202779e5f96f0">pipeline_layout_general</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_general</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00041">asvgf.c:41</a></div></div>
<div class="ttc" id="astruct_stretch_pic__t_html"><div class="ttname"><a href="../../dd/d22/struct_stretch_pic__t.html">StretchPic_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00039">draw.c:39</a></div></div>
<div class="ttc" id="abloom_8c_html_ad107308d59efb4d631ebab44cdb4704c"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#ad107308d59efb4d631ebab44cdb4704c">cvar_bloom_intensity</a></div><div class="ttdeci">cvar_t * cvar_bloom_intensity</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00048">bloom.c:48</a></div></div>
<div class="ttc" id="abloom_8c_html_a8e4647f99979504e2f7fe2e33cddcae3"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a8e4647f99979504e2f7fe2e33cddcae3">bloom_intensity</a></div><div class="ttdeci">static float bloom_intensity</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00052">bloom.c:52</a></div></div>
<div class="ttc" id="atransparency_8c_html_aa985d4456b6d0533a62ec9d29e859b87"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#aa985d4456b6d0533a62ec9d29e859b87">create_buffer_views</a></div><div class="ttdeci">static void create_buffer_views()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l01114">transparency.c:1114</a></div></div>
<div class="ttc" id="astructaabb__s_html_a400047d96c36ab9f9bd28a771f7cc746"><div class="ttname"><a href="../../dd/d0f/structaabb__s.html#a400047d96c36ab9f9bd28a771f7cc746">aabb_s::mins</a></div><div class="ttdeci">vec3_t mins</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00339">vkpt.h:339</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aff4cf678d4eb8e268daef24100fa1649"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aff4cf678d4eb8e268daef24100fa1649">buf_instances</a></div><div class="ttdeci">static BufferResource_t buf_instances[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00056">path_tracer.c:56</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_aed6a19c0ba50425e3d10a82e41a1493c"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#aed6a19c0ba50425e3d10a82e41a1493c">enqueue_stretch_pic</a></div><div class="ttdeci">static void enqueue_stretch_pic(float x, float y, float w, float h, float s1, float t1, float s2, float t2, uint32_t color, int tex_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00067">draw.c:67</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a0c426b75863ce24b98587f4745dd4f66"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a0c426b75863ce24b98587f4745dd4f66">QVK_s::cmd_buffers_graphics</a></div><div class="ttdeci">cmd_buf_group_t cmd_buffers_graphics</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00193">vkpt.h:193</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a06ebdac16d5d210e72e3f238d6a324fa"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a06ebdac16d5d210e72e3f238d6a324fa">bsp_mesh_s::num_indices</a></div><div class="ttdeci">int num_indices</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00363">vkpt.h:363</a></div></div>
<div class="ttc" id="atransparency_8c_html_aa96b49f19552bd8624752644a13c92d4"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#aa96b49f19552bd8624752644a13c92d4">compare_beams</a></div><div class="ttdeci">static int compare_beams(const void *_a, const void *_b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00388">transparency.c:388</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a09b5652f6cd6377beb206df95acdb921"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a09b5652f6cd6377beb206df95acdb921">QVK_s::shader_modules</a></div><div class="ttdeci">VkShaderModule shader_modules[NUM_QVK_SHADER_MODULES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00223">vkpt.h:223</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_aeb429a90473c365841433bf24be88451"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#aeb429a90473c365841433bf24be88451">build_pvs2</a></div><div class="ttdeci">static void build_pvs2(bsp_t *bsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00436">bsp_mesh.c:436</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_acd09c4018a3e30440e1529a316a7cf04"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#acd09c4018a3e30440e1529a316a7cf04">create_render_pass</a></div><div class="ttdeci">static void create_render_pass()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00163">draw.c:163</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_adea63bbf381e772f59b24e5d2405d30f"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#adea63bbf381e772f59b24e5d2405d30f">framebuffer_smap2</a></div><div class="ttdeci">static VkFramebuffer framebuffer_smap2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00028">shadow_map.c:28</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_aaeb9997942eea2806af6462a3dd2d8c8"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#aaeb9997942eea2806af6462a3dd2d8c8">bsp_model_s::center</a></div><div class="ttdeci">vec3_t center</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00327">vkpt.h:327</a></div></div>
<div class="ttc" id="asystem_8c_html_af38cb394048091823541c780e6e9ff35"><div class="ttname"><a href="../../d4/dfd/system_8c.html#af38cb394048091823541c780e6e9ff35">Sys_Milliseconds</a></div><div class="ttdeci">unsigned Sys_Milliseconds(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfd/system_8c_source.html#l00644">system.c:644</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a0df0abce5b2b04f7918fe7885930c323"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a0df0abce5b2b04f7918fe7885930c323">framebuffer_smap</a></div><div class="ttdeci">static VkFramebuffer framebuffer_smap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00027">shadow_map.c:27</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea595a759e93543e08875d64f4dbf08e9c"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea595a759e93543e08875d64f4dbf08e9c">TEMPORAL</a></div><div class="ttdeci">@ TEMPORAL</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00027">asvgf.c:27</a></div></div>
<div class="ttc" id="acommon_2bsp_8c_html_a9151c67139adecf22c86f78c74e94372"><div class="ttname"><a href="../../da/d3b/common_2bsp_8c.html#a9151c67139adecf22c86f78c74e94372">BSP_PointLeaf</a></div><div class="ttdeci">mleaf_t * BSP_PointLeaf(mnode_t *node, vec3_t p)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d3b/common_2bsp_8c_source.html#l01439">bsp.c:1439</a></div></div>
<div class="ttc" id="amaterial_8c_html_ab4dcba3dbbde5800f2a8844e5a079df0"><div class="ttname"><a href="../../de/d87/material_8c.html#ab4dcba3dbbde5800f2a8844e5a079df0">MAT_RegisterPBRMaterial</a></div><div class="ttdeci">qerror_t MAT_RegisterPBRMaterial(pbr_material_t *mat, image_t *image_diffuse, image_t *image_normals, image_t *image_emissive)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/material_8c_source.html#l00397">material.c:397</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a9d20259c4aed2125da6fb68ae22774cd"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a9d20259c4aed2125da6fb68ae22774cd">maliasmesh_s::tex_coords</a></div><div class="ttdeci">vec2_t * tex_coords</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00701">vkpt.h:701</a></div></div>
<div class="ttc" id="afreecam_8c_html_ae2255dc333d14505e46569db839fcf78"><div class="ttname"><a href="../../da/d09/freecam_8c.html#ae2255dc333d14505e46569db839fcf78">freecam_zoom</a></div><div class="ttdeci">static float freecam_zoom</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00036">freecam.c:36</a></div></div>
<div class="ttc" id="aimages_8c_html_adb7b6935c425d4d5f3d7a0a79ab5a518"><div class="ttname"><a href="../../d7/d59/images_8c.html#adb7b6935c425d4d5f3d7a0a79ab5a518">_try_image_format</a></div><div class="ttdeci">static int _try_image_format(imageformat_t fmt, image_t *image, byte **pic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/images_8c_source.html#l00787">images.c:787</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a1bdf61642bd9213340d365c850744b48"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a1bdf61642bd9213340d365c850744b48">imv_smap_depth2</a></div><div class="ttdeci">static VkImageView imv_smap_depth2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00031">shadow_map.c:31</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9eae1d8fff855463396efd999bd56f0fad2"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eae1d8fff855463396efd999bd56f0fad2">ATROUS_ITER_1</a></div><div class="ttdeci">@ ATROUS_ITER_1</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00030">asvgf.c:30</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_aa1ef9d907d695e7cb333a7fae79a19a1"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#aa1ef9d907d695e7cb333a7fae79a19a1">bsp_mesh_s::num_vertices</a></div><div class="ttdeci">int num_vertices</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00364">vkpt.h:364</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_abbd31a009949b342aa078de2de6cd99d"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#abbd31a009949b342aa078de2de6cd99d">bsp_model_s::aabb_min</a></div><div class="ttdeci">vec3_t aabb_min</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00328">vkpt.h:328</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_acb9a5f5745cc88f7cb7915301d43635a"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#acb9a5f5745cc88f7cb7915301d43635a">QVK_s::physical_device</a></div><div class="ttdeci">VkPhysicalDevice physical_device</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00163">vkpt.h:163</a></div></div>
<div class="ttc" id="avkpt_8h_html_ae46cf020d62af6e335fb71e72a305157"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#ae46cf020d62af6e335fb71e72a305157">END_PERF_MARKER</a></div><div class="ttdeci">#define END_PERF_MARKER(command_buffer, name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00743">vkpt.h:743</a></div></div>
<div class="ttc" id="astructmaliasframe__s_html_a422fb92afdabc8e80acf1db01bef5b5f"><div class="ttname"><a href="../../d0/d28/structmaliasframe__s.html#a422fb92afdabc8e80acf1db01bef5b5f">maliasframe_s::translate</a></div><div class="ttdeci">vec3_t translate</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00227">gl.h:227</a></div></div>
<div class="ttc" id="aprofiler_8c_html_aabfcb78c30dcb8926e14b50c29aae6fc"><div class="ttname"><a href="../../d2/ddb/profiler_8c.html#aabfcb78c30dcb8926e14b50c29aae6fc">profiler_queries_used</a></div><div class="ttdeci">static qboolean profiler_queries_used[NUM_PROFILER_QUERIES_PER_FRAME *2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddb/profiler_8c_source.html#l00027">profiler.c:27</a></div></div>
<div class="ttc" id="abloom_8c_html_a5fed4279948bfff0d80bfc6c6c9eb02d"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a5fed4279948bfff0d80bfc6c6c9eb02d">under_water_animation</a></div><div class="ttdeci">static float under_water_animation</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00054">bloom.c:54</a></div></div>
<div class="ttc" id="atransparency_8c_html_a545fc88bea14a420d26252b3445eed61"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a545fc88bea14a420d26252b3445eed61">TR_VERTEX_MAX_NUM</a></div><div class="ttdeci">#define TR_VERTEX_MAX_NUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00026">transparency.c:26</a></div></div>
<div class="ttc" id="atransparency_8c_html_ae931a5f2ed4206ace1c91bd06113c333"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ae931a5f2ed4206ace1c91bd06113c333">beam_color_buffer_view</a></div><div class="ttdeci">VkBufferView beam_color_buffer_view</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00073">transparency.c:73</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_ae95c312eedf560c3b4d3b8d141fcfc77"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#ae95c312eedf560c3b4d3b8d141fcfc77">QVK_s::desc_set_textures_even</a></div><div class="ttdeci">VkDescriptorSet desc_set_textures_even</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00229">vkpt.h:229</a></div></div>
<div class="ttc" id="afreecam_8c_html_a679d37a8b3cca59bce4e19afb3bd193b"><div class="ttname"><a href="../../da/d09/freecam_8c.html#a679d37a8b3cca59bce4e19afb3bd193b">cvar_pt_dof</a></div><div class="ttdeci">cvar_t * cvar_pt_dof</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00057">main.c:57</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_a0e05d73375c1e9be7150f1b9e1af03dc"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#a0e05d73375c1e9be7150f1b9e1af03dc">pbr_material_s::specular_scale</a></div><div class="ttdeci">float specular_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00040">material.h:40</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_adc424cc75fe92902fff5bc22d746c6f1"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#adc424cc75fe92902fff5bc22d746c6f1">LIGHT_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define LIGHT_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00046">vertex_buffer.h:46</a></div></div>
<div class="ttc" id="agl_2draw_8c_html_a1aaa1ca537ac62c710edba96049423e0"><div class="ttname"><a href="../../d9/da4/gl_2draw_8c.html#a1aaa1ca537ac62c710edba96049423e0">draw</a></div><div class="ttdeci">drawStatic_t draw</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da4/gl_2draw_8c_source.html#l00021">draw.c:21</a></div></div>
<div class="ttc" id="astructsun__light__s_html_a2b6d5fd9424600e1df15399f0ecf608c"><div class="ttname"><a href="../../d4/db8/structsun__light__s.html#a2b6d5fd9424600e1df15399f0ecf608c">sun_light_s::visible</a></div><div class="ttdeci">qboolean visible</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00420">vkpt.h:420</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aa21042e04c540f3cf11021661fd73b5b"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aa21042e04c540f3cf11021661fd73b5b">custom_sky_primitive_offset</a></div><div class="ttdeci">static int custom_sky_primitive_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00063">path_tracer.c:63</a></div></div>
<div class="ttc" id="aclient_2client_8h_html_a647adebf2b744d7a926a0cf2492563ca"><div class="ttname"><a href="../../d0/da6/client_2client_8h.html#a647adebf2b744d7a926a0cf2492563ca">CL_PLAYER_MODEL_DISABLED</a></div><div class="ttdeci">#define CL_PLAYER_MODEL_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/client_2client_8h_source.html#l00553">client.h:553</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_ace165b70926ab67debab5e1a2434d296"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#ace165b70926ab67debab5e1a2434d296">compute_world_tangents</a></div><div class="ttdeci">void compute_world_tangents(bsp_mesh_t *wm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01131">bsp_mesh.c:1131</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a1c4219b9b544793270d5a1a338649b1e"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a1c4219b9b544793270d5a1a338649b1e">QVK_s::screenshot_image_memory</a></div><div class="ttdeci">VkDeviceMemory screenshot_image_memory</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00262">vkpt.h:262</a></div></div>
<div class="ttc" id="atextures_8c_html_adaa1fb45714cf8322f2a26ca33d6c049"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#adaa1fb45714cf8322f2a26ca33d6c049">image_loading_dirty_flag</a></div><div class="ttdeci">static int image_loading_dirty_flag</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00072">textures.c:72</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a141055274ade8352b754a30b4e2f1c56"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a141055274ade8352b754a30b4e2f1c56">maliasmesh_s::numverts</a></div><div class="ttdeci">int numverts</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00233">gl.h:233</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ae1f3ad1476aaa24156e744dfbef1bff1"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ae1f3ad1476aaa24156e744dfbef1bff1">accel_top</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_top[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00080">path_tracer.c:80</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a1f9f94b83c2c86b74f6db9e7b5357747"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a1f9f94b83c2c86b74f6db9e7b5357747">pipeline_layout_final_blit</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_final_blit</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00051">draw.c:51</a></div></div>
<div class="ttc" id="ahunk_8c_html_a9a53af1cce75a62934084de6221dfdf7"><div class="ttname"><a href="../../d4/d68/hunk_8c.html#a9a53af1cce75a62934084de6221dfdf7">Hunk_Free</a></div><div class="ttdeci">void Hunk_Free(memhunk_t *hunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d68/hunk_8c_source.html#l00075">hunk.c:75</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ac82d58a0323c35ecb2c45fed29f30126"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ac82d58a0323c35ecb2c45fed29f30126">cvar_pt_enable_beams</a></div><div class="ttdeci">cvar_t * cvar_pt_enable_beams</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00102">path_tracer.c:102</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a1b874341f8518fb512e6b40b4cf87cee"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a1b874341f8518fb512e6b40b4cf87cee">explosions_primitive_offset</a></div><div class="ttdeci">static int explosions_primitive_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00068">path_tracer.c:68</a></div></div>
<div class="ttc" id="aphysical__sky_8c_html_a2474a5474cbff19523a51eb1de01cda4"><div class="ttname"><a href="../../d9/d62/physical__sky_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a></div><div class="ttdeci">static int width</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d62/physical__sky_8c_source.html#l00038">physical_sky.c:38</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_abbd03be6da2ffcf36826b06da7f171a0"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#abbd03be6da2ffcf36826b06da7f171a0">LightBuffer</a></div><div class="ttdeci">struct LightBuffer LightBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00160">vertex_buffer.h:160</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_ac833f20026e98603aafdb72f580cafe0"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#ac833f20026e98603aafdb72f580cafe0">pipeline_instance_geometry</a></div><div class="ttdeci">static VkPipeline pipeline_instance_geometry</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00031">vertex_buffer.c:31</a></div></div>
<div class="ttc" id="aconstants_8h_html_abec5f46f075c151a8a2483275d916289"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#abec5f46f075c151a8a2483275d916289">AS_FLAG_PARTICLES</a></div><div class="ttdeci">#define AS_FLAG_PARTICLES</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00109">constants.h:109</a></div></div>
<div class="ttc" id="astructvkpt__refdef__s_html_a19621e5fda258fca36c1ceaf13c70e9c"><div class="ttname"><a href="../../d1/dbe/structvkpt__refdef__s.html#a19621e5fda258fca36c1ceaf13c70e9c">vkpt_refdef_s::fd</a></div><div class="ttdeci">refdef_t * fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00396">vkpt.h:396</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a2c9abf7db12e5361540974d2aa288785"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a2c9abf7db12e5361540974d2aa288785">maliasmesh_s::positions</a></div><div class="ttdeci">vec3_t * positions</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00699">vkpt.h:699</a></div></div>
<div class="ttc" id="atextures_8c_html_a41ca87799a0d6b3fff92ee296f30e2d2"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a41ca87799a0d6b3fff92ee296f30e2d2">img_envmap</a></div><div class="ttdeci">static VkImage img_envmap</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00058">textures.c:58</a></div></div>
<div class="ttc" id="avk__util_8c_html_aa2e20fc611839bb931f41c1f087c07e0"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#aa2e20fc611839bb931f41c1f087c07e0">get_memory_type</a></div><div class="ttdeci">uint32_t get_memory_type(uint32_t mem_req_type_bits, VkMemoryPropertyFlags mem_prop)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00045">vk_util.c:45</a></div></div>
<div class="ttc" id="avkpt_8h_html_a58206b954a876bae0077741e504e43a6"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a58206b954a876bae0077741e504e43a6">_VK</a></div><div class="ttdeci">#define _VK(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00065">vkpt.h:65</a></div></div>
<div class="ttc" id="astruct_device_memory_html_a0a7b1db4e757c41686323bbe9864dcaa"><div class="ttname"><a href="../../d8/dc9/struct_device_memory.html#a0a7b1db4e757c41686323bbe9864dcaa">DeviceMemory::alignment</a></div><div class="ttdeci">uint64_t alignment</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d62/device__memory__allocator_8h_source.html#l00033">device_memory_allocator.h:33</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a01e31978f8f420f6a5708d1a9210cbba"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a01e31978f8f420f6a5708d1a9210cbba">vkpt_pt_create_viewer_weapon</a></div><div class="ttdeci">static VkResult vkpt_pt_create_viewer_weapon(VkCommandBuffer cmd_buf, int idx, VkBuffer vertex_buffer, size_t buffer_offset, int num_vertices, int vertex_offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00726">path_tracer.c:726</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a8c8a4fecc807e8177d5a3b559239881d"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a8c8a4fecc807e8177d5a3b559239881d">BINDING_OFFSET_SKY_SCATTERING</a></div><div class="ttdeci">#define BINDING_OFFSET_SKY_SCATTERING</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00132">global_textures.h:132</a></div></div>
<div class="ttc" id="aasvgf_8c_html_aaf637b78bcaad64ea5d71d9a219dcf73"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a></div><div class="ttdeci">#define BARRIER_COMPUTE(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00192">asvgf.c:192</a></div></div>
<div class="ttc" id="atextures_8c_html_adf9f289fcaf29e68d4ed69c516bba79b"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#adf9f289fcaf29e68d4ed69c516bba79b">vkpt_normalize_normal_map</a></div><div class="ttdeci">void vkpt_normalize_normal_map(image_t *image)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00592">textures.c:592</a></div></div>
<div class="ttc" id="astructvkpt__refdef__s_html_a7aeeecbc1e866618627d3cb8a89af586"><div class="ttname"><a href="../../d1/dbe/structvkpt__refdef__s.html#a7aeeecbc1e866618627d3cb8a89af586">vkpt_refdef_s::bsp_mesh_world</a></div><div class="ttdeci">bsp_mesh_t bsp_mesh_world</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00406">vkpt.h:406</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_a2a8d705cd1b853072596494fb7ae60d5"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#a2a8d705cd1b853072596494fb7ae60d5">reset_required</a></div><div class="ttdeci">static int reset_required</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00071">tone_mapping.c:71</a></div></div>
<div class="ttc" id="atextures_8c_html_a3b5a892ea60eeca2e0927661680a52eb"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a3b5a892ea60eeca2e0927661680a52eb">tex_invalid_texture_image_view</a></div><div class="ttdeci">static VkImageView tex_invalid_texture_image_view</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00063">textures.c:63</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_ab1ce8d860cd725aa0cd564c4c8d54b95"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#ab1ce8d860cd725aa0cd564c4c8d54b95">bsp_model_s::idx_count</a></div><div class="ttdeci">uint32_t idx_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00326">vkpt.h:326</a></div></div>
<div class="ttc" id="aglobal__ubo_8h_html_a75db9a8f9789bce657c8199fb42f058b"><div class="ttname"><a href="../../dd/dc3/global__ubo_8h.html#a75db9a8f9789bce657c8199fb42f058b">GLOBAL_UBO_BINDING_IDX</a></div><div class="ttdeci">#define GLOBAL_UBO_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc3/global__ubo_8h_source.html#l00025">global_ubo.h:25</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a9cb64526659b4bebea0d36565debb187"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a9cb64526659b4bebea0d36565debb187">NUM_IMAGES</a></div><div class="ttdeci">#define NUM_IMAGES</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00121">global_textures.h:121</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_ab01fd5e015543f9dfc29f868fbee4f2e"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#ab01fd5e015543f9dfc29f868fbee4f2e">pipeline_layout_stretch_pic</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_stretch_pic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00050">draw.c:50</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a465d2168c39bd20c39b45e4fcb3f35d5"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a465d2168c39bd20c39b45e4fcb3f35d5">pipeline_stretch_pic</a></div><div class="ttdeci">static VkPipeline pipeline_stretch_pic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00053">draw.c:53</a></div></div>
<div class="ttc" id="ag__main_8c_html_a921a13ed691ee9d87865050d3018d2d4"><div class="ttname"><a href="../../df/dd3/g__main_8c.html#a921a13ed691ee9d87865050d3018d2d4">Com_Error</a></div><div class="ttdeci">void Com_Error(error_type_t type, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/g__main_8c_source.html#l00258">g_main.c:258</a></div></div>
<div class="ttc" id="astruct_device_memory_html"><div class="ttname"><a href="../../d8/dc9/struct_device_memory.html">DeviceMemory</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d62/device__memory__allocator_8h_source.html#l00028">device_memory_allocator.h:28</a></div></div>
<div class="ttc" id="agod__rays_8c_html_aaf637b78bcaad64ea5d71d9a219dcf73"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a></div><div class="ttdeci">#define BARRIER_COMPUTE(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00121">god_rays.c:121</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a19a9eac0d8f2611cde3b1a000c5b28c3"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a19a9eac0d8f2611cde3b1a000c5b28c3">collect_cluster_lights</a></div><div class="ttdeci">static void collect_cluster_lights(bsp_mesh_t *wm, bsp_t *bsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01471">bsp_mesh.c:1471</a></div></div>
<div class="ttc" id="aconstants_8h_html_aec3df863304e612e9764209e3e9f8af8"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#aec3df863304e612e9764209e3e9f8af8">SBT_RAHIT_SPRITE</a></div><div class="ttdeci">#define SBT_RAHIT_SPRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00134">constants.h:134</a></div></div>
<div class="ttc" id="astructmaliasframe__s_html_a0a341e4b49936449253040d194e3f18e"><div class="ttname"><a href="../../d0/d28/structmaliasframe__s.html#a0a341e4b49936449253040d194e3f18e">maliasframe_s::bounds</a></div><div class="ttdeci">vec3_t bounds[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00228">gl.h:228</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a334a9b1d2bd6e116c30c6264a7c194ba"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a334a9b1d2bd6e116c30c6264a7c194ba">bsp_mesh_s::cluster_lights</a></div><div class="ttdeci">int * cluster_lights</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00371">vkpt.h:371</a></div></div>
<div class="ttc" id="avkpt_8h_html_af6dfbd1e98c433910a0dc1b72602de80"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#af6dfbd1e98c433910a0dc1b72602de80">PROFILER_LIST</a></div><div class="ttdeci">#define PROFILER_LIST</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00432">vkpt.h:432</a></div></div>
<div class="ttc" id="astruct_unused_resources_html_a170f2eb40b1a5a464e3deb31909aea2e"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html#a170f2eb40b1a5a464e3deb31909aea2e">UnusedResources::image_views</a></div><div class="ttdeci">VkImageView image_views[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00036">textures.c:36</a></div></div>
<div class="ttc" id="atransparency_8c_html_a4d63039a7367379f6b712ad926163abc"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a4d63039a7367379f6b712ad926163abc">MAX_BEAMS</a></div><div class="ttdeci">#define MAX_BEAMS</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00386">transparency.c:386</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a7d18423c649507c259bc34a1708e4f0c"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a7d18423c649507c259bc34a1708e4f0c">img_smap</a></div><div class="ttdeci">static VkImage img_smap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00029">shadow_map.c:29</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_aa3262b3d306917690e1c9f6ef3cdbe07"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#aa3262b3d306917690e1c9f6ef3cdbe07">pbr_material_s::emissive_scale</a></div><div class="ttdeci">float emissive_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00041">material.h:41</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a473af1351495a759ac2c3ac331abce2f"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a473af1351495a759ac2c3ac331abce2f">bsp_mesh_s::cluster_light_offsets</a></div><div class="ttdeci">int * cluster_light_offsets</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00370">vkpt.h:370</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_ae7c72dbc0820dbfd68de79fd8f48f68f"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#ae7c72dbc0820dbfd68de79fd8f48f68f">pbr_material_s::bump_scale</a></div><div class="ttdeci">float bump_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00038">material.h:38</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a0986d67453f63f3c447240c05e5c1c94"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a0986d67453f63f3c447240c05e5c1c94">pipeline_layout_taa</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_taa</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00042">asvgf.c:42</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ae382708530566afbeb8db921b7146cc8"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ae382708530566afbeb8db921b7146cc8">explosions_present</a></div><div class="ttdeci">static int explosions_present</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00069">path_tracer.c:69</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_aead77274a082ebafba7a8ac7ec306b98"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#aead77274a082ebafba7a8ac7ec306b98">QVK_s::queue_idx_graphics</a></div><div class="ttdeci">int32_t queue_idx_graphics</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00176">vkpt.h:176</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a8ce180b480a022c44a916143860aaabc"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a8ce180b480a022c44a916143860aaabc">pipeline_layout_smap</a></div><div class="ttdeci">VkPipelineLayout pipeline_layout_smap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00024">shadow_map.c:24</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a259c1b75711bed4a4cbc688faa9c4321"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a259c1b75711bed4a4cbc688faa9c4321">QVK_s::extent_screen_images</a></div><div class="ttdeci">VkExtent2D extent_screen_images</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00183">vkpt.h:183</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a3de8a05ce7504737297f367f0ae1c2e8"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a3de8a05ce7504737297f367f0ae1c2e8">QVK_s::desc_set_vertex_buffer</a></div><div class="ttdeci">VkDescriptorSet desc_set_vertex_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00241">vkpt.h:241</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_aca1ac6ea7a5cdf9e6473e90abd3eb118"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#aca1ac6ea7a5cdf9e6473e90abd3eb118">draw_char</a></div><div class="ttdeci">static void draw_char(int x, int y, int flags, int c, qhandle_t font)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00726">draw.c:726</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_aec1ff219ca7e90f046e71ed586298eb4"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#aec1ff219ca7e90f046e71ed586298eb4">QVK_s::current_swap_chain_image_index</a></div><div class="ttdeci">uint32_t current_swap_chain_image_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00218">vkpt.h:218</a></div></div>
<div class="ttc" id="aconstants_8h_html_abb0a3e131d7acabbc158174ceb958f8d"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#abb0a3e131d7acabbc158174ceb958f8d">AS_FLAG_CUSTOM_SKY</a></div><div class="ttdeci">#define AS_FLAG_CUSTOM_SKY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00114">constants.h:114</a></div></div>
<div class="ttc" id="aconstants_8h_html_a5788d34a367e20de671f1b605df3c412"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a5788d34a367e20de671f1b605df3c412">SBT_RCHIT_EMPTY</a></div><div class="ttdeci">#define SBT_RCHIT_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00135">constants.h:135</a></div></div>
<div class="ttc" id="ap__view_8c_html_a6cb5d7464231c3110d95905fb7d83cc7"><div class="ttname"><a href="../../d4/d73/p__view_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a></div><div class="ttdeci">static vec3_t forward</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d73/p__view_8c_source.html#l00027">p_view.c:27</a></div></div>
<div class="ttc" id="astructcmd__buf__group__s_html"><div class="ttname"><a href="../../db/dbd/structcmd__buf__group__s.html">cmd_buf_group_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00143">vkpt.h:143</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9eae0cb2760f63da9fda44e48ded87bd849"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eae0cb2760f63da9fda44e48ded87bd849">ATROUS_ITER_3</a></div><div class="ttdeci">@ ATROUS_ITER_3</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00032">asvgf.c:32</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_ade97ffa6279b943e52e7350d6a08f6c5"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#ade97ffa6279b943e52e7350d6a08f6c5">pbr_material_s::num_frames</a></div><div class="ttdeci">int num_frames</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00044">material.h:44</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a5c28f21fb4134658625d2e9b4aaf52ee"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a5c28f21fb4134658625d2e9b4aaf52ee">stretch_pic_queue</a></div><div class="ttdeci">static StretchPic_t stretch_pic_queue[MAX_STRETCH_PICS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00048">draw.c:48</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_a770130e797a9b3a8ae4c7308920c9ee5"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#a770130e797a9b3a8ae4c7308920c9ee5">pipeline_layout_tone_mapping_curve</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_tone_mapping_curve</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00069">tone_mapping.c:69</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a2691e150f7e79077738eb2c6ee48880a"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a2691e150f7e79077738eb2c6ee48880a">LIST_IMAGES</a></div><div class="ttdeci">#define LIST_IMAGES</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00034">global_textures.h:34</a></div></div>
<div class="ttc" id="aclient_2client_8h_html_a26b3965778674ca93982ac5eeafa4c41"><div class="ttname"><a href="../../d0/da6/client_2client_8h.html#a26b3965778674ca93982ac5eeafa4c41">cl_player_model</a></div><div class="ttdeci">cvar_t * cl_player_model</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5f/client_2main_8c_source.html#l00047">main.c:47</a></div></div>
<div class="ttc" id="astructmaliasframe__s_html_a6a9d6e20f71090e2101860e235ebaf5d"><div class="ttname"><a href="../../d0/d28/structmaliasframe__s.html#a6a9d6e20f71090e2101860e235ebaf5d">maliasframe_s::radius</a></div><div class="ttdeci">vec_t radius</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00229">gl.h:229</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a63611ec38e729cec465013e2e1bd90b2"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a63611ec38e729cec465013e2e1bd90b2">RAY_GEN_PARTICLE_COLOR_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define RAY_GEN_PARTICLE_COLOR_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00029">path_tracer.c:29</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea16f04cfe5871f6a14faa8690f26b8dd2"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea16f04cfe5871f6a14faa8690f26b8dd2">ATROUS_ITER_2</a></div><div class="ttdeci">@ ATROUS_ITER_2</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00031">asvgf.c:31</a></div></div>
<div class="ttc" id="astruct_tone_mapping_buffer_html"><div class="ttname"><a href="../../df/db4/struct_tone_mapping_buffer.html">ToneMappingBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00116">vertex_buffer.h:116</a></div></div>
<div class="ttc" id="abloom_8c_html_a654e2e6753c58b7e4e887129ebcf374d"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a654e2e6753c58b7e4e887129ebcf374d">mix</a></div><div class="ttdeci">static float mix(float a, float b, float s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00083">bloom.c:83</a></div></div>
<div class="ttc" id="atextures_8c_html_a7241d05ed505797f422bd9084875e7bb"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a7241d05ed505797f422bd9084875e7bb">tex_bind_image_info</a></div><div class="ttdeci">static VkBindImageMemoryInfo tex_bind_image_info[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00069">textures.c:69</a></div></div>
<div class="ttc" id="aconstants_8h_html_ae8efa41d7b39f4e0596b93430f9c3129"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#ae8efa41d7b39f4e0596b93430f9c3129">SBT_RAHIT_PARTICLE</a></div><div class="ttdeci">#define SBT_RAHIT_PARTICLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00131">constants.h:131</a></div></div>
<div class="ttc" id="avkpt_8h_html_a9f3182ad90ad3ba0cf65457c7384a9b3a7dda3ea083edad695232f7d2c30d7e77"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a9f3182ad90ad3ba0cf65457c7384a9b3a7dda3ea083edad695232f7d2c30d7e77">PROFILER_STOP</a></div><div class="ttdeci">@ PROFILER_STOP</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00470">vkpt.h:470</a></div></div>
<div class="ttc" id="atransparency_8c_html_af88b9a68d93d2865515aa03d4525fcc5"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#af88b9a68d93d2865515aa03d4525fcc5">TR_SPRITE_INFO_SIZE</a></div><div class="ttdeci">#define TR_SPRITE_INFO_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00030">transparency.c:30</a></div></div>
<div class="ttc" id="agod__rays_8c_html_a06e8fa7c5114fa85b6dec0586c8be4e6"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#a06e8fa7c5114fa85b6dec0586c8be4e6">THREAD_GROUP_SIZE</a></div><div class="ttdeci">static const uint32_t THREAD_GROUP_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00023">god_rays.c:23</a></div></div>
<div class="ttc" id="atransparency_8c_html_ac5baedefc7e2e41bbc6027b848a3b904"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ac5baedefc7e2e41bbc6027b848a3b904">cvar_pt_beam_width</a></div><div class="ttdeci">cvar_t * cvar_pt_beam_width</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00096">transparency.c:96</a></div></div>
<div class="ttc" id="astructpbr__material__s_html"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html">pbr_material_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00033">material.h:33</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a76bda46cee7c8c83ecda0a3fdf944aab"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a76bda46cee7c8c83ecda0a3fdf944aab">get_triangle_off_center</a></div><div class="ttdeci">qboolean get_triangle_off_center(const float *positions, float *center, float *anti_center)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00282">bsp_mesh.c:282</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_abbabe8104e530a84a8107abad44fc79a"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#abbabe8104e530a84a8107abad44fc79a">ToneMappingBuffer</a></div><div class="ttdeci">struct ToneMappingBuffer ToneMappingBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00162">vertex_buffer.h:162</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a057af188511ce0ba0d2b8ecfb0c095bb"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a057af188511ce0ba0d2b8ecfb0c095bb">maliasmesh_s::materials</a></div><div class="ttdeci">struct pbr_material_s * materials[MAX_ALIAS_SKINS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00703">vkpt.h:703</a></div></div>
<div class="ttc" id="afreecam_8c_html_a1bfcfdeb17bf80d6a8ef1427bd0b2f3f"><div class="ttname"><a href="../../da/d09/freecam_8c.html#a1bfcfdeb17bf80d6a8ef1427bd0b2f3f">cvar_pt_freecam</a></div><div class="ttdeci">cvar_t * cvar_pt_freecam</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00058">main.c:58</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_aa7d890e7df8fb40492f3cb1a2cc6a75d"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#aa7d890e7df8fb40492f3cb1a2cc6a75d">filter_static_opaque</a></div><div class="ttdeci">static int filter_static_opaque(int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00245">bsp_mesh.c:245</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a17d406b62a66c7aa3fd95c3d874ed99e"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a17d406b62a66c7aa3fd95c3d874ed99e">QVK_s::buf_sun_color</a></div><div class="ttdeci">BufferResource_t buf_sun_color</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00253">vkpt.h:253</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a479df98c7bf37399d082f1be0e1d68d6"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a479df98c7bf37399d082f1be0e1d68d6">MAX_VERT_BSP</a></div><div class="ttdeci">#define MAX_VERT_BSP</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00023">vertex_buffer.h:23</a></div></div>
<div class="ttc" id="ashared_8c_html_aa64168c27e0f1b6341cc31ea309081b2"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#aa64168c27e0f1b6341cc31ea309081b2">va</a></div><div class="ttdeci">char * va(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00429">shared.c:429</a></div></div>
<div class="ttc" id="aconstants_8h_html_ac55b17f6fec4f7dd88381ad8f54a96be"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#ac55b17f6fec4f7dd88381ad8f54a96be">SBT_RGEN_REFLECT_REFRACT1</a></div><div class="ttdeci">#define SBT_RGEN_REFLECT_REFRACT1</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00122">constants.h:122</a></div></div>
<div class="ttc" id="azone_8c_html_abd714e31b23fa6f1df5d475e2ec7e4b2"><div class="ttname"><a href="../../de/dad/zone_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a></div><div class="ttdeci">void Z_Free(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dad/zone_8c_source.html#l00147">zone.c:147</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea4331d062f331d607251ba0aa6d6188f0"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea4331d062f331d607251ba0aa6d6188f0">FWD_PROJECT</a></div><div class="ttdeci">@ FWD_PROJECT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00024">asvgf.c:24</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a6b902c867d637cb156f07f33a8258e78"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a6b902c867d637cb156f07f33a8258e78">num_stretch_pics</a></div><div class="ttdeci">static int num_stretch_pics</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00038">draw.c:38</a></div></div>
<div class="ttc" id="astruct_buffer_resource__s_html_a4d30659c487cc020da541bb79f63df9b"><div class="ttname"><a href="../../da/d4f/struct_buffer_resource__s.html#a4d30659c487cc020da541bb79f63df9b">BufferResource_s::buffer</a></div><div class="ttdeci">VkBuffer buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00034">vk_util.h:34</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_acd09c4018a3e30440e1529a316a7cf04"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#acd09c4018a3e30440e1529a316a7cf04">create_render_pass</a></div><div class="ttdeci">static void create_render_pass()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00036">shadow_map.c:36</a></div></div>
<div class="ttc" id="abloom_8c_html_a16af7b253440dadd46a80a4b9fddba4dab8c2bda4428c2d5d54c6342a178c8bc3"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4dab8c2bda4428c2d5d54c6342a178c8bc3">BLOOM_NUM_PIPELINES</a></div><div class="ttdeci">@ BLOOM_NUM_PIPELINES</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00026">bloom.c:26</a></div></div>
<div class="ttc" id="afreecam_8c_html_aaae9d3470ba219ed9857054562d6c5fd"><div class="ttname"><a href="../../da/d09/freecam_8c.html#aaae9d3470ba219ed9857054562d6c5fd">cvar_pt_focus</a></div><div class="ttdeci">cvar_t * cvar_pt_focus</div></div>
<div class="ttc" id="astructbsp__model__s_html_abebc9a83edf52283710113d643740461"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#abebc9a83edf52283710113d643740461">bsp_model_s::allocated_light_polys</a></div><div class="ttdeci">int allocated_light_polys</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00332">vkpt.h:332</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a137b4c438251dda30e094526289efde5"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a137b4c438251dda30e094526289efde5">vkpt_pt_create_explosions</a></div><div class="ttdeci">static VkResult vkpt_pt_create_explosions(VkCommandBuffer cmd_buf, int idx, VkBuffer vertex_buffer, size_t buffer_offset, int num_vertices, int vertex_offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00749">path_tracer.c:749</a></div></div>
<div class="ttc" id="atextures_8c_html_abbcc2251544991392b8ec4dbc1c48c09"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#abbcc2251544991392b8ec4dbc1c48c09">descriptor_set_dirty_flags</a></div><div class="ttdeci">static uint8_t descriptor_set_dirty_flags[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00073">textures.c:73</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_ae51c95b35d36bbabe412da86b8b44671"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#ae51c95b35d36bbabe412da86b8b44671">buf_stretch_pic_queue</a></div><div class="ttdeci">static BufferResource_t buf_stretch_pic_queue[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00056">draw.c:56</a></div></div>
<div class="ttc" id="afreecam_8c_html_ae20bb2c861efc0eeb5594ee86970d03b"><div class="ttname"><a href="../../da/d09/freecam_8c.html#ae20bb2c861efc0eeb5594ee86970d03b">freecam_vieworg</a></div><div class="ttdeci">static vec3_t freecam_vieworg</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00034">freecam.c:34</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a35e6d8d722910a211710b44dd713b5de"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a35e6d8d722910a211710b44dd713b5de">QVK_s::swap_chain_images</a></div><div class="ttdeci">VkImage swap_chain_images[MAX_SWAPCHAIN_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00190">vkpt.h:190</a></div></div>
<div class="ttc" id="aimages_8c_html_a3720d7aa1996a899d99959ee8ecf0509"><div class="ttname"><a href="../../d7/d59/images_8c.html#a3720d7aa1996a899d99959ee8ecf0509">try_other_formats</a></div><div class="ttdeci">static int try_other_formats(imageformat_t orig, image_t *image, byte **pic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/images_8c_source.html#l00823">images.c:823</a></div></div>
<div class="ttc" id="akeys_8c_html_a38240210679b9f3092cdaa34479444d6"><div class="ttname"><a href="../../db/de3/keys_8c.html#a38240210679b9f3092cdaa34479444d6">Key_IsDown</a></div><div class="ttdeci">int Key_IsDown(int key)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de3/keys_8c_source.html#l00204">keys.c:204</a></div></div>
<div class="ttc" id="aclient_2client_8h_html_a14e09ab8ea85a92cb6d84d21227b9201"><div class="ttname"><a href="../../d0/da6/client_2client_8h.html#a14e09ab8ea85a92cb6d84d21227b9201">CL_PLAYER_MODEL_FIRST_PERSON</a></div><div class="ttdeci">#define CL_PLAYER_MODEL_FIRST_PERSON</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/client_2client_8h_source.html#l00555">client.h:555</a></div></div>
<div class="ttc" id="amdfour_8c_html_a350e5faad8452a1f43b1df37d9cf6c9d"><div class="ttname"><a href="../../dc/d5d/mdfour_8c.html#a350e5faad8452a1f43b1df37d9cf6c9d">m</a></div><div class="ttdeci">static struct mdfour * m</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/mdfour_8c_source.html#l00032">mdfour.c:32</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a1a763409094901fbe372c38c85579614"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a1a763409094901fbe372c38c85579614">buf_accel_scratch</a></div><div class="ttdeci">static BufferResource_t buf_accel_scratch</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00054">path_tracer.c:54</a></div></div>
<div class="ttc" id="atextures_8c_html_ab28c26fd0af9d89a9ce5b7237fdf5c10"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#ab28c26fd0af9d89a9ce5b7237fdf5c10">vkpt_extract_emissive_texture_info</a></div><div class="ttdeci">void vkpt_extract_emissive_texture_info(image_t *image)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00532">textures.c:532</a></div></div>
<div class="ttc" id="atransparency_8c_html_ada1567bc5639b4f13fc4bce48a6238c6"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ada1567bc5639b4f13fc4bce48a6238c6">get_transparency_beam_color_buffer_view</a></div><div class="ttdeci">VkBufferView get_transparency_beam_color_buffer_view()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00246">transparency.c:246</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_a0244fb4395f567fe80d8a8c08f7a8fe7"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#a0244fb4395f567fe80d8a8c08f7a8fe7">pipeline_animate_materials</a></div><div class="ttdeci">static VkPipeline pipeline_animate_materials</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00032">vertex_buffer.c:32</a></div></div>
<div class="ttc" id="ashared_8c_html_a14808b68c28d0a9eb463557dee6117de"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a14808b68c28d0a9eb463557dee6117de">ClearBounds</a></div><div class="ttdeci">void ClearBounds(vec3_t mins, vec3_t maxs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00091">shared.c:91</a></div></div>
<div class="ttc" id="apath__tracer_8h_html_a6a2a0d38da813ea5a782f85284ce6f1d"><div class="ttname"><a href="../../d6/d55/path__tracer_8h.html#a6a2a0d38da813ea5a782f85284ce6f1d">push_constants</a></div><div class="ttdeci">push_constants</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d55/path__tracer_8h_source.html#l00129">path_tracer.h:129</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aa39d8ccf23e66cda3105676d16a556ed"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aa39d8ccf23e66cda3105676d16a556ed">accel_viewer_weapon</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_viewer_weapon[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00076">path_tracer.c:76</a></div></div>
<div class="ttc" id="abloom_8c_html_a2338f9e3e5cee5c54e5162b5ce633481"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a2338f9e3e5cee5c54e5162b5ce633481">cvar_bloom_intensity_water</a></div><div class="ttdeci">cvar_t * cvar_bloom_intensity_water</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00050">bloom.c:50</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea779e3829b4fba1f138ba57f85d08c8fd"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea779e3829b4fba1f138ba57f85d08c8fd">GRADIENT_ATROUS</a></div><div class="ttdeci">@ GRADIENT_ATROUS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00026">asvgf.c:26</a></div></div>
<div class="ttc" id="astructcmd__buf__group__s_html_a0dd75cb658239ded2ddd4572889fcc3d"><div class="ttname"><a href="../../db/dbd/structcmd__buf__group__s.html#a0dd75cb658239ded2ddd4572889fcc3d">cmd_buf_group_s::buffers</a></div><div class="ttdeci">VkCommandBuffer * buffers</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00146">vkpt.h:146</a></div></div>
<div class="ttc" id="amesh_8c_html_a06c03d99171c78033b4708deb067beb3"><div class="ttname"><a href="../../d6/d6b/mesh_8c.html#a06c03d99171c78033b4708deb067beb3">origin</a></div><div class="ttdeci">static vec3_t origin</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6b/mesh_8c_source.html#l00027">mesh.c:27</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_ade37a58abe3ddf61ac024d666dec3638"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#ade37a58abe3ddf61ac024d666dec3638">bsp_mesh_s::materials</a></div><div class="ttdeci">uint32_t * materials</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00361">vkpt.h:361</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a6a5a49798a96db987404c8aa3b804fe3"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a6a5a49798a96db987404c8aa3b804fe3">IMG_WIDTH</a></div><div class="ttdeci">#define IMG_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00025">global_textures.h:25</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a18cbf4d3f7b3230f5ae024abfd51306b"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a18cbf4d3f7b3230f5ae024abfd51306b">bsp_mesh_s::models</a></div><div class="ttdeci">bsp_model_t * models</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00345">vkpt.h:345</a></div></div>
<div class="ttc" id="avkpt_8h_html_ad3dbfa0d6a5d2b34ab7a243e37345f67abaf776874815a3678e5b6b70fb683a9a"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#ad3dbfa0d6a5d2b34ab7a243e37345f67abaf776874815a3678e5b6b70fb683a9a">NUM_QVK_SHADER_MODULES</a></div><div class="ttdeci">@ NUM_QVK_SHADER_MODULES</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00137">vkpt.h:137</a></div></div>
<div class="ttc" id="aimages_8c_html_aed2b4fd6c0319012517d15b973742f31"><div class="ttname"><a href="../../d7/d59/images_8c.html#aed2b4fd6c0319012517d15b973742f31">r_images</a></div><div class="ttdeci">image_t r_images[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/images_8c_source.html#l00651">images.c:651</a></div></div>
<div class="ttc" id="ashared_8c_html_a2e5fea4a84281f9ee70628579750f9f1"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a2e5fea4a84281f9ee70628579750f9f1">AngleVectors</a></div><div class="ttdeci">void AngleVectors(vec3_t angles, vec3_t forward, vec3_t right, vec3_t up)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00023">shared.c:23</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_a4b49e25d8f529f93a0d30bee9f2d6911"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#a4b49e25d8f529f93a0d30bee9f2d6911">max_cluster_model_lights</a></div><div class="ttdeci">static int max_cluster_model_lights[MAX_MAP_LEAFS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00128">vertex_buffer.c:128</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a9a08b54e757139289429a294e40c8252"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a9a08b54e757139289429a294e40c8252">mem_accel_static</a></div><div class="ttdeci">static VkDeviceMemory mem_accel_static</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00082">path_tracer.c:82</a></div></div>
<div class="ttc" id="amatrix_8c_html_a0b6a46ad562be9e2457b2701a7c8d758"><div class="ttname"><a href="../../dc/dca/matrix_8c.html#a0b6a46ad562be9e2457b2701a7c8d758">mult_matrix_vector</a></div><div class="ttdeci">void mult_matrix_vector(float *p, const float *a, const float *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dca/matrix_8c_source.html#l00295">matrix.c:295</a></div></div>
<div class="ttc" id="avkpt_8h_html_acdb36cf8358ef83e30b84e09f160e649"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#acdb36cf8358ef83e30b84e09f160e649">_VK_INST_EXTENSION_DO</a></div><div class="ttdeci">#define _VK_INST_EXTENSION_DO(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00280">vkpt.h:280</a></div></div>
<div class="ttc" id="ahunk_8c_html_a9bc83f7fca082513653d775a0de896fd"><div class="ttname"><a href="../../d4/d68/hunk_8c.html#a9bc83f7fca082513653d775a0de896fd">Hunk_End</a></div><div class="ttdeci">void Hunk_End(memhunk_t *hunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d68/hunk_8c_source.html#l00066">hunk.c:66</a></div></div>
<div class="ttc" id="atextures_8c_html_a57bbf2e13f9413755a18f32f5fc75e65"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a57bbf2e13f9413755a18f32f5fc75e65">encode_linear</a></div><div class="ttdeci">static byte encode_linear(float x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00524">textures.c:524</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a3e6a90c3bc8b4e6ecd005a3a3166f50b"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a3e6a90c3bc8b4e6ecd005a3a3166f50b">viewer_weapon_primitive_offset</a></div><div class="ttdeci">static int viewer_weapon_primitive_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00067">path_tracer.c:67</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aba54c30aebc1bb4079c338f51cb2849c"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aba54c30aebc1bb4079c338f51cb2849c">transparent_models_present</a></div><div class="ttdeci">static int transparent_models_present</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00065">path_tracer.c:65</a></div></div>
<div class="ttc" id="afreecam_8c_html_ac9c22342dfbf619d329468acd09be9fe"><div class="ttname"><a href="../../da/d09/freecam_8c.html#ac9c22342dfbf619d329468acd09be9fe">freecam_viewangles</a></div><div class="ttdeci">static vec3_t freecam_viewangles</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00035">freecam.c:35</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_aa6e21659490f166b3b95ed41051276d3"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#aa6e21659490f166b3b95ed41051276d3">QVK_s::images</a></div><div class="ttdeci">VkImage images[NUM_VKPT_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00231">vkpt.h:231</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a7aa618f97b758bf9d39af3d08922f60a"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a7aa618f97b758bf9d39af3d08922f60a">setup_rt_pipeline</a></div><div class="ttdeci">static void setup_rt_pipeline(VkCommandBuffer cmd_buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00990">path_tracer.c:990</a></div></div>
<div class="ttc" id="astruct_unused_resources_html_ad7d917fe0e13d473e03d0fbd8e15e76f"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html#ad7d917fe0e13d473e03d0fbd8e15e76f">UnusedResources::buffer_num</a></div><div class="ttdeci">uint32_t buffer_num</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00041">textures.c:41</a></div></div>
<div class="ttc" id="auniform__buffer_8c_html_ad9345dc15cdce6e1defc4d2c801147d1"><div class="ttname"><a href="../../dd/d22/uniform__buffer_8c.html#ad9345dc15cdce6e1defc4d2c801147d1">ubo_alignment</a></div><div class="ttdeci">static size_t ubo_alignment</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d22/uniform__buffer_8c_source.html#l00027">uniform_buffer.c:27</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a393cfcb10f6ffd3ad71a834f35eb025c"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a393cfcb10f6ffd3ad71a834f35eb025c">MAX_LIGHT_LISTS</a></div><div class="ttdeci">#define MAX_LIGHT_LISTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00032">vertex_buffer.h:32</a></div></div>
<div class="ttc" id="avk__util_8c_html_acfa29d565dcf3cddb34df56ca5bafc76"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#acfa29d565dcf3cddb34df56ca5bafc76">set_current_gpu</a></div><div class="ttdeci">void set_current_gpu(VkCommandBuffer cmd_buf, int gpu_index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00426">vk_util.c:426</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a4687fb7bfc20f54d3fa5bea7d0ed61db"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a4687fb7bfc20f54d3fa5bea7d0ed61db">MEM_BARRIER_BUILD_ACCEL</a></div><div class="ttdeci">#define MEM_BARRIER_BUILD_ACCEL(cmd_buf,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00118">path_tracer.c:118</a></div></div>
<div class="ttc" id="agod__rays_8c_html_ad58f8ad296e0708d51476665f1accbad"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#ad58f8ad296e0708d51476665f1accbad">update_descriptor_set</a></div><div class="ttdeci">static void update_descriptor_set()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00353">god_rays.c:353</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_afcb2b820f9112d3cc208b79f675f60d2"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#afcb2b820f9112d3cc208b79f675f60d2">QVK_s::screenshot_image</a></div><div class="ttdeci">VkImage screenshot_image</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00261">vkpt.h:261</a></div></div>
<div class="ttc" id="agod__rays_8c_html_ab3a2397c181b1fc2d834adf7f0466f00"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#ab3a2397c181b1fc2d834adf7f0466f00">create_descriptor_set</a></div><div class="ttdeci">static void create_descriptor_set()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00327">god_rays.c:327</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a509566621a0b52524e800f69546c94be"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a509566621a0b52524e800f69546c94be">IMG_HEIGHT</a></div><div class="ttdeci">#define IMG_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00026">global_textures.h:26</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_a11823e68ed3d985774c5def8659a9054"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#a11823e68ed3d985774c5def8659a9054">vkpt_refdef</a></div><div class="ttdeci">vkpt_refdef_t vkpt_refdef</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00372">main.c:372</a></div></div>
<div class="ttc" id="acvar_8c_html_af8073267db27dfba071ef3c2cdc2c751"><div class="ttname"><a href="../../d7/de8/cvar_8c.html#af8073267db27dfba071ef3c2cdc2c751">Cvar_SetByVar</a></div><div class="ttdeci">void Cvar_SetByVar(cvar_t *var, const char *value, from_t from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de8/cvar_8c_source.html#l00345">cvar.c:345</a></div></div>
<div class="ttc" id="astructlight__poly__s_html_a8f6db572f63d365284a4ce3f65fb13e8"><div class="ttname"><a href="../../d4/db6/structlight__poly__s.html#a8f6db572f63d365284a4ce3f65fb13e8">light_poly_s::style</a></div><div class="ttdeci">int style</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00321">vkpt.h:321</a></div></div>
<div class="ttc" id="ashared_8c_html_a91dc50598bececc7b4064e7b63aef71e"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a91dc50598bececc7b4064e7b63aef71e">Q_strlcpy</a></div><div class="ttdeci">size_t Q_strlcpy(char *dst, const char *src, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00715">shared.c:715</a></div></div>
<div class="ttc" id="atransparency_8c_html_ae13f02cb6e520411114108151e70eb19"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ae13f02cb6e520411114108151e70eb19">cvar_pt_beam_lights</a></div><div class="ttdeci">cvar_t * cvar_pt_beam_lights</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00097">transparency.c:97</a></div></div>
<div class="ttc" id="afreecam_8c_html_ae80be44d42b1a932dbf5a4ac9d072410"><div class="ttname"><a href="../../da/d09/freecam_8c.html#ae80be44d42b1a932dbf5a4ac9d072410">freecam_player_model</a></div><div class="ttdeci">static int freecam_player_model</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00039">freecam.c:39</a></div></div>
<div class="ttc" id="astruct_readback_buffer_html"><div class="ttname"><a href="../../df/d67/struct_readback_buffer.html">ReadbackBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00134">vertex_buffer.h:134</a></div></div>
<div class="ttc" id="aconstants_8h_html_a28dc79480eb73e947553b7a2d11c058e"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a28dc79480eb73e947553b7a2d11c058e">AS_INSTANCE_FLAG_SKY</a></div><div class="ttdeci">#define AS_INSTANCE_FLAG_SKY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00118">constants.h:118</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_aa1776331030c090b50d4770d06a4532e"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#aa1776331030c090b50d4770d06a4532e">vkpt_reset_command_buffers</a></div><div class="ttdeci">void vkpt_reset_command_buffers(cmd_buf_group_t *group)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03392">main.c:3392</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a1102c197be33367e2b187d5a655ebb8a"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a1102c197be33367e2b187d5a655ebb8a">framebuffer_stretch_pic</a></div><div class="ttdeci">static VkFramebuffer framebuffer_stretch_pic[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00055">draw.c:55</a></div></div>
<div class="ttc" id="atransparency_8c_html_a61557beb8afd171bd911865c93c758dc"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a61557beb8afd171bd911865c93c758dc">beam_num</a></div><div class="ttdeci">unsigned int beam_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00051">transparency.c:51</a></div></div>
<div class="ttc" id="atextures_8c_html_abe59b604817a1907dad48695e9d183a7"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#abe59b604817a1907dad48695e9d183a7">imv_blue_noise</a></div><div class="ttdeci">static VkImageView imv_blue_noise</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00057">textures.c:57</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_a4b6a8e87531a795daeb57355822eb915"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4b6a8e87531a795daeb57355822eb915">vkpt_wait_idle</a></div><div class="ttdeci">void vkpt_wait_idle(VkQueue queue, cmd_buf_group_t *group)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03405">main.c:3405</a></div></div>
<div class="ttc" id="astructbsp__model__s_html"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html">bsp_model_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00324">vkpt.h:324</a></div></div>
<div class="ttc" id="abloom_8c_html_a341924051d3e05678b44e33ab4d251fd"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a341924051d3e05678b44e33ab4d251fd">BARRIER_TO_COPY_SRC</a></div><div class="ttdeci">#define BARRIER_TO_COPY_SRC(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00262">bloom.c:262</a></div></div>
<div class="ttc" id="agod__rays_8c_html_a65dd38449565cd3c429fa65766590c4c"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#a65dd38449565cd3c429fa65766590c4c">pipelines</a></div><div class="ttdeci">VkPipeline pipelines[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00028">god_rays.c:28</a></div></div>
<div class="ttc" id="atent_8c_html_ad0e13d94164219be2d5bbd4d65e71d1e"><div class="ttname"><a href="../../d3/d0f/tent_8c.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a></div><div class="ttdeci">#define LENGTH(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d0f/tent_8c_source.html#l00228">tent.c:228</a></div></div>
<div class="ttc" id="atransparency_8c_html_ae7ecd2b4b72332b49beba75fad608b9b"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ae7ecd2b4b72332b49beba75fad608b9b">sprite_num</a></div><div class="ttdeci">unsigned int sprite_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00052">transparency.c:52</a></div></div>
<div class="ttc" id="astructcmd__buf__group__s_html_adaa714c5f2627919f990835b732826ed"><div class="ttname"><a href="../../db/dbd/structcmd__buf__group__s.html#adaa714c5f2627919f990835b732826ed">cmd_buf_group_s::command_pool</a></div><div class="ttdeci">VkCommandPool command_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00147">vkpt.h:147</a></div></div>
<div class="ttc" id="aconstants_8h_html_a357ebafad04330b9ef2ca65d322504b9"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a357ebafad04330b9ef2ca65d322504b9">SHADOWMAP_SIZE</a></div><div class="ttdeci">#define SHADOWMAP_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00024">constants.h:24</a></div></div>
<div class="ttc" id="astructsun__light__s_html_a7a6cace7a64176996f1c10119a421e10"><div class="ttname"><a href="../../d4/db8/structsun__light__s.html#a7a6cace7a64176996f1c10119a421e10">sun_light_s::angular_size_rad</a></div><div class="ttdeci">float angular_size_rad</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00418">vkpt.h:418</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_a7116f74b029cce1c5e7b7d7d1b5827c8"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#a7116f74b029cce1c5e7b7d7d1b5827c8">pbr_material_s::image_diffuse</a></div><div class="ttdeci">image_t * image_diffuse</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00035">material.h:35</a></div></div>
<div class="ttc" id="agod__rays_8c_html_a3c4ce9a0c4f1c7e24070dee86e2d3b14"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#a3c4ce9a0c4f1c7e24070dee86e2d3b14">physical_sky_space</a></div><div class="ttdeci">cvar_t * physical_sky_space</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d62/physical__sky_8c_source.html#l00057">physical_sky.c:57</a></div></div>
<div class="ttc" id="atransparency_8c_html_acb4228a0d4473be61b39c62841d883a2"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#acb4228a0d4473be61b39c62841d883a2">write_sprite_geometry</a></div><div class="ttdeci">static void write_sprite_geometry(const float *view_matrix, const entity_t *entities, int entity_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00546">transparency.c:546</a></div></div>
<div class="ttc" id="avkpt_8h_html_ad0c03862ea5c60519a427776e427962e"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#ad0c03862ea5c60519a427776e427962e">BEGIN_PERF_MARKER</a></div><div class="ttdeci">#define BEGIN_PERF_MARKER(command_buffer, name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00742">vkpt.h:742</a></div></div>
<div class="ttc" id="aconstants_8h_html_a4300826074918a8b7dbae5cfd2acbaf1"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a4300826074918a8b7dbae5cfd2acbaf1">SBT_RAHIT_BEAM</a></div><div class="ttdeci">#define SBT_RAHIT_BEAM</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00132">constants.h:132</a></div></div>
<div class="ttc" id="amaterial_8c_html_a5a5ffa33ae9922760685fca9e8341e40"><div class="ttname"><a href="../../de/d87/material_8c.html#a5a5ffa33ae9922760685fca9e8341e40">MAT_GetPBRMaterialsTable</a></div><div class="ttdeci">const pbr_material_t * MAT_GetPBRMaterialsTable()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/material_8c_source.html#l00139">material.c:139</a></div></div>
<div class="ttc" id="aconstants_8h_html_ad26db0a52a630795900a3017a6f292fa"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#ad26db0a52a630795900a3017a6f292fa">NUM_LIGHT_STATS_BUFFERS</a></div><div class="ttdeci">#define NUM_LIGHT_STATS_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00044">constants.h:44</a></div></div>
<div class="ttc" id="aconstants_8h_html_a480c4717e75559ace575d255f8816392"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a480c4717e75559ace575d255f8816392">AS_FLAG_OPAQUE</a></div><div class="ttdeci">#define AS_FLAG_OPAQUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00107">constants.h:107</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_ae843c484249a0656d27595e8ea250f5d"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#ae843c484249a0656d27595e8ea250f5d">VertexBuffer</a></div><div class="ttdeci">struct VertexBuffer VertexBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00159">vertex_buffer.h:159</a></div></div>
<div class="ttc" id="amaterial_8c_html_acf5d3e61e3e0793db423c63edc03cda9"><div class="ttname"><a href="../../de/d87/material_8c.html#acf5d3e61e3e0793db423c63edc03cda9">MAT_IsKind</a></div><div class="ttdeci">qboolean MAT_IsKind(uint32_t material, uint32_t kind)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/material_8c_source.html#l00665">material.c:665</a></div></div>
<div class="ttc" id="abloom_8c_html_aa913b85a1373167bdda9e04c62e7e474"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#aa913b85a1373167bdda9e04c62e7e474">bloom_sigma</a></div><div class="ttdeci">static float bloom_sigma</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00053">bloom.c:53</a></div></div>
<div class="ttc" id="avk__util_8h_html_aa1f93aa95687e4d5b9d2322385a83091"><div class="ttname"><a href="../../db/d74/vk__util_8h.html#aa1f93aa95687e4d5b9d2322385a83091">VKPT_MAX_GPUS</a></div><div class="ttdeci">#define VKPT_MAX_GPUS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00030">vk_util.h:30</a></div></div>
<div class="ttc" id="abloom_8c_html_a8cc40c3794e3f946f0f78cf2d6d74fa4"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a8cc40c3794e3f946f0f78cf2d6d74fa4">cvar_bloom_debug</a></div><div class="ttdeci">cvar_t * cvar_bloom_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00046">bloom.c:46</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_aaa0583c2e7df78095ee18b682863b970"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#aaa0583c2e7df78095ee18b682863b970">MAX_LIGHT_POLYS</a></div><div class="ttdeci">#define MAX_LIGHT_POLYS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00035">vertex_buffer.h:35</a></div></div>
<div class="ttc" id="aglobal__ubo_8h_html_a5692793c470dd4b97353d7ddab0edde8"><div class="ttname"><a href="../../dd/dc3/global__ubo_8h.html#a5692793c470dd4b97353d7ddab0edde8">QVKUniformBuffer_t</a></div><div class="ttdeci">struct QVKUniformBuffer_s QVKUniformBuffer_t</div></div>
<div class="ttc" id="astruct_device_memory_html_adeb6f263c7fe2009f289e02ba0c63443"><div class="ttname"><a href="../../d8/dc9/struct_device_memory.html#adeb6f263c7fe2009f289e02ba0c63443">DeviceMemory::memory</a></div><div class="ttdeci">VkDeviceMemory memory</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d62/device__memory__allocator_8h_source.html#l00030">device_memory_allocator.h:30</a></div></div>
<div class="ttc" id="abloom_8c_html_a4909d9591c04f1e31a62b1b73c731908"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a4909d9591c04f1e31a62b1b73c731908">pipelines</a></div><div class="ttdeci">static VkPipeline pipelines[BLOOM_NUM_PIPELINES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00029">bloom.c:29</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a157d1b0cd5d462703c360aae405c6f21"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a157d1b0cd5d462703c360aae405c6f21">maliasmesh_s::tangents</a></div><div class="ttdeci">vec4_t * tangents</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00702">vkpt.h:702</a></div></div>
<div class="ttc" id="abloom_8c_html_a9a309999d27a8d305d348bd107c012a5"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a9a309999d27a8d305d348bd107c012a5">push_constants_vblur</a></div><div class="ttdeci">static struct bloom_blur_push_constants push_constants_vblur</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00043">bloom.c:43</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_ac4321101d6fabb6168b7e361e41b12a9"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#ac4321101d6fabb6168b7e361e41b12a9">bsp_mesh_s::world_sky_count</a></div><div class="ttdeci">uint32_t world_sky_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00354">vkpt.h:354</a></div></div>
<div class="ttc" id="atransparency_8c_html_ac8fed96b68318d66c1b503f7a2ff68d4"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#ac8fed96b68318d66c1b503f7a2ff68d4">vertex_buffer</a></div><div class="ttdeci">VkBuffer vertex_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00064">transparency.c:64</a></div></div>
<div class="ttc" id="aconstants_8h_html_a4472378d98524b028d549bbd62710518"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a4472378d98524b028d549bbd62710518">SBT_RGEN_INDIRECT_LIGHTING_FIRST</a></div><div class="ttdeci">#define SBT_RGEN_INDIRECT_LIGHTING_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00126">constants.h:126</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_adecc0b38eed69279656d3dfa9bc019cc"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#adecc0b38eed69279656d3dfa9bc019cc">transparent_model_primitive_offset</a></div><div class="ttdeci">static int transparent_model_primitive_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00064">path_tracer.c:64</a></div></div>
<div class="ttc" id="auniform__buffer_8c_html_a4901f50113921a1f8505d93c3e20c997"><div class="ttname"><a href="../../dd/d22/uniform__buffer_8c.html#a4901f50113921a1f8505d93c3e20c997">device_uniform_buffer</a></div><div class="ttdeci">static BufferResource_t device_uniform_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d22/uniform__buffer_8c_source.html#l00025">uniform_buffer.c:25</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a881812cc2b78d2f480244c1a29368c3b"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a881812cc2b78d2f480244c1a29368c3b">BINDING_OFFSET_SKY_IRRADIANCE</a></div><div class="ttdeci">#define BINDING_OFFSET_SKY_IRRADIANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00133">global_textures.h:133</a></div></div>
<div class="ttc" id="astruct_device_memory_html_ae09d490244106ed4fc74d0f9a670f43e"><div class="ttname"><a href="../../d8/dc9/struct_device_memory.html#ae09d490244106ed4fc74d0f9a670f43e">DeviceMemory::memory_offset</a></div><div class="ttdeci">uint64_t memory_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d62/device__memory__allocator_8h_source.html#l00031">device_memory_allocator.h:31</a></div></div>
<div class="ttc" id="astruct_unused_resources_html_a8c5bf24772db770d95eaa4356c8b6701"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html#a8c5bf24772db770d95eaa4356c8b6701">UnusedResources::buffer_memory</a></div><div class="ttdeci">VkDeviceMemory buffer_memory[MAX_RBUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00040">textures.c:40</a></div></div>
<div class="ttc" id="auniform__buffer_8c_html_ae4dec735a8fa4784787de6d3b024d6b2"><div class="ttname"><a href="../../dd/d22/uniform__buffer_8c.html#ae4dec735a8fa4784787de6d3b024d6b2">host_uniform_buffers</a></div><div class="ttdeci">static BufferResource_t host_uniform_buffers[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d22/uniform__buffer_8c_source.html#l00024">uniform_buffer.c:24</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a10a2032d96838036ea6e5a63cd6e83d5"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a10a2032d96838036ea6e5a63cd6e83d5">BINDING_OFFSET_PHYSICAL_SKY_IMG</a></div><div class="ttdeci">#define BINDING_OFFSET_PHYSICAL_SKY_IMG</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00130">global_textures.h:130</a></div></div>
<div class="ttc" id="avkpt_8h_html_a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a6b7b47dd702d9e331586d485013fd1eaabebf5b586ef9fe33138265484b2777c0">NUM_PROFILER_ENTRIES</a></div><div class="ttdeci">@ NUM_PROFILER_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00463">vkpt.h:463</a></div></div>
<div class="ttc" id="agod__rays_8c_html_a23de6c51612503a371bced5c02776cba"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#a23de6c51612503a371bced5c02776cba">create_pipelines</a></div><div class="ttdeci">static void create_pipelines()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00294">god_rays.c:294</a></div></div>
<div class="ttc" id="aglobal__ubo_8h_html_a979019dadcb6525c9b4ed04e49549859"><div class="ttname"><a href="../../dd/dc3/global__ubo_8h.html#a979019dadcb6525c9b4ed04e49549859">QVKInstanceBuffer_t</a></div><div class="ttdeci">struct QVKInstanceBuffer_s QVKInstanceBuffer_t</div></div>
<div class="ttc" id="aglobal__textures_8h_html_a941e131b3de8e0d60d6463f953ef5db6"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a941e131b3de8e0d60d6463f953ef5db6">BINDING_OFFSET_TERRAIN_DEPTH</a></div><div class="ttdeci">#define BINDING_OFFSET_TERRAIN_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00137">global_textures.h:137</a></div></div>
<div class="ttc" id="aconstants_8h_html_aa3fa657d25d7ad5d49f5d7cef7401ad5"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#aa3fa657d25d7ad5d49f5d7cef7401ad5">AS_FLAG_VIEWER_WEAPON</a></div><div class="ttdeci">#define AS_FLAG_VIEWER_WEAPON</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00111">constants.h:111</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a47f79304c4f95c06df8e64b65affa50d"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a47f79304c4f95c06df8e64b65affa50d">vkpt_pt_destroy_toplevel</a></div><div class="ttdeci">void vkpt_pt_destroy_toplevel(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00815">path_tracer.c:815</a></div></div>
<div class="ttc" id="aprofiler_8c_html_a5cb0d4552f71eaa92226f9f5b417360d"><div class="ttname"><a href="../../d2/ddb/profiler_8c.html#a5cb0d4552f71eaa92226f9f5b417360d">cvar_pt_reflect_refract</a></div><div class="ttdeci">cvar_t * cvar_pt_reflect_refract</div></div>
<div class="ttc" id="apath__tracer_8c_html_a175d7c4a99a51ff9c1648617feb95b0f"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a175d7c4a99a51ff9c1648617feb95b0f">cvar_pt_caustics</a></div><div class="ttdeci">cvar_t * cvar_pt_caustics</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00052">main.c:52</a></div></div>
<div class="ttc" id="astructlight__poly__s_html_a5ad08d0154a4fe9705ba7a9af5e03727"><div class="ttname"><a href="../../d4/db6/structlight__poly__s.html#a5ad08d0154a4fe9705ba7a9af5e03727">light_poly_s::off_center</a></div><div class="ttdeci">vec3_t off_center</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00317">vkpt.h:317</a></div></div>
<div class="ttc" id="atextures_8c_html_aea72a9d504c79601b5371a0e034dc4aa"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#aea72a9d504c79601b5371a0e034dc4aa">mem_envmap</a></div><div class="ttdeci">static VkDeviceMemory mem_envmap</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00055">textures.c:55</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a5e330921a2a2bebf13ebfae458a86663"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a5e330921a2a2bebf13ebfae458a86663">sky_primitive_offset</a></div><div class="ttdeci">static int sky_primitive_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00062">path_tracer.c:62</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a7d6ba384be74739107017ef3b0263d08"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a7d6ba384be74739107017ef3b0263d08">QVK_s::tex_sampler_linear_clamp</a></div><div class="ttdeci">VkSampler tex_sampler_linear_clamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00257">vkpt.h:257</a></div></div>
<div class="ttc" id="agod__rays_8c_html_a91fdddb083a7a9b3206de455a7bc69c0"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#a91fdddb083a7a9b3206de455a7bc69c0">create_pipeline_layout</a></div><div class="ttdeci">static void create_pipeline_layout()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00251">god_rays.c:251</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a7dd1e65d418b116f6f2bb2e3d4bfc03a"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a7dd1e65d418b116f6f2bb2e3d4bfc03a">QVK_s::desc_set_textures_odd</a></div><div class="ttdeci">VkDescriptorSet desc_set_textures_odd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00230">vkpt.h:230</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a336b8770f03748a386ae98591da63fea"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a336b8770f03748a386ae98591da63fea">QVK_s::cmd_buffers_compute</a></div><div class="ttdeci">cmd_buf_group_t cmd_buffers_compute</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00194">vkpt.h:194</a></div></div>
<div class="ttc" id="aimages_8c_html_aea9d0b9c081e22f7c0200a0c744c7e3f"><div class="ttname"><a href="../../d7/d59/images_8c.html#aea9d0b9c081e22f7c0200a0c744c7e3f">IMG_Find</a></div><div class="ttdeci">image_t * IMG_Find(const char *name, imagetype_t type, imageflags_t flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/images_8c_source.html#l01122">images.c:1122</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a708880c3664efcca2183b16cf2f57cce"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a708880c3664efcca2183b16cf2f57cce">LIGHT_STATS_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define LIGHT_STATS_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00051">vertex_buffer.h:51</a></div></div>
<div class="ttc" id="astructsun__light__s_html_a18bce201d8bedd72a6c5e6e4cb6f4d2b"><div class="ttname"><a href="../../d4/db8/structsun__light__s.html#a18bce201d8bedd72a6c5e6e4cb6f4d2b">sun_light_s::direction</a></div><div class="ttdeci">vec3_t direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00415">vkpt.h:415</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_af1a739a2422a1a5db235d28f878dc535"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#af1a739a2422a1a5db235d28f878dc535">BINDING_OFFSET_PHYSICAL_SKY</a></div><div class="ttdeci">#define BINDING_OFFSET_PHYSICAL_SKY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00129">global_textures.h:129</a></div></div>
<div class="ttc" id="amaterial_8h_html_a46de70ae7e13925f2c8cbf61ce780c0a"><div class="ttname"><a href="../../d3/d65/material_8h.html#a46de70ae7e13925f2c8cbf61ce780c0a">MAX_PBR_MATERIALS</a></div><div class="ttdeci">#define MAX_PBR_MATERIALS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00025">material.h:25</a></div></div>
<div class="ttc" id="atransparency_8c_html_a85d64555fd82c387df7d5c195574ff9d"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a85d64555fd82c387df7d5c195574ff9d">fill_index_buffer</a></div><div class="ttdeci">static void fill_index_buffer()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l01147">transparency.c:1147</a></div></div>
<div class="ttc" id="aconstants_8h_html_a41eae052eb3a1e2de6aa247404e2e14d"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a41eae052eb3a1e2de6aa247404e2e14d">SBT_RMISS_PATH_TRACER</a></div><div class="ttdeci">#define SBT_RMISS_PATH_TRACER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00128">constants.h:128</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a788b01339f3b1cdf589951be428ff4f4"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a788b01339f3b1cdf589951be428ff4f4">filter_static_transparent</a></div><div class="ttdeci">static int filter_static_transparent(int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00254">bsp_mesh.c:254</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9eabd4d537916ba81c31b5d1a19823dca62"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eabd4d537916ba81c31b5d1a19823dca62">CHECKERBOARD_INTERLEAVE</a></div><div class="ttdeci">@ CHECKERBOARD_INTERLEAVE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00034">asvgf.c:34</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_a2f3deaccfaa1c50957e71fca16564df6"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a></div><div class="ttdeci">QVK_t qvk</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00377">main.c:377</a></div></div>
<div class="ttc" id="adevice__memory__allocator_8c_html_a8216ab0e60e993fd5ba896828c213ec1"><div class="ttname"><a href="../../d1/d2f/device__memory__allocator_8c.html#a8216ab0e60e993fd5ba896828c213ec1">destroy_device_memory_allocator</a></div><div class="ttdeci">void destroy_device_memory_allocator(DeviceMemoryAllocator *allocator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d2f/device__memory__allocator_8c_source.html#l00110">device_memory_allocator.c:110</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a0b17db91e89ea7d4df6272b41ed69139"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a0b17db91e89ea7d4df6272b41ed69139">QVK_s::screenshot_image_memory_size</a></div><div class="ttdeci">VkDeviceSize screenshot_image_memory_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00263">vkpt.h:263</a></div></div>
<div class="ttc" id="atransparency_8c_html_a2165acd76fcdd7bdc9cc631fc5124895"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a2165acd76fcdd7bdc9cc631fc5124895">particle_num</a></div><div class="ttdeci">unsigned int particle_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00050">transparency.c:50</a></div></div>
<div class="ttc" id="atransparency_8c_html_a2b5f25a5c879b41224e3f79fdb3aa6f5"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a2b5f25a5c879b41224e3f79fdb3aa6f5">create_blas</a></div><div class="ttdeci">static void create_blas()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l01032">transparency.c:1032</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a104d13278d6f70f380c091502abdaba4"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a104d13278d6f70f380c091502abdaba4">QVK_s::buf_light</a></div><div class="ttdeci">BufferResource_t buf_light</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00245">vkpt.h:245</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a9f0eba440e26a1751099a9d72afda36d"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a9f0eba440e26a1751099a9d72afda36d">QVK_s::gpu_slice_width_prev</a></div><div class="ttdeci">uint32_t gpu_slice_width_prev</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00188">vkpt.h:188</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a2e7e5a4fa97e204266620f9107f06c3b"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a2e7e5a4fa97e204266620f9107f06c3b">bsp_mesh_s::world_transparent_count</a></div><div class="ttdeci">uint32_t world_transparent_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00351">vkpt.h:351</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_a10ae8947dcd83fbfae30f197dedacd8d"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#a10ae8947dcd83fbfae30f197dedacd8d">bsp_model_s::aabb_max</a></div><div class="ttdeci">vec3_t aabb_max</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00329">vkpt.h:329</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a66a4acac855d27fb97ea5e913ae6d33e"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a66a4acac855d27fb97ea5e913ae6d33e">bsp_mesh_s::indices</a></div><div class="ttdeci">int * indices</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00360">vkpt.h:360</a></div></div>
<div class="ttc" id="aimages_8c_html_a444022996657e40d63346fc826b73b6e"><div class="ttname"><a href="../../d7/d59/images_8c.html#a444022996657e40d63346fc826b73b6e">img_loaders</a></div><div class="ttdeci">static const struct @12 img_loaders[IM_MAX]</div></div>
<div class="ttc" id="avertex__buffer_8c_html_afe63962de708d7ff2062fb013a1ba6f7"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#afe63962de708d7ff2062fb013a1ba6f7">inject_model_lights</a></div><div class="ttdeci">void inject_model_lights(bsp_mesh_t *bsp_mesh, bsp_t *bsp, int num_model_lights, light_poly_t *transformed_model_lights, int model_light_offset, uint32_t *dst_list_offsets, uint32_t *dst_lists)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00138">vertex_buffer.c:138</a></div></div>
<div class="ttc" id="agl_8h_html_a071882d7fa3d6bc70a01976d3aa05d86"><div class="ttname"><a href="../../d2/d61/gl_8h.html#a071882d7fa3d6bc70a01976d3aa05d86">c</a></div><div class="ttdeci">statCounters_t c</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcf/refresh_2gl_2main_8c_source.html#l00030">main.c:30</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_af137c35bc22dc9606d74bb18071b4022"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#af137c35bc22dc9606d74bb18071b4022">num_model_lights</a></div><div class="ttdeci">static int num_model_lights</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l01266">main.c:1266</a></div></div>
<div class="ttc" id="agod__rays_8c_html_ad34a7bddc4a7022335724019d13bddef"><div class="ttname"><a href="../../d1/dc7/god__rays_8c.html#ad34a7bddc4a7022335724019d13bddef">create_image_views</a></div><div class="ttdeci">static void create_image_views()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/god__rays_8c_source.html#l00227">god_rays.c:227</a></div></div>
<div class="ttc" id="atransparency_8c_html_a4f47809eecfd4ef9218f91ecc8494460"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a4f47809eecfd4ef9218f91ecc8494460">create_buffers</a></div><div class="ttdeci">static void create_buffers()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00872">transparency.c:872</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9eadf555c15cf1ad0129175c0d56fc65aef"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eadf555c15cf1ad0129175c0d56fc65aef">GRADIENT_IMAGE</a></div><div class="ttdeci">@ GRADIENT_IMAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00025">asvgf.c:25</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_ab14bb5e6cdcfd31667f9bb38984baeeb"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#ab14bb5e6cdcfd31667f9bb38984baeeb">BINDING_OFFSET_TERRAIN_NORMALS</a></div><div class="ttdeci">#define BINDING_OFFSET_TERRAIN_NORMALS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00136">global_textures.h:136</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a8dec0909604ae168774770416a165ee8"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a8dec0909604ae168774770416a165ee8">bsp_mesh_s::light_polys</a></div><div class="ttdeci">light_poly_t * light_polys</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00375">vkpt.h:375</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_aaf105ae5beaca1dee30ae54530691fcead2001d5fce76c3a523383ec1071ff9b4"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcead2001d5fce76c3a523383ec1071ff9b4">TONE_MAPPING_HISTOGRAM</a></div><div class="ttdeci">@ TONE_MAPPING_HISTOGRAM</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00061">tone_mapping.c:61</a></div></div>
<div class="ttc" id="atransparency_8c_html_a274bdd044c31f24122e413d0aa5fc0c3"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a274bdd044c31f24122e413d0aa5fc0c3">TR_PARTICLE_MAX_NUM</a></div><div class="ttdeci">#define TR_PARTICLE_MAX_NUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00023">transparency.c:23</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_a4f7dadb153104a8321ac371462fa9184"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#a4f7dadb153104a8321ac371462fa9184">vkpt_submit_command_buffer_simple</a></div><div class="ttdeci">void vkpt_submit_command_buffer_simple(VkCommandBuffer cmd_buf, VkQueue queue, qboolean all_gpus)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03473">main.c:3473</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_ae7a8435d3c882a06066c7d6cadcba60a"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#ae7a8435d3c882a06066c7d6cadcba60a">ReadbackBuffer</a></div><div class="ttdeci">struct ReadbackBuffer ReadbackBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00161">vertex_buffer.h:161</a></div></div>
<div class="ttc" id="aconstants_8h_html_a338f10a9af357b8924f92afe245d47be"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a338f10a9af357b8924f92afe245d47be">EMISSIVE_TRANSFORM_BIAS</a></div><div class="ttdeci">#define EMISSIVE_TRANSFORM_BIAS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00035">constants.h:35</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a808abb4369ed70d7011e6087f75d060f"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a808abb4369ed70d7011e6087f75d060f">sample_disk</a></div><div class="ttdeci">static void sample_disk(float *u, float *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00448">shadow_map.c:448</a></div></div>
<div class="ttc" id="avk__util_8c_html_abea818d497136ea9dea9fe0f6086e647"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#abea818d497136ea9dea9fe0f6086e647">sgets</a></div><div class="ttdeci">char * sgets(char *str, int num, char const **input)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00026">vk_util.c:26</a></div></div>
<div class="ttc" id="avkpt_8h_html_a28e6ee1dd5236b8a704d1b34806dfce1"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a28e6ee1dd5236b8a704d1b34806dfce1">ALL_GPUS</a></div><div class="ttdeci">#define ALL_GPUS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00535">vkpt.h:535</a></div></div>
<div class="ttc" id="atextures_8c_html_a6cea789b71aeee90957e0c9cef916bdc"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a6cea789b71aeee90957e0c9cef916bdc">imv_envmap</a></div><div class="ttdeci">static VkImageView imv_envmap</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00059">textures.c:59</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a3a7af2216de6a3f65c80de7e13a0e3a5"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a3a7af2216de6a3f65c80de7e13a0e3a5">INSTANCE_MAX_NUM</a></div><div class="ttdeci">#define INSTANCE_MAX_NUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00035">path_tracer.c:35</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_acac8ce7ed01a5414939d203016d85e16"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#acac8ce7ed01a5414939d203016d85e16">cvar_pt_enable_particles</a></div><div class="ttdeci">cvar_t * cvar_pt_enable_particles</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00101">path_tracer.c:101</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ad514896349cac34cfd0ff32f6b8be0ea"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ad514896349cac34cfd0ff32f6b8be0ea">mem_accel_sky</a></div><div class="ttdeci">static VkDeviceMemory mem_accel_sky</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00084">path_tracer.c:84</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_a928275c8aca87bfbca5758e0c9cecb08"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#a928275c8aca87bfbca5758e0c9cecb08">bsp_model_s::num_light_polys</a></div><div class="ttdeci">int num_light_polys</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00331">vkpt.h:331</a></div></div>
<div class="ttc" id="arefresh_2gl_2main_8c_html_a8d00fd2e69712687c0a6046c0bdf4b42"><div class="ttname"><a href="../../d8/dcf/refresh_2gl_2main_8c.html#a8d00fd2e69712687c0a6046c0bdf4b42">registration_sequence</a></div><div class="ttdeci">int registration_sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcf/refresh_2gl_2main_8c_source.html#l00034">main.c:34</a></div></div>
<div class="ttc" id="ap__view_8c_html_adf3413f94f96a6089d7f6c71f33ac347"><div class="ttname"><a href="../../d4/d73/p__view_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a></div><div class="ttdeci">static vec3_t up</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d73/p__view_8c_source.html#l00027">p_view.c:27</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a921eec1be3e2b29c63ea29cfb610ee12"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a921eec1be3e2b29c63ea29cfb610ee12">vkpt_pt_destroy_static</a></div><div class="ttdeci">VkResult vkpt_pt_destroy_static()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00345">path_tracer.c:345</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a12d09f469a4ebff68a0d3f53432d676e"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a12d09f469a4ebff68a0d3f53432d676e">compute_aabb</a></div><div class="ttdeci">void compute_aabb(const float *positions, int numvert, float *aabb_min, float *aabb_max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01111">bsp_mesh.c:1111</a></div></div>
<div class="ttc" id="avkpt_8h_html_a3b06f72f273011df4be44d5e91ed5f56"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a3b06f72f273011df4be44d5e91ed5f56">SHADER_STAGE</a></div><div class="ttdeci">#define SHADER_STAGE(_module, _stage)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00116">vkpt.h:116</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aca88190d71c18b7e86f6df6f95ce1423"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aca88190d71c18b7e86f6df6f95ce1423">accel_transparent</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_transparent</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00058">path_tracer.c:58</a></div></div>
<div class="ttc" id="aconstants_8h_html_a21d9478ad5761b65f79a3232db3928de"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a21d9478ad5761b65f79a3232db3928de">SBT_RCHIT_OPAQUE</a></div><div class="ttdeci">#define SBT_RCHIT_OPAQUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00130">constants.h:130</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a63b49c17156a43f087944e600a643580"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a63b49c17156a43f087944e600a643580">rt_properties</a></div><div class="ttdeci">static VkPhysicalDeviceRayTracingPropertiesNV rt_properties</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00037">path_tracer.c:37</a></div></div>
<div class="ttc" id="astruct_unused_resources_html_a9b286e8026ecff798ba676bdb949a4b5"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html#a9b286e8026ecff798ba676bdb949a4b5">UnusedResources::image_memory</a></div><div class="ttdeci">DeviceMemory image_memory[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00037">textures.c:37</a></div></div>
<div class="ttc" id="abloom_8c_html_a16af7b253440dadd46a80a4b9fddba4dada5dfb226839d481009b7a30c3cc5eaf"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a16af7b253440dadd46a80a4b9fddba4dada5dfb226839d481009b7a30c3cc5eaf">COMPOSITE</a></div><div class="ttdeci">@ COMPOSITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00024">bloom.c:24</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_ac625802a5081a6b5c87823dc6322941c"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#ac625802a5081a6b5c87823dc6322941c">bsp_mesh_s::world_custom_sky_offset</a></div><div class="ttdeci">uint32_t world_custom_sky_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00356">vkpt.h:356</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ae7e90499572672ceb6bcfde7dff3b5ee"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ae7e90499572672ceb6bcfde7dff3b5ee">SIZE_SCRATCH_BUFFER</a></div><div class="ttdeci">#define SIZE_SCRATCH_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00033">path_tracer.c:33</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a9e646f1f1fa8d42f978917a8c6ae2772"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a9e646f1f1fa8d42f978917a8c6ae2772">bsp_mesh_s::num_light_polys</a></div><div class="ttdeci">int num_light_polys</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00373">vkpt.h:373</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a0b03dd34b37c12e40fea1478349d46e9"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a0b03dd34b37c12e40fea1478349d46e9">pipeline_smap</a></div><div class="ttdeci">VkPipeline pipeline_smap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00026">shadow_map.c:26</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a2d1a84d8011452d485aaceaaad61b076"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a2d1a84d8011452d485aaceaaad61b076">BARRIER_FROM_CLEAR</a></div><div class="ttdeci">#define BARRIER_FROM_CLEAR(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00230">asvgf.c:230</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a88efd993d11e5b5572547b50e90c5cae"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a88efd993d11e5b5572547b50e90c5cae">QVK_s::extent_render</a></div><div class="ttdeci">VkExtent2D extent_render</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00184">vkpt.h:184</a></div></div>
<div class="ttc" id="atransparency_8c_html_aa8860c71b63f7d3e90bd4718329efca7"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#aa8860c71b63f7d3e90bd4718329efca7">get_transparency_particle_color_buffer_view</a></div><div class="ttdeci">VkBufferView get_transparency_particle_color_buffer_view()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00241">transparency.c:241</a></div></div>
<div class="ttc" id="astruct_buffer_resource__s_html_afaa8ea49829c0d0efe59fabea9be1234"><div class="ttname"><a href="../../da/d4f/struct_buffer_resource__s.html#afaa8ea49829c0d0efe59fabea9be1234">BufferResource_s::is_mapped</a></div><div class="ttdeci">int is_mapped</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00037">vk_util.h:37</a></div></div>
<div class="ttc" id="ap__view_8c_html_aa462954db5cc506fabe811dc11b3e1a4"><div class="ttname"><a href="../../d4/d73/p__view_8c.html#aa462954db5cc506fabe811dc11b3e1a4">right</a></div><div class="ttdeci">static vec3_t right</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d73/p__view_8c_source.html#l00027">p_view.c:27</a></div></div>
<div class="ttc" id="abloom_8c_html_aa41d12d6696af32438cee4225ac3ad60"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#aa41d12d6696af32438cee4225ac3ad60">BARRIER_FROM_COPY_SRC</a></div><div class="ttdeci">#define BARRIER_FROM_COPY_SRC(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00281">bloom.c:281</a></div></div>
<div class="ttc" id="avertex__buffer_8h_html_a3cd52340bef869b038f8353202920199"><div class="ttname"><a href="../../d3/dbd/vertex__buffer_8h.html#a3cd52340bef869b038f8353202920199">SunColorBuffer</a></div><div class="ttdeci">struct SunColorBuffer SunColorBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00163">vertex_buffer.h:163</a></div></div>
<div class="ttc" id="astruct_buffer_resource__s_html"><div class="ttname"><a href="../../da/d4f/struct_buffer_resource__s.html">BufferResource_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00033">vk_util.h:33</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a576969c1fc26fc521921c54dc67df01e"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a576969c1fc26fc521921c54dc67df01e">bsp_mesh_s::positions</a></div><div class="ttdeci">float * positions</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00359">vkpt.h:359</a></div></div>
<div class="ttc" id="astruct_device_memory_html_ad027d00a144741e7d24c28dc8ba56c1a"><div class="ttname"><a href="../../d8/dc9/struct_device_memory.html#ad027d00a144741e7d24c28dc8ba56c1a">DeviceMemory::size</a></div><div class="ttdeci">uint64_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d62/device__memory__allocator_8h_source.html#l00032">device_memory_allocator.h:32</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_adbb1ede9315d6460cbdeb923fa7fa794"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#adbb1ede9315d6460cbdeb923fa7fa794">QVK_s::tex_sampler_nearest</a></div><div class="ttdeci">VkSampler tex_sampler_nearest</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00256">vkpt.h:256</a></div></div>
<div class="ttc" id="atextures_8c_html_a5864bf283229d7397ebda7758ba5d584"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a5864bf283229d7397ebda7758ba5d584">textures_destroy_unused_set</a></div><div class="ttdeci">static void textures_destroy_unused_set(uint32_t set_index)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00119">textures.c:119</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a298155d6d04cff95c21416f9be421b6a"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a298155d6d04cff95c21416f9be421b6a">rt_descriptor_set</a></div><div class="ttdeci">static VkDescriptorSet rt_descriptor_set[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00096">path_tracer.c:96</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_ac0587c044e3118ec2485975dfded6fa4"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#ac0587c044e3118ec2485975dfded6fa4">QVK_s::extent_unscaled</a></div><div class="ttdeci">VkExtent2D extent_unscaled</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00186">vkpt.h:186</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_abac8aab4721aac02fd7f1e50a8a8279f"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#abac8aab4721aac02fd7f1e50a8a8279f">accel_transparent_models</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_transparent_models[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00072">path_tracer.c:72</a></div></div>
<div class="ttc" id="amatrix_8c_html_aa50601a67cbead379e68850f3d204f8c"><div class="ttname"><a href="../../dc/dca/matrix_8c.html#aa50601a67cbead379e68850f3d204f8c">mult_matrix_matrix</a></div><div class="ttdeci">void mult_matrix_matrix(float *p, const float *a, const float *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dca/matrix_8c_source.html#l00281">matrix.c:281</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a56804afd1c570ec99c3bf7c41cc18448"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a56804afd1c570ec99c3bf7c41cc18448">QVK_s::buf_light_staging</a></div><div class="ttdeci">BufferResource_t buf_light_staging[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00246">vkpt.h:246</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a058a164aacd1604c00b87e9ece68e93b"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a058a164aacd1604c00b87e9ece68e93b">accel_sky</a></div><div class="ttdeci">static VkAccelerationStructureNV accel_sky</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00059">path_tracer.c:59</a></div></div>
<div class="ttc" id="abloom_8c_html_ab7808bcea011d307f1822a0447cd1cde"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#ab7808bcea011d307f1822a0447cd1cde">cvar_bloom_sigma</a></div><div class="ttdeci">cvar_t * cvar_bloom_sigma</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00047">bloom.c:47</a></div></div>
<div class="ttc" id="ahq2x_8c_html_ae4ef68398af64fc287aafae2c9e9e68c"><div class="ttname"><a href="../../d6/d4f/hq2x_8c.html#ae4ef68398af64fc287aafae2c9e9e68c">diff</a></div><div class="ttdeci">static q_noinline int diff(uint32_t A_u32, uint32_t B_u32)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/hq2x_8c_source.html#l00055">hq2x.c:55</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_a622f04c9260a47d3a1fea876787bca51"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#a622f04c9260a47d3a1fea876787bca51">vkpt_reset_accumulation</a></div><div class="ttdeci">void vkpt_reset_accumulation()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00219">main.c:219</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_a85e4b8e1c666ee300f8a251059df15f5"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#a85e4b8e1c666ee300f8a251059df15f5">EntityUploadInfo::explosions_vertex_offset</a></div><div class="ttdeci">uint32_t explosions_vertex_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00484">vkpt.h:484</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_a00942e5f4975aa2d8ffb0a9cfad52e66"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#a00942e5f4975aa2d8ffb0a9cfad52e66">EntityUploadInfo::explosions_vertex_num</a></div><div class="ttdeci">uint32_t explosions_vertex_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00485">vkpt.h:485</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_aaf105ae5beaca1dee30ae54530691fcea946ed3a1cda69b626d4f042daca20c86"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#aaf105ae5beaca1dee30ae54530691fcea946ed3a1cda69b626d4f042daca20c86">TM_NUM_PIPELINES</a></div><div class="ttdeci">@ TM_NUM_PIPELINES</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00064">tone_mapping.c:64</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_a3ef8fb8d2a63befc3e41d32b089a65f2"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#a3ef8fb8d2a63befc3e41d32b089a65f2">EntityUploadInfo::transparent_model_vertex_num</a></div><div class="ttdeci">uint32_t transparent_model_vertex_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00479">vkpt.h:479</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a550f8475292f1c571b1c709ecf1a0f03"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a550f8475292f1c571b1c709ecf1a0f03">maliasmesh_s::numtris</a></div><div class="ttdeci">int numtris</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00234">gl.h:234</a></div></div>
<div class="ttc" id="atransparency_8c_html_aa02dd57141887b98aa4657ca64ff0e32"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#aa02dd57141887b98aa4657ca64ff0e32">particle_color_buffer_view</a></div><div class="ttdeci">VkBufferView particle_color_buffer_view</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00072">transparency.c:72</a></div></div>
<div class="ttc" id="atransparency_8c_html_aebc5ee8f39ad6b1b9961c80b03c23d77"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#aebc5ee8f39ad6b1b9961c80b03c23d77">update_beam_blas</a></div><div class="ttdeci">static void update_beam_blas(VkCommandBuffer command_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00747">transparency.c:747</a></div></div>
<div class="ttc" id="astructvkpt__refdef__s_html_ae98dab290cc044b9a4b8118484d1b3a0"><div class="ttname"><a href="../../d1/dbe/structvkpt__refdef__s.html#ae98dab290cc044b9a4b8118484d1b3a0">vkpt_refdef_s::uniform_instance_buffer</a></div><div class="ttdeci">QVKInstanceBuffer_t uniform_instance_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00395">vkpt.h:395</a></div></div>
<div class="ttc" id="atransparency_8c_html_a4cdaf1608b4446d66e8b5b3cc0d66e22"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a4cdaf1608b4446d66e8b5b3cc0d66e22">upload_geometry</a></div><div class="ttdeci">static void upload_geometry(VkCommandBuffer command_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00635">transparency.c:635</a></div></div>
<div class="ttc" id="astruct_light_buffer_html"><div class="ttname"><a href="../../de/dce/struct_light_buffer.html">LightBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00106">vertex_buffer.h:106</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a45c63054197124593b507bfc7875632a"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a45c63054197124593b507bfc7875632a">maliasmesh_s::normals</a></div><div class="ttdeci">vec3_t * normals</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00700">vkpt.h:700</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aca00b9f34c4dd967c4d6bffeeb9bb4ce"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aca00b9f34c4dd967c4d6bffeeb9bb4ce">rt_descriptor_set_layout</a></div><div class="ttdeci">static VkDescriptorSetLayout rt_descriptor_set_layout</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00097">path_tracer.c:97</a></div></div>
<div class="ttc" id="atextures_8c_html_a1fca70948814b8c5ccc19ac9bf5cba22"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a1fca70948814b8c5ccc19ac9bf5cba22">img_blue_noise</a></div><div class="ttdeci">static VkImage img_blue_noise</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00056">textures.c:56</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a5389534adde7c6475b99957cb3e603c3"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a5389534adde7c6475b99957cb3e603c3">rt_pipeline</a></div><div class="ttdeci">static VkPipeline rt_pipeline</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00099">path_tracer.c:99</a></div></div>
<div class="ttc" id="astruct_vertex_buffer_html"><div class="ttname"><a href="../../d0/dc4/struct_vertex_buffer.html">VertexBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00096">vertex_buffer.h:96</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a0a319f9b9a4bafbd95d9e24e86d9b5e1"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a0a319f9b9a4bafbd95d9e24e86d9b5e1">vkpt_pt_create_dynamic</a></div><div class="ttdeci">static VkResult vkpt_pt_create_dynamic(VkCommandBuffer cmd_buf, int idx, VkBuffer vertex_buffer, size_t buffer_offset, int num_vertices)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00650">path_tracer.c:650</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#aa6f47332be675e6f6efead8a8b113797a8f9af4dea083e83e744f2639a8550330">NUM_VKPT_IMAGES</a></div><div class="ttdeci">@ NUM_VKPT_IMAGES</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00157">global_textures.h:157</a></div></div>
<div class="ttc" id="avk__util_8c_html_a0fcb011adc228020303676c6fdadbbfc"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#a0fcb011adc228020303676c6fdadbbfc">buffer_create</a></div><div class="ttdeci">VkResult buffer_create(BufferResource_t *buf, VkDeviceSize size, VkBufferUsageFlags usage, VkMemoryPropertyFlags mem_properties)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00057">vk_util.c:57</a></div></div>
<div class="ttc" id="avkpt_8h_html_a077ffee32baed268bcfef6e7229edc8a"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a077ffee32baed268bcfef6e7229edc8a">LIST_SHADER_MODULES</a></div><div class="ttdeci">#define LIST_SHADER_MODULES</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00070">vkpt.h:70</a></div></div>
<div class="ttc" id="atransparency_8c_html_a6f5cbeb41737a3ea5dd48a9f70b08231"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a6f5cbeb41737a3ea5dd48a9f70b08231">TR_BEAM_MAX_NUM</a></div><div class="ttdeci">#define TR_BEAM_MAX_NUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00024">transparency.c:24</a></div></div>
<div class="ttc" id="aconstants_8h_html_a4cb210bed54da782c7270a46b99fa924"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a4cb210bed54da782c7270a46b99fa924">SBT_RGEN_DIRECT_LIGHTING</a></div><div class="ttdeci">#define SBT_RGEN_DIRECT_LIGHTING</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00124">constants.h:124</a></div></div>
<div class="ttc" id="abloom_8c_html_ac89cd0579ecc06de0be4c39d1a4650de"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#ac89cd0579ecc06de0be4c39d1a4650de">pipeline_layout_composite</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_composite</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00031">bloom.c:31</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a07fd2502d3bf0dde33994b3cea0d7628"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a07fd2502d3bf0dde33994b3cea0d7628">bsp_mesh_s::world_idx_count</a></div><div class="ttdeci">uint32_t world_idx_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00344">vkpt.h:344</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a7477f35ebaa73fc9be409eb53b36144e"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a7477f35ebaa73fc9be409eb53b36144e">TEXNUM_WHITE</a></div><div class="ttdeci">#define TEXNUM_WHITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00030">draw.c:30</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a502a1a9359495267b3a90dd23dd2c0e1"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a502a1a9359495267b3a90dd23dd2c0e1">QVK_s::images_views</a></div><div class="ttdeci">VkImageView images_views[NUM_VKPT_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00232">vkpt.h:232</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a9f4335b75eb60ae62e329fb76b3da061"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a9f4335b75eb60ae62e329fb76b3da061">collect_sky_and_lava_ligth_polys</a></div><div class="ttdeci">static void collect_sky_and_lava_ligth_polys(bsp_mesh_t *wm, bsp_t *bsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l00988">bsp_mesh.c:988</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_adf14b7ab9821135ca30bcba6f2272942"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#adf14b7ab9821135ca30bcba6f2272942">copy_light</a></div><div class="ttdeci">static void copy_light(const light_poly_t *light, float *vblight, const float *sky_radiance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00215">vertex_buffer.c:215</a></div></div>
<div class="ttc" id="ashared_8c_html_a4ef0eac2db15e326c37b6d46c5b5f30e"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a4ef0eac2db15e326c37b6d46c5b5f30e">Q_memccpy</a></div><div class="ttdeci">void * Q_memccpy(void *dst, const void *src, int c, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00895">shared.c:895</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_afa10fe90e0f0173aa8eb347720e2fb05"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#afa10fe90e0f0173aa8eb347720e2fb05">cvar_pt_enable_sprites</a></div><div class="ttdeci">cvar_t * cvar_pt_enable_sprites</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00103">path_tracer.c:103</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a0910fc4c9db54d8f7234fb0eacf0d7aa"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a0910fc4c9db54d8f7234fb0eacf0d7aa">bsp_mesh_s::world_sky_offset</a></div><div class="ttdeci">uint32_t world_sky_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00353">vkpt.h:353</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_a8d9d0a0ff3b24da57a64bb7d2f006ffa"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#a8d9d0a0ff3b24da57a64bb7d2f006ffa">EntityUploadInfo::viewer_weapon_vertex_num</a></div><div class="ttdeci">uint32_t viewer_weapon_vertex_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00483">vkpt.h:483</a></div></div>
<div class="ttc" id="aconstants_8h_html_a88a0f6e540b0896baa4b1c4e9c386556"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a88a0f6e540b0896baa4b1c4e9c386556">SBT_RGEN_REFLECT_REFRACT2</a></div><div class="ttdeci">#define SBT_RGEN_REFLECT_REFRACT2</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00123">constants.h:123</a></div></div>
<div class="ttc" id="astruct_unused_resources_html_a2125fcabddb723faaf1b682020ce2eee"><div class="ttname"><a href="../../d4/d78/struct_unused_resources.html#a2125fcabddb723faaf1b682020ce2eee">UnusedResources::images</a></div><div class="ttdeci">VkImage images[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00035">textures.c:35</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_af5b49e0bb61c944b0ed67751148dd2eb"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#af5b49e0bb61c944b0ed67751148dd2eb">desc_set_layout_sbo</a></div><div class="ttdeci">static VkDescriptorSetLayout desc_set_layout_sbo</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00057">draw.c:57</a></div></div>
<div class="ttc" id="avk__util_8h_html_a91aba450c052e600e9204be18af70d96"><div class="ttname"><a href="../../db/d74/vk__util_8h.html#a91aba450c052e600e9204be18af70d96">IMAGE_BARRIER</a></div><div class="ttdeci">#define IMAGE_BARRIER(cmd_buf,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00055">vk_util.h:55</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_afdcfa085f6d302e6b08402761916cf06"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#afdcfa085f6d302e6b08402761916cf06">bsp_mesh_s::world_aabb</a></div><div class="ttdeci">aabb_t world_aabb</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00348">vkpt.h:348</a></div></div>
<div class="ttc" id="abloom_8c_html_a510d2391e71f352630843f1e23a8c824"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#a510d2391e71f352630843f1e23a8c824">cvar_bloom_enable</a></div><div class="ttdeci">cvar_t * cvar_bloom_enable</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00045">bloom.c:45</a></div></div>
<div class="ttc" id="amesh_8c_html_a08fc4e8591f35c00d80ee9f67af9969b"><div class="ttname"><a href="../../d6/d6b/mesh_8c.html#a08fc4e8591f35c00d80ee9f67af9969b">color</a></div><div class="ttdeci">static vec4_t color</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6b/mesh_8c_source.html#l00033">mesh.c:33</a></div></div>
<div class="ttc" id="aimages_8c_html_a2511b0afd2556e5318935b55e8dc9690"><div class="ttname"><a href="../../d7/d59/images_8c.html#a2511b0afd2556e5318935b55e8dc9690">IMG_ForHandle</a></div><div class="ttdeci">image_t * IMG_ForHandle(qhandle_t h)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/images_8c_source.html#l01156">images.c:1156</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_ad07cc107aaa54492a7adcd72b20ba9e5"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#ad07cc107aaa54492a7adcd72b20ba9e5">vkpt_tone_mapping_reset</a></div><div class="ttdeci">VkResult vkpt_tone_mapping_reset(VkCommandBuffer cmd_buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00176">tone_mapping.c:176</a></div></div>
<div class="ttc" id="avk__util_8h_html_ae15b6b2153d85b5f7377f5cfb80e4bde"><div class="ttname"><a href="../../db/d74/vk__util_8h.html#ae15b6b2153d85b5f7377f5cfb80e4bde">ATTACH_LABEL_VARIABLE</a></div><div class="ttdeci">#define ATTACH_LABEL_VARIABLE(a, type)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00137">vk_util.h:137</a></div></div>
<div class="ttc" id="astructaccel__top__match__info__s_html_af9dd7ccf9b460b6182d826f18ff03afe"><div class="ttname"><a href="../../d8/de1/structaccel__top__match__info__s.html#af9dd7ccf9b460b6182d826f18ff03afe">accel_top_match_info_s::instanceCount</a></div><div class="ttdeci">uint32_t instanceCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00051">path_tracer.c:51</a></div></div>
<div class="ttc" id="aprofiler_8c_html_ae9bd64ddbe77f89a94b6de0d877ae350"><div class="ttname"><a href="../../d2/ddb/profiler_8c.html#ae9bd64ddbe77f89a94b6de0d877ae350">query_pool_results</a></div><div class="ttdeci">static uint64_t query_pool_results[NUM_PROFILER_QUERIES_PER_FRAME+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddb/profiler_8c_source.html#l00023">profiler.c:23</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_afdce3396bb9d2af9cc8c65b55c37844a"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#afdce3396bb9d2af9cc8c65b55c37844a">vkpt_begin_command_buffer</a></div><div class="ttdeci">VkCommandBuffer vkpt_begin_command_buffer(cmd_buf_group_t *group)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03301">main.c:3301</a></div></div>
<div class="ttc" id="aconstants_8h_html_a8628675c16877fb611943428bde9d4e7"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a8628675c16877fb611943428bde9d4e7">MAX_LIGHT_STYLES</a></div><div class="ttdeci">#define MAX_LIGHT_STYLES</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00105">constants.h:105</a></div></div>
<div class="ttc" id="atextures_8c_html_a11f2fd61d3ade68066123dc9e6449fb9"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a11f2fd61d3ade68066123dc9e6449fb9">create_readback_image</a></div><div class="ttdeci">static VkResult create_readback_image(VkImage *image, VkDeviceMemory *memory, VkDeviceSize *memory_size, VkFormat format, uint32_t width, uint32_t height)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l01392">textures.c:1392</a></div></div>
<div class="ttc" id="astructdraw_static__t_html_a9e4317208e4cbf34df97630343b6dfa1"><div class="ttname"><a href="../../dc/db0/structdraw_static__t.html#a9e4317208e4cbf34df97630343b6dfa1">drawStatic_t::scale</a></div><div class="ttdeci">float scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00404">gl.h:404</a></div></div>
<div class="ttc" id="afreecam_8c_html_a4b61164254f6a7ee55d56f4894b2e88c"><div class="ttname"><a href="../../da/d09/freecam_8c.html#a4b61164254f6a7ee55d56f4894b2e88c">vkpt_freecam_reset</a></div><div class="ttdeci">void vkpt_freecam_reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d09/freecam_8c_source.html#l00055">freecam.c:55</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_aeab9e6930f1b25156a7bffce2691d43d"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#aeab9e6930f1b25156a7bffce2691d43d">QVK_s::buf_light_stats</a></div><div class="ttdeci">BufferResource_t buf_light_stats[NUM_LIGHT_STATS_BUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00247">vkpt.h:247</a></div></div>
<div class="ttc" id="atextures_8c_html_a912617d2640c1bb05a0d548cf5bae766"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a912617d2640c1bb05a0d548cf5bae766">load_blue_noise</a></div><div class="ttdeci">static VkResult load_blue_noise()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00308">textures.c:308</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a956a2ea74c2b0b143635f93e3e97d8fc"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a956a2ea74c2b0b143635f93e3e97d8fc">QVK_s::desc_set_layout_textures</a></div><div class="ttdeci">VkDescriptorSetLayout desc_set_layout_textures</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00228">vkpt.h:228</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_a34a9d4af7cb83ee28b100723fb6e8216"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#a34a9d4af7cb83ee28b100723fb6e8216">floatToHalf</a></div><div class="ttdeci">static uint16_t floatToHalf(float value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00265">vertex_buffer.c:265</a></div></div>
<div class="ttc" id="ashared_8c_html_a4c0b6c2d1c564a3fc774a1944cda1864"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a4c0b6c2d1c564a3fc774a1944cda1864">Q_concat</a></div><div class="ttdeci">size_t Q_concat(char *dest, size_t size,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00758">shared.c:758</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_a9c252985f0f0c52f065cbb6b704fcca6"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#a9c252985f0f0c52f065cbb6b704fcca6">bsp_mesh_s::world_transparent_offset</a></div><div class="ttdeci">uint32_t world_transparent_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00350">vkpt.h:350</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a5a5205f29c81d68bc90709838481eb2f"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a5a5205f29c81d68bc90709838481eb2f">QVK_s::desc_set_layout_ubo</a></div><div class="ttdeci">VkDescriptorSetLayout desc_set_layout_ubo</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00225">vkpt.h:225</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a9e8ac1ef2a700c3b867bb6cb48e58da2"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a9e8ac1ef2a700c3b867bb6cb48e58da2">RAY_GEN_ACCEL_STRUCTURE_BINDING_IDX</a></div><div class="ttdeci">#define RAY_GEN_ACCEL_STRUCTURE_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00028">path_tracer.c:28</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a4d665bcf42aa4bbf87b9c832b616bf17"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a4d665bcf42aa4bbf87b9c832b616bf17">imv_smap_depth</a></div><div class="ttdeci">static VkImageView imv_smap_depth</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00030">shadow_map.c:30</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a1b5c5104e30e472bc3e70a3f7fc7effb"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a1b5c5104e30e472bc3e70a3f7fc7effb">QVK_s::buf_readback_staging</a></div><div class="ttdeci">BufferResource_t buf_readback_staging[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00250">vkpt.h:250</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a25196994ca169733d3dddd49ca1d455e"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a25196994ca169733d3dddd49ca1d455e">BINDING_OFFSET_ENVMAP</a></div><div class="ttdeci">#define BINDING_OFFSET_ENVMAP</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00128">global_textures.h:128</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aee55ecf81802dc7a983fc5da19c82ee4"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aee55ecf81802dc7a983fc5da19c82ee4">vkpt_pt_destroy_dynamic</a></div><div class="ttdeci">VkResult vkpt_pt_destroy_dynamic(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00383">path_tracer.c:383</a></div></div>
<div class="ttc" id="astructaabb__s_html_aea21b704019e817339d64537332dd22b"><div class="ttname"><a href="../../dd/d0f/structaabb__s.html#aea21b704019e817339d64537332dd22b">aabb_s::maxs</a></div><div class="ttdeci">vec3_t maxs</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00340">vkpt.h:340</a></div></div>
<div class="ttc" id="avkpt_8h_html_a2f3deaccfaa1c50957e71fca16564df6"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#a2f3deaccfaa1c50957e71fca16564df6">qvk</a></div><div class="ttdeci">QVK_t qvk</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l00377">main.c:377</a></div></div>
<div class="ttc" id="astructpbr__material__s_html_af7aac7d41d73539b7b9229475f665f2b"><div class="ttname"><a href="../../d7/d66/structpbr__material__s.html#af7aac7d41d73539b7b9229475f665f2b">pbr_material_s::rough_override</a></div><div class="ttdeci">float rough_override</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d65/material_8h_source.html#l00039">material.h:39</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a91cd3a0f518c462a8eaa2f144d3966a0"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a91cd3a0f518c462a8eaa2f144d3966a0">transparent_primitive_offset</a></div><div class="ttdeci">static int transparent_primitive_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00061">path_tracer.c:61</a></div></div>
<div class="ttc" id="atextures_8c_html_ad50337042e739e9592d96f70a4f31748"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#ad50337042e739e9592d96f70a4f31748">tex_images</a></div><div class="ttdeci">static VkImage tex_images[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00053">textures.c:53</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a3873829390a5a444ef4a2ef66668ea10"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a3873829390a5a444ef4a2ef66668ea10">RAY_GEN_SPRITE_INFO_BUFFER_BINDING_IDX</a></div><div class="ttdeci">#define RAY_GEN_SPRITE_INFO_BUFFER_BINDING_IDX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00031">path_tracer.c:31</a></div></div>
<div class="ttc" id="aconstants_8h_html_ad55101978c4c0edaf89906d2ffd7baba"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#ad55101978c4c0edaf89906d2ffd7baba">MATERIAL_INDEX_MASK</a></div><div class="ttdeci">#define MATERIAL_INDEX_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00086">constants.h:86</a></div></div>
<div class="ttc" id="avk__util_8c_html_a44dffe03b7d4fa3356ffed23bd3831d5"><div class="ttname"><a href="../../d9/d7e/vk__util_8c.html#a44dffe03b7d4fa3356ffed23bd3831d5">buffer_map</a></div><div class="ttdeci">void * buffer_map(BufferResource_t *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/vk__util_8c_source.html#l00147">vk_util.c:147</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_a18dc21528713260bd87b6a3ba9a73199"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#a18dc21528713260bd87b6a3ba9a73199">pipeline_layout_tone_mapping_apply</a></div><div class="ttdeci">static VkPipelineLayout pipeline_layout_tone_mapping_apply</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00070">tone_mapping.c:70</a></div></div>
<div class="ttc" id="astruct_sun_color_buffer_html"><div class="ttname"><a href="../../d2/dc0/struct_sun_color_buffer.html">SunColorBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbd/vertex__buffer_8h_source.html#l00144">vertex_buffer.h:144</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a6838b12c80f0d4a7f5bac40565a6a6de"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a6838b12c80f0d4a7f5bac40565a6a6de">render_pass_smap</a></div><div class="ttdeci">VkRenderPass render_pass_smap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00025">shadow_map.c:25</a></div></div>
<div class="ttc" id="atransparency_8c_html_a95f9a40fb2711235e3b923f9b4d9d98b"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a95f9a40fb2711235e3b923f9b4d9d98b">get_transparency_particle_blas</a></div><div class="ttdeci">VkAccelerationStructureNV get_transparency_particle_blas()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00226">transparency.c:226</a></div></div>
<div class="ttc" id="awgl_8c_html_a055b7e5795bf4b7cb77482fe2b6f4dd7"><div class="ttname"><a href="../../de/dca/wgl_8c.html#a055b7e5795bf4b7cb77482fe2b6f4dd7">int</a></div><div class="ttdeci">CONST PIXELFORMATDESCRIPTOR int</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dca/wgl_8c_source.html#l00026">wgl.c:26</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_adc06751982961eeba364d716b804359b"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#adc06751982961eeba364d716b804359b">QVK_s::surf_format</a></div><div class="ttdeci">VkSurfaceFormatKHR surf_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00181">vkpt.h:181</a></div></div>
<div class="ttc" id="aconstants_8h_html_a84a486b4d3d9aed7df67173bebb7a6a9"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a84a486b4d3d9aed7df67173bebb7a6a9">AS_FLAG_TRANSPARENT</a></div><div class="ttdeci">#define AS_FLAG_TRANSPARENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00108">constants.h:108</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a494eaffdc301063dc6f50a759e45f4d3"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a494eaffdc301063dc6f50a759e45f4d3">LIST_IMAGES_A_B</a></div><div class="ttdeci">#define LIST_IMAGES_A_B</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00081">global_textures.h:81</a></div></div>
<div class="ttc" id="astruct_buffer_resource__s_html_a48f9ab5110b4cbb533e594ff1e55c87e"><div class="ttname"><a href="../../da/d4f/struct_buffer_resource__s.html#a48f9ab5110b4cbb533e594ff1e55c87e">BufferResource_s::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00036">vk_util.h:36</a></div></div>
<div class="ttc" id="atone__mapping_8c_html_aaf637b78bcaad64ea5d71d9a219dcf73"><div class="ttname"><a href="../../d6/dad/tone__mapping_8c.html#aaf637b78bcaad64ea5d71d9a219dcf73">BARRIER_COMPUTE</a></div><div class="ttdeci">#define BARRIER_COMPUTE(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/tone__mapping_8c_source.html#l00218">tone_mapping.c:218</a></div></div>
<div class="ttc" id="amath_8c_html_a2c6b6b6712f73da080d34bbc9bf897bc"><div class="ttname"><a href="../../d6/da3/math_8c.html#a2c6b6b6712f73da080d34bbc9bf897bc">bytedirs</a></div><div class="ttdeci">const vec3_t bytedirs[NUMVERTEXNORMALS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/math_8c_source.html#l00080">math.c:80</a></div></div>
<div class="ttc" id="aimages_8c_html_a10d4e0c1445fd601768d394a5579d96d"><div class="ttname"><a href="../../d7/d59/images_8c.html#a10d4e0c1445fd601768d394a5579d96d">get_image_dimensions</a></div><div class="ttdeci">static void get_image_dimensions(imageformat_t fmt, image_t *image)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/images_8c_source.html#l00851">images.c:851</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_af1ca9eb52d0b1d58a5f2cf69185f55a0"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#af1ca9eb52d0b1d58a5f2cf69185f55a0">load_cameras</a></div><div class="ttdeci">static void load_cameras(bsp_mesh_t *wm, const char *map_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01300">bsp_mesh.c:1300</a></div></div>
<div class="ttc" id="atextures_8c_html_a8ae8057b8f66b72fd1d15429ecec947c"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a8ae8057b8f66b72fd1d15429ecec947c">decode_linear</a></div><div class="ttdeci">static float decode_linear(byte pix)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00519">textures.c:519</a></div></div>
<div class="ttc" id="aprofiler_8c_html_af018e253c24c717041787f5894a7e969"><div class="ttname"><a href="../../d2/ddb/profiler_8c.html#af018e253c24c717041787f5894a7e969">query_pool</a></div><div class="ttdeci">static VkQueryPool query_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddb/profiler_8c_source.html#l00022">profiler.c:22</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_adab3147e5962f0f298ea9ebc22fa4b8f"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#adab3147e5962f0f298ea9ebc22fa4b8f">QVK_s::swap_chain_image_views</a></div><div class="ttdeci">VkImageView swap_chain_image_views[MAX_SWAPCHAIN_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00191">vkpt.h:191</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a5492c7973a03a8b75ca35efedf3471a6"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a5492c7973a03a8b75ca35efedf3471a6">BARRIER_TO_CLEAR</a></div><div class="ttdeci">#define BARRIER_TO_CLEAR(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00211">asvgf.c:211</a></div></div>
<div class="ttc" id="atextures_8c_html_a64d158160ba40ce5e712294b3fcf6155"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a64d158160ba40ce5e712294b3fcf6155">tex_image_views</a></div><div class="ttdeci">static VkImageView tex_image_views[MAX_RIMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00054">textures.c:54</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9eac226d727d3574a90e3cb682327c178eb"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9eac226d727d3574a90e3cb682327c178eb">ATROUS_LF</a></div><div class="ttdeci">@ ATROUS_LF</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00028">asvgf.c:28</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a0f235b34465e71a4c26e4de56e3613d5"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a0f235b34465e71a4c26e4de56e3613d5">BINDING_OFFSET_TERRAIN_SHADOWMAP</a></div><div class="ttdeci">#define BINDING_OFFSET_TERRAIN_SHADOWMAP</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00138">global_textures.h:138</a></div></div>
<div class="ttc" id="astruct_device_memory_html_a8eeb8a7fb6ec1f6f6bc485362840a41c"><div class="ttname"><a href="../../d8/dc9/struct_device_memory.html#a8eeb8a7fb6ec1f6f6bc485362840a41c">DeviceMemory::memory_type</a></div><div class="ttdeci">uint32_t memory_type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d62/device__memory__allocator_8h_source.html#l00034">device_memory_allocator.h:34</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a5e34b1f9a78cd3f014efa22c75233678"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a5e34b1f9a78cd3f014efa22c75233678">desc_pool_sbo</a></div><div class="ttdeci">static VkDescriptorPool desc_pool_sbo</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00058">draw.c:58</a></div></div>
<div class="ttc" id="astructmaliasframe__s_html"><div class="ttname"><a href="../../d0/d28/structmaliasframe__s.html">maliasframe_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00225">gl.h:225</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_a1eb8166387dae1ee9ef6b32e4ec94367"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#a1eb8166387dae1ee9ef6b32e4ec94367">vkpt_submit_command_buffer</a></div><div class="ttdeci">void vkpt_submit_command_buffer(VkCommandBuffer cmd_buf, VkQueue queue, uint32_t execute_device_mask, int wait_semaphore_count, VkSemaphore *wait_semaphores, VkPipelineStageFlags *wait_stages, uint32_t *wait_device_indices, int signal_semaphore_count, VkSemaphore *signal_semaphores, uint32_t *signal_device_indices, VkFence fence)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l03411">main.c:3411</a></div></div>
<div class="ttc" id="atransparency_8c_html_a47dc853a1e4cad0daa04b372b0b663e2"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a47dc853a1e4cad0daa04b372b0b663e2">TR_POSITION_SIZE</a></div><div class="ttdeci">#define TR_POSITION_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l00028">transparency.c:28</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea81ffa9b33dc4184752361b9515b0fc03"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea81ffa9b33dc4184752361b9515b0fc03">SEED_RNG</a></div><div class="ttdeci">@ SEED_RNG</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00023">asvgf.c:23</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_ab177d23ed54d4b878b844aab96186953"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#ab177d23ed54d4b878b844aab96186953">DIV64</a></div><div class="ttdeci">#define DIV64</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00697">draw.c:697</a></div></div>
<div class="ttc" id="atextures_8c_html_aeb315e35c97d75ad07e2665f8f8a2c64"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#aeb315e35c97d75ad07e2665f8f8a2c64">destroy_tex_images</a></div><div class="ttdeci">static void destroy_tex_images()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l01024">textures.c:1024</a></div></div>
<div class="ttc" id="atextures_8c_html_a5b6a743c8f681996eaa2bf1208196cdd"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a5b6a743c8f681996eaa2bf1208196cdd">create_invalid_texture</a></div><div class="ttdeci">void create_invalid_texture()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00734">textures.c:734</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_a3d970e2ff7586f2fecc361c41b94ca22"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#a3d970e2ff7586f2fecc361c41b94ca22">EntityUploadInfo::viewer_model_vertex_offset</a></div><div class="ttdeci">uint32_t viewer_model_vertex_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00480">vkpt.h:480</a></div></div>
<div class="ttc" id="avertex__buffer_8c_html_aa7c0ae3ac941d9d6cd75e39cfc50a7f1"><div class="ttname"><a href="../../d8/d51/vertex__buffer_8c.html#aa7c0ae3ac941d9d6cd75e39cfc50a7f1">vkpt_light_stats_destroy</a></div><div class="ttdeci">VkResult vkpt_light_stats_destroy()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d51/vertex__buffer_8c_source.html#l00748">vertex_buffer.c:748</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_a216d15c13ab4f0296122a15a57e39e4d"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#a216d15c13ab4f0296122a15a57e39e4d">bsp_model_s::idx_offset</a></div><div class="ttdeci">uint32_t idx_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00325">vkpt.h:325</a></div></div>
<div class="ttc" id="abloom_8c_html_acb0912a304a5209f485fa2ad8b1a089b"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#acb0912a304a5209f485fa2ad8b1a089b">compute_push_constants</a></div><div class="ttdeci">static void compute_push_constants()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00056">bloom.c:56</a></div></div>
<div class="ttc" id="aconstants_8h_html_af551f99e2c2326abff24e9483b6d95f3"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#af551f99e2c2326abff24e9483b6d95f3">SBT_RAHIT_EXPLOSION</a></div><div class="ttdeci">#define SBT_RAHIT_EXPLOSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00133">constants.h:133</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a72d59d5afb3549d1b28331ada8f32ef7"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a72d59d5afb3549d1b28331ada8f32ef7">QVK_s::extent_render_prev</a></div><div class="ttdeci">VkExtent2D extent_render_prev</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00185">vkpt.h:185</a></div></div>
<div class="ttc" id="astructvkpt__refdef__s_html_ada1b2d90edfc1074ff5d96ab33f0c689"><div class="ttname"><a href="../../d1/dbe/structvkpt__refdef__s.html#ada1b2d90edfc1074ff5d96ab33f0c689">vkpt_refdef_s::uniform_buffer</a></div><div class="ttdeci">QVKUniformBuffer_t uniform_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00394">vkpt.h:394</a></div></div>
<div class="ttc" id="atextures_8c_html_a2b643e6acc78f2f583d076b662464e73"><div class="ttname"><a href="../../dd/dbb/textures_8c.html#a2b643e6acc78f2f583d076b662464e73">DESTROY_LATENCY</a></div><div class="ttdeci">#define DESTROY_LATENCY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/textures_8c_source.html#l00044">textures.c:44</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ad789397590084a740c19e75bfd525410"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ad789397590084a740c19e75bfd525410">vkpt_pt_destroy_transparent_models</a></div><div class="ttdeci">VkResult vkpt_pt_destroy_transparent_models(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00397">path_tracer.c:397</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_ab20fd756d533fd33dbcd4e3147e78acd"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#ab20fd756d533fd33dbcd4e3147e78acd">append_blas</a></div><div class="ttdeci">static void append_blas(QvkGeometryInstance_t *instances, int *num_instances, VkAccelerationStructureNV blas, int instance_id, int mask, int flags, int sbt_offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00829">path_tracer.c:829</a></div></div>
<div class="ttc" id="ashadow__map_8c_html_a4685016a431d9c4411c9673d1779fc0a"><div class="ttname"><a href="../../d5/d5f/shadow__map_8c.html#a4685016a431d9c4411c9673d1779fc0a">mem_smap</a></div><div class="ttdeci">static VkDeviceMemory mem_smap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/shadow__map_8c_source.html#l00033">shadow_map.c:33</a></div></div>
<div class="ttc" id="astructlight__poly__s_html_a01bd9db96bdb4fe477dd49ca07badd43"><div class="ttname"><a href="../../d4/db6/structlight__poly__s.html#a01bd9db96bdb4fe477dd49ca07badd43">light_poly_s::cluster</a></div><div class="ttdeci">int cluster</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00320">vkpt.h:320</a></div></div>
<div class="ttc" id="ashared_8c_html_a26718fcd5642348914fa0bd49d19694c"><div class="ttname"><a href="../../d1/d8c/shared_8c.html#a26718fcd5642348914fa0bd49d19694c">VectorNormalize</a></div><div class="ttdeci">vec_t VectorNormalize(vec3_t v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/shared_8c_source.html#l00055">shared.c:55</a></div></div>
<div class="ttc" id="afiles_8c_html_ae7426330f9ad9087d85cc0150e78f932"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ae7426330f9ad9087d85cc0150e78f932">FS_NormalizePath</a></div><div class="ttdeci">size_t FS_NormalizePath(char *out, const char *in)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00331">files.c:331</a></div></div>
<div class="ttc" id="arefresh_2vkpt_2main_8c_html_af2d948e3619e90a2c2ddbd717e0c0a7e"><div class="ttname"><a href="../../d7/d21/refresh_2vkpt_2main_8c.html#af2d948e3619e90a2c2ddbd717e0c0a7e">qvk_get_current_desc_set_textures</a></div><div class="ttdeci">VkDescriptorSet qvk_get_current_desc_set_textures()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/refresh_2vkpt_2main_8c_source.html#l01847">main.c:1847</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a1bce0dcd72c63d1ec5a411e12837c86f"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a1bce0dcd72c63d1ec5a411e12837c86f">clip_enable</a></div><div class="ttdeci">static qboolean clip_enable</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00046">draw.c:46</a></div></div>
<div class="ttc" id="aconstants_8h_html_a5eec86ef24b85e5dd1d7d6c9b09f9825"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a5eec86ef24b85e5dd1d7d6c9b09f9825">AS_FLAG_EXPLOSIONS</a></div><div class="ttdeci">#define AS_FLAG_EXPLOSIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00112">constants.h:112</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a8064a1b3088d3acfbc2903fc102c6cc8"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a8064a1b3088d3acfbc2903fc102c6cc8">QVK_s::buf_vertex_staging</a></div><div class="ttdeci">BufferResource_t buf_vertex_staging</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00244">vkpt.h:244</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_a61d77c4bc304096699bf62a70e0cd835"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#a61d77c4bc304096699bf62a70e0cd835">mem_accel_custom_sky</a></div><div class="ttdeci">static VkDeviceMemory mem_accel_custom_sky</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00085">path_tracer.c:85</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_a88516fde620395eb517ba57f7d030206"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#a88516fde620395eb517ba57f7d030206">EntityUploadInfo::transparent_model_vertex_offset</a></div><div class="ttdeci">uint32_t transparent_model_vertex_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00478">vkpt.h:478</a></div></div>
<div class="ttc" id="astructmaliasmesh__s_html_a5f03732d4ae4d42d634332e31ebec88b"><div class="ttname"><a href="../../d2/dfe/structmaliasmesh__s.html#a5f03732d4ae4d42d634332e31ebec88b">maliasmesh_s::numskins</a></div><div class="ttdeci">int numskins</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d61/gl_8h_source.html#l00240">gl.h:240</a></div></div>
<div class="ttc" id="aconstants_8h_html_a1384a6c867216b1ba912d34046eb7cdf"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a1384a6c867216b1ba912d34046eb7cdf">SBT_RGEN_INDIRECT_LIGHTING_SECOND</a></div><div class="ttdeci">#define SBT_RGEN_INDIRECT_LIGHTING_SECOND</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00127">constants.h:127</a></div></div>
<div class="ttc" id="amaterial_8c_html_af59a8105961f7102434df2e645b437c8"><div class="ttname"><a href="../../de/d87/material_8c.html#af59a8105961f7102434df2e645b437c8">MAT_FindPBRMaterial</a></div><div class="ttdeci">pbr_material_t * MAT_FindPBRMaterial(char const *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d87/material_8c_source.html#l00465">material.c:465</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a2549c6623d6ae00974270bded57d2321"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a2549c6623d6ae00974270bded57d2321">QVK_s::queue_graphics</a></div><div class="ttdeci">VkQueue queue_graphics</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00173">vkpt.h:173</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a49d417bb4e1ad9b0a68d1e4c1a95787d"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a49d417bb4e1ad9b0a68d1e4c1a95787d">QVK_s::device_count</a></div><div class="ttdeci">int device_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00167">vkpt.h:167</a></div></div>
<div class="ttc" id="astructbsp__mesh__s_html_aca3a23aebc596513c917b015ed572c24"><div class="ttname"><a href="../../db/d50/structbsp__mesh__s.html#aca3a23aebc596513c917b015ed572c24">bsp_mesh_s::world_custom_sky_count</a></div><div class="ttdeci">uint32_t world_custom_sky_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00357">vkpt.h:357</a></div></div>
<div class="ttc" id="astructlight__poly__s_html_a224b5cd9f105a635bd66fbaad438401b"><div class="ttname"><a href="../../d4/db6/structlight__poly__s.html#a224b5cd9f105a635bd66fbaad438401b">light_poly_s::positions</a></div><div class="ttdeci">float positions[9]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00316">vkpt.h:316</a></div></div>
<div class="ttc" id="aasvgf_8c_html_a05589fbab0657f08285ebdfe93f5ec9ea4275cc694788b2484541f2cfabb486d6"><div class="ttname"><a href="../../da/d96/asvgf_8c.html#a05589fbab0657f08285ebdfe93f5ec9ea4275cc694788b2484541f2cfabb486d6">ASVGF_NUM_PIPELINES</a></div><div class="ttdeci">@ ASVGF_NUM_PIPELINES</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d96/asvgf_8c_source.html#l00036">asvgf.c:36</a></div></div>
<div class="ttc" id="apath__tracer_8c_html_aee62eed7ecf735e103fa3df9a7cbdcdd"><div class="ttname"><a href="../../d5/d02/path__tracer_8c.html#aee62eed7ecf735e103fa3df9a7cbdcdd">scratch_buf_ptr</a></div><div class="ttdeci">static size_t scratch_buf_ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d02/path__tracer_8c_source.html#l00055">path_tracer.c:55</a></div></div>
<div class="ttc" id="avkpt_8h_html_aa07bf23807800e110da5519e58bdfcc9"><div class="ttname"><a href="../../d1/dc6/vkpt_8h.html#aa07bf23807800e110da5519e58bdfcc9">vkpt_profiler_query</a></div><div class="ttdeci">VkResult vkpt_profiler_query(VkCommandBuffer cmd_buf, int idx, VKPTProfilerAction action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddb/profiler_8c_source.html#l00049">profiler.c:49</a></div></div>
<div class="ttc" id="aglobal__textures_8h_html_a33e53f8610b00ec2aff4bfc20122d997"><div class="ttname"><a href="../../df/dcb/global__textures_8h.html#a33e53f8610b00ec2aff4bfc20122d997">BINDING_OFFSET_SKY_TRANSMITTANCE</a></div><div class="ttdeci">#define BINDING_OFFSET_SKY_TRANSMITTANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcb/global__textures_8h_source.html#l00131">global_textures.h:131</a></div></div>
<div class="ttc" id="absp__mesh_8c_html_a98e543c5e86069508cbf6f01caf2e7e4"><div class="ttname"><a href="../../d1/d51/bsp__mesh_8c.html#a98e543c5e86069508cbf6f01caf2e7e4">is_model_transparent</a></div><div class="ttdeci">static qboolean is_model_transparent(bsp_mesh_t *wm, bsp_model_t *model)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d51/bsp__mesh_8c_source.html#l01062">bsp_mesh.c:1062</a></div></div>
<div class="ttc" id="abloom_8c_html_acc38fca31bd73f84277c402dc8c0d028"><div class="ttname"><a href="../../d8/dbb/bloom_8c.html#acc38fca31bd73f84277c402dc8c0d028">BARRIER_TO_COPY_DEST</a></div><div class="ttdeci">#define BARRIER_TO_COPY_DEST(cmd_buf, img)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/bloom_8c_source.html#l00224">bloom.c:224</a></div></div>
<div class="ttc" id="avkpt_2draw_8c_html_a12ba48f77681fe479f1259aee01e2cf0"><div class="ttname"><a href="../../d0/ded/vkpt_2draw_8c.html#a12ba48f77681fe479f1259aee01e2cf0">desc_set_sbo</a></div><div class="ttdeci">static VkDescriptorSet desc_set_sbo[MAX_FRAMES_IN_FLIGHT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ded/vkpt_2draw_8c_source.html#l00059">draw.c:59</a></div></div>
<div class="ttc" id="astruct_q_v_k__s_html_a89004847f46f51cfa3adfeee3f2a6853"><div class="ttname"><a href="../../de/dc0/struct_q_v_k__s.html#a89004847f46f51cfa3adfeee3f2a6853">QVK_s::desc_set_layout_vertex_buffer</a></div><div class="ttdeci">VkDescriptorSetLayout desc_set_layout_vertex_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00240">vkpt.h:240</a></div></div>
<div class="ttc" id="astructbsp__model__s_html_a2380492e13f54a6eede366a491dc34ce"><div class="ttname"><a href="../../dc/d96/structbsp__model__s.html#a2380492e13f54a6eede366a491dc34ce">bsp_model_s::transparent</a></div><div class="ttdeci">qboolean transparent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00335">vkpt.h:335</a></div></div>
<div class="ttc" id="astruct_buffer_resource__s_html_af6bd4dda5b49c3ea18d01c1d5fc5bf68"><div class="ttname"><a href="../../da/d4f/struct_buffer_resource__s.html#af6bd4dda5b49c3ea18d01c1d5fc5bf68">BufferResource_s::memory</a></div><div class="ttdeci">VkDeviceMemory memory</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d74/vk__util_8h_source.html#l00035">vk_util.h:35</a></div></div>
<div class="ttc" id="atransparency_8c_html_a70cf3cde9ec3463bc4ac12874798416c"><div class="ttname"><a href="../../d6/dae/transparency_8c.html#a70cf3cde9ec3463bc4ac12874798416c">allocate_and_bind_memory_to_blas</a></div><div class="ttdeci">static void allocate_and_bind_memory_to_blas()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/transparency_8c_source.html#l01075">transparency.c:1075</a></div></div>
<div class="ttc" id="aconstants_8h_html_a4f17b8031c412b5beeb77b6d5e0ad485"><div class="ttname"><a href="../../d2/d6f/constants_8h.html#a4f17b8031c412b5beeb77b6d5e0ad485">GRAD_DWN</a></div><div class="ttdeci">#define GRAD_DWN</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6f/constants_8h_source.html#l00022">constants.h:22</a></div></div>
<div class="ttc" id="aclient_2client_8h_html_a9b0f52f589fca39c41e15d63d637369f"><div class="ttname"><a href="../../d0/da6/client_2client_8h.html#a9b0f52f589fca39c41e15d63d637369f">CL_PLAYER_MODEL_THIRD_PERSON</a></div><div class="ttdeci">#define CL_PLAYER_MODEL_THIRD_PERSON</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/client_2client_8h_source.html#l00556">client.h:556</a></div></div>
<div class="ttc" id="astruct_entity_upload_info_html_ab1ec3a68c455bcd1cd93ef6a6bf19ac1"><div class="ttname"><a href="../../d6/dbb/struct_entity_upload_info.html#ab1ec3a68c455bcd1cd93ef6a6bf19ac1">EntityUploadInfo::viewer_weapon_vertex_offset</a></div><div class="ttdeci">uint32_t viewer_weapon_vertex_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc6/vkpt_8h_source.html#l00482">vkpt.h:482</a></div></div>
<div class="ttc" id="amodels_8c_html_a2f3844b4fe731b7672cf514b6a48af73"><div class="ttname"><a href="../../d0/deb/models_8c.html#a2f3844b4fe731b7672cf514b6a48af73">r_models</a></div><div class="ttdeci">model_t r_models[MAX_RMODELS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/models_8c_source.html#l00039">models.c:39</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_114db8148ab3563593bebfbe715b480a.html">refresh</a></li><li class="navelem"><a class="el" href="../../dir_ac89cede1bac74d4ddef4787c144f6a6.html">vkpt</a></li><li class="navelem"><a class="el" href="../../d1/dc6/vkpt_8h.html">vkpt.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
